(self.webpackChunkfirechat=self.webpackChunkfirechat||[]).push([[179],{8255:On=>{function We(ge){return Promise.resolve().then(()=>{var M=new Error("Cannot find module '"+ge+"'");throw M.code="MODULE_NOT_FOUND",M})}We.keys=()=>[],We.resolve=We,We.id=8255,On.exports=We},8583:(On,We,ge)=>{"use strict";ge.d(We,{mr:()=>ze,Ov:()=>Qi,ez:()=>$r,K0:()=>tt,JJ:()=>Wi,Do:()=>Ut,V_:()=>z,Ye:()=>Nt,S$:()=>Pe,mk:()=>gn,sg:()=>wi,PC:()=>Zi,b0:()=>rt,lw:()=>ft,EM:()=>it,JF:()=>wn,PM:()=>G,w_:()=>st,bD:()=>qo,q:()=>J,Mx:()=>cn,HT:()=>Le});var M=ge(639);let A=null;function J(){return A}function Le(q){A||(A=q)}class st{}const tt=new M.OlP("DocumentToken");let ft=(()=>{class q{historyGo($){throw new Error("Not implemented")}}return q.\u0275fac=function($){return new($||q)},q.\u0275prov=(0,M.Yz7)({factory:oe,token:q,providedIn:"platform"}),q})();function oe(){return(0,M.LFG)(Ie)}const z=new M.OlP("Location Initialized");let Ie=(()=>{class q extends ft{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState($){const fe=J().getGlobalEventTarget(this._doc,"window");return fe.addEventListener("popstate",$,!1),()=>fe.removeEventListener("popstate",$)}onHashChange($){const fe=J().getGlobalEventTarget(this._doc,"window");return fe.addEventListener("hashchange",$,!1),()=>fe.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,fe,je){xe()?this._history.pushState($,fe,je):this.location.hash=je}replaceState($,fe,je){xe()?this._history.replaceState($,fe,je):this.location.hash=je}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return q.\u0275fac=function($){return new($||q)(M.LFG(tt))},q.\u0275prov=(0,M.Yz7)({factory:we,token:q,providedIn:"platform"}),q})();function xe(){return!!window.history.pushState}function we(){return new Ie((0,M.LFG)(tt))}function ke(q,te){if(0==q.length)return te;if(0==te.length)return q;let $=0;return q.endsWith("/")&&$++,te.startsWith("/")&&$++,2==$?q+te.substring(1):1==$?q+te:q+"/"+te}function gt(q){const te=q.match(/#|\?|$/),$=te&&te.index||q.length;return q.slice(0,$-("/"===q[$-1]?1:0))+q.slice($)}function Me(q){return q&&"?"!==q[0]?"?"+q:q}let Pe=(()=>{class q{historyGo($){throw new Error("Not implemented")}}return q.\u0275fac=function($){return new($||q)},q.\u0275prov=(0,M.Yz7)({factory:ut,token:q,providedIn:"root"}),q})();function ut(q){const te=(0,M.LFG)(tt).location;return new rt((0,M.LFG)(ft),te&&te.origin||"")}const ze=new M.OlP("appBaseHref");let rt=(()=>{class q extends Pe{constructor($,fe){if(super(),this._platformLocation=$,this._removeListenerFns=[],null==fe&&(fe=this._platformLocation.getBaseHrefFromDOM()),null==fe)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=fe}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return ke(this._baseHref,$)}path($=!1){const fe=this._platformLocation.pathname+Me(this._platformLocation.search),je=this._platformLocation.hash;return je&&$?`${fe}${je}`:fe}pushState($,fe,je,Dt){const Xt=this.prepareExternalUrl(je+Me(Dt));this._platformLocation.pushState($,fe,Xt)}replaceState($,fe,je,Dt){const Xt=this.prepareExternalUrl(je+Me(Dt));this._platformLocation.replaceState($,fe,Xt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var fe,je;null===(je=(fe=this._platformLocation).historyGo)||void 0===je||je.call(fe,$)}}return q.\u0275fac=function($){return new($||q)(M.LFG(ft),M.LFG(ze,8))},q.\u0275prov=M.Yz7({token:q,factory:q.\u0275fac}),q})(),Ut=(()=>{class q extends Pe{constructor($,fe){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=fe&&(this._baseHref=fe)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let fe=this._platformLocation.hash;return null==fe&&(fe="#"),fe.length>0?fe.substring(1):fe}prepareExternalUrl($){const fe=ke(this._baseHref,$);return fe.length>0?"#"+fe:fe}pushState($,fe,je,Dt){let Xt=this.prepareExternalUrl(je+Me(Dt));0==Xt.length&&(Xt=this._platformLocation.pathname),this._platformLocation.pushState($,fe,Xt)}replaceState($,fe,je,Dt){let Xt=this.prepareExternalUrl(je+Me(Dt));0==Xt.length&&(Xt=this._platformLocation.pathname),this._platformLocation.replaceState($,fe,Xt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var fe,je;null===(je=(fe=this._platformLocation).historyGo)||void 0===je||je.call(fe,$)}}return q.\u0275fac=function($){return new($||q)(M.LFG(ft),M.LFG(ze,8))},q.\u0275prov=M.Yz7({token:q,factory:q.\u0275fac}),q})(),Nt=(()=>{class q{constructor($,fe){this._subject=new M.vpe,this._urlChangeListeners=[],this._platformStrategy=$;const je=this._platformStrategy.getBaseHref();this._platformLocation=fe,this._baseHref=gt(R(je)),this._platformStrategy.onPopState(Dt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Dt.state,type:Dt.type})})}path($=!1){return this.normalize(this._platformStrategy.path($))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo($,fe=""){return this.path()==this.normalize($+Me(fe))}normalize($){return q.stripTrailingSlash(function(q,te){return q&&te.startsWith(q)?te.substring(q.length):te}(this._baseHref,R($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._platformStrategy.prepareExternalUrl($)}go($,fe="",je=null){this._platformStrategy.pushState(je,"",$,fe),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Me(fe)),je)}replaceState($,fe="",je=null){this._platformStrategy.replaceState(je,"",$,fe),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Me(fe)),je)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo($=0){var fe,je;null===(je=(fe=this._platformStrategy).historyGo)||void 0===je||je.call(fe,$)}onUrlChange($){this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(fe=>{this._notifyUrlChangeListeners(fe.url,fe.state)}))}_notifyUrlChangeListeners($="",fe){this._urlChangeListeners.forEach(je=>je($,fe))}subscribe($,fe,je){return this._subject.subscribe({next:$,error:fe,complete:je})}}return q.\u0275fac=function($){return new($||q)(M.LFG(Pe),M.LFG(ft))},q.normalizeQueryParams=Me,q.joinWithSlash=ke,q.stripTrailingSlash=gt,q.\u0275prov=(0,M.Yz7)({factory:at,token:q,providedIn:"root"}),q})();function at(){return new Nt((0,M.LFG)(Pe),(0,M.LFG)(ft))}function R(q){return q.replace(/\/index.html$/,"")}var C=(()=>((C=C||{})[C.Decimal=0]="Decimal",C[C.Percent=1]="Percent",C[C.Currency=2]="Currency",C[C.Scientific=3]="Scientific",C))(),B=(()=>((B=B||{})[B.Zero=0]="Zero",B[B.One=1]="One",B[B.Two=2]="Two",B[B.Few=3]="Few",B[B.Many=4]="Many",B[B.Other=5]="Other",B))(),ue=(()=>((ue=ue||{})[ue.Decimal=0]="Decimal",ue[ue.Group=1]="Group",ue[ue.List=2]="List",ue[ue.PercentSign=3]="PercentSign",ue[ue.PlusSign=4]="PlusSign",ue[ue.MinusSign=5]="MinusSign",ue[ue.Exponential=6]="Exponential",ue[ue.SuperscriptingExponent=7]="SuperscriptingExponent",ue[ue.PerMille=8]="PerMille",ue[ue.Infinity=9]="Infinity",ue[ue.NaN=10]="NaN",ue[ue.TimeSeparator=11]="TimeSeparator",ue[ue.CurrencyDecimal=12]="CurrencyDecimal",ue[ue.CurrencyGroup=13]="CurrencyGroup",ue))();function an(q,te){const $=(0,M.cg1)(q),fe=$[M.wAp.NumberSymbols][te];if(void 0===fe){if(te===ue.CurrencyDecimal)return $[M.wAp.NumberSymbols][ue.Decimal];if(te===ue.CurrencyGroup)return $[M.wAp.NumberSymbols][ue.Group]}return fe}const on=M.kL8,mn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Fe(q){const te=parseInt(q);if(isNaN(te))throw new Error("Invalid integer literal when parsing "+q);return te}class Ye{}let Yt=(()=>{class q extends Ye{constructor($){super(),this.locale=$}getPluralCategory($,fe){switch(on(fe||this.locale)($)){case B.Zero:return"zero";case B.One:return"one";case B.Two:return"two";case B.Few:return"few";case B.Many:return"many";default:return"other"}}}return q.\u0275fac=function($){return new($||q)(M.LFG(M.soG))},q.\u0275prov=M.Yz7({token:q,factory:q.\u0275fac}),q})();function cn(q,te){te=encodeURIComponent(te);for(const $ of q.split(";")){const fe=$.indexOf("="),[je,Dt]=-1==fe?[$,""]:[$.slice(0,fe),$.slice(fe+1)];if(je.trim()===te)return decodeURIComponent(Dt)}return null}let gn=(()=>{class q{constructor($,fe,je,Dt){this._iterableDiffers=$,this._keyValueDiffers=fe,this._ngEl=je,this._renderer=Dt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass($){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof $?$.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass($){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof $?$.split(/\s+/):$,this._rawClass&&((0,M.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const $=this._iterableDiffer.diff(this._rawClass);$&&this._applyIterableChanges($)}else if(this._keyValueDiffer){const $=this._keyValueDiffer.diff(this._rawClass);$&&this._applyKeyValueChanges($)}}_applyKeyValueChanges($){$.forEachAddedItem(fe=>this._toggleClass(fe.key,fe.currentValue)),$.forEachChangedItem(fe=>this._toggleClass(fe.key,fe.currentValue)),$.forEachRemovedItem(fe=>{fe.previousValue&&this._toggleClass(fe.key,!1)})}_applyIterableChanges($){$.forEachAddedItem(fe=>{if("string"!=typeof fe.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,M.AaK)(fe.item)}`);this._toggleClass(fe.item,!0)}),$.forEachRemovedItem(fe=>this._toggleClass(fe.item,!1))}_applyClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(fe=>this._toggleClass(fe,!0)):Object.keys($).forEach(fe=>this._toggleClass(fe,!!$[fe])))}_removeClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(fe=>this._toggleClass(fe,!1)):Object.keys($).forEach(fe=>this._toggleClass(fe,!1)))}_toggleClass($,fe){($=$.trim())&&$.split(/\s+/g).forEach(je=>{fe?this._renderer.addClass(this._ngEl.nativeElement,je):this._renderer.removeClass(this._ngEl.nativeElement,je)})}}return q.\u0275fac=function($){return new($||q)(M.Y36(M.ZZ4),M.Y36(M.aQg),M.Y36(M.SBq),M.Y36(M.Qsj))},q.\u0275dir=M.lG2({type:q,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),q})();class vn{constructor(te,$,fe,je){this.$implicit=te,this.ngForOf=$,this.index=fe,this.count=je}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wi=(()=>{class q{constructor($,fe,je){this._viewContainer=$,this._template=fe,this._differs=je,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;if(!this._differ&&$)try{this._differ=this._differs.find($).create(this.ngForTrackBy)}catch(fe){throw new Error(`Cannot find a differ supporting object '${$}' of type '${function(q){return q.name||typeof q}($)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const fe=[];$.forEachOperation((je,Dt,Xt)=>{if(null==je.previousIndex){const bn=this._viewContainer.createEmbeddedView(this._template,new vn(null,this._ngForOf,-1,-1),null===Xt?void 0:Xt),yn=new qn(je,bn);fe.push(yn)}else if(null==Xt)this._viewContainer.remove(null===Dt?void 0:Dt);else if(null!==Dt){const bn=this._viewContainer.get(Dt);this._viewContainer.move(bn,Xt);const yn=new qn(je,bn);fe.push(yn)}});for(let je=0;je<fe.length;je++)this._perViewChange(fe[je].view,fe[je].record);for(let je=0,Dt=this._viewContainer.length;je<Dt;je++){const Xt=this._viewContainer.get(je);Xt.context.index=je,Xt.context.count=Dt,Xt.context.ngForOf=this._ngForOf}$.forEachIdentityChange(je=>{this._viewContainer.get(je.currentIndex).context.$implicit=je.item})}_perViewChange($,fe){$.context.$implicit=fe.item}static ngTemplateContextGuard($,fe){return!0}}return q.\u0275fac=function($){return new($||q)(M.Y36(M.s_b),M.Y36(M.Rgc),M.Y36(M.ZZ4))},q.\u0275dir=M.lG2({type:q,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),q})();class qn{constructor(te,$){this.record=te,this.view=$}}let Zi=(()=>{class q{constructor($,fe,je){this._ngEl=$,this._differs=fe,this._renderer=je,this._ngStyle=null,this._differ=null}set ngStyle($){this._ngStyle=$,!this._differ&&$&&(this._differ=this._differs.find($).create())}ngDoCheck(){if(this._differ){const $=this._differ.diff(this._ngStyle);$&&this._applyChanges($)}}_setStyle($,fe){const[je,Dt]=$.split(".");null!=(fe=null!=fe&&Dt?`${fe}${Dt}`:fe)?this._renderer.setStyle(this._ngEl.nativeElement,je,fe):this._renderer.removeStyle(this._ngEl.nativeElement,je)}_applyChanges($){$.forEachRemovedItem(fe=>this._setStyle(fe.key,null)),$.forEachAddedItem(fe=>this._setStyle(fe.key,fe.currentValue)),$.forEachChangedItem(fe=>this._setStyle(fe.key,fe.currentValue))}}return q.\u0275fac=function($){return new($||q)(M.Y36(M.SBq),M.Y36(M.aQg),M.Y36(M.Qsj))},q.\u0275dir=M.lG2({type:q,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),q})();function Pr(q,te){return Error(`InvalidPipeArgument: '${te}' for pipe '${(0,M.AaK)(q)}'`)}class ui{createSubscription(te,$){return te.subscribe({next:$,error:fe=>{throw fe}})}dispose(te){te.unsubscribe()}onDestroy(te){te.unsubscribe()}}class Zn{createSubscription(te,$){return te.then($,fe=>{throw fe})}dispose(te){}onDestroy(te){}}const Un=new Zn,Si=new ui;let Qi=(()=>{class q{constructor($){this._ref=$,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform($){return this._obj?$!==this._obj?(this._dispose(),this.transform($)):this._latestValue:($&&this._subscribe($),this._latestValue)}_subscribe($){this._obj=$,this._strategy=this._selectStrategy($),this._subscription=this._strategy.createSubscription($,fe=>this._updateLatestValue($,fe))}_selectStrategy($){if((0,M.QGY)($))return Un;if((0,M.F4k)($))return Si;throw Pr(q,$)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue($,fe){$===this._obj&&(this._latestValue=fe,this._ref.markForCheck())}}return q.\u0275fac=function($){return new($||q)(M.Y36(M.sBO,16))},q.\u0275pipe=M.Yjl({name:"async",type:q,pure:!1}),q})(),Wi=(()=>{class q{constructor($){this._locale=$}transform($,fe,je){if(!function(q){return!(null==q||""===q||q!=q)}($))return null;je=je||this._locale;try{return function(q,te,$){return function(q,te,$,fe,je,Dt,Xt=!1){let bn="",yn=!1;if(isFinite(q)){let wr=function(q){let fe,je,Dt,Xt,bn,te=Math.abs(q)+"",$=0;for((je=te.indexOf("."))>-1&&(te=te.replace(".","")),(Dt=te.search(/e/i))>0?(je<0&&(je=Dt),je+=+te.slice(Dt+1),te=te.substring(0,Dt)):je<0&&(je=te.length),Dt=0;"0"===te.charAt(Dt);Dt++);if(Dt===(bn=te.length))fe=[0],je=1;else{for(bn--;"0"===te.charAt(bn);)bn--;for(je-=Dt,fe=[],Xt=0;Dt<=bn;Dt++,Xt++)fe[Xt]=Number(te.charAt(Dt))}return je>22&&(fe=fe.splice(0,21),$=je-1,je=1),{digits:fe,exponent:$,integerLen:je}}(q);Xt&&(wr=function(q){if(0===q.digits[0])return q;const te=q.digits.length-q.integerLen;return q.exponent?q.exponent+=2:(0===te?q.digits.push(0,0):1===te&&q.digits.push(0),q.integerLen+=2),q}(wr));let lr=te.minInt,cr=te.minFrac,Gn=te.maxFrac;if(Dt){const Br=Dt.match(mn);if(null===Br)throw new Error(`${Dt} is not a valid digit info`);const dr=Br[1],Or=Br[3],zr=Br[5];null!=dr&&(lr=Fe(dr)),null!=Or&&(cr=Fe(Or)),null!=zr?Gn=Fe(zr):null!=Or&&cr>Gn&&(Gn=cr)}!function(q,te,$){if(te>$)throw new Error(`The minimum number of digits after fraction (${te}) is higher than the maximum (${$}).`);let fe=q.digits,je=fe.length-q.integerLen;const Dt=Math.min(Math.max(te,je),$);let Xt=Dt+q.integerLen,bn=fe[Xt];if(Xt>0){fe.splice(Math.max(q.integerLen,Xt));for(let cr=Xt;cr<fe.length;cr++)fe[cr]=0}else{je=Math.max(0,je),q.integerLen=1,fe.length=Math.max(1,Xt=Dt+1),fe[0]=0;for(let cr=1;cr<Xt;cr++)fe[cr]=0}if(bn>=5)if(Xt-1<0){for(let cr=0;cr>Xt;cr--)fe.unshift(0),q.integerLen++;fe.unshift(1),q.integerLen++}else fe[Xt-1]++;for(;je<Math.max(0,Dt);je++)fe.push(0);let yn=0!==Dt;const wr=te+q.integerLen,lr=fe.reduceRight(function(cr,Gn,Sn,Ei){return Ei[Sn]=(Gn+=cr)<10?Gn:Gn-10,yn&&(0===Ei[Sn]&&Sn>=wr?Ei.pop():yn=!1),Gn>=10?1:0},0);lr&&(fe.unshift(lr),q.integerLen++)}(wr,cr,Gn);let Sn=wr.digits,Ei=wr.integerLen;const Ii=wr.exponent;let ti=[];for(yn=Sn.every(Br=>!Br);Ei<lr;Ei++)Sn.unshift(0);for(;Ei<0;Ei++)Sn.unshift(0);Ei>0?ti=Sn.splice(Ei,Sn.length):(ti=Sn,Sn=[0]);const hs=[];for(Sn.length>=te.lgSize&&hs.unshift(Sn.splice(-te.lgSize,Sn.length).join(""));Sn.length>te.gSize;)hs.unshift(Sn.splice(-te.gSize,Sn.length).join(""));Sn.length&&hs.unshift(Sn.join("")),bn=hs.join(an($,fe)),ti.length&&(bn+=an($,je)+ti.join("")),Ii&&(bn+=an($,ue.Exponential)+"+"+Ii)}else bn=an($,ue.Infinity);return bn=q<0&&!yn?te.negPre+bn+te.negSuf:te.posPre+bn+te.posSuf,bn}(q,function(q,te="-"){const $={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},fe=q.split(";"),je=fe[0],Dt=fe[1],Xt=-1!==je.indexOf(".")?je.split("."):[je.substring(0,je.lastIndexOf("0")+1),je.substring(je.lastIndexOf("0")+1)],bn=Xt[0],yn=Xt[1]||"";$.posPre=bn.substr(0,bn.indexOf("#"));for(let lr=0;lr<yn.length;lr++){const cr=yn.charAt(lr);"0"===cr?$.minFrac=$.maxFrac=lr+1:"#"===cr?$.maxFrac=lr+1:$.posSuf+=cr}const wr=bn.split(",");if($.gSize=wr[1]?wr[1].length:0,$.lgSize=wr[2]||wr[1]?(wr[2]||wr[1]).length:0,Dt){const lr=je.length-$.posPre.length-$.posSuf.length,cr=Dt.indexOf("#");$.negPre=Dt.substr(0,cr).replace(/'/g,""),$.negSuf=Dt.substr(cr+lr).replace(/'/g,"")}else $.negPre=te+$.posPre,$.negSuf=$.posSuf;return $}(function(q,te){return(0,M.cg1)(q)[M.wAp.NumberFormats][te]}(te,C.Decimal),an(te,ue.MinusSign)),te,ue.Group,ue.Decimal,$)}(function(q){if("string"==typeof q&&!isNaN(Number(q)-parseFloat(q)))return Number(q);if("number"!=typeof q)throw new Error(`${q} is not a number`);return q}($),je,fe)}catch(Dt){throw Pr(q,Dt.message)}}}return q.\u0275fac=function($){return new($||q)(M.Y36(M.soG,16))},q.\u0275pipe=M.Yjl({name:"number",type:q,pure:!0}),q})();let $r=(()=>{class q{}return q.\u0275fac=function($){return new($||q)},q.\u0275mod=M.oAB({type:q}),q.\u0275inj=M.cJS({providers:[{provide:Ye,useClass:Yt}]}),q})();const qo="browser";function G(q){return"server"===q}let it=(()=>{class q{}return q.\u0275prov=(0,M.Yz7)({token:q,providedIn:"root",factory:()=>new Pt((0,M.LFG)(tt),window)}),q})();class Pt{constructor(te,$){this.document=te,this.window=$,this.offset=()=>[0,0]}setOffset(te){this.offset=Array.isArray(te)?()=>te:te}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(te){this.supportsScrolling()&&this.window.scrollTo(te[0],te[1])}scrollToAnchor(te){if(!this.supportsScrolling())return;const $=function(q,te){const $=q.getElementById(te)||q.getElementsByName(te)[0];if($)return $;if("function"==typeof q.createTreeWalker&&q.body&&(q.body.createShadowRoot||q.body.attachShadow)){const fe=q.createTreeWalker(q.body,NodeFilter.SHOW_ELEMENT);let je=fe.currentNode;for(;je;){const Dt=je.shadowRoot;if(Dt){const Xt=Dt.getElementById(te)||Dt.querySelector(`[name="${te}"]`);if(Xt)return Xt}je=fe.nextNode()}}return null}(this.document,te);$&&(this.scrollToElement($),this.attemptFocus($))}setHistoryScrollRestoration(te){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=te)}}scrollToElement(te){const $=te.getBoundingClientRect(),fe=$.left+this.window.pageXOffset,je=$.top+this.window.pageYOffset,Dt=this.offset();this.window.scrollTo(fe-Dt[0],je-Dt[1])}attemptFocus(te){return te.focus(),this.document.activeElement===te}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const te=qt(this.window.history)||qt(Object.getPrototypeOf(this.window.history));return!(!te||!te.writable&&!te.set)}catch(te){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(te){return!1}}}function qt(q){return Object.getOwnPropertyDescriptor(q,"scrollRestoration")}class wn{}},639:(On,We,ge)=>{"use strict";ge.d(We,{deG:()=>po,tb:()=>Hb,AFp:()=>jb,ip1:()=>Km,CZH:()=>ad,hGG:()=>DD,z2F:()=>Op,sBO:()=>gC,Sil:()=>Np,_Vd:()=>Mf,EJc:()=>Wb,SBq:()=>$c,qLn:()=>lc,vpe:()=>zc,gxx:()=>Hc,tBr:()=>qa,XFs:()=>Rn,OlP:()=>Gr,zs3:()=>Oi,ZZ4:()=>Gg,aQg:()=>Wg,soG:()=>tv,YKP:()=>Ow,v3s:()=>sD,h0i:()=>kf,PXZ:()=>eD,R0b:()=>_u,FiY:()=>Os,Lbi:()=>Bb,g9A:()=>Vb,Qsj:()=>eC,FYo:()=>Hg,JOm:()=>Fn,Tiy:()=>bm,q3G:()=>Li,tp0:()=>ra,EAV:()=>lD,Rgc:()=>yp,dDg:()=>Kb,DyG:()=>iu,q4F:()=>Em,GfV:()=>Cw,s_b:()=>zg,ifc:()=>pn,eFA:()=>e0,G48:()=>zS,_c5:()=>wD,VLi:()=>$S,c2e:()=>Gb,zSh:()=>Cf,wAp:()=>mr,vHH:()=>at,EiD:()=>Wf,mCW:()=>kt,qzn:()=>Ya,JVY:()=>oc,pB0:()=>T,eBb:()=>ac,L6k:()=>sc,LAX:()=>uc,cg1:()=>hm,Tjo:()=>yD,kL8:()=>z_,yhl:()=>Fu,dqk:()=>ir,sIi:()=>si,CqO:()=>om,QGY:()=>im,F4k:()=>e_,RDi:()=>Dt,AaK:()=>Me,z3N:()=>zs,TTD:()=>Ae,xp6:()=>Kp,uIk:()=>Qv,Suo:()=>mb,Xpm:()=>rn,lG2:()=>ai,Yz7:()=>on,cJS:()=>sn,oAB:()=>fr,Yjl:()=>Oe,Y36:()=>fp,_UZ:()=>Xy,qZA:()=>rm,TgZ:()=>nm,Ikx:()=>fm,LFG:()=>Wr,$8M:()=>Kc,NdJ:()=>sm,CRH:()=>yb,ALo:()=>fb,lcZ:()=>hb,xi3:()=>db,Q6J:()=>em,VKq:()=>ob,iGM:()=>vb,LSH:()=>Es,kYT:()=>nr,YNc:()=>jy,_uU:()=>A_,Oqu:()=>lm,hij:()=>kg});var M=ge(7574),A=ge(4869),J=ge(3282),mt=ge(6693),st=ge(7709),tt=ge(5319),ft=ge(2441);var Ie=ge(1307);function xe(){return new st.xQ}function ke(e){for(let t in e)if(e[t]===ke)return t;throw Error("Could not find renamed property on target object.")}function Me(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Me).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const r=t.indexOf("\n");return-1===r?t:t.substring(0,r)}function Pe(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const ut=ke({__forward_ref__:ke});function ze(e){return e.__forward_ref__=ze,e.toString=function(){return Me(this())},e}function rt(e){return function(e){return"function"==typeof e&&e.hasOwnProperty(ut)&&e.__forward_ref__===ze}(e)?e():e}class at extends Error{constructor(t,r){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(t,r)),this.code=t}}function x(e){return"string"==typeof e?e:null==e?"":String(e)}function C(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():x(e)}function ae(e,t){const r=t?` in ${t}`:"";throw new at("201",`No provider for ${C(e)} found${r}`)}function qe(e,t){null==e&&function(e,t,r,o){throw new Error(`ASSERTION ERROR: ${e}`+(null==o?"":` [Expected=> ${r} ${o} ${t} <=Actual]`))}(t,e,null,"!=")}function on(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function sn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Vn(e){return sr(e,Vr)||sr(e,Jn)}function sr(e,t){return e.hasOwnProperty(t)?e[t]:null}function Rr(e){return e&&(e.hasOwnProperty(yr)||e.hasOwnProperty(Hn))?e[yr]:null}const Vr=ke({\u0275prov:ke}),yr=ke({\u0275inj:ke}),Jn=ke({ngInjectableDef:ke}),Hn=ke({ngInjectorDef:ke});var Rn=(()=>((Rn=Rn||{})[Rn.Default=0]="Default",Rn[Rn.Host=1]="Host",Rn[Rn.Self=2]="Self",Rn[Rn.SkipSelf=4]="SkipSelf",Rn[Rn.Optional=8]="Optional",Rn))();let nt;function Ve(e){const t=nt;return nt=e,t}function wt(e,t,r){const o=Vn(e);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:r&Rn.Optional?null:void 0!==t?t:void ae(Me(e),"Injector")}function nn(e){return{toString:e}.toString()}var tn=(()=>((tn=tn||{})[tn.OnPush=0]="OnPush",tn[tn.Default=1]="Default",tn))(),pn=(()=>((pn=pn||{})[pn.Emulated=0]="Emulated",pn[pn.None=2]="None",pn[pn.ShadowDom=3]="ShadowDom",pn))();const _r="undefined"!=typeof globalThis&&globalThis,Nn="undefined"!=typeof window&&window,Ir="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Yn="undefined"!=typeof global&&global,ir=_r||Yn||Nn||Ir,_i={},Qn=[],ei=ke({\u0275cmp:ke}),bi=ke({\u0275dir:ke}),Re=ke({\u0275pipe:ke}),ht=ke({\u0275mod:ke}),bt=ke({\u0275loc:ke}),Mt=ke({\u0275fac:ke}),Tt=ke({__NG_ELEMENT_ID__:ke});let Lt=0;function rn(e){return nn(()=>{const r={},o={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===tn.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Qn,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||pn.Emulated,id:"c",styles:e.styles||Qn,_:null,setInput:null,schemas:e.schemas||null,tView:null},c=e.directives,h=e.features,w=e.pipes;return o.id+=Lt++,o.inputs=or(e.inputs,r),o.outputs=or(e.outputs),h&&h.forEach(I=>I(o)),o.directiveDefs=c?()=>("function"==typeof c?c():c).map(Mn):null,o.pipeDefs=w?()=>("function"==typeof w?w():w).map(Qt):null,o})}function Mn(e){return Ce(e)||function(e){return e[bi]||null}(e)}function Qt(e){return function(e){return e[Re]||null}(e)}const Tn={};function fr(e){return nn(()=>{const t={type:e.type,bootstrap:e.bootstrap||Qn,declarations:e.declarations||Qn,imports:e.imports||Qn,exports:e.exports||Qn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(Tn[e.id]=e.type),t})}function nr(e,t){return nn(()=>{const r=le(e,!0);r.declarations=t.declarations||Qn,r.imports=t.imports||Qn,r.exports=t.exports||Qn})}function or(e,t){if(null==e)return _i;const r={};for(const o in e)if(e.hasOwnProperty(o)){let c=e[o],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),r[c]=o,t&&(t[c]=h)}return r}const ai=rn;function Oe(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Ce(e){return e[ei]||null}function le(e,t){const r=e[ht]||null;if(!r&&!0===t)throw new Error(`Type ${Me(e)} does not have '\u0275mod' property.`);return r}function Zn(e){return Array.isArray(e)&&"object"==typeof e[1]}function Un(e){return Array.isArray(e)&&!0===e[1]}function Si(e){return 0!=(8&e.flags)}function Qi(e){return 2==(2&e.flags)}function Cr(e){return 1==(1&e.flags)}function gi(e){return null!==e.template}function Wo(e){return 0!=(512&e[2])}function G(e,t){return e.hasOwnProperty(Mt)?e[Mt]:null}class he{constructor(t,r,o){this.previousValue=t,this.currentValue=r,this.firstChange=o}isFirstChange(){return this.firstChange}}function Ae(){return He}function He(e){return e.type.prototype.ngOnChanges&&(e.setInput=Pt),it}function it(){const e=$t(this),t=null==e?void 0:e.current;if(t){const r=e.previous;if(r===_i)e.previous=t;else for(let o in t)r[o]=t[o];e.current=null,this.ngOnChanges(t)}}function Pt(e,t,r,o){const c=$t(e)||function(e,t){return e[qt]=t}(e,{previous:_i,current:null}),h=c.current||(c.current={}),w=c.previous,I=this.declaredInputs[r],P=w[I];h[I]=new he(P&&P.currentValue,t,w===_i),e[o]=t}Ae.ngInherit=!0;const qt="__ngSimpleChanges__";function $t(e){return e[qt]||null}let je;function Dt(e){je=e}function yn(e){return!!e.listen}const lr={createRenderer:(e,t)=>void 0!==je?je:"undefined"!=typeof document?document:void 0};function Gn(e){for(;Array.isArray(e);)e=e[0];return e}function ti(e,t){return Gn(t[e.index])}function Br(e,t){return e.data[t]}function dr(e,t){return e[t]}function Or(e,t){const r=t[e];return Zn(r)?r:r[0]}function zr(e){return 4==(4&e[2])}function Ao(e){return 128==(128&e[2])}function Bi(e,t){return null==t?null:e[t]}function Ls(e){e[18]=0}function Xr(e,t){e[5]+=t;let r=e,o=e[3];for(;null!==o&&(1===t&&1===r[5]||-1===t&&0===r[5]);)o[5]+=t,r=o,o=o[3]}const Bn={lFrame:ts(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ro(){return Bn.bindingsEnabled}function Zt(){return Bn.lFrame.lView}function br(){return Bn.lFrame.tView}function Lr(){let e=$n();for(;null!==e&&64===e.type;)e=e.parent;return e}function $n(){return Bn.lFrame.currentTNode}function vi(e,t){const r=Bn.lFrame;r.currentTNode=e,r.isParent=t}function wo(){return Bn.lFrame.isParent}function Xs(){return Bn.isInCheckNoChangesMode}function $o(e){Bn.isInCheckNoChangesMode=e}function Ai(){const e=Bn.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function lo(){return Bn.lFrame.bindingIndex++}function Us(e,t){const r=Bn.lFrame;r.bindingIndex=r.bindingRootIndex=e,js(t)}function js(e){Bn.lFrame.currentDirectiveIndex=e}function Hr(){return Bn.lFrame.currentQueryIndex}function Zs(e){Bn.lFrame.currentQueryIndex=e}function Js(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Ko(e,t,r){if(r&Rn.SkipSelf){let c=t,h=e;for(;!(c=c.parent,null!==c||r&Rn.Host||(c=Js(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;t=c,e=h}const o=Bn.lFrame=Ma();return o.currentTNode=t,o.lView=e,!0}function ro(e){const t=Ma(),r=e[1];Bn.lFrame=t,t.currentTNode=r.firstChild,t.lView=e,t.tView=r,t.contextLView=e,t.bindingIndex=r.bindingStartIndex,t.inI18n=!1}function Ma(){const e=Bn.lFrame,t=null===e?null:e.child;return null===t?ts(e):t}function ts(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ci(){const e=Bn.lFrame;return Bn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const m=ci;function L(){const e=ci();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function $e(){return Bn.lFrame.selectedIndex}function Et(e){Bn.lFrame.selectedIndex=e}function fn(){const e=Bn.lFrame;return Br(e.tView,e.selectedIndex)}function Oo(e,t){for(let r=t.directiveStart,o=t.directiveEnd;r<o;r++){const h=e.data[r].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:I,ngAfterViewInit:P,ngAfterViewChecked:W,ngOnDestroy:ee}=h;w&&(e.contentHooks||(e.contentHooks=[])).push(-r,w),I&&((e.contentHooks||(e.contentHooks=[])).push(r,I),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(r,I)),P&&(e.viewHooks||(e.viewHooks=[])).push(-r,P),W&&((e.viewHooks||(e.viewHooks=[])).push(r,W),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(r,W)),null!=ee&&(e.destroyHooks||(e.destroyHooks=[])).push(r,ee)}}function Zr(e,t,r){wu(e,t,3,r)}function mi(e,t,r,o){(3&e[2])===r&&wu(e,t,r,o)}function ps(e,t){let r=e[2];(3&r)===t&&(r&=2047,r+=1,e[2]=r)}function wu(e,t,r,o){const h=null!=o?o:-1,w=t.length-1;let I=0;for(let P=void 0!==o?65535&e[18]:0;P<w;P++)if("number"==typeof t[P+1]){if(I=t[P],null!=o&&I>=o)break}else t[P]<0&&(e[18]+=65536),(I<h||-1==h)&&(eu(e,r,t,P),e[18]=(4294901760&e[18])+P+2),P++}function eu(e,t,r,o){const c=r[o]<0,h=r[o+1],I=e[c?-r[o]:r[o]];if(c){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{h.call(I)}finally{}}}else try{h.call(I)}finally{}}class ns{constructor(t,r,o){this.factory=t,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=o}}function d(e,t,r){const o=yn(e);let c=0;for(;c<r.length;){const h=r[c];if("number"==typeof h){if(0!==h)break;c++;const w=r[c++],I=r[c++],P=r[c++];o?e.setAttribute(t,I,P,w):t.setAttributeNS(w,I,P)}else{const w=h,I=r[++c];N(w)?o&&e.setProperty(t,w,I):o?e.setAttribute(t,w,I):t.setAttribute(w,I),c++}}return c}function _(e){return 3===e||4===e||6===e}function N(e){return 64===e.charCodeAt(0)}function F(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let r=-1;for(let o=0;o<t.length;o++){const c=t[o];"number"==typeof c?r=c:0===r||Z(e,r,c,null,-1===r||2===r?t[++o]:null)}}return e}function Z(e,t,r,o,c){let h=0,w=e.length;if(-1===t)w=-1;else for(;h<e.length;){const I=e[h++];if("number"==typeof I){if(I===t){w=-1;break}if(I>t){w=h-1;break}}}for(;h<e.length;){const I=e[h];if("number"==typeof I)break;if(I===r){if(null===o)return void(null!==c&&(e[h+1]=c));if(o===e[h+1])return void(e[h+2]=c)}h++,null!==o&&h++,null!==c&&h++}-1!==w&&(e.splice(w,0,t),h=w+1),e.splice(h++,0,r),null!==o&&e.splice(h++,0,o),null!==c&&e.splice(h++,0,c)}function ce(e){return-1!==e}function Ee(e){return 32767&e}function lt(e,t){let r=function(e){return e>>16}(e),o=t;for(;r>0;)o=o[15],r--;return o}let Rt=!0;function jt(e){const t=Rt;return Rt=e,t}let pr=0;function yi(e,t){const r=rs(e,t);if(-1!==r)return r;const o=t[1];o.firstCreatePass&&(e.injectorIndex=t.length,io(o.data,e),io(t,null),io(o.blueprint,null));const c=Pn(e,t),h=e.injectorIndex;if(ce(c)){const w=Ee(c),I=lt(c,t),P=I[1].data;for(let W=0;W<8;W++)t[h+W]=I[w+W]|P[w+W]}return t[h+8]=c,h}function io(e,t){e.push(0,0,0,0,0,0,0,0,t)}function rs(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Pn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let r=0,o=null,c=t;for(;null!==c;){const h=c[1],w=h.type;if(o=2===w?h.declTNode:1===w?c[6]:null,null===o)return-1;if(r++,c=c[15],-1!==o.injectorIndex)return o.injectorIndex|r<<16}return-1}function Ni(e,t,r){!function(e,t,r){let o;"string"==typeof r?o=r.charCodeAt(0)||0:r.hasOwnProperty(Tt)&&(o=r[Tt]),null==o&&(o=r[Tt]=pr++);const c=255&o;t.data[e+(c>>5)]|=1<<c}(e,t,r)}function ea(e,t,r){if(r&Rn.Optional)return e;ae(t,"NodeInjector")}function Ec(e,t,r,o){if(r&Rn.Optional&&void 0===o&&(o=null),0==(r&(Rn.Self|Rn.Host))){const c=e[9],h=Ve(void 0);try{return c?c.get(t,o,r&Rn.Optional):wt(t,o,r&Rn.Optional)}finally{Ve(h)}}return ea(o,t,r)}function Yu(e,t,r,o=Rn.Default,c){if(null!==e){const h=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Tt)?e[Tt]:void 0;return"number"==typeof t?t>=0?255&t:Ic:t}(r);if("function"==typeof h){if(!Ko(t,e,o))return o&Rn.Host?ea(c,r,o):Ec(t,r,o,c);try{const w=h(o);if(null!=w||o&Rn.Optional)return w;ae(r)}finally{m()}}else if("number"==typeof h){let w=null,I=rs(e,t),P=-1,W=o&Rn.Host?t[16][6]:null;for((-1===I||o&Rn.SkipSelf)&&(P=-1===I?Pn(e,t):t[I+8],-1!==P&&bu(o,!1)?(w=t[1],I=Ee(P),t=lt(P,t)):I=-1);-1!==I;){const ee=t[1];if(ma(h,I,ee.data)){const me=Vs(I,t,r,w,o,W);if(me!==Xu)return me}P=t[I+8],-1!==P&&bu(o,t[1].data[I+8]===W)&&ma(h,I,t)?(w=ee,I=Ee(P),t=lt(P,t)):I=-1}}}return Ec(t,r,o,c)}const Xu={};function Ic(){return new Qo(Lr(),Zt())}function Vs(e,t,r,o,c,h){const w=t[1],I=w.data[e+8],ee=qi(I,w,r,null==o?Qi(I)&&Rt:o!=w&&0!=(3&I.type),c&Rn.Host&&h===I);return null!==ee?va(t,w,ee,I):Xu}function qi(e,t,r,o,c){const h=e.providerIndexes,w=t.data,I=1048575&h,P=e.directiveStart,ee=h>>20,Se=c?I+ee:e.directiveEnd;for(let Qe=o?I:I+ee;Qe<Se;Qe++){const dt=w[Qe];if(Qe<P&&r===dt||Qe>=P&&dt.type===r)return Qe}if(c){const Qe=w[P];if(Qe&&gi(Qe)&&Qe.type===r)return P}return null}function va(e,t,r,o){let c=e[r];const h=t.data;if(function(e){return e instanceof ns}(c)){const w=c;w.resolving&&function(e,t){throw new at("200",`Circular dependency in DI detected for ${e}`)}(C(h[r]));const I=jt(w.canSeeViewProviders);w.resolving=!0;const P=w.injectImpl?Ve(w.injectImpl):null;Ko(e,o,Rn.Default);try{c=e[r]=w.factory(void 0,h,e,o),t.firstCreatePass&&r>=o.directiveStart&&function(e,t,r){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:h}=t.type.prototype;if(o){const w=He(t);(r.preOrderHooks||(r.preOrderHooks=[])).push(e,w),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e,w)}c&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-e,c),h&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e,h),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e,h))}(r,h[r],t)}finally{null!==P&&Ve(P),jt(I),w.resolving=!1,m()}}return c}function ma(e,t,r){return!!(r[t+(e>>5)]&1<<e)}function bu(e,t){return!(e&Rn.Self||e&Rn.Host&&t)}class Qo{constructor(t,r){this._tNode=t,this._lView=r}get(t,r){return Yu(this._tNode,this._lView,t,void 0,r)}}function Kc(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const r=e.attrs;if(r){const o=r.length;let c=0;for(;c<o;){const h=r[c];if(_(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<o&&"string"==typeof r[c];)c++;else{if(h===t)return r[c+1];c+=2}}}return null}(Lr(),e)}const nu="__parameters__";function Jr(e,t,r){return nn(()=>{const o=function(e){return function(...r){if(e){const o=e(...r);for(const c in o)this[c]=o[c]}}}(t);function c(...h){if(this instanceof c)return o.apply(this,h),this;const w=new c(...h);return I.annotation=w,I;function I(P,W,ee){const me=P.hasOwnProperty(nu)?P[nu]:Object.defineProperty(P,nu,{value:[]})[nu];for(;me.length<=ee;)me.push(null);return(me[ee]=me[ee]||[]).push(w),P}}return r&&(c.prototype=Object.create(r.prototype)),c.prototype.ngMetadataName=e,c.annotationCls=c,c})}class Gr{constructor(t,r){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=on({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}toString(){return`InjectionToken ${this._desc}`}}const po=new Gr("AnalyzeForEntryComponents"),iu=Function;function jo(e,t){void 0===t&&(t=e);for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?(t===e&&(t=e.slice(0,r)),jo(o,t)):t!==e&&t.push(o)}return t}function gs(e,t){e.forEach(r=>Array.isArray(r)?gs(r,t):t(r))}function Cu(e,t,r){t>=e.length?e.push(r):e.splice(t,0,r)}function Va(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Ws={},_a="__NG_DI_FLAG__",ms="ngTempTokenPath",os=/\n/gm,Ru="__source",Nu=ke({provide:String,useValue:ke});let Io;function Ti(e){const t=Io;return Io=e,t}function Rc(e,t=Rn.Default){if(void 0===Io)throw new Error("inject() must be called from an injection context");return null===Io?wt(e,void 0,t):Io.get(e,t&Rn.Optional?null:void 0,t)}function Wr(e,t=Rn.Default){return(nt||Rc)(rt(e),t)}function ys(e){const t=[];for(let r=0;r<e.length;r++){const o=rt(e[r]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let c,h=Rn.Default;for(let w=0;w<o.length;w++){const I=o[w],P=Ju(I);"number"==typeof P?-1===P?c=I.token:h|=P:c=I}t.push(Wr(c,h))}else t.push(Wr(o))}return t}function $s(e,t){return e[_a]=t,e.prototype[_a]=t,e}function Ju(e){return e[_a]}function Ns(e,t,r,o){const c=e[ms];throw t[Ru]&&c.unshift(t[Ru]),e.message=function(e,t,r,o=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let c=Me(t);if(Array.isArray(t))c=t.map(Me).join(" -> ");else if("object"==typeof t){let h=[];for(let w in t)if(t.hasOwnProperty(w)){let I=t[w];h.push(w+":"+("string"==typeof I?JSON.stringify(I):Me(I)))}c=`{${h.join(", ")}}`}return`${r}${o?"("+o+")":""}[${c}]: ${e.replace(os,"\n  ")}`}("\n"+e.message,c,r,o),e.ngTokenPath=c,e[ms]=null,e}const qa=$s(Jr("Inject",e=>({token:e})),-1),Os=$s(Jr("Optional"),8),ra=$s(Jr("SkipSelf"),4);let xu;function Ka(e){var t;return(null===(t=function(){if(void 0===xu&&(xu=null,ir.trustedTypes))try{xu=ir.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return xu}())||void 0===t?void 0:t.createHTML(e))||e}class lu{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Cl extends lu{getTypeName(){return"HTML"}}class el extends lu{getTypeName(){return"Style"}}class ic extends lu{getTypeName(){return"Script"}}class xc extends lu{getTypeName(){return"URL"}}class Ms extends lu{getTypeName(){return"ResourceURL"}}function zs(e){return e instanceof lu?e.changingThisBreaksApplicationSecurity:e}function Ya(e,t){const r=Fu(e);if(null!=r&&r!==t){if("ResourceURL"===r&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${r} (see https://g.co/ng/security#xss)`)}return r===t}function Fu(e){return e instanceof lu&&e.getTypeName()||null}function oc(e){return new Cl(e)}function sc(e){return new el(e)}function ac(e){return new ic(e)}function uc(e){return new xc(e)}function T(e){return new Ms(e)}class y{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const r=(new window.DOMParser).parseFromString(Ka(t),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(t):(r.removeChild(r.firstChild),r)}catch(r){return null}}}class O{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const r=this.inertDocument.createElement("html");this.inertDocument.appendChild(r);const o=this.inertDocument.createElement("body");r.appendChild(o)}}getInertBodyElement(t){const r=this.inertDocument.createElement("template");if("content"in r)return r.innerHTML=Ka(t),r;const o=this.inertDocument.createElement("body");return o.innerHTML=Ka(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(t){const r=t.attributes;for(let c=r.length-1;0<c;c--){const w=r.item(c).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&t.removeAttribute(w)}let o=t.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const ne=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Be=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function kt(e){return(e=String(e)).match(ne)||e.match(Be)?e:"unsafe:"+e}function Wn(e){const t={};for(const r of e.split(","))t[r]=!0;return t}function gr(...e){const t={};for(const r of e)for(const o in r)r.hasOwnProperty(o)&&(t[o]=!0);return t}const fi=Wn("area,br,col,hr,img,wbr"),ni=Wn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),oo=Wn("rp,rt"),Xa=gr(fi,gr(ni,Wn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gr(oo,Wn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gr(oo,ni)),To=Wn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sa=Wn("srcset"),Mc=gr(To,sa,Wn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hf=Wn("script,style,template");class Tl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let r=t.firstChild,o=!0;for(;r;)if(r.nodeType===Node.ELEMENT_NODE?o=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,o&&r.firstChild)r=r.firstChild;else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let c=this.checkClobberedElement(r,r.nextSibling);if(c){r=c;break}r=this.checkClobberedElement(r,r.parentNode)}return this.buf.join("")}startElement(t){const r=t.nodeName.toLowerCase();if(!Xa.hasOwnProperty(r))return this.sanitizedSomething=!0,!Hf.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const o=t.attributes;for(let c=0;c<o.length;c++){const h=o.item(c),w=h.name,I=w.toLowerCase();if(!Mc.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let P=h.value;To[I]&&(P=kt(P)),sa[I]&&(e=P,P=(e=String(e)).split(",").map(t=>kt(t.trim())).join(", ")),this.buf.push(" ",w,'="',Gf(P),'"')}var e;return this.buf.push(">"),!0}endElement(t){const r=t.nodeName.toLowerCase();Xa.hasOwnProperty(r)&&!fi.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(t){this.buf.push(Gf(t))}checkClobberedElement(t,r){if(r&&(t.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return r}}const kc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sl=/([^\#-~ |!])/g;function Gf(e){return e.replace(/&/g,"&amp;").replace(kc,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Sl,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ea;function Wf(e,t){let r=null;try{Ea=Ea||function(e){const t=new O(e);return function(){try{return!!(new window.DOMParser).parseFromString(Ka(""),"text/html")}catch(e){return!1}}()?new y(t):t}(e);let o=t?String(t):"";r=Ea.getInertBodyElement(o);let c=5,h=o;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,o=h,h=r.innerHTML,r=Ea.getInertBodyElement(o)}while(o!==h);return Ka((new Tl).sanitizeChildren(Dl(r)||r))}finally{if(r){const o=Dl(r)||r;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function Dl(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Li=(()=>((Li=Li||{})[Li.NONE=0]="NONE",Li[Li.HTML=1]="HTML",Li[Li.STYLE=2]="STYLE",Li[Li.SCRIPT=3]="SCRIPT",Li[Li.URL=4]="URL",Li[Li.RESOURCE_URL=5]="RESOURCE_URL",Li))();function Es(e){const t=function(){const e=Zt();return e&&e[12]}();return t?t.sanitize(Li.URL,e)||"":Ya(e,"URL")?zs(e):kt(x(e))}const Kf="__ngContext__";function vo(e,t){e[Kf]=t}function nl(e){const t=function(e){return e[Kf]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function hu(e){return e.ngOriginalError}function Xf(e,...t){e.error(...t)}class lc{constructor(){this._console=console}handleError(t){const r=this._findOriginalError(t),o=this._findContext(t),c=(e=t)&&e.ngErrorLogger||Xf;var e;c(this._console,"ERROR",t),r&&c(this._console,"ORIGINAL ERROR",r),o&&c(this._console,"ERROR CONTEXT",o)}_findContext(t){return t?t.ngDebugContext||this._findContext(hu(t)):null}_findOriginalError(t){let r=t&&hu(t);for(;r&&hu(r);)r=hu(r);return r||null}}const D=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ir))();function Ge(e){return e instanceof Function?e():e}var Fn=(()=>((Fn=Fn||{})[Fn.Important=1]="Important",Fn[Fn.DashCase=2]="DashCase",Fn))();function er(e,t){return undefined(e,t)}function hi(e){const t=e[3];return Un(t)?t[3]:t}function Er(e){return fc(e[13])}function pu(e){return fc(e[4])}function fc(e){for(;null!==e&&!Un(e);)e=e[4];return e}function Ta(e,t,r,o,c){if(null!=o){let h,w=!1;Un(o)?h=o:Zn(o)&&(w=!0,o=o[0]);const I=Gn(o);0===e&&null!==r?null==c?Cd(t,r,I):jc(t,r,I,c||null,!0):1===e&&null!==r?jc(t,r,I,c||null,!0):2===e?function(e,t,r){const o=pf(e,t);o&&function(e,t,r,o){yn(e)?e.removeChild(t,r,o):t.removeChild(r)}(e,o,t,r)}(t,I,w):3===e&&t.destroyNode(I),null!=h&&function(e,t,r,o,c){const h=r[7];h!==Gn(r)&&Ta(t,e,o,h,c);for(let I=10;I<r.length;I++){const P=r[I];Ul(P[1],P,e,t,o,h)}}(t,e,h,r,c)}}function Ks(e,t,r){return yn(e)?e.createElement(t,r):null===r?e.createElement(t):e.createElementNS(r,t)}function bd(e,t){const r=e[9],o=r.indexOf(t),c=t[3];1024&t[2]&&(t[2]&=-1025,Xr(c,-1)),r.splice(o,1)}function Jf(e,t){if(e.length<=10)return;const r=10+t,o=e[r];if(o){const c=o[17];null!==c&&c!==e&&bd(c,o),t>0&&(e[r-1][4]=o[4]);const h=Va(e,10+t);!function(e,t){Ul(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(o[1],o);const w=h[19];null!==w&&w.detachView(h[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function Ed(e,t){if(!(256&t[2])){const r=t[11];yn(r)&&r.destroyNode&&Ul(e,t,r,3,null,null),function(e){let t=e[13];if(!t)return eh(e[1],e);for(;t;){let r=null;if(Zn(t))r=t[13];else{const o=t[10];o&&(r=o)}if(!r){for(;t&&!t[4]&&t!==e;)Zn(t)&&eh(t[1],t),t=t[3];null===t&&(t=e),Zn(t)&&eh(t[1],t),r=t&&t[4]}t=r}}(t)}}function eh(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let r;if(null!=e&&null!=(r=e.destroyHooks))for(let o=0;o<r.length;o+=2){const c=t[r[o]];if(!(c instanceof ns)){const h=r[o+1];if(Array.isArray(h))for(let w=0;w<h.length;w+=2){const I=c[h[w]],P=h[w+1];try{P.call(I)}finally{}}else try{h.call(c)}finally{}}}}(e,t),function(e,t){const r=e.cleanup,o=t[7];let c=-1;if(null!==r)for(let h=0;h<r.length-1;h+=2)if("string"==typeof r[h]){const w=r[h+1],I="function"==typeof w?w(t):Gn(t[w]),P=o[c=r[h+2]],W=r[h+3];"boolean"==typeof W?I.removeEventListener(r[h],P,W):W>=0?o[c=W]():o[c=-W].unsubscribe(),h+=2}else{const w=o[c=r[h+1]];r[h].call(w)}if(null!==o){for(let h=c+1;h<o.length;h++)o[h]();t[7]=null}}(e,t),1===t[1].type&&yn(t[11])&&t[11].destroy();const r=t[17];if(null!==r&&Un(t[3])){r!==t[3]&&bd(r,t);const o=t[19];null!==o&&o.detachView(e)}}}function Up(e,t,r){return function(e,t,r){let o=t;for(;null!==o&&40&o.type;)o=(t=o).parent;if(null===o)return r[0];if(2&o.flags){const c=e.data[o.directiveStart].encapsulation;if(c===pn.None||c===pn.Emulated)return null}return ti(o,r)}(e,t.parent,r)}function jc(e,t,r,o,c){yn(e)?e.insertBefore(t,r,o,c):t.insertBefore(r,o,c)}function Cd(e,t,r){yn(e)?e.appendChild(t,r):t.appendChild(r)}function jp(e,t,r,o,c){null!==o?jc(e,t,r,o,c):Cd(e,t,r)}function pf(e,t){return yn(e)?e.parentNode(t):t.parentNode}let Sd=function(e,t,r){return 40&e.type?ti(e,r):null};function vf(e,t,r,o){const c=Up(e,o,t),h=t[11],I=function(e,t,r){return Sd(e,t,r)}(o.parent||t[6],o,t);if(null!=c)if(Array.isArray(r))for(let P=0;P<r.length;P++)jp(h,c,r[P],I,!1);else jp(h,c,r,I,!1)}function al(e,t){if(null!==t){const r=t.type;if(3&r)return ti(t,e);if(4&r)return ul(-1,e[t.index]);if(8&r){const o=t.child;if(null!==o)return al(e,o);{const c=e[t.index];return Un(c)?ul(-1,c):Gn(c)}}if(32&r)return er(t,e)()||Gn(e[t.index]);{const o=nh(e,t);return null!==o?Array.isArray(o)?o[0]:al(hi(e[16]),o):al(e,t.next)}}return null}function nh(e,t){return null!==t?e[16][6].projection[t.projection]:null}function ul(e,t){const r=10+e+1;if(r<t.length){const o=t[r],c=o[1].firstChild;if(null!==c)return al(o,c)}return t[7]}function Vc(e,t,r,o,c,h,w){for(;null!=r;){const I=o[r.index],P=r.type;if(w&&0===t&&(I&&vo(Gn(I),o),r.flags|=4),64!=(64&r.flags))if(8&P)Vc(e,t,r.child,o,c,h,!1),Ta(t,e,c,I,h);else if(32&P){const W=er(r,o);let ee;for(;ee=W();)Ta(t,e,c,ee,h);Ta(t,e,c,I,h)}else 16&P?Wp(e,t,o,r,c,h):Ta(t,e,c,I,h);r=w?r.projectionNext:r.next}}function Ul(e,t,r,o,c,h){Vc(r,o,e.firstChild,t,c,h,!1)}function Wp(e,t,r,o,c,h){const w=r[16],P=w[6].projection[o.projection];if(Array.isArray(P))for(let W=0;W<P.length;W++)Ta(t,e,c,P[W],h);else Vc(e,t,P,w[3],c,h,!0)}function jl(e,t,r){yn(e)?e.setAttribute(t,"style",r):t.style.cssText=r}function Vl(e,t,r){yn(e)?""===r?e.removeAttribute(t,"class"):e.setAttribute(t,"class",r):t.className=r}function Dd(e,t,r){let o=e.length;for(;;){const c=e.indexOf(t,r);if(-1===c)return c;if(0===c||e.charCodeAt(c-1)<=32){const h=t.length;if(c+h===o||e.charCodeAt(c+h)<=32)return c}r=c+1}}const rh="ng-template";function Ad(e,t,r){let o=0;for(;o<e.length;){let c=e[o++];if(r&&"class"===c){if(c=e[o],-1!==Dd(c.toLowerCase(),t,0))return!0}else if(1===c){for(;o<e.length&&"string"==typeof(c=e[o++]);)if(c.toLowerCase()===t)return!0;return!1}}return!1}function Rd(e){return 4===e.type&&e.value!==rh}function pv(e,t,r){return t===(4!==e.type||r?e.value:rh)}function gv(e,t,r){let o=4;const c=e.attrs||[],h=function(e){for(let t=0;t<e.length;t++)if(_(e[t]))return t;return e.length}(c);let w=!1;for(let I=0;I<t.length;I++){const P=t[I];if("number"!=typeof P){if(!w)if(4&o){if(o=2|1&o,""!==P&&!pv(e,P,r)||""===P&&1===t.length){if(Sa(o))return!1;w=!0}}else{const W=8&o?P:t[++I];if(8&o&&null!==e.attrs){if(!Ad(e.attrs,W,r)){if(Sa(o))return!1;w=!0}continue}const me=vv(8&o?"class":P,c,Rd(e),r);if(-1===me){if(Sa(o))return!1;w=!0;continue}if(""!==W){let Se;Se=me>h?"":c[me+1].toLowerCase();const Qe=8&o?Se:null;if(Qe&&-1!==Dd(Qe,W,0)||2&o&&W!==Se){if(Sa(o))return!1;w=!0}}}}else{if(!w&&!Sa(o)&&!Sa(P))return!1;if(w&&Sa(P))continue;w=!1,o=P|1&o}}return Sa(o)||w}function Sa(e){return 0==(1&e)}function vv(e,t,r,o){if(null===t)return-1;let c=0;if(o||!r){let h=!1;for(;c<t.length;){const w=t[c];if(w===e)return c;if(3===w||6===w)h=!0;else{if(1===w||2===w){let I=t[++c];for(;"string"==typeof I;)I=t[++c];continue}if(4===w)break;if(0===w){c+=4;continue}}c+=h?1:2}return-1}return function(e,t){let r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){const o=e[r];if("number"==typeof o)return-1;if(o===t)return r;r++}return-1}(t,e)}function zp(e,t,r=!1){for(let o=0;o<t.length;o++)if(gv(e,t[o],r))return!0;return!1}function Nd(e,t){return e?":not("+t.trim()+")":t}function Od(e){let t=e[0],r=1,o=2,c="",h=!1;for(;r<e.length;){let w=e[r];if("string"==typeof w)if(2&o){const I=e[++r];c+="["+w+(I.length>0?'="'+I+'"':"")+"]"}else 8&o?c+="."+w:4&o&&(c+=" "+w);else""!==c&&!Sa(w)&&(t+=Nd(h,c),c=""),o=w,h=h||!Sa(o);r++}return""!==c&&(t+=Nd(h,c)),t}const vr={};function Kp(e){ll(br(),Zt(),$e()+e,Xs())}function ll(e,t,r,o){if(!o)if(3==(3&t[2])){const h=e.preOrderCheckHooks;null!==h&&Zr(t,h,r)}else{const h=e.preOrderHooks;null!==h&&mi(t,h,0,r)}Et(r)}function ug(e,t){const r=e.contentQueries;if(null!==r)for(let o=0;o<r.length;o+=2){const c=r[o],h=r[o+1];if(-1!==h){const w=e.data[h];Zs(c),w.contentQueries(2,t[h],h)}}}function vu(e,t,r,o,c,h,w,I,P,W){const ee=t.blueprint.slice();return ee[0]=c,ee[2]=140|o,Ls(ee),ee[3]=ee[15]=e,ee[8]=r,ee[10]=w||e&&e[10],ee[11]=I||e&&e[11],ee[12]=P||e&&e[12]||null,ee[9]=W||e&&e[9]||null,ee[6]=h,ee[16]=2==t.type?e[16]:ee,ee}function Wl(e,t,r,o,c){let h=e.data[t];if(null===h)h=function(e,t,r,o,c){const h=$n(),w=wo(),P=e.data[t]=function(e,t,r,o,c,h){return{type:r,index:o,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?h:h&&h.parent,r,t,o,c);return null===e.firstChild&&(e.firstChild=P),null!==h&&(w?null==h.child&&null!==P.parent&&(h.child=P):null===h.next&&(h.next=P)),P}(e,t,r,o,c),Bn.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=r,h.value=o,h.attrs=c;const w=function(){const e=Bn.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();h.injectorIndex=null===w?-1:w.injectorIndex}return vi(h,!0),h}function ql(e,t,r,o){if(0===r)return-1;const c=t.length;for(let h=0;h<r;h++)t.push(o),e.blueprint.push(o),e.data.push(null);return c}function $l(e,t,r){ro(t);try{const o=e.viewQuery;null!==o&&Sh(1,o,r);const c=e.template;null!==c&&lg(e,t,c,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ug(e,t),e.staticViewQueries&&Sh(2,e.viewQuery,r);const h=e.components;null!==h&&function(e,t){for(let r=0;r<t.length;r++)Th(e,t[r])}(t,h)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),o}finally{t[2]&=-5,L()}}function Bc(e,t,r,o){const c=t[2];if(256==(256&c))return;ro(t);const h=Xs();try{Ls(t),function(e){Bn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==r&&lg(e,t,r,2,o);const w=3==(3&c);if(!h)if(w){const W=e.preOrderCheckHooks;null!==W&&Zr(t,W,null)}else{const W=e.preOrderHooks;null!==W&&mi(t,W,0,null),ps(t,0)}if(function(e){for(let t=Er(e);null!==t;t=pu(t)){if(!t[2])continue;const r=t[9];for(let o=0;o<r.length;o++){const c=r[o],h=c[3];0==(1024&c[2])&&Xr(h,1),c[2]|=1024}}}(t),function(e){for(let t=Er(e);null!==t;t=pu(t))for(let r=10;r<t.length;r++){const o=t[r],c=o[1];Ao(o)&&Bc(c,o,c.template,o[8])}}(t),null!==e.contentQueries&&ug(e,t),!h)if(w){const W=e.contentCheckHooks;null!==W&&Zr(t,W)}else{const W=e.contentHooks;null!==W&&mi(t,W,1),ps(t,1)}!function(e,t){const r=e.hostBindingOpCodes;if(null!==r)try{for(let o=0;o<r.length;o++){const c=r[o];if(c<0)Et(~c);else{const h=c,w=r[++o],I=r[++o];Us(w,h),I(2,t[h])}}}finally{Et(-1)}}(e,t);const I=e.components;null!==I&&function(e,t){for(let r=0;r<t.length;r++)mg(e,t[r])}(t,I);const P=e.viewQuery;if(null!==P&&Sh(2,P,o),!h)if(w){const W=e.viewCheckHooks;null!==W&&Zr(t,W)}else{const W=e.viewHooks;null!==W&&mi(t,W,2),ps(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),h||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Xr(t[3],-1))}finally{L()}}function Ud(e,t,r,o){const c=t[10],h=!Xs(),w=zr(t);try{h&&!w&&c.begin&&c.begin(),w&&$l(e,t,o),Bc(e,t,r,o)}finally{h&&!w&&c.end&&c.end()}}function lg(e,t,r,o,c){const h=$e(),w=2&o;try{Et(-1),w&&t.length>20&&ll(e,t,20,Xs()),r(o,c)}finally{Et(h)}}function gh(e,t,r){!Ro()||(function(e,t,r,o){const c=r.directiveStart,h=r.directiveEnd;e.firstCreatePass||yi(r,t),vo(o,t);const w=r.initialInputs;for(let I=c;I<h;I++){const P=e.data[I],W=gi(P);W&&qd(t,r,P);const ee=va(t,e,I,r);vo(ee,t),null!==w&&If(0,I-c,ee,P,0,w),W&&(Or(r.index,t)[8]=ee)}}(e,t,r,ti(r,t)),128==(128&r.flags)&&function(e,t,r){const o=r.directiveStart,c=r.directiveEnd,w=r.index,I=Bn.lFrame.currentDirectiveIndex;try{Et(w);for(let P=o;P<c;P++){const W=e.data[P],ee=t[P];js(P),(null!==W.hostBindings||0!==W.hostVars||null!==W.hostAttrs)&&bh(W,ee)}}finally{Et(-1),js(I)}}(e,t,r))}function vh(e,t,r=ti){const o=t.localNames;if(null!==o){let c=t.index+1;for(let h=0;h<o.length;h+=2){const w=o[h+1],I=-1===w?r(t,e):e[w];e[c++]=I}}}function mh(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=bf(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function bf(e,t,r,o,c,h,w,I,P,W){const ee=20+o,me=ee+c,Se=function(e,t){const r=[];for(let o=0;o<t;o++)r.push(o<e?null:vr);return r}(ee,me),Qe="function"==typeof W?W():W;return Se[1]={type:e,blueprint:Se,template:r,queries:null,viewQuery:I,declTNode:t,data:Se.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:me,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:P,consts:Qe,incompleteFirstPass:!1}}function jd(e,t,r,o){const c=Xd(t);null===r?c.push(o):(c.push(r),e.firstCreatePass&&wg(e).push(o,c.length-1))}function _h(e,t,r){for(let o in e)if(e.hasOwnProperty(o)){const c=e[o];(r=null===r?{}:r).hasOwnProperty(o)?r[o].push(t,c):r[o]=[t,c]}return r}function Qs(e,t,r,o,c,h,w,I){const P=ti(t,r);let ee,W=t.inputs;!I&&null!=W&&(ee=W[o])?(Dh(e,r,ee,o,c),Qi(t)&&function(e,t){const r=Or(t,e);16&r[2]||(r[2]|=64)}(r,t.index)):3&t.type&&(o=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(o),c=null!=w?w(c,t.value||"",o):c,yn(h)?h.setProperty(P,o,c):N(o)||(P.setProperty?P.setProperty(o,c):P[o]=c))}function Kl(e,t,r,o){let c=!1;if(Ro()){const h=function(e,t,r){const o=e.directiveRegistry;let c=null;if(o)for(let h=0;h<o.length;h++){const w=o[h];zp(r,w.selectors,!1)&&(c||(c=[]),Ni(yi(r,t),e,w.type),gi(w)?(Eh(e,r),c.unshift(w)):c.push(w))}return c}(e,t,r),w=null===o?null:{"":-1};if(null!==h){c=!0,Wd(r,e.data.length,h.length);for(let ee=0;ee<h.length;ee++){const me=h[ee];me.providersResolver&&me.providersResolver(me)}let I=!1,P=!1,W=ql(e,t,h.length,null);for(let ee=0;ee<h.length;ee++){const me=h[ee];r.mergedAttrs=F(r.mergedAttrs,me.hostAttrs),Ih(e,r,t,W,me),xv(W,me,w),null!==me.contentQueries&&(r.flags|=8),(null!==me.hostBindings||null!==me.hostAttrs||0!==me.hostVars)&&(r.flags|=128);const Se=me.type.prototype;!I&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r.index),I=!0),!P&&(Se.ngOnChanges||Se.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r.index),P=!0),W++}!function(e,t){const o=t.directiveEnd,c=e.data,h=t.attrs,w=[];let I=null,P=null;for(let W=t.directiveStart;W<o;W++){const ee=c[W],me=ee.inputs,Se=null===h||Rd(t)?null:vg(me,h);w.push(Se),I=_h(me,W,I),P=_h(ee.outputs,W,P)}null!==I&&(I.hasOwnProperty("class")&&(t.flags|=16),I.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=w,t.inputs=I,t.outputs=P}(e,r)}w&&function(e,t,r){if(t){const o=e.localNames=[];for(let c=0;c<t.length;c+=2){const h=r[t[c+1]];if(null==h)throw new at("301",`Export of name '${t[c+1]}' not found!`);o.push(t[c],h)}}}(r,o,w)}return r.mergedAttrs=F(r.mergedAttrs,r.attrs),c}function gg(e,t,r,o,c,h){const w=h.hostBindings;if(w){let I=e.hostBindingOpCodes;null===I&&(I=e.hostBindingOpCodes=[]);const P=~t.index;(function(e){let t=e.length;for(;t>0;){const r=e[--t];if("number"==typeof r&&r<0)return r}return 0})(I)!=P&&I.push(P),I.push(o,c,w)}}function bh(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Eh(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function xv(e,t,r){if(r){if(t.exportAs)for(let o=0;o<t.exportAs.length;o++)r[t.exportAs[o]]=e;gi(t)&&(r[""]=e)}}function Wd(e,t,r){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+r,e.providerIndexes=t}function Ih(e,t,r,o,c){e.data[o]=c;const h=c.factory||(c.factory=G(c.type)),w=new ns(h,gi(c),null);e.blueprint[o]=w,r[o]=w,gg(e,t,0,o,ql(e,r,c.hostVars,vr),c)}function qd(e,t,r){const o=ti(t,e),c=mh(r),h=e[10],w=Ra(e,vu(e,c,null,r.onPush?64:16,o,t,h,h.createRenderer(o,r),null,null));e[t.index]=w}function Gu(e,t,r,o,c,h){const w=ti(e,t);!function(e,t,r,o,c,h,w){if(null==h)yn(e)?e.removeAttribute(t,c,r):t.removeAttribute(c);else{const I=null==w?x(h):w(h,o||"",c);yn(e)?e.setAttribute(t,c,I,r):r?t.setAttributeNS(r,c,I):t.setAttribute(c,I)}}(t[11],w,h,e.value,r,o,c)}function If(e,t,r,o,c,h){const w=h[t];if(null!==w){const I=o.setInput;for(let P=0;P<w.length;){const W=w[P++],ee=w[P++],me=w[P++];null!==I?o.setInput(r,me,W,ee):r[ee]=me}}}function vg(e,t){let r=null,o=0;for(;o<t.length;){const c=t[o];if(0!==c)if(5!==c){if("number"==typeof c)break;e.hasOwnProperty(c)&&(null===r&&(r=[]),r.push(c,e[c],t[o+1])),o+=2}else o+=2;else o+=4}return r}function Ch(e,t,r,o){return new Array(e,!0,!1,t,null,0,o,r,null,null)}function mg(e,t){const r=Or(t,e);if(Ao(r)){const o=r[1];80&r[2]?Bc(o,r,o.template,r[8]):r[5]>0&&Wu(r)}}function Wu(e){for(let o=Er(e);null!==o;o=pu(o))for(let c=10;c<o.length;c++){const h=o[c];if(1024&h[2]){const w=h[1];Bc(w,h,w.template,h[8])}else h[5]>0&&Wu(h)}const r=e[1].components;if(null!==r)for(let o=0;o<r.length;o++){const c=Or(r[o],e);Ao(c)&&c[5]>0&&Wu(c)}}function Th(e,t){const r=Or(t,e),o=r[1];(function(e,t){for(let r=t.length;r<e.blueprint.length;r++)t.push(e.blueprint[r])})(o,r),$l(o,r,r[8])}function Ra(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Qd(e){for(;e;){e[2]|=64;const t=hi(e);if(Wo(e)&&!t)return e;e=t}return null}function fl(e,t,r){const o=t[10];o.begin&&o.begin();try{Bc(e,t,e.template,r)}catch(c){throw Eg(t,c),c}finally{o.end&&o.end()}}function Yd(e){!function(e){for(let t=0;t<e.components.length;t++){const r=e.components[t],o=nl(r),c=o[1];Ud(c,o,c.template,r)}}(e[8])}function Sh(e,t,r){Zs(0),t(e,r)}const Fv=(()=>Promise.resolve(null))();function Xd(e){return e[7]||(e[7]=[])}function wg(e){return e.cleanup||(e.cleanup=[])}function Eg(e,t){const r=e[9],o=r?r.get(lc,null):null;o&&o.handleError(t)}function Dh(e,t,r,o,c){for(let h=0;h<r.length;){const w=r[h++],I=r[h++],P=t[w],W=e.data[w];null!==W.setInput?W.setInput(P,c,o,I):P[I]=c}}function qu(e,t,r){const o=function(e,t){return Gn(t[e])}(t,e);!function(e,t,r){yn(e)?e.setValue(t,r):t.textContent=r}(e[11],o,r)}function Ah(e,t,r){let o=r?e.styles:null,c=r?e.classes:null,h=0;if(null!==t)for(let w=0;w<t.length;w++){const I=t[w];"number"==typeof I?h=I:1==h?c=Pe(c,I):2==h&&(o=Pe(o,I+": "+t[++w]+";"))}r?e.styles=o:e.stylesWithoutHost=o,r?e.classes=c:e.classesWithoutHost=c}const Hc=new Gr("INJECTOR",-1);class mu{get(t,r=Ws){if(r===Ws){const o=new Error(`NullInjectorError: No provider for ${Me(t)}!`);throw o.name="NullInjectorError",o}return r}}const Cf=new Gr("Set Injector scope."),Yl={},Ig={};let Rh;function hl(){return void 0===Rh&&(Rh=new mu),Rh}function ep(e,t=null,r=null,o){return new Cg(e,r,t||hl(),o)}class Cg{constructor(t,r,o,c=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];r&&gs(r,I=>this.processProvider(I,t,r)),gs([t],I=>this.processInjectorType(I,[],h)),this.records.set(Hc,Xl(void 0,this));const w=this.records.get(Cf);this.scope=null!=w?w.value:null,this.source=c||("object"==typeof t?null:Me(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,r=Ws,o=Rn.Default){this.assertNotDestroyed();const c=Ti(this),h=Ve(void 0);try{if(!(o&Rn.SkipSelf)){let I=this.records.get(t);if(void 0===I){const P=("function"==typeof(e=t)||"object"==typeof e&&e instanceof Gr)&&Vn(t);I=P&&this.injectableDefInScope(P)?Xl(Nh(t),Yl):null,this.records.set(t,I)}if(null!=I)return this.hydrate(t,I)}return(o&Rn.Self?hl():this.parent).get(t,r=o&Rn.Optional&&r===Ws?null:r)}catch(w){if("NullInjectorError"===w.name){if((w[ms]=w[ms]||[]).unshift(Me(t)),c)throw w;return Ns(w,t,"R3InjectorError",this.source)}throw w}finally{Ve(h),Ti(c)}var e}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((o,c)=>t.push(Me(c))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,r,o){if(!(t=rt(t)))return!1;let c=Rr(t);const h=null==c&&t.ngModule||void 0,w=void 0===h?t:h,I=-1!==o.indexOf(w);if(void 0!==h&&(c=Rr(h)),null==c)return!1;if(null!=c.imports&&!I){let ee;o.push(w);try{gs(c.imports,me=>{this.processInjectorType(me,r,o)&&(void 0===ee&&(ee=[]),ee.push(me))})}finally{}if(void 0!==ee)for(let me=0;me<ee.length;me++){const{ngModule:Se,providers:Qe}=ee[me];gs(Qe,dt=>this.processProvider(dt,Se,Qe||Qn))}}this.injectorDefTypes.add(w);const P=G(w)||(()=>new w);this.records.set(w,Xl(P,Yl));const W=c.providers;if(null!=W&&!I){const ee=t;gs(W,me=>this.processProvider(me,ee,W))}return void 0!==h&&void 0!==t.providers}processProvider(t,r,o){let c=Jl(t=rt(t))?t:rt(t&&t.provide);const h=tp(e=t)?Xl(void 0,e.useValue):Xl(function(e,t,r){let o;if(Jl(e)){const c=rt(e);return G(c)||Nh(c)}if(tp(e))o=()=>rt(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))o=()=>e.useFactory(...ys(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))o=()=>Wr(rt(e.useExisting));else{const c=rt(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return G(c)||Nh(c);o=()=>new c(...ys(e.deps))}return o}(e),Yl);var e;if(Jl(t)||!0!==t.multi)this.records.get(c);else{let w=this.records.get(c);w||(w=Xl(void 0,Yl,!0),w.factory=()=>ys(w.multi),this.records.set(c,w)),c=t,w.multi.push(t)}this.records.set(c,h)}hydrate(t,r){return r.value===Yl&&(r.value=Ig,r.value=r.factory()),"object"==typeof r.value&&r.value&&null!==(e=r.value)&&"object"==typeof e&&"function"==typeof e.ngOnDestroy&&this.onDestroy.add(r.value),r.value;var e}injectableDefInScope(t){if(!t.providedIn)return!1;const r=rt(t.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}function Nh(e){const t=Vn(e),r=null!==t?t.factory:G(e);if(null!==r)return r;if(e instanceof Gr)throw new Error(`Token ${Me(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const o=function(e,t){const r=[];for(let o=0;o<e;o++)r.push(t);return r}(t,"?");throw new Error(`Can't resolve all parameters for ${Me(e)}: (${o.join(", ")}).`)}const r=function(e){const t=e&&(e[Vr]||e[Jn]);if(t){const r=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),t}return null}(e);return null!==r?()=>r.factory(e):()=>new e}(e);throw new Error("unreachable")}function Xl(e,t,r=!1){return{factory:e,value:t,multi:r?[]:void 0}}function tp(e){return null!==e&&"object"==typeof e&&Nu in e}function Jl(e){return"function"==typeof e}const ef=function(e,t,r){return function(e,t=null,r=null,o){const c=ep(e,t,r,o);return c._resolveInjectorDefTypes(),c}({name:r},t,e,r)};class Oi{static create(t,r){return Array.isArray(t)?ef(t,r,""):ef(t.providers,t.parent,t.name||"")}}function Ng(e,t){Oo(nl(e)[1],Lr())}Oi.THROW_IF_NOT_FOUND=Ws,Oi.NULL=new mu,Oi.\u0275prov=on({token:Oi,providedIn:"any",factory:()=>Wr(Hc)}),Oi.__NG_ELEMENT_ID__=-1;let zt=null;function hn(){if(!zt){const e=ir.Symbol;if(e&&e.iterator)zt=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let r=0;r<t.length;++r){const o=t[r];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(zt=o)}}}return zt}class Yr{constructor(t){this.wrapped=t}static wrap(t){return new Yr(t)}static unwrap(t){return Yr.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Yr}}function si(e){return!!Of(e)&&(Array.isArray(e)||!(e instanceof Map)&&hn()in e)}function Of(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Gc(e,t,r){return e[t]=r}function ca(e,t,r){return!Object.is(e[t],r)&&(e[t]=r,!0)}function Qv(e,t,r,o){const c=Zt();return ca(c,lo(),t)&&(br(),Gu(fn(),c,e,t,r,o)),Qv}function jy(e,t,r,o,c,h,w,I){const P=Zt(),W=br(),ee=e+20,me=W.firstCreatePass?function(e,t,r,o,c,h,w,I,P){const W=t.consts,ee=Wl(t,e,4,w||null,Bi(W,I));Kl(t,r,ee,Bi(W,P)),Oo(t,ee);const me=ee.tViews=bf(2,ee,o,c,h,t.directiveRegistry,t.pipeRegistry,null,t.schemas,W);return null!==t.queries&&(t.queries.template(t,ee),me.queries=t.queries.embeddedTView(ee)),ee}(ee,W,P,t,r,o,c,h,w):W.data[ee];vi(me,!1);const Se=P[11].createComment("");vf(W,P,Se,me),vo(Se,P),Ra(P,P[ee]=Ch(Se,P,Se,me)),Cr(me)&&gh(W,P,me),null!=w&&vh(P,me,I)}function fp(e,t=Rn.Default){const r=Zt();return null===r?Wr(e,t):Yu(Lr(),r,rt(e),t)}function em(e,t,r){const o=Zt();return ca(o,lo(),t)&&Qs(br(),fn(),o,e,t,o[11],r,!1),em}function tm(e,t,r,o,c){const w=c?"class":"style";Dh(e,r,t.inputs[w],w,o)}function nm(e,t,r,o){const c=Zt(),h=br(),w=20+e,I=c[11],P=c[w]=Ks(I,t,Bn.lFrame.currentNamespace),W=h.firstCreatePass?function(e,t,r,o,c,h,w){const I=t.consts,W=Wl(t,e,2,c,Bi(I,h));return Kl(t,r,W,Bi(I,w)),null!==W.attrs&&Ah(W,W.attrs,!1),null!==W.mergedAttrs&&Ah(W,W.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,W),W}(w,h,c,0,t,r,o):h.data[w];vi(W,!0);const ee=W.mergedAttrs;null!==ee&&d(I,P,ee);const me=W.classes;null!==me&&Vl(I,P,me);const Se=W.styles;null!==Se&&jl(I,P,Se),64!=(64&W.flags)&&vf(h,c,P,W),0===Bn.lFrame.elementDepthCount&&vo(P,c),Bn.lFrame.elementDepthCount++,Cr(W)&&(gh(h,c,W),function(e,t,r){if(Si(t)){const c=t.directiveEnd;for(let h=t.directiveStart;h<c;h++){const w=e.data[h];w.contentQueries&&w.contentQueries(1,r[h],h)}}}(h,W,c)),null!==o&&vh(c,W)}function rm(){let e=Lr();wo()?Bn.lFrame.isParent=!1:(e=e.parent,vi(e,!1));const t=e;Bn.lFrame.elementDepthCount--;const r=br();r.firstCreatePass&&(Oo(r,e),Si(e)&&r.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&tm(r,t,Zt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&tm(r,t,Zt(),t.stylesWithoutHost,!1)}function Xy(e,t,r,o){nm(e,t,r,o),rm()}function im(e){return!!e&&"function"==typeof e.then}function e_(e){return!!e&&"function"==typeof e.subscribe}const om=e_;function sm(e,t,r,o){const c=Zt(),h=br(),w=Lr();return function(e,t,r,o,c,h,w,I){const P=Cr(o),ee=e.firstCreatePass&&wg(e),me=t[8],Se=Xd(t);let Qe=!0;if(3&o.type||I){const At=ti(o,t),_n=I?I(At):At,en=Se.length,tr=I?Dr=>I(Gn(Dr[o.index])):o.index;if(yn(r)){let Dr=null;if(!I&&P&&(Dr=function(e,t,r,o){const c=e.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const w=c[h];if(w===r&&c[h+1]===o){const I=t[7],P=c[h+2];return I.length>P?I[P]:null}"string"==typeof w&&(h+=2)}return null}(e,t,c,o.index)),null!==Dr)(Dr.__ngLastListenerFn__||Dr).__ngNextListenerFn__=h,Dr.__ngLastListenerFn__=h,Qe=!1;else{h=am(o,t,me,h,!1);const di=r.listen(_n,c,h);Se.push(h,di),ee&&ee.push(c,tr,en,en+1)}}else h=am(o,t,me,h,!0),_n.addEventListener(c,h,w),Se.push(h),ee&&ee.push(c,tr,en,w)}else h=am(o,t,me,h,!1);const dt=o.outputs;let Bt;if(Qe&&null!==dt&&(Bt=dt[c])){const At=Bt.length;if(At)for(let _n=0;_n<At;_n+=2){const Cs=t[Bt[_n]][Bt[_n+1]].subscribe(h),Qu=Se.length;Se.push(h,Cs),ee&&ee.push(c,o.index,Qu,-(Qu+1))}}}(h,c,c[11],w,e,t,!!r,o),sm}function r_(e,t,r,o){try{return!1!==r(o)}catch(c){return Eg(e,c),!1}}function am(e,t,r,o,c){return function h(w){if(w===Function)return o;const I=2&e.flags?Or(e.index,t):t;0==(32&t[2])&&Qd(I);let P=r_(t,0,o,w),W=h.__ngNextListenerFn__;for(;W;)P=r_(t,0,W,w)&&P,W=W.__ngNextListenerFn__;return c&&!1===P&&(w.preventDefault(),w.returnValue=!1),P}}function A_(e,t=""){const r=Zt(),o=br(),c=e+20,h=o.firstCreatePass?Wl(o,c,1,t,null):o.data[c],w=r[c]=function(e,t){return yn(e)?e.createText(t):e.createTextNode(t)}(r[11],t);vf(o,r,w,h),vi(h,!1)}function lm(e){return kg("",e,""),lm}function kg(e,t,r){const o=Zt(),c=function(e,t,r,o){return ca(e,lo(),r)?t+x(r)+o:vr}(o,e,t,r);return c!==vr&&qu(o,$e(),c),kg}function fm(e,t,r){const o=Zt();return ca(o,lo(),t)&&Qs(br(),fn(),o,e,t,o[11],r,!0),fm}const xf=void 0;var QE=["en",[["a","p"],["AM","PM"],xf],[["AM","PM"],xf,xf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xf,"{1} 'at' {0}",xf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Zh={};function hm(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let r=K_(t);if(r)return r;const o=t.split("-")[0];if(r=K_(o),r)return r;if("en"===o)return QE;throw new Error(`Missing locale data for the locale "${e}".`)}function z_(e){return hm(e)[mr.PluralCase]}function K_(e){return e in Zh||(Zh[e]=ir.ng&&ir.ng.common&&ir.ng.common.locales&&ir.ng.common.locales[e]),Zh[e]}var mr=(()=>((mr=mr||{})[mr.LocaleId=0]="LocaleId",mr[mr.DayPeriodsFormat=1]="DayPeriodsFormat",mr[mr.DayPeriodsStandalone=2]="DayPeriodsStandalone",mr[mr.DaysFormat=3]="DaysFormat",mr[mr.DaysStandalone=4]="DaysStandalone",mr[mr.MonthsFormat=5]="MonthsFormat",mr[mr.MonthsStandalone=6]="MonthsStandalone",mr[mr.Eras=7]="Eras",mr[mr.FirstDayOfWeek=8]="FirstDayOfWeek",mr[mr.WeekendRange=9]="WeekendRange",mr[mr.DateFormat=10]="DateFormat",mr[mr.TimeFormat=11]="TimeFormat",mr[mr.DateTimeFormat=12]="DateTimeFormat",mr[mr.NumberSymbols=13]="NumberSymbols",mr[mr.NumberFormats=14]="NumberFormats",mr[mr.CurrencyCode=15]="CurrencyCode",mr[mr.CurrencySymbol=16]="CurrencySymbol",mr[mr.CurrencyName=17]="CurrencyName",mr[mr.Currencies=18]="Currencies",mr[mr.Directionality=19]="Directionality",mr[mr.PluralCase=20]="PluralCase",mr[mr.ExtraData=21]="ExtraData",mr))();const Fg="en-US";let Q_=Fg;function dm(e){qe(e,"Expected localeId to be defined"),"string"==typeof e&&(Q_=e.toLowerCase().replace(/_/g,"-"))}class ww{}const Ew="ngComponent";class YI{resolveComponentFactory(t){throw function(e){const t=Error(`No component factory found for ${Me(e)}. Did you add it to @NgModule.entryComponents?`);return t[Ew]=e,t}(t)}}class Mf{}function Bg(...e){}function ed(e,t){return new $c(ti(e,t))}Mf.NULL=new YI;const JI=function(){return ed(Lr(),Zt())};let $c=(()=>{class e{constructor(r){this.nativeElement=r}}return e.__NG_ELEMENT_ID__=JI,e})();function Iw(e){return e instanceof $c?e.nativeElement:e}class Hg{}let eC=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>nC(),e})();const nC=function(){const e=Zt(),r=Or(Lr().index,e);return function(e){return e[11]}(Zn(r)?r:e)};let bm=(()=>{class e{}return e.\u0275prov=on({token:e,providedIn:"root",factory:()=>null}),e})();class Cw{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Em=new Cw("12.2.3");class Tw{constructor(){}supports(t){return si(t)}create(t){return new sC(t)}}const oC=(e,t)=>t;class sC{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||oC}forEachItem(t){let r;for(r=this._itHead;null!==r;r=r._next)t(r)}forEachOperation(t){let r=this._itHead,o=this._removalsHead,c=0,h=null;for(;r||o;){const w=!o||r&&r.currentIndex<Dw(o,c,h)?r:o,I=Dw(w,c,h),P=w.currentIndex;if(w===o)c--,o=o._nextRemoved;else if(r=r._next,null==w.previousIndex)c++;else{h||(h=[]);const W=I-c,ee=P-c;if(W!=ee){for(let Se=0;Se<W;Se++){const Qe=Se<h.length?h[Se]:h[Se]=0,dt=Qe+Se;ee<=dt&&dt<W&&(h[Se]=Qe+1)}h[w.previousIndex]=ee-W}}I!==P&&t(w,I,P)}}forEachPreviousItem(t){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}forEachMovedItem(t){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}forEachIdentityChange(t){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)t(r)}diff(t){if(null==t&&(t=[]),!si(t))throw new Error(`Error trying to diff '${Me(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let c,h,w,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let I=0;I<this.length;I++)h=t[I],w=this._trackByFn(I,h),null!==r&&Object.is(r.trackById,w)?(o&&(r=this._verifyReinsertion(r,h,w,I)),Object.is(r.item,h)||this._addIdentityChange(r,h)):(r=this._mismatch(r,h,w,I),o=!0),r=r._next}else c=0,function(e,t){if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else{const r=e[hn()]();let o;for(;!(o=r.next()).done;)t(o.value)}}(t,I=>{w=this._trackByFn(c,I),null!==r&&Object.is(r.trackById,w)?(o&&(r=this._verifyReinsertion(r,I,w,c)),Object.is(r.item,I)||this._addIdentityChange(r,I)):(r=this._mismatch(r,I,w,c),o=!0),r=r._next,c++}),this.length=c;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,r,o,c){let h;return null===t?h=this._itTail:(h=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._reinsertAfter(t,h,c)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._moveAfter(t,h,c)):t=this._addAfter(new aC(r,o),h,c),t}_verifyReinsertion(t,r,o,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==h?t=this._reinsertAfter(h,t._prev,c):t.currentIndex!=c&&(t.currentIndex=c,this._addToMoves(t,c)),t}_truncate(t){for(;null!==t;){const r=t._next;this._addToRemovals(this._unlink(t)),t=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const c=t._prevRemoved,h=t._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(t,r,o),this._addToMoves(t,o),t}_moveAfter(t,r,o){return this._unlink(t),this._insertAfter(t,r,o),this._addToMoves(t,o),t}_addAfter(t,r,o){return this._insertAfter(t,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,r,o){const c=null===r?this._itHead:r._next;return t._next=c,t._prev=r,null===c?this._itTail=t:c._prev=t,null===r?this._itHead=t:r._next=t,null===this._linkedRecords&&(this._linkedRecords=new Sw),this._linkedRecords.put(t),t.currentIndex=o,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const r=t._prev,o=t._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,t}_addToMoves(t,r){return t.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sw),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,r){return t.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class aC{constructor(t,r){this.item=t,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uC{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,r){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,t))return o;return null}remove(t){const r=t._prevDup,o=t._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}class Sw{constructor(){this.map=new Map}put(t){const r=t.trackById;let o=this.map.get(r);o||(o=new uC,this.map.set(r,o)),o.add(t)}get(t,r){const c=this.map.get(t);return c?c.get(t,r):null}remove(t){const r=t.trackById;return this.map.get(r).remove(t)&&this.map.delete(r),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Dw(e,t,r){const o=e.previousIndex;if(null===o)return o;let c=0;return r&&o<r.length&&(c=r[o]),o+t+c}class Aw{constructor(){}supports(t){return t instanceof Map||Of(t)}create(){return new cC}}class cC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let r;for(r=this._mapHead;null!==r;r=r._next)t(r)}forEachPreviousItem(t){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)t(r)}forEachChangedItem(t){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}diff(t){if(t){if(!(t instanceof Map||Of(t)))throw new Error(`Error trying to diff '${Me(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(t,(o,c)=>{if(r&&r.key===c)this._maybeAddToChanges(r,o),this._appendAfter=r,r=r._next;else{const h=this._getOrCreateRecordForKey(c,o);r=this._insertBeforeOrAppend(r,h)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let o=r;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,r){if(t){const o=t._prev;return r._next=t,r._prev=o,t._prev=r,o&&(o._next=r),t===this._mapHead&&(this._mapHead=r),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(t,r){if(this._records.has(t)){const c=this._records.get(t);this._maybeAddToChanges(c,r);const h=c._prev,w=c._next;return h&&(h._next=w),w&&(w._prev=h),c._next=null,c._prev=null,c}const o=new lC(t);return this._records.set(t,o),o.currentValue=r,this._addToAdditions(o),o}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,r){Object.is(r,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=r,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,r){t instanceof Map?t.forEach(r):Object.keys(t).forEach(o=>r(t[o],o))}}class lC{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Rw(){return new Gg([new Tw])}let Gg=(()=>{class e{constructor(r){this.factories=r}static create(r,o){if(null!=o){const c=o.factories.slice();r=r.concat(c)}return new e(r)}static extend(r){return{provide:e,useFactory:o=>e.create(r,o||Rw()),deps:[[e,new ra,new Os]]}}find(r){const o=this.factories.find(c=>c.supports(r));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(e){return e.name||typeof e}(r)}'`)}}return e.\u0275prov=on({token:e,providedIn:"root",factory:Rw}),e})();function Nw(){return new Wg([new Aw])}let Wg=(()=>{class e{constructor(r){this.factories=r}static create(r,o){if(o){const c=o.factories.slice();r=r.concat(c)}return new e(r)}static extend(r){return{provide:e,useFactory:o=>e.create(r,o||Nw()),deps:[[e,new ra,new Os]]}}find(r){const o=this.factories.find(c=>c.supports(r));if(o)return o;throw new Error(`Cannot find a differ supporting object '${r}'`)}}return e.\u0275prov=on({token:e,providedIn:"root",factory:Nw}),e})();function qg(e,t,r,o,c=!1){for(;null!==r;){const h=t[r.index];if(null!==h&&o.push(Gn(h)),Un(h))for(let I=10;I<h.length;I++){const P=h[I],W=P[1].firstChild;null!==W&&qg(P[1],P,W,o)}const w=r.type;if(8&w)qg(e,t,r.child,o);else if(32&w){const I=er(r,t);let P;for(;P=I();)o.push(P)}else if(16&w){const I=nh(t,r);if(Array.isArray(I))o.push(...I);else{const P=hi(t[16]);qg(P[1],P,I,o,!0)}}r=c?r.projectionNext:r.next}return o}class mp{constructor(t,r){this._lView=t,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,r=t[1];return qg(r,t,r.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Un(t)){const r=t[8],o=r?r.indexOf(this):-1;o>-1&&(Jf(t,o),Va(r,o))}this._attachedToViewContainer=!1}Ed(this._lView[1],this._lView)}onDestroy(t){jd(this._lView[1],this._lView,null,t)}markForCheck(){Qd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fl(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,r){$o(!0);try{fl(e,t,r)}finally{$o(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Ul(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class hC extends mp{constructor(t){super(t),this._view=t}detectChanges(){Yd(this._view)}checkNoChanges(){!function(e){$o(!0);try{Yd(e)}finally{$o(!1)}}(this._view)}get context(){return null}}const pC=function(e){return function(e,t,r){if(Qi(e)&&!r){const o=Or(e.index,t);return new mp(o,o)}return 47&e.type?new mp(t[16],t):null}(Lr(),Zt(),16==(16&e))};let gC=(()=>{class e{}return e.__NG_ELEMENT_ID__=pC,e})();const yC=[new Aw],wC=new Gg([new Tw]),bC=new Wg(yC),IC=function(){return $g(Lr(),Zt())};let yp=(()=>{class e{}return e.__NG_ELEMENT_ID__=IC,e})();const CC=yp,TC=class extends CC{constructor(t,r,o){super(),this._declarationLView=t,this._declarationTContainer=r,this.elementRef=o}createEmbeddedView(t){const r=this._declarationTContainer.tViews,o=vu(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(o[19]=h.createEmbeddedView(r)),$l(r,o,t),new mp(o)}};function $g(e,t){return 4&e.type?new TC(t,e,ed(e,t)):null}class kf{}class Ow{}const AC=function(){return Mw(Lr(),Zt())};let zg=(()=>{class e{}return e.__NG_ELEMENT_ID__=AC,e})();const NC=zg,Pw=class extends NC{constructor(t,r,o){super(),this._lContainer=t,this._hostTNode=r,this._hostLView=o}get element(){return ed(this._hostTNode,this._hostLView)}get injector(){return new Qo(this._hostTNode,this._hostLView)}get parentInjector(){const t=Pn(this._hostTNode,this._hostLView);if(ce(t)){const r=lt(t,this._hostLView),o=Ee(t);return new Qo(r[1].data[o+8],r)}return new Qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const r=xw(this._lContainer);return null!==r&&r[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,r,o){const c=t.createEmbeddedView(r||{});return this.insert(c,o),c}createComponent(t,r,o,c,h){const w=o||this.parentInjector;if(!h&&null==t.ngModule&&w){const P=w.get(kf,null);P&&(h=P)}const I=t.create(w,c,void 0,h);return this.insert(I.hostView,r),I}insert(t,r){const o=t._lView,c=o[1];if(Un(o[3])){const ee=this.indexOf(t);if(-1!==ee)this.detach(ee);else{const me=o[3],Se=new Pw(me,me[6],me[3]);Se.detach(Se.indexOf(t))}}const h=this._adjustIndex(r),w=this._lContainer;!function(e,t,r,o){const c=10+o,h=r.length;o>0&&(r[c-1][4]=t),o<h-10?(t[4]=r[c],Cu(r,10+o,t)):(r.push(t),t[4]=null),t[3]=r;const w=t[17];null!==w&&r!==w&&function(e,t){const r=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===r?e[9]=[t]:r.push(t)}(w,t);const I=t[19];null!==I&&I.insertView(e),t[2]|=128}(c,o,w,h);const I=ul(h,w),P=o[11],W=pf(P,w[7]);return null!==W&&function(e,t,r,o,c,h){o[0]=c,o[6]=t,Ul(e,o,r,1,c,h)}(c,w[6],P,o,W,I),t.attachToViewContainerRef(),Cu(Im(w),h,t),t}move(t,r){return this.insert(t,r)}indexOf(t){const r=xw(this._lContainer);return null!==r?r.indexOf(t):-1}remove(t){const r=this._adjustIndex(t,-1),o=Jf(this._lContainer,r);o&&(Va(Im(this._lContainer),r),Ed(o[1],o))}detach(t){const r=this._adjustIndex(t,-1),o=Jf(this._lContainer,r);return o&&null!=Va(Im(this._lContainer),r)?new mp(o):null}_adjustIndex(t,r=0){return null==t?this.length+r:t}};function xw(e){return e[8]}function Im(e){return e[8]||(e[8]=[])}function Mw(e,t){let r;const o=t[e.index];if(Un(o))r=o;else{let c;if(8&e.type)c=Gn(o);else{const h=t[11];c=h.createComment("");const w=ti(e,t);jc(h,pf(h,w),c,function(e,t){return yn(e)?e.nextSibling(t):t.nextSibling}(h,w),!1)}t[e.index]=r=Ch(o,t,c,e),Ra(t,r)}return new Pw(r,e,t)}const id={};class eb extends Mf{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const r=Ce(t);return new nb(r,this.ngModule)}}function tb(e){const t=[];for(let r in e)e.hasOwnProperty(r)&&t.push({propName:e[r],templateName:r});return t}const ST=new Gr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>D});class nb extends ww{constructor(t,r){super(),this.componentDef=t,this.ngModule=r,this.componentType=t.type,this.selector=t.selectors.map(Od).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return tb(this.componentDef.inputs)}get outputs(){return tb(this.componentDef.outputs)}create(t,r,o,c){const h=(c=c||this.ngModule)?function(e,t){return{get:(r,o,c)=>{const h=e.get(r,id,c);return h!==id||o===id?h:t.get(r,o,c)}}}(t,c.injector):t,w=h.get(Hg,lr),I=h.get(bm,null),P=w.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",ee=o?function(e,t,r){if(yn(e))return e.selectRootElement(t,r===pn.ShadowDom);let o="string"==typeof t?e.querySelector(t):t;return o.textContent="",o}(P,o,this.componentDef.encapsulation):Ks(w.createRenderer(null,this.componentDef),W,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(W)),me=this.componentDef.onPush?576:528,Se=function(e,t){return{components:[],scheduler:e||D,clean:Fv,playerHandler:t||null,flags:0}}(),Qe=bf(0,null,null,1,0,null,null,null,null,null),dt=vu(null,Qe,Se,me,null,null,w,P,I,h);let Bt,At;ro(dt);try{const _n=function(e,t,r,o,c,h){const w=r[1];r[20]=e;const P=Wl(w,20,2,"#host",null),W=P.mergedAttrs=t.hostAttrs;null!==W&&(Ah(P,W,!0),null!==e&&(d(c,e,W),null!==P.classes&&Vl(c,e,P.classes),null!==P.styles&&jl(c,e,P.styles)));const ee=o.createRenderer(e,t),me=vu(r,mh(t),null,t.onPush?64:16,r[20],P,o,ee,h||null,null);return w.firstCreatePass&&(Ni(yi(P,r),w,t.type),Eh(w,P),Wd(P,r.length,1)),Ra(r,me),r[20]=me}(ee,this.componentDef,dt,w,P);if(ee)if(o)d(P,ee,["ng-version",Em.full]);else{const{attrs:en,classes:tr}=function(e){const t=[],r=[];let o=1,c=2;for(;o<e.length;){let h=e[o];if("string"==typeof h)2===c?""!==h&&t.push(h,e[++o]):8===c&&r.push(h);else{if(!Sa(c))break;c=h}o++}return{attrs:t,classes:r}}(this.componentDef.selectors[0]);en&&d(P,ee,en),tr&&tr.length>0&&Vl(P,ee,tr.join(" "))}if(At=Br(Qe,20),void 0!==r){const en=At.projection=[];for(let tr=0;tr<this.ngContentSelectors.length;tr++){const Dr=r[tr];en.push(null!=Dr?Array.from(Dr):null)}}Bt=function(e,t,r,o,c){const h=r[1],w=function(e,t,r){const o=Lr();e.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),Ih(e,o,t,ql(e,t,1,null),r));const c=va(t,e,o.directiveStart,o);vo(c,t);const h=ti(o,t);return h&&vo(h,t),c}(h,r,t);if(o.components.push(w),e[8]=w,c&&c.forEach(P=>P(w,t)),t.contentQueries){const P=Lr();t.contentQueries(1,w,P.directiveStart)}const I=Lr();return!h.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Et(I.index),gg(r[1],I,0,I.directiveStart,I.directiveEnd,t),bh(t,w)),w}(_n,this.componentDef,dt,Se,[Ng]),$l(Qe,dt,null)}finally{L()}return new RT(this.componentType,Bt,ed(At,dt),dt,At)}}class RT extends class{}{constructor(t,r,o,c,h){super(),this.location=o,this._rootLView=c,this._tNode=h,this.instance=r,this.hostView=this.changeDetectorRef=new hC(c),this.componentType=t}get injector(){return new Qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const od=new Map;class PT extends kf{constructor(t,r){super(),this._parent=r,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new eb(this);const o=le(t),c=t[bt]||null;c&&dm(c),this._bootstrapComponents=Ge(o.bootstrap),this._r3Injector=ep(t,r,[{provide:kf,useValue:this},{provide:Mf,useValue:this.componentFactoryResolver}],Me(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,r=Oi.THROW_IF_NOT_FOUND,o=Rn.Default){return t===Oi||t===kf||t===Hc?this:this._r3Injector.get(t,r,o)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Fm extends Ow{constructor(t){super(),this.moduleType=t,null!==le(t)&&function(e){const t=new Set;!function r(o){const c=le(o,!0),h=c.id;null!==h&&(function(e,t,r){if(t&&t!==r)throw new Error(`Duplicate module registered for ${e} - ${Me(t)} vs ${Me(t.name)}`)}(h,od.get(h),o),od.set(h,o));const w=Ge(c.imports);for(const I of w)t.has(I)||(t.add(I),r(I))}(e)}(t)}create(t){return new PT(this.moduleType,t)}}function ob(e,t,r,o){return sb(Zt(),Ai(),e,t,r,o)}function Sp(e,t){const r=e[t];return r===vr?void 0:r}function sb(e,t,r,o,c,h){const w=t+r;return ca(e,w,c)?Gc(e,w+1,h?o.call(h,c):o(c)):Sp(e,w+1)}function ab(e,t,r,o,c,h,w){const I=t+r;return function(e,t,r,o){const c=ca(e,t,r);return ca(e,t+1,o)||c}(e,I,c,h)?Gc(e,I+2,w?o.call(w,c,h):o(c,h)):Sp(e,I+2)}function fb(e,t){const r=br();let o;const c=e+20;r.firstCreatePass?(o=function(e,t){if(t)for(let r=t.length-1;r>=0;r--){const o=t[r];if(e===o.name)return o}throw new at("302",`The pipe '${e}' could not be found!`)}(t,r.pipeRegistry),r.data[c]=o,o.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(c,o.onDestroy)):o=r.data[c];const h=o.factory||(o.factory=G(o.type)),w=Ve(fp);try{const I=jt(!1),P=h();return jt(I),function(e,t,r,o){r>=e.data.length&&(e.data[r]=null,e.blueprint[r]=null),t[r]=o}(r,Zt(),c,P),P}finally{Ve(w)}}function hb(e,t,r){const o=e+20,c=Zt(),h=dr(c,o);return Ap(c,Dp(c,o)?sb(c,Ai(),t,h.transform,r,h):h.transform(r))}function db(e,t,r,o){const c=e+20,h=Zt(),w=dr(h,c);return Ap(h,Dp(h,c)?ab(h,Ai(),t,w.transform,r,o,w):w.transform(r,o))}function Dp(e,t){return e[1].data[t].pure}function Ap(e,t){return Yr.isWrapped(t)&&(t=Yr.unwrap(t),e[Bn.lFrame.bindingIndex]=vr),t}function Lm(e){return t=>{setTimeout(e,void 0,t)}}const zc=class extends st.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,r,o){var c,h,w;let I=t,P=r||(()=>null),W=o;if(t&&"object"==typeof t){const me=t;I=null===(c=me.next)||void 0===c?void 0:c.bind(me),P=null===(h=me.error)||void 0===h?void 0:h.bind(me),W=null===(w=me.complete)||void 0===w?void 0:w.bind(me)}this.__isAsync&&(P=Lm(P),I&&(I=Lm(I)),W&&(W=Lm(W)));const ee=super.subscribe({next:I,error:P,complete:W});return t instanceof tt.w&&t.add(ee),ee}};function zT(){return this._results[hn()]()}class Zg{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const r=hn(),o=Zg.prototype;o[r]||(o[r]=zT)}get changes(){return this._changes||(this._changes=new zc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,r){return this._results.reduce(t,r)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,r){const o=this;o.dirty=!1;const c=jo(t);(this._changesDetected=!function(e,t,r){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){let c=e[o],h=t[o];if(r&&(c=r(c),h=r(h)),h!==c)return!1}return!0}(o._results,c,r))&&(o._results=c,o.length=c.length,o.last=c[this.length-1],o.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Um{constructor(t){this.queryList=t,this.matches=null}clone(){return new Um(this.queryList)}setDirty(){this.queryList.setDirty()}}class jm{constructor(t=[]){this.queries=t}createEmbeddedView(t){const r=t.queries;if(null!==r){const o=null!==t.contentQueries?t.contentQueries[0]:r.length,c=[];for(let h=0;h<o;h++){const w=r.getByIndex(h);c.push(this.queries[w.indexInDeclarationView].clone())}return new jm(c)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let r=0;r<this.queries.length;r++)null!==bb(t,r).matches&&this.queries[r].setDirty()}}class pb{constructor(t,r,o=null){this.predicate=t,this.flags=r,this.read=o}}class Vm{constructor(t=[]){this.queries=t}elementStart(t,r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(t,r)}elementEnd(t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(t)}embeddedTView(t){let r=null;for(let o=0;o<this.length;o++){const c=null!==r?r.length:0,h=this.getByIndex(o).embeddedTView(t,c);h&&(h.indexInDeclarationView=o,null!==r?r.push(h):r=[h])}return null!==r?new Vm(r):null}template(t,r){for(let o=0;o<this.queries.length;o++)this.queries[o].template(t,r)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Bm{constructor(t,r=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(t,r){this.isApplyingToNode(r)&&this.matchTNode(t,r)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,r){this.elementStart(t,r)}embeddedTView(t,r){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,r),new Bm(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const r=this._declarationNodeIndex;let o=t.parent;for(;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(t,r){const o=this.metadata.predicate;if(Array.isArray(o))for(let c=0;c<o.length;c++){const h=o[c];this.matchTNodeWithReadOption(t,r,YT(r,h)),this.matchTNodeWithReadOption(t,r,qi(r,t,h,!1,!1))}else o===yp?4&r.type&&this.matchTNodeWithReadOption(t,r,-1):this.matchTNodeWithReadOption(t,r,qi(r,t,o,!1,!1))}matchTNodeWithReadOption(t,r,o){if(null!==o){const c=this.metadata.read;if(null!==c)if(c===$c||c===zg||c===yp&&4&r.type)this.addMatch(r.index,-2);else{const h=qi(r,t,c,!1,!1);null!==h&&this.addMatch(r.index,h)}else this.addMatch(r.index,o)}}addMatch(t,r){null===this.matches?this.matches=[t,r]:this.matches.push(t,r)}}function YT(e,t){const r=e.localNames;if(null!==r)for(let o=0;o<r.length;o+=2)if(r[o]===t)return r[o+1];return null}function ZT(e,t,r,o){return-1===r?function(e,t){return 11&e.type?ed(e,t):4&e.type?$g(e,t):null}(t,e):-2===r?function(e,t,r){return r===$c?ed(t,e):r===yp?$g(t,e):r===zg?Mw(t,e):void 0}(e,t,o):va(e,e[1],r,t)}function gb(e,t,r,o){const c=t[19].queries[o];if(null===c.matches){const h=e.data,w=r.matches,I=[];for(let P=0;P<w.length;P+=2){const W=w[P];I.push(W<0?null:ZT(t,h[W],w[P+1],r.metadata.read))}c.matches=I}return c.matches}function Hm(e,t,r,o){const c=e.queries.getByIndex(r),h=c.matches;if(null!==h){const w=gb(e,t,c,r);for(let I=0;I<h.length;I+=2){const P=h[I];if(P>0)o.push(w[I/2]);else{const W=h[I+1],ee=t[-P];for(let me=10;me<ee.length;me++){const Se=ee[me];Se[17]===Se[3]&&Hm(Se[1],Se,W,o)}if(null!==ee[9]){const me=ee[9];for(let Se=0;Se<me.length;Se++){const Qe=me[Se];Hm(Qe[1],Qe,W,o)}}}}}return o}function vb(e){const t=Zt(),r=br(),o=Hr();Zs(o+1);const c=bb(r,o);if(e.dirty&&zr(t)===(2==(2&c.metadata.flags))){if(null===c.matches)e.reset([]);else{const h=c.crossesNgTemplate?Hm(r,t,o,[]):gb(r,t,c,o);e.reset(h,Iw),e.notifyOnChanges()}return!0}return!1}function mb(e,t,r,o){const c=br();if(c.firstCreatePass){const h=Lr();(function(e,t,r){null===e.queries&&(e.queries=new Vm),e.queries.track(new Bm(t,r))})(c,new pb(t,r,o),h.index),function(e,t){const r=e.contentQueries||(e.contentQueries=[]);t!==(r.length?r[r.length-1]:-1)&&r.push(e.queries.length-1,t)}(c,e),2==(2&r)&&(c.staticContentQueries=!0)}!function(e,t,r){const o=new Zg(4==(4&r));jd(e,t,o,o.destroy),null===t[19]&&(t[19]=new jm),t[19].queries.push(new Um(o))}(c,Zt(),r)}function yb(){return e=Zt(),t=Hr(),e[19].queries[t].queryList;var e,t}function bb(e,t){return e.queries.getByIndex(t)}const Km=new Gr("Application Initializer");let ad=(()=>{class e{constructor(r){this.appInits=r,this.resolve=Bg,this.reject=Bg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,c)=>{this.resolve=o,this.reject=c})}runInitializers(){if(this.initialized)return;const r=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(im(h))r.push(h);else if(om(h)){const w=new Promise((I,P)=>{h.subscribe({complete:I,error:P})});r.push(w)}}Promise.all(r).then(()=>{o()}).catch(c=>{this.reject(c)}),0===r.length&&o(),this.initialized=!0}}return e.\u0275fac=function(r){return new(r||e)(Wr(Km,8))},e.\u0275prov=on({token:e,factory:e.\u0275fac}),e})();const jb=new Gr("AppId"),NS={provide:jb,useFactory:function(){return`${Qm()}${Qm()}${Qm()}`},deps:[]};function Qm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vb=new Gr("Platform Initializer"),Bb=new Gr("Platform ID"),Hb=new Gr("appBootstrapListener");let Gb=(()=>{class e{log(r){console.log(r)}warn(r){console.warn(r)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=on({token:e,factory:e.\u0275fac}),e})();const tv=new Gr("LocaleId"),Wb=new Gr("DefaultCurrencyCode");class PS{constructor(t,r){this.ngModuleFactory=t,this.componentFactories=r}}const Ym=function(e){return new Fm(e)},xS=Ym,MS=function(e){return Promise.resolve(Ym(e))},qb=function(e){const t=Ym(e),o=Ge(le(e).declarations).reduce((c,h)=>{const w=Ce(h);return w&&c.push(new nb(w)),c},[]);return new PS(t,o)},kS=qb,FS=function(e){return Promise.resolve(qb(e))};let Np=(()=>{class e{constructor(){this.compileModuleSync=xS,this.compileModuleAsync=MS,this.compileModuleAndAllComponentsSync=kS,this.compileModuleAndAllComponentsAsync=FS}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=on({token:e,factory:e.\u0275fac}),e})();const jS=(()=>Promise.resolve(0))();function Xm(e){"undefined"==typeof Zone?jS.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class _u{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zc(!1),this.onMicrotaskEmpty=new zc(!1),this.onStable=new zc(!1),this.onError=new zc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&r,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let e=ir.requestAnimationFrame,t=ir.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ir,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Jm(e),e.isCheckStableRunning=!0,Zm(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Jm(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,o,c,h,w,I)=>{try{return $b(e),r.invokeTask(c,h,w,I)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||e.shouldCoalesceRunChangeDetection)&&t(),zb(e)}},onInvoke:(r,o,c,h,w,I,P)=>{try{return $b(e),r.invoke(c,h,w,I,P)}finally{e.shouldCoalesceRunChangeDetection&&t(),zb(e)}},onHasTask:(r,o,c,h)=>{r.hasTask(c,h),o===c&&("microTask"==h.change?(e._hasPendingMicrotasks=h.microTask,Jm(e),Zm(e)):"macroTask"==h.change&&(e.hasPendingMacrotasks=h.macroTask))},onHandleError:(r,o,c,h)=>(r.handleError(c,h),e.runOutsideAngular(()=>e.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_u.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_u.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,r,o){return this._inner.run(t,r,o)}runTask(t,r,o,c){const h=this._inner,w=h.scheduleEventTask("NgZoneEvent: "+c,t,BS,Bg,Bg);try{return h.runTask(w,r,o)}finally{h.cancelTask(w)}}runGuarded(t,r,o){return this._inner.runGuarded(t,r,o)}runOutsideAngular(t){return this._outer.run(t)}}const BS={};function Zm(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Jm(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function $b(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function zb(e){e._nesting--,Zm(e)}class WS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zc,this.onMicrotaskEmpty=new zc,this.onStable=new zc,this.onError=new zc}run(t,r,o){return t.apply(r,o)}runGuarded(t,r,o){return t.apply(r,o)}runOutsideAngular(t){return t()}runTask(t,r,o,c){return t.apply(r,o)}}let Kb=(()=>{class e{constructor(r){this._ngZone=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_u.assertNotInAngularZone(),Xm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xm(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(r)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,c){let h=-1;o&&o>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==h),r(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:h,updateCb:c})}whenStable(r,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(r,o,c){return[]}}return e.\u0275fac=function(r){return new(r||e)(Wr(_u))},e.\u0275prov=on({token:e,factory:e.\u0275fac}),e})(),Qb=(()=>{class e{constructor(){this._applications=new Map,ey.addToWindow(this)}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return ey.findTestabilityInTree(this,r,o)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=on({token:e,factory:e.\u0275fac}),e})();class qS{addToWindow(t){}findTestabilityInTree(t,r,o){return null}}function $S(e){ey=e}let ey=new qS,Yb=!0,Xb=!1;function zS(){if(Xb)throw new Error("Cannot enable prod mode after platform setup.");Yb=!1}let _c;const Jb=new Gr("AllowMultipleToken");class eD{constructor(t,r){this.name=t,this.token=r}}function e0(e,t,r=[]){const o=`Platform: ${t}`,c=new Gr(o);return(h=[])=>{let w=t0();if(!w||w.injector.get(Jb,!1))if(e)e(r.concat(h).concat({provide:c,useValue:!0}));else{const I=r.concat(h).concat({provide:c,useValue:!0},{provide:Cf,useValue:"platform"});!function(e){if(_c&&!_c.destroyed&&!_c.injector.get(Jb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_c=e.get(n0);const t=e.get(Vb,null);t&&t.forEach(r=>r())}(Oi.create({providers:I,name:o}))}return function(e){const t=t0();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(c)}}function t0(){return _c&&!_c.destroyed?_c:null}let n0=(()=>{class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){const I=function(e,t){let r;return r="noop"===e?new WS:("zone.js"===e?void 0:e)||new _u({enableLongStackTrace:(Xb=!0,Yb),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),r}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),P=[{provide:_u,useValue:I}];return I.run(()=>{const W=Oi.create({providers:P,parent:this.injector,name:r.moduleType.name}),ee=r.create(W),me=ee.injector.get(lc,null);if(!me)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return I.runOutsideAngular(()=>{const Se=I.onError.subscribe({next:Qe=>{me.handleError(Qe)}});ee.onDestroy(()=>{ty(this._modules,ee),Se.unsubscribe()})}),function(e,t,r){try{const o=r();return im(o)?o.catch(c=>{throw t.runOutsideAngular(()=>e.handleError(c)),c}):o}catch(o){throw t.runOutsideAngular(()=>e.handleError(o)),o}}(me,I,()=>{const Se=ee.injector.get(ad);return Se.runInitializers(),Se.donePromise.then(()=>(dm(ee.injector.get(tv,Fg)||Fg),this._moduleDoBootstrap(ee),ee))})})}bootstrapModule(r,o=[]){const c=r0({},o);return function(e,t,r){const o=new Fm(r);return Promise.resolve(o)}(0,0,r).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(r){const o=r.injector.get(Op);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!r.instance.ngDoBootstrap)throw new Error(`The module ${Me(r.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);r.instance.ngDoBootstrap(o)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(r){return new(r||e)(Wr(Oi))},e.\u0275prov=on({token:e,factory:e.\u0275fac}),e})();function r0(e,t){return Array.isArray(t)?t.reduce(r0,e):Object.assign(Object.assign({},e),t)}let Op=(()=>{class e{constructor(r,o,c,h,w){this._zone=r,this._injector=o,this._exceptionHandler=c,this._componentFactoryResolver=h,this._initStatus=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new M.y(W=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{W.next(this._stable),W.complete()})}),P=new M.y(W=>{let ee;this._zone.runOutsideAngular(()=>{ee=this._zone.onStable.subscribe(()=>{_u.assertNotInAngularZone(),Xm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,W.next(!0))})})});const me=this._zone.onUnstable.subscribe(()=>{_u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{W.next(!1)}))});return()=>{ee.unsubscribe(),me.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,r=null,o=e[e.length-1];return(0,A.K)(o)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof o&&(t=e.pop()),null===r&&1===e.length&&e[0]instanceof M.y?e[0]:(0,J.J)(t)((0,mt.n)(e,r))}(I,P.pipe(e=>(0,Ie.x)()(function(e,t){return function(o){let c;c="function"==typeof e?e:function(){return e};const h=Object.create(o,ft.N);return h.source=o,h.subjectFactory=c,h}}(xe)(e))))}bootstrap(r,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=r instanceof ww?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(c.componentType);const h=function(e){return e.isBoundToModule}(c)?void 0:this._injector.get(kf),I=c.create(Oi.NULL,[],o||c.selector,h),P=I.location.nativeElement,W=I.injector.get(Kb,null),ee=W&&I.injector.get(Qb);return W&&ee&&ee.registerApplication(P,W),I.onDestroy(()=>{this.detachView(I.hostView),ty(this.components,I),ee&&ee.unregisterApplication(P)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){const o=r;ty(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(Hb,[]).concat(this._bootstrapListeners).forEach(c=>c(r))}ngOnDestroy(){this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(r){return new(r||e)(Wr(_u),Wr(Oi),Wr(lc),Wr(Mf),Wr(ad))},e.\u0275prov=on({token:e,factory:e.\u0275fac}),e})();function ty(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class sD{}class uD{}const cD={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let lD=(()=>{class e{constructor(r,o){this._compiler=r,this._config=o||cD}load(r){return this.loadAndCompile(r)}loadAndCompile(r){let[o,c]=r.split("#");return void 0===c&&(c="default"),ge(8255)(o).then(h=>h[c]).then(h=>a0(h,o,c)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(r){let[o,c]=r.split("#"),h="NgFactory";return void 0===c&&(c="default",h=""),ge(8255)(this._config.factoryPathPrefix+o+this._config.factoryPathSuffix).then(w=>w[c+h]).then(w=>a0(w,o,c))}}return e.\u0275fac=function(r){return new(r||e)(Wr(Np),Wr(uD,8))},e.\u0275prov=on({token:e,factory:e.\u0275fac}),e})();function a0(e,t,r){if(!e)throw new Error(`Cannot find '${r}' in '${t}'`);return e}const yD=function(e){return null},wD=e0(null,"core",[{provide:Bb,useValue:"unknown"},{provide:n0,deps:[Oi]},{provide:Qb,deps:[]},{provide:Gb,deps:[]}]),TD=[{provide:Op,useClass:Op,deps:[_u,Oi,lc,Mf,ad]},{provide:ST,deps:[_u],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(r){t.push(r)}}},{provide:ad,useClass:ad,deps:[[new Os,Km]]},{provide:Np,useClass:Np,deps:[]},NS,{provide:Gg,useFactory:function(){return wC},deps:[]},{provide:Wg,useFactory:function(){return bC},deps:[]},{provide:tv,useFactory:function(e){return dm(e=e||"undefined"!=typeof $localize&&$localize.locale||Fg),e},deps:[[new qa(tv),new Os,new ra]]},{provide:Wb,useValue:"USD"}];let DD=(()=>{class e{constructor(r){}}return e.\u0275fac=function(r){return new(r||e)(Wr(Op))},e.\u0275mod=fr({type:e}),e.\u0275inj=sn({providers:TD}),e})()},8051:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{factory:()=>ar,getGlobalVars:()=>Ir,registerAnalytics:()=>ei,resetGlobalVars:()=>Nn,settings:()=>Yn});var J=function(){return(J=Object.assign||function(ht){for(var bt,Mt=1,Tt=arguments.length;Mt<Tt;Mt++)for(var Lt in bt=arguments[Mt])Object.prototype.hasOwnProperty.call(bt,Lt)&&(ht[Lt]=bt[Lt]);return ht}).apply(this,arguments)};function ft(Re,ht,bt,Mt){return new(bt||(bt=Promise))(function(Lt,rn){function mn(Tn){try{Qt(Mt.next(Tn))}catch(fr){rn(fr)}}function Mn(Tn){try{Qt(Mt.throw(Tn))}catch(fr){rn(fr)}}function Qt(Tn){Tn.done?Lt(Tn.value):function(Lt){return Lt instanceof bt?Lt:new bt(function(rn){rn(Lt)})}(Tn.value).then(mn,Mn)}Qt((Mt=Mt.apply(Re,ht||[])).next())})}function oe(Re,ht){var Mt,Tt,Lt,rn,bt={label:0,sent:function(){if(1&Lt[0])throw Lt[1];return Lt[1]},trys:[],ops:[]};return rn={next:mn(0),throw:mn(1),return:mn(2)},"function"==typeof Symbol&&(rn[Symbol.iterator]=function(){return this}),rn;function mn(Qt){return function(Tn){return function(Qt){if(Mt)throw new TypeError("Generator is already executing.");for(;bt;)try{if(Mt=1,Tt&&(Lt=2&Qt[0]?Tt.return:Qt[0]?Tt.throw||((Lt=Tt.return)&&Lt.call(Tt),0):Tt.next)&&!(Lt=Lt.call(Tt,Qt[1])).done)return Lt;switch(Tt=0,Lt&&(Qt=[2&Qt[0],Lt.value]),Qt[0]){case 0:case 1:Lt=Qt;break;case 4:return bt.label++,{value:Qt[1],done:!1};case 5:bt.label++,Tt=Qt[1],Qt=[0];continue;case 7:Qt=bt.ops.pop(),bt.trys.pop();continue;default:if(!(Lt=(Lt=bt.trys).length>0&&Lt[Lt.length-1])&&(6===Qt[0]||2===Qt[0])){bt=0;continue}if(3===Qt[0]&&(!Lt||Qt[1]>Lt[0]&&Qt[1]<Lt[3])){bt.label=Qt[1];break}if(6===Qt[0]&&bt.label<Lt[1]){bt.label=Lt[1],Lt=Qt;break}if(Lt&&bt.label<Lt[2]){bt.label=Lt[2],bt.ops.push(Qt);break}Lt[2]&&bt.ops.pop(),bt.trys.pop();continue}Qt=ht.call(Re,bt)}catch(Tn){Qt=[6,Tn],Tt=0}finally{Mt=Lt=0}if(5&Qt[0])throw Qt[1];return{value:Qt[0]?Qt[1]:void 0,done:!0}}([Qt,Tn])}}}var R=ge(6279),C=(ge(7918),ge(300)),B=ge(1704),K=ge(1100),ve="https://www.googletagmanager.com/gtag/js",ot=(()=>{return(Re=ot||(ot={})).EVENT="event",Re.SET="set",Re.CONFIG="config",ot;var Re})(),Vt=(()=>{return(Re=Vt||(Vt={})).ADD_SHIPPING_INFO="add_shipping_info",Re.ADD_PAYMENT_INFO="add_payment_info",Re.ADD_TO_CART="add_to_cart",Re.ADD_TO_WISHLIST="add_to_wishlist",Re.BEGIN_CHECKOUT="begin_checkout",Re.CHECKOUT_PROGRESS="checkout_progress",Re.EXCEPTION="exception",Re.GENERATE_LEAD="generate_lead",Re.LOGIN="login",Re.PAGE_VIEW="page_view",Re.PURCHASE="purchase",Re.REFUND="refund",Re.REMOVE_FROM_CART="remove_from_cart",Re.SCREEN_VIEW="screen_view",Re.SEARCH="search",Re.SELECT_CONTENT="select_content",Re.SELECT_ITEM="select_item",Re.SELECT_PROMOTION="select_promotion",Re.SET_CHECKOUT_OPTION="set_checkout_option",Re.SHARE="share",Re.SIGN_UP="sign_up",Re.TIMING_COMPLETE="timing_complete",Re.VIEW_CART="view_cart",Re.VIEW_ITEM="view_item",Re.VIEW_ITEM_LIST="view_item_list",Re.VIEW_PROMOTION="view_promotion",Re.VIEW_SEARCH_RESULTS="view_search_results",Vt;var Re})(),_t=new C.Logger("@firebase/analytics");function qe(Re,ht,bt,Mt,Tt,Lt){return ft(this,void 0,void 0,function(){var rn,mn,Mn,Qt;return oe(this,function(Tn){switch(Tn.label){case 0:rn=Mt[Tt],Tn.label=1;case 1:return Tn.trys.push([1,7,,8]),rn?[4,ht[rn]]:[3,3];case 2:return Tn.sent(),[3,6];case 3:return[4,Promise.all(bt)];case 4:return mn=Tn.sent(),(Mn=mn.find(function(fr){return fr.measurementId===Tt}))?[4,ht[Mn.appId]]:[3,6];case 5:Tn.sent(),Tn.label=6;case 6:return[3,8];case 7:return Qt=Tn.sent(),_t.error(Qt),[3,8];case 8:return Re(ot.CONFIG,Tt,Lt),[2]}})})}function pt(Re,ht,bt,Mt,Tt){return ft(this,void 0,void 0,function(){var Lt,rn,mn,Mn,Qt,Tn,or;return oe(this,function(ai){switch(ai.label){case 0:return ai.trys.push([0,4,,5]),Lt=[],Tt&&Tt.send_to?(rn=Tt.send_to,Array.isArray(rn)||(rn=[rn]),[4,Promise.all(bt)]):[3,2];case 1:for(mn=ai.sent(),Mn=function(Oe){var Ce=mn.find(function(Je){return Je.measurementId===Oe}),Ue=Ce&&ht[Ce.appId];if(!Ue)return Lt=[],"break";Lt.push(Ue)},Qt=0,Tn=rn;Qt<Tn.length&&"break"!==Mn(Tn[Qt]);Qt++);ai.label=2;case 2:return 0===Lt.length&&(Lt=Object.values(ht)),[4,Promise.all(Lt)];case 3:return ai.sent(),Re(ot.EVENT,Mt,Tt||{}),[3,5];case 4:return or=ai.sent(),_t.error(or),[3,5];case 5:return[2]}})})}var on,An=((on={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",on["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",on["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",on["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",on["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",on["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",on["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",on["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',on["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',on),sn=new B.ErrorFactory("analytics","Analytics",An),ur=new(function(){function Re(ht,bt){void 0===ht&&(ht={}),void 0===bt&&(bt=1e3),this.throttleMetadata=ht,this.intervalMillis=bt}return Re.prototype.getThrottleMetadata=function(ht){return this.throttleMetadata[ht]},Re.prototype.setThrottleMetadata=function(ht,bt){this.throttleMetadata[ht]=bt},Re.prototype.deleteThrottleMetadata=function(ht){delete this.throttleMetadata[ht]},Re}());function Rr(Re){return new Headers({Accept:"application/json","x-goog-api-key":Re})}function Vr(Re){var ht;return ft(this,void 0,void 0,function(){var bt,Tt,Lt,rn,mn,Mn;return oe(this,function(Tn){switch(Tn.label){case 0:return bt=Re.appId,Tt={method:"GET",headers:Rr(Re.apiKey)},Lt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",bt),[4,fetch(Lt,Tt)];case 1:if(200===(rn=Tn.sent()).status||304===rn.status)return[3,6];mn="",Tn.label=2;case 2:return Tn.trys.push([2,4,,5]),[4,rn.json()];case 3:return Mn=Tn.sent(),(null===(ht=Mn.error)||void 0===ht?void 0:ht.message)&&(mn=Mn.error.message),[3,5];case 4:return Tn.sent(),[3,5];case 5:throw sn.create("config-fetch-failed",{httpStatus:rn.status,responseMessage:mn});case 6:return[2,rn.json()]}})})}function Jn(Re,ht,bt,Mt){var Tt=ht.throttleEndTimeMillis,Lt=ht.backoffCount;return void 0===Mt&&(Mt=ur),ft(this,void 0,void 0,function(){var rn,mn,Mn,Qt,Tn,fr,nr;return oe(this,function(or){switch(or.label){case 0:rn=Re.appId,mn=Re.measurementId,or.label=1;case 1:return or.trys.push([1,3,,4]),[4,Hn(bt,Tt)];case 2:return or.sent(),[3,4];case 3:if(Mn=or.sent(),mn)return _t.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+mn+' provided in the "measurementId" field in the local Firebase config. ['+Mn.message+"]"),[2,{appId:rn,measurementId:mn}];throw Mn;case 4:return or.trys.push([4,6,,7]),[4,Vr(Re)];case 5:return Qt=or.sent(),Mt.deleteThrottleMetadata(rn),[2,Qt];case 6:if(!function(Re){if(!(Re instanceof B.FirebaseError))return!1;var ht=Number(Re.httpStatus);return 429===ht||500===ht||503===ht||504===ht}(Tn=or.sent())){if(Mt.deleteThrottleMetadata(rn),mn)return _t.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+mn+' provided in the "measurementId" field in the local Firebase config. ['+Tn.message+"]"),[2,{appId:rn,measurementId:mn}];throw Tn}return fr=503===Number(Tn.httpStatus)?(0,B.calculateBackoffMillis)(Lt,Mt.intervalMillis,30):(0,B.calculateBackoffMillis)(Lt,Mt.intervalMillis),nr={throttleEndTimeMillis:Date.now()+fr,backoffCount:Lt+1},Mt.setThrottleMetadata(rn,nr),_t.debug("Calling attemptFetch again in "+fr+" millis"),[2,Jn(Re,nr,bt,Mt)];case 7:return[2]}})})}function Hn(Re,ht){return new Promise(function(bt,Mt){var Tt=Math.max(ht-Date.now(),0),Lt=setTimeout(bt,Tt);Re.addEventListener(function(){clearTimeout(Lt),Mt(sn.create("fetch-throttle",{throttleEndTimeMillis:ht}))})})}var nt=function(){function Re(){this.listeners=[]}return Re.prototype.addEventListener=function(ht){this.listeners.push(ht)},Re.prototype.abort=function(){this.listeners.forEach(function(ht){return ht()})},Re}();var Cn,pn,wt={},ct=[],nn={},tn="dataLayer",En="gtag",_r=!1;function Nn(Re,ht,bt){void 0===Re&&(Re=!1),void 0===ht&&(ht={}),void 0===bt&&(bt=[]),_r=Re,wt=ht,ct=bt,tn="dataLayer",En="gtag"}function Ir(){return{initializationPromisesMap:wt,dynamicConfigPromisesList:ct}}function Yn(Re){if(_r)throw sn.create("already-initialized");Re.dataLayerName&&(tn=Re.dataLayerName),Re.gtagName&&(En=Re.gtagName)}function ar(Re,ht){!function(){var Re=[];if((0,B.isBrowserExtension)()&&Re.push("This is a browser extension environment."),(0,B.areCookiesEnabled)()||Re.push("Cookies are not available."),Re.length>0){var ht=Re.map(function(Mt,Tt){return"("+(Tt+1)+") "+Mt}).join(" "),bt=sn.create("invalid-analytics-context",{errorInfo:ht});_t.warn(bt.message)}}();var bt=Re.options.appId;if(!bt)throw sn.create("no-app-id");if(!Re.options.apiKey){if(!Re.options.measurementId)throw sn.create("no-api-key");_t.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+Re.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=wt[bt])throw sn.create("already-exists",{id:bt});if(!_r){(function(){for(var Re=window.document.getElementsByTagName("script"),ht=0,bt=Object.values(Re);ht<bt.length;ht++){var Mt=bt[ht];if(Mt.src&&Mt.src.includes(ve))return Mt}return null})()||function(Re){var ht=document.createElement("script");ht.src=ve+"?l="+Re,ht.async=!0,document.head.appendChild(ht)}(tn),function(Re){var ht=[];Array.isArray(window[Re])?ht=window[Re]:window[Re]=ht}(tn);var Mt=function(Re,ht,bt,Mt,Tt){var Lt=function(){for(var rn=[],mn=0;mn<arguments.length;mn++)rn[mn]=arguments[mn];window[Mt].push(arguments)};return window[Tt]&&"function"==typeof window[Tt]&&(Lt=window[Tt]),window[Tt]=function(Re,ht,bt,Mt){return function(Lt,rn,mn){return ft(this,void 0,void 0,function(){var Mn;return oe(this,function(Qt){switch(Qt.label){case 0:return Qt.trys.push([0,6,,7]),Lt!==ot.EVENT?[3,2]:[4,pt(Re,ht,bt,rn,mn)];case 1:return Qt.sent(),[3,5];case 2:return Lt!==ot.CONFIG?[3,4]:[4,qe(Re,ht,bt,Mt,rn,mn)];case 3:return Qt.sent(),[3,5];case 4:Re(ot.SET,rn),Qt.label=5;case 5:return[3,7];case 6:return Mn=Qt.sent(),_t.error(Mn),[3,7];case 7:return[2]}})})}}(Lt,Re,ht,bt),{gtagCore:Lt,wrappedGtag:window[Tt]}}(wt,ct,nn,tn,En);pn=Mt.wrappedGtag,Cn=Mt.gtagCore,_r=!0}return wt[bt]=function(Re,ht,bt,Mt,Tt){return ft(this,void 0,void 0,function(){var Lt,rn,mn,Mn,Qt,Tn,fr;return oe(this,function(nr){switch(nr.label){case 0:return(Lt=function(Re,ht,bt){return void 0===ht&&(ht=ur),ft(this,void 0,void 0,function(){var Mt,Tt,Lt,rn,mn,Mn,Qt=this;return oe(this,function(Tn){if(Lt=(Mt=Re.options).apiKey,rn=Mt.measurementId,!(Tt=Mt.appId))throw sn.create("no-app-id");if(!Lt){if(rn)return[2,{measurementId:rn,appId:Tt}];throw sn.create("no-api-key")}return mn=ht.getThrottleMetadata(Tt)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Mn=new nt,setTimeout(function(){return ft(Qt,void 0,void 0,function(){return oe(this,function(fr){return Mn.abort(),[2]})})},6e4),[2,Jn({appId:Tt,apiKey:Lt,measurementId:rn},mn,Mn,ht)]})})}(Re)).then(function(or){bt[or.measurementId]=or.appId,Re.options.measurementId&&or.measurementId!==Re.options.measurementId&&_t.warn("The measurement ID in the local Firebase config ("+Re.options.measurementId+") does not match the measurement ID fetched from the server ("+or.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(or){return _t.error(or)}),ht.push(Lt),rn=function(){return ft(this,void 0,void 0,function(){var Re;return oe(this,function(ht){switch(ht.label){case 0:return(0,B.isIndexedDBAvailable)()?[3,1]:(_t.warn(sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return ht.trys.push([1,3,,4]),[4,(0,B.validateIndexedDBOpenable)()];case 2:return ht.sent(),[3,4];case 3:return Re=ht.sent(),_t.warn(sn.create("indexeddb-unavailable",{errorInfo:Re}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(or){if(or)return Mt.getId()}),[4,Promise.all([Lt,rn])];case 1:return mn=nr.sent(),Mn=mn[0],Qt=mn[1],Tt("js",new Date),(fr={}).origin="firebase",fr.update=!0,Tn=fr,null!=Qt&&(Tn.firebase_id=Qt),Tt(ot.CONFIG,Mn.measurementId,Tn),[2,Mn.measurementId]}})})}(Re,ct,nn,ht,Cn),{app:Re,logEvent:function(mn,Mn,Qt){(function(Re,ht,bt,Mt,Tt){return ft(this,void 0,void 0,function(){var Lt,rn;return oe(this,function(mn){switch(mn.label){case 0:return Tt&&Tt.global?(Re(ot.EVENT,bt,Mt),[2]):[3,1];case 1:return[4,ht];case 2:Lt=mn.sent(),rn=J(J({},Mt),{send_to:Lt}),Re(ot.EVENT,bt,rn),mn.label=3;case 3:return[2]}})})})(pn,wt[bt],mn,Mn,Qt).catch(function(Tn){return _t.error(Tn)})},setCurrentScreen:function(mn,Mn){(function(Re,ht,bt,Mt){return ft(this,void 0,void 0,function(){var Tt;return oe(this,function(Lt){switch(Lt.label){case 0:return Mt&&Mt.global?(Re(ot.SET,{screen_name:bt}),[2,Promise.resolve()]):[3,1];case 1:return[4,ht];case 2:Tt=Lt.sent(),Re(ot.CONFIG,Tt,{update:!0,screen_name:bt}),Lt.label=3;case 3:return[2]}})})})(pn,wt[bt],mn,Mn).catch(function(Qt){return _t.error(Qt)})},setUserId:function(mn,Mn){(function(Re,ht,bt,Mt){return ft(this,void 0,void 0,function(){var Tt;return oe(this,function(Lt){switch(Lt.label){case 0:return Mt&&Mt.global?(Re(ot.SET,{user_id:bt}),[2,Promise.resolve()]):[3,1];case 1:return[4,ht];case 2:Tt=Lt.sent(),Re(ot.CONFIG,Tt,{update:!0,user_id:bt}),Lt.label=3;case 3:return[2]}})})})(pn,wt[bt],mn,Mn).catch(function(Qt){return _t.error(Qt)})},setUserProperties:function(mn,Mn){(function(Re,ht,bt,Mt){return ft(this,void 0,void 0,function(){var Tt,Lt,rn,mn,Mn;return oe(this,function(Qt){switch(Qt.label){case 0:if(!Mt||!Mt.global)return[3,1];for(Tt={},Lt=0,rn=Object.keys(bt);Lt<rn.length;Lt++)Tt["user_properties."+(mn=rn[Lt])]=bt[mn];return Re(ot.SET,Tt),[2,Promise.resolve()];case 1:return[4,ht];case 2:Mn=Qt.sent(),Re(ot.CONFIG,Mn,{update:!0,user_properties:bt}),Qt.label=3;case 3:return[2]}})})})(pn,wt[bt],mn,Mn).catch(function(Qt){return _t.error(Qt)})},setAnalyticsCollectionEnabled:function(mn){(function(Re,ht){return ft(this,void 0,void 0,function(){var bt;return oe(this,function(Mt){switch(Mt.label){case 0:return[4,Re];case 1:return bt=Mt.sent(),window["ga-disable-"+bt]=!ht,[2]}})})})(wt[bt],mn).catch(function(Mn){return _t.error(Mn)})},INTERNAL:{delete:function(){return delete wt[bt],Promise.resolve()}}}}var Qn="analytics";function ei(Re){Re.INTERNAL.registerComponent(new K.Component(Qn,function(bt){return ar(bt.getProvider("app").getImmediate(),bt.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:Yn,EventName:Vt,isSupported:bi})),Re.INTERNAL.registerComponent(new K.Component("analytics-internal",function(bt){try{return{logEvent:bt.getProvider(Qn).getImmediate().logEvent}}catch(Tt){throw sn.create("interop-component-reg-failed",{reason:Tt})}},"PRIVATE")),Re.registerVersion("@firebase/analytics","0.6.0")}function bi(){return ft(this,void 0,void 0,function(){return oe(this,function(bt){switch(bt.label){case 0:if((0,B.isBrowserExtension)())return[2,!1];if(!(0,B.areCookiesEnabled)())return[2,!1];if(!(0,B.isIndexedDBAvailable)())return[2,!1];bt.label=1;case 1:return bt.trys.push([1,3,,4]),[4,(0,B.validateIndexedDBOpenable)()];case 2:return[2,bt.sent()];case 3:return bt.sent(),[2,!1];case 4:return[2]}})})}ei(R.default)},6279:(On,We,ge)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});var Le,Ut,M=ge(7796),A=ge(1704),J=ge(1100),mt=ge(300),st=((Le={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Le["bad-app-name"]="Illegal App name: '{$appName}",Le["duplicate-app"]="Firebase App named '{$appName}' already exists",Le["app-deleted"]="Firebase App named '{$appName}' already deleted",Le["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Le["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Le),tt=new A.ErrorFactory("app","Firebase",st),ft="@firebase/app",Nt="[DEFAULT]",at=((Ut={})[ft]="fire-core",Ut["@firebase/analytics"]="fire-analytics",Ut["@firebase/auth"]="fire-auth",Ut["@firebase/database"]="fire-rtdb",Ut["@firebase/functions"]="fire-fn",Ut["@firebase/installations"]="fire-iid",Ut["@firebase/messaging"]="fire-fcm",Ut["@firebase/performance"]="fire-perf",Ut["@firebase/remote-config"]="fire-rc",Ut["@firebase/storage"]="fire-gcs",Ut["@firebase/firestore"]="fire-fst",Ut["fire-js"]="fire-js",Ut["firebase-wrapper"]="fire-js-all",Ut),Ot=new mt.Logger("@firebase/app"),R=function(){function Vt(Ze,et,vt){var It,Ct,_t=this;this.firebase_=vt,this.isDeleted_=!1,this.name_=et.name,this.automaticDataCollectionEnabled_=et.automaticDataCollectionEnabled||!1,this.options_=A.deepCopy(Ze),this.container=new J.ComponentContainer(et.name),this._addComponent(new J.Component("app",function(){return _t},"PUBLIC"));try{for(var xt=M.__values(this.firebase_.INTERNAL.components.values()),an=xt.next();!an.done;an=xt.next())this._addComponent(an.value)}catch(pt){It={error:pt}}finally{try{an&&!an.done&&(Ct=xt.return)&&Ct.call(xt)}finally{if(It)throw It.error}}}return Object.defineProperty(Vt.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Ze){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Ze},enumerable:!1,configurable:!0}),Object.defineProperty(Vt.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Vt.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Vt.prototype.delete=function(){var Ze=this;return new Promise(function(et){Ze.checkDestroyed_(),et()}).then(function(){return Ze.firebase_.INTERNAL.removeApp(Ze.name_),Promise.all(Ze.container.getProviders().map(function(et){return et.delete()}))}).then(function(){Ze.isDeleted_=!0})},Vt.prototype._getService=function(Ze,et){return void 0===et&&(et=Nt),this.checkDestroyed_(),this.container.getProvider(Ze).getImmediate({identifier:et})},Vt.prototype._removeServiceInstance=function(Ze,et){void 0===et&&(et=Nt),this.container.getProvider(Ze).clearInstance(et)},Vt.prototype._addComponent=function(Ze){try{this.container.addComponent(Ze)}catch(et){Ot.debug("Component "+Ze.name+" failed to register with FirebaseApp "+this.name,et)}},Vt.prototype._addOrOverwriteComponent=function(Ze){this.container.addOrOverwriteComponent(Ze)},Vt.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw tt.create("app-deleted",{appName:this.name_})},Vt}();R.prototype.name&&R.prototype.options||R.prototype.delete||console.log("dc");var K=function B(){var Vt=function(Vt){var Ze={},et=new Map,vt={__esModule:!0,initializeApp:function(Ht,Wt){void 0===Wt&&(Wt={}),("object"!=typeof Wt||null===Wt)&&(Wt={name:Wt});var An=Wt;void 0===An.name&&(An.name=Nt);var sn=An.name;if("string"!=typeof sn||!sn)throw tt.create("bad-app-name",{appName:String(sn)});if(A.contains(Ze,sn))throw tt.create("duplicate-app",{appName:sn});var Vn=new Vt(Ht,An,vt);return Ze[sn]=Vn,Vn},app:Ct,registerVersion:function(Ht,Wt,on){var An,sn=null!==(An=at[Ht])&&void 0!==An?An:Ht;on&&(sn+="-"+on);var Vn=sn.match(/\s|\//),sr=Wt.match(/\s|\//);if(Vn||sr){var zn=['Unable to register library "'+sn+'" with version "'+Wt+'":'];return Vn&&zn.push('library name "'+sn+'" contains illegal characters (whitespace or "/")'),Vn&&sr&&zn.push("and"),sr&&zn.push('version name "'+Wt+'" contains illegal characters (whitespace or "/")'),void Ot.warn(zn.join(" "))}an(new J.Component(sn+"-version",function(){return{library:sn,version:Wt}},"VERSION"))},setLogLevel:mt.setLogLevel,onLog:function(Ht,Wt){if(null!==Ht&&"function"!=typeof Ht)throw tt.create("invalid-log-argument",{appName:name});mt.setUserLogHandler(Ht,Wt)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:an,removeApp:function(Ht){delete Ze[Ht]},components:et,useAsService:function(Ht,Wt){return"serverAuth"===Wt?null:Wt}}};function Ct(Ht){if(!A.contains(Ze,Ht=Ht||Nt))throw tt.create("no-app",{appName:Ht});return Ze[Ht]}function an(Ht){var Wt,on,An=Ht.name;if(et.has(An))return Ot.debug("There were multiple attempts to register component "+An+"."),"PUBLIC"===Ht.type?vt[An]:null;if(et.set(An,Ht),"PUBLIC"===Ht.type){var sn=function(ur){if(void 0===ur&&(ur=Ct()),"function"!=typeof ur[An])throw tt.create("invalid-app-argument",{appName:An});return ur[An]()};void 0!==Ht.serviceProps&&A.deepExtend(sn,Ht.serviceProps),vt[An]=sn,Vt.prototype[An]=function(){for(var ur=[],Rr=0;Rr<arguments.length;Rr++)ur[Rr]=arguments[Rr];return this._getService.bind(this,An).apply(this,Ht.multipleInstances?ur:[])}}try{for(var Vn=M.__values(Object.keys(Ze)),sr=Vn.next();!sr.done;sr=Vn.next())Ze[sr.value]._addComponent(Ht)}catch(ur){Wt={error:ur}}finally{try{sr&&!sr.done&&(on=Vn.return)&&on.call(Vn)}finally{if(Wt)throw Wt.error}}return"PUBLIC"===Ht.type?vt[An]:null}return vt.default=vt,Object.defineProperty(vt,"apps",{get:function(){return Object.keys(Ze).map(function(Ht){return Ze[Ht]})}}),Ct.App=Vt,vt}(R);return Vt.INTERNAL=M.__assign(M.__assign({},Vt.INTERNAL),{createFirebaseNamespace:B,extendNamespace:function(et){A.deepExtend(Vt,et)},createSubscribe:A.createSubscribe,ErrorFactory:A.ErrorFactory,deepExtend:A.deepExtend}),Vt}(),k=function(){function Vt(Ze){this.container=Ze}return Vt.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(et){if(function(Vt){var Ze=Vt.getComponent();return"VERSION"===(null==Ze?void 0:Ze.type)}(et)){var vt=et.getImmediate();return vt.library+"/"+vt.version}return null}).filter(function(et){return et}).join(" ")},Vt}();if(A.isBrowser()&&void 0!==self.firebase){Ot.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Gt=self.firebase.SDK_VERSION;Gt&&Gt.indexOf("LITE")>=0&&Ot.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ve=K.initializeApp;K.initializeApp=function(){for(var Vt=[],Ze=0;Ze<arguments.length;Ze++)Vt[Ze]=arguments[Ze];return A.isNode()&&Ot.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),ve.apply(void 0,Vt)};var Vt,ot=K;(Vt=ot).INTERNAL.registerComponent(new J.Component("platform-logger",function(et){return new k(et)},"PRIVATE")),Vt.registerVersion(ft,"0.6.11",undefined),Vt.registerVersion("fire-js",""),We.default=ot,We.firebase=ot},6003:(On,We,ge)=>{(function(){var A,M=ge(6279).default,J="function"==typeof Object.defineProperties?Object.defineProperty:function(n,u,g){n!=Array.prototype&&n!=Object.prototype&&(n[u]=g.value)},Le=function(n){n=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,n];for(var u=0;u<n.length;++u){var g=n[u];if(g&&g.Math==Math)return g}return globalThis}(this);function tt(n){var u=0;return function(){return u<n.length?{done:!1,value:n[u++]}:{done:!0}}}function ft(n){var u="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];return u?u.call(n):{next:tt(n)}}!function(n,u){if(u){var g=Le;n=n.split(".");for(var S=0;S<n.length-1;S++){var j=n[S];j in g||(g[j]={}),g=g[j]}(u=u(S=g[n=n[n.length-1]]))!=S&&null!=u&&J(g,n,{configurable:!0,writable:!0,value:u})}}("Promise",function(n){function u(pe){this.b=0,this.c=void 0,this.a=[];var Ke=this.f();try{pe(Ke.resolve,Ke.reject)}catch(zt){Ke.reject(zt)}}function g(){this.a=null}function S(pe){return pe instanceof u?pe:new u(function(Ke){Ke(pe)})}if(n)return n;g.prototype.b=function(pe){if(null==this.a){this.a=[];var Ke=this;this.c(function(){Ke.g()})}this.a.push(pe)};var j=Le.setTimeout;g.prototype.c=function(pe){j(pe,0)},g.prototype.g=function(){for(;this.a&&this.a.length;){var pe=this.a;this.a=[];for(var Ke=0;Ke<pe.length;++Ke){var zt=pe[Ke];pe[Ke]=null;try{zt()}catch(hn){this.f(hn)}}}this.a=null},g.prototype.f=function(pe){this.c(function(){throw pe})},u.prototype.f=function(){function pe(hn){return function(Sr){zt||(zt=!0,hn.call(Ke,Sr))}}var Ke=this,zt=!1;return{resolve:pe(this.v),reject:pe(this.g)}},u.prototype.v=function(pe){if(pe===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(pe instanceof u)this.o(pe);else{e:switch(typeof pe){case"object":var Ke=null!=pe;break e;case"function":Ke=!0;break e;default:Ke=!1}Ke?this.m(pe):this.h(pe)}},u.prototype.m=function(pe){var Ke=void 0;try{Ke=pe.then}catch(zt){return void this.g(zt)}"function"==typeof Ke?this.u(Ke,pe):this.h(pe)},u.prototype.g=function(pe){this.i(2,pe)},u.prototype.h=function(pe){this.i(1,pe)},u.prototype.i=function(pe,Ke){if(0!=this.b)throw Error("Cannot settle("+pe+", "+Ke+"): Promise already settled in state"+this.b);this.b=pe,this.c=Ke,this.l()},u.prototype.l=function(){if(null!=this.a){for(var pe=0;pe<this.a.length;++pe)re.b(this.a[pe]);this.a=null}};var re=new g;return u.prototype.o=function(pe){var Ke=this.f();pe.Pa(Ke.resolve,Ke.reject)},u.prototype.u=function(pe,Ke){var zt=this.f();try{pe.call(Ke,zt.resolve,zt.reject)}catch(hn){zt.reject(hn)}},u.prototype.then=function(pe,Ke){function zt(si,ls){return"function"==typeof si?function(pc){try{hn(si(pc))}catch(Of){Sr(Of)}}:ls}var hn,Sr,Yr=new u(function(si,ls){hn=si,Sr=ls});return this.Pa(zt(pe,hn),zt(Ke,Sr)),Yr},u.prototype.catch=function(pe){return this.then(void 0,pe)},u.prototype.Pa=function(pe,Ke){function zt(){switch(hn.b){case 1:pe(hn.c);break;case 2:Ke(hn.c);break;default:throw Error("Unexpected state: "+hn.b)}}var hn=this;null==this.a?re.b(zt):this.a.push(zt)},u.resolve=S,u.reject=function(pe){return new u(function(Ke,zt){zt(pe)})},u.race=function(pe){return new u(function(Ke,zt){for(var hn=ft(pe),Sr=hn.next();!Sr.done;Sr=hn.next())S(Sr.value).Pa(Ke,zt)})},u.all=function(pe){var Ke=ft(pe),zt=Ke.next();return zt.done?S([]):new u(function(hn,Sr){function Yr(pc){return function(Of){si[pc]=Of,0==--ls&&hn(si)}}var si=[],ls=0;do{si.push(void 0),ls++,S(zt.value).Pa(Yr(si.length-1),Sr),zt=Ke.next()}while(!zt.done)})},u});var oe=oe||{},z=this||self,Ie=/^[\w+/_-]+[=]{0,2}$/,xe=null;function we(){}function ke(n){var u=typeof n;if("object"==u){if(!n)return"null";if(n instanceof Array)return"array";if(n instanceof Object)return u;var g=Object.prototype.toString.call(n);if("[object Window]"==g)return"object";if("[object Array]"==g||"number"==typeof n.length&&void 0!==n.splice&&void 0!==n.propertyIsEnumerable&&!n.propertyIsEnumerable("splice"))return"array";if("[object Function]"==g||void 0!==n.call&&void 0!==n.propertyIsEnumerable&&!n.propertyIsEnumerable("call"))return"function"}else if("function"==u&&void 0===n.call)return"object";return u}function gt(n){var u=ke(n);return"array"==u||"object"==u&&"number"==typeof n.length}function Me(n){return"function"==ke(n)}function Pe(n){var u=typeof n;return"object"==u&&null!=n||"function"==u}function ut(n){return Object.prototype.hasOwnProperty.call(n,ze)&&n[ze]||(n[ze]=++rt)}var ze="closure_uid_"+(1e9*Math.random()>>>0),rt=0;function Ut(n,u,g){return n.call.apply(n.bind,arguments)}function Nt(n,u,g){if(!n)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,S),n.apply(u,j)}}return function(){return n.apply(u,arguments)}}function at(n,u,g){return(at=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ut:Nt).apply(null,arguments)}function Ot(n,u){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),n.apply(this,S)}}var R=Date.now||function(){return+new Date};function x(n,u){function g(){}g.prototype=u.prototype,n.$a=u.prototype,n.prototype=new g,n.prototype.constructor=n}function C(n,u,g){this.code=K+n,this.message=u||k[n]||"",this.a=g||null}function B(n){var u=n&&n.code;return u?new C(u.substring(K.length),n.message,n.serverResponse):null}x(C,Error),C.prototype.w=function(){var n={code:this.code,message:this.message};return this.a&&(n.serverResponse=this.a),n},C.prototype.toJSON=function(){return this.w()};var Gt,K="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},ae={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function ue(n){for(var u in ae)if(ae[u].id===n)return{firebaseEndpoint:(n=ae[u]).Sa,secureTokenEndpoint:n.Ya,identityPlatformEndpoint:n.Va};return null}function ve(n){if(!n)return!1;try{return!!n.$goog_Thenable}catch(u){return!1}}function ot(n){if(Error.captureStackTrace)Error.captureStackTrace(this,ot);else{var u=Error().stack;u&&(this.stack=u)}n&&(this.message=String(n))}function Vt(n,u){for(var g="",S=(n=n.split("%s")).length-1,j=0;j<S;j++)g+=n[j]+(j<u.length?u[j]:"%s");ot.call(this,g+n[S])}function Ze(n,u){throw new Vt("Failure"+(n?": "+n:""),Array.prototype.slice.call(arguments,1))}function et(n,u){this.c=n,this.f=u,this.b=0,this.a=null}function vt(n,u){n.f(u),100>n.b&&(n.b++,u.next=n.a,n.a=u)}function It(){this.b=this.a=null}Gt=ue("__EID__")?"__EID__":void 0,x(ot,Error),ot.prototype.name="CustomError",x(Vt,ot),Vt.prototype.name="AssertionError",et.prototype.get=function(){if(0<this.b){this.b--;var n=this.a;this.a=n.next,n.next=null}else n=this.c();return n};var Ct=new et(function(){return new xt},function(n){n.reset()});function _t(){var n=ui,u=null;return n.a&&(u=n.a,n.a=n.a.next,n.a||(n.b=null),u.next=null),u}function xt(){this.next=this.b=this.a=null}It.prototype.add=function(n,u){var g=Ct.get();g.set(n,u),this.b?this.b.next=g:this.a=g,this.b=g},xt.prototype.set=function(n,u){this.a=n,this.b=u,this.next=null},xt.prototype.reset=function(){this.next=this.b=this.a=null};var an=Array.prototype.indexOf?function(n,u){return Array.prototype.indexOf.call(n,u,void 0)}:function(n,u){if("string"==typeof n)return"string"!=typeof u||1!=u.length?-1:n.indexOf(u,0);for(var g=0;g<n.length;g++)if(g in n&&n[g]===u)return g;return-1},qe=Array.prototype.forEach?function(n,u,g){Array.prototype.forEach.call(n,u,g)}:function(n,u,g){for(var S=n.length,j="string"==typeof n?n.split(""):n,re=0;re<S;re++)re in j&&u.call(g,j[re],re,n)},Kt=Array.prototype.filter?function(n,u){return Array.prototype.filter.call(n,u,void 0)}:function(n,u){for(var g=n.length,S=[],j=0,re="string"==typeof n?n.split(""):n,pe=0;pe<g;pe++)if(pe in re){var Ke=re[pe];u.call(void 0,Ke,pe,n)&&(S[j++]=Ke)}return S},Ht=Array.prototype.map?function(n,u){return Array.prototype.map.call(n,u,void 0)}:function(n,u){for(var g=n.length,S=Array(g),j="string"==typeof n?n.split(""):n,re=0;re<g;re++)re in j&&(S[re]=u.call(void 0,j[re],re,n));return S},Wt=Array.prototype.some?function(n,u){return Array.prototype.some.call(n,u,void 0)}:function(n,u){for(var g=n.length,S="string"==typeof n?n.split(""):n,j=0;j<g;j++)if(j in S&&u.call(void 0,S[j],j,n))return!0;return!1};function An(n,u){return 0<=an(n,u)}function sn(n,u){var g;return(g=0<=(u=an(n,u)))&&Array.prototype.splice.call(n,u,1),g}function Vn(n,u){!function(n,u){for(var g="string"==typeof n?n.split(""):n,S=n.length-1;0<=S;--S)S in g&&u.call(void 0,g[S],S,n)}(n,function(S,j){u.call(void 0,S,j,n)&&Array.prototype.splice.call(n,j,1)})}function sr(n){return Array.prototype.concat.apply([],arguments)}function zn(n){var u=n.length;if(0<u){for(var g=Array(u),S=0;S<u;S++)g[S]=n[S];return g}return[]}var wt,ur=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]},Rr=/&/g,Vr=/</g,yr=/>/g,Jn=/"/g,Hn=/'/g,Rn=/\x00/g,nt=/[\x00&<>"']/;function ye(n,u){return-1!=n.indexOf(u)}function Ve(n,u){return n<u?-1:n>u?1:0}e:{var ct=z.navigator;if(ct){var nn=ct.userAgent;if(nn){wt=nn;break e}}wt=""}function tn(n){return ye(wt,n)}function En(n,u){for(var g in n)u.call(void 0,n[g],g,n)}function Cn(n){for(var u in n)return!1;return!0}function pn(n){var g,u={};for(g in n)u[g]=n[g];return u}var _r="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nn(n,u){for(var g,S,j=1;j<arguments.length;j++){for(g in S=arguments[j])n[g]=S[g];for(var re=0;re<_r.length;re++)g=_r[re],Object.prototype.hasOwnProperty.call(S,g)&&(n[g]=S[g])}}function Ir(n,u){e:{try{var g=n&&n.ownerDocument,S=g&&(g.defaultView||g.parentWindow);if((S=S||z).Element&&S.Location){var j=S;break e}}catch(pe){}j=null}if(j&&void 0!==j[u]&&(!n||!(n instanceof j[u])&&(n instanceof j.Location||n instanceof j.Element))){if(Pe(n))try{var re=n.constructor.displayName||n.constructor.name||Object.prototype.toString.call(n)}catch(pe){re="<object could not be stringified>"}else re=void 0===n?"undefined":null===n?"null":typeof n;Ze("Argument is not a %s (or a non-Element, non-Location mock); got: %s",u,re)}}function Yn(n,u){this.a=n===Nr&&u||"",this.b=ar}function ir(n){return n instanceof Yn&&n.constructor===Yn&&n.b===ar?n.a:(Ze("expected object of type Const, got '"+n+"'"),"type_error:Const")}Yn.prototype.sa=!0,Yn.prototype.ra=function(){return this.a},Yn.prototype.toString=function(){return"Const{"+this.a+"}"};var ar={},Nr={},_i=new Yn(Nr,"");function Qn(n,u){this.a=n===Mt&&u||"",this.b=bt}function ei(n){return n instanceof Qn&&n.constructor===Qn&&n.b===bt?n.a:(Ze("expected object of type TrustedResourceUrl, got '"+n+"' of type "+ke(n)),"type_error:TrustedResourceUrl")}function bi(n,u){var g=ir(n);if(!ht.test(g))throw Error("Invalid TrustedResourceUrl format: "+g);return n=g.replace(Re,function(S,j){if(!Object.prototype.hasOwnProperty.call(u,j))throw Error('Found marker, "'+j+'", in format string, "'+g+'", but no valid label mapping found in args: '+JSON.stringify(u));return(S=u[j])instanceof Yn?ir(S):encodeURIComponent(String(S))}),new Qn(Mt,n)}Qn.prototype.sa=!0,Qn.prototype.ra=function(){return this.a.toString()},Qn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Re=/%{(\w+)}/g,ht=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,bt={},Mt={};function Tt(n,u){this.a=n===Qt&&u||"",this.b=Mn}function Lt(n){return n instanceof Tt&&n.constructor===Tt&&n.b===Mn?n.a:(Ze("expected object of type SafeUrl, got '"+n+"' of type "+ke(n)),"type_error:SafeUrl")}Tt.prototype.sa=!0,Tt.prototype.ra=function(){return this.a.toString()},Tt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var rn=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function mn(n){return n instanceof Tt?n:(n="object"==typeof n&&n.sa?n.ra():String(n),rn.test(n)||(n="about:invalid#zClosurez"),new Tt(Qt,n))}var Mn={},Qt={};function Tn(){this.a="",this.b=nr}function fr(n){return n instanceof Tn&&n.constructor===Tn&&n.b===nr?n.a:(Ze("expected object of type SafeHtml, got '"+n+"' of type "+ke(n)),"type_error:SafeHtml")}Tn.prototype.sa=!0,Tn.prototype.ra=function(){return this.a.toString()},Tn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var nr={};function or(n){var u=new Tn;return u.a=n,u}or("<!DOCTYPE html>");var ai=or("");function Ue(n,u){for(var g=n.split("%s"),S="",j=Array.prototype.slice.call(arguments,1);j.length&&1<g.length;)S+=g.shift()+j.shift();return S+g.join("%s")}function Je(n){return nt.test(n)&&(-1!=n.indexOf("&")&&(n=n.replace(Rr,"&amp;")),-1!=n.indexOf("<")&&(n=n.replace(Vr,"&lt;")),-1!=n.indexOf(">")&&(n=n.replace(yr,"&gt;")),-1!=n.indexOf('"')&&(n=n.replace(Jn,"&quot;")),-1!=n.indexOf("'")&&(n=n.replace(Hn,"&#39;")),-1!=n.indexOf("\0")&&(n=n.replace(Rn,"&#0;"))),n}function le(n){return le[" "](n),n}or("<br>"),le[" "]=we;var kn,n,ie=tn("Opera"),se=tn("Trident")||tn("MSIE"),Ne=tn("Edge"),Fe=Ne||se,Ye=tn("Gecko")&&!(ye(wt.toLowerCase(),"webkit")&&!tn("Edge"))&&!(tn("Trident")||tn("MSIE"))&&!tn("Edge"),St=ye(wt.toLowerCase(),"webkit")&&!tn("Edge");function Yt(){var n=z.document;return n?n.documentMode:void 0}e:{var cn="",gn=(n=wt,Ye?/rv:([^\);]+)(\)|;)/.exec(n):Ne?/Edge\/([\d\.]+)/.exec(n):se?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):St?/WebKit\/(\S+)/.exec(n):ie?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(gn&&(cn=gn?gn[1]:""),se){var hr=Yt();if(null!=hr&&hr>parseFloat(cn)){kn=String(hr);break e}}kn=cn}var qn,vn={};function wi(n){return function(n,u){var g=vn;return Object.prototype.hasOwnProperty.call(g,n)?g[n]:g[n]=u()}(n,function(){for(var u=0,g=ur(String(kn)).split("."),S=ur(String(n)).split("."),j=Math.max(g.length,S.length),re=0;0==u&&re<j;re++){var pe=g[re]||"",Ke=S[re]||"";do{if(pe=/(\d*)(\D*)(.*)/.exec(pe)||["","","",""],Ke=/(\d*)(\D*)(.*)/.exec(Ke)||["","","",""],0==pe[0].length&&0==Ke[0].length)break;u=Ve(0==pe[1].length?0:parseInt(pe[1],10),0==Ke[1].length?0:parseInt(Ke[1],10))||Ve(0==pe[2].length,0==Ke[2].length)||Ve(pe[2],Ke[2]),pe=pe[3],Ke=Ke[3]}while(0==u)}return 0<=u})}qn=z.document&&se?Yt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(n){}var ko=!se||9<=Number(qn);function ri(n){var u=document;return"string"==typeof n?u.getElementById(n):n}function pi(n,u){En(u,function(g,S){g&&"object"==typeof g&&g.sa&&(g=g.ra()),"style"==S?n.style.cssText=g:"class"==S?n.className=g:"for"==S?n.htmlFor=g:Pi.hasOwnProperty(S)?n.setAttribute(Pi[S],g):0==S.lastIndexOf("aria-",0)||0==S.lastIndexOf("data-",0)?n.setAttribute(S,g):n[S]=g})}var Mi,Ki,Pi={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function xi(n,u,g){function S(pe){pe&&u.appendChild("string"==typeof pe?n.createTextNode(pe):pe)}for(var j=2;j<g.length;j++){var re=g[j];!gt(re)||Pe(re)&&0<re.nodeType?S(re):qe(mo(re)?zn(re):re,S)}}function Fr(n,u){return u=String(u),"application/xhtml+xml"===n.contentType&&(u=u.toLowerCase()),n.createElement(u)}function mo(n){if(n&&"number"==typeof n.length){if(Pe(n))return"function"==typeof n.item||"string"==typeof n.item;if(Me(n))return"function"==typeof n.item}return!1}function Go(n){z.setTimeout(function(){throw n},0)}function Zi(n,u){Ki||function(){if(z.Promise&&z.Promise.resolve){var n=z.Promise.resolve(void 0);Ki=function(){n.then(Zn)}}else Ki=function(){var u=Zn;!Me(z.setImmediate)||z.Window&&z.Window.prototype&&!tn("Edge")&&z.Window.prototype.setImmediate==z.setImmediate?(Mi||(Mi=function(){var n=z.MessageChannel;if(void 0===n&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!tn("Presto")&&(n=function(){var j=Fr(document,"IFRAME");j.style.display="none",function(n){var u=new Qn(Mt,ir(_i));Ir(n,"HTMLIFrameElement"),n.src=ei(u).toString()}(j),document.documentElement.appendChild(j);var re=j.contentWindow;(j=re.document).open(),j.write(fr(ai)),j.close();var pe="callImmediate"+Math.random(),Ke="file:"==re.location.protocol?"*":re.location.protocol+"//"+re.location.host;j=at(function(zt){("*"==Ke||zt.origin==Ke)&&zt.data==pe&&this.port1.onmessage()},this),re.addEventListener("message",j,!1),this.port1={},this.port2={postMessage:function(){re.postMessage(pe,Ke)}}}),void 0!==n&&!tn("Trident")&&!tn("MSIE")){var u=new n,g={},S=g;return u.port1.onmessage=function(){if(void 0!==g.next){var j=(g=g.next).Fb;g.Fb=null,j()}},function(j){S.next={Fb:j},S=S.next,u.port2.postMessage(0)}}return function(j){z.setTimeout(j,0)}}()),Mi(u)):z.setImmediate(u)}}(),Pr||(Ki(),Pr=!0),ui.add(n,u)}var Pr=!1,ui=new It;function Zn(){for(var n;n=_t();){try{n.a.call(n.b)}catch(u){Go(u)}vt(Ct,n)}Pr=!1}function Un(n,u){if(this.a=Si,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,n!=we)try{var g=this;n.call(u,function(S){Wi(g,Qi,S)},function(S){if(!(S instanceof co))try{throw S instanceof Error?S:Error("Promise rejected.")}catch(j){}Wi(g,Cr,S)})}catch(S){Wi(this,Cr,S)}}var Si=0,Qi=2,Cr=3;function gi(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}gi.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Wo=new et(function(){return new gi},function(n){n.reset()});function Ji(n,u,g){var S=Wo.get();return S.g=n,S.b=u,S.f=g,S}function Ln(n){if(n instanceof Un)return n;var u=new Un(we);return Wi(u,Qi,n),u}function Xn(n){return new Un(function(u,g){g(n)})}function Xo(n,u,g){to(n,u,g,null)||Zi(Ot(u,n))}function Do(n){return new Un(function(u){var g=n.length,S=[];if(g)for(var j=function(Ke,zt,hn){g--,S[Ke]=zt?{Ob:!0,value:hn}:{Ob:!1,reason:hn},0==g&&u(S)},re=0;re<n.length;re++)Xo(n[re],Ot(j,re,!0),Ot(j,re,!1));else u(S)})}function eo(n,u){if(n.a==Si)if(n.c){var g=n.c;if(g.b){for(var S=0,j=null,re=null,pe=g.b;pe&&(pe.c||(S++,pe.a==n&&(j=pe),!(j&&1<S)));pe=pe.next)j||(re=pe);j&&(g.a==Si&&1==S?eo(g,u):(re?((S=re).next==g.f&&(g.f=S),S.next=S.next.next):Lo(g),fs(g,j,Cr,u)))}n.c=null}else Wi(n,Cr,u)}function oi(n,u){n.b||n.a!=Qi&&n.a!=Cr||Fo(n),n.f?n.f.next=u:n.b=u,n.f=u}function rr(n,u,g,S){var j=Ji(null,null,null);return j.a=new Un(function(re,pe){j.g=u?function(Ke){try{var zt=u.call(S,Ke);re(zt)}catch(hn){pe(hn)}}:re,j.b=g?function(Ke){try{var zt=g.call(S,Ke);void 0===zt&&Ke instanceof co?pe(Ke):re(zt)}catch(hn){pe(hn)}}:pe}),j.a.c=n,oi(n,j),j.a}function Wi(n,u,g){n.a==Si&&(n===g&&(u=Cr,g=new TypeError("Promise cannot resolve to itself")),n.a=1,to(g,n.Zc,n.$c,n)||(n.i=g,n.a=u,n.c=null,Fo(n),u!=Cr||g instanceof co||function(n,u){n.g=!0,Zi(function(){n.g&&qo.call(null,u)})}(n,g)))}function to(n,u,g,S){if(n instanceof Un)return oi(n,Ji(u||we,g||null,S)),!0;if(ve(n))return n.then(u,g,S),!0;if(Pe(n))try{var j=n.then;if(Me(j))return function(n,u,g,S,j){function re(zt){Ke||(Ke=!0,S.call(j,zt))}var Ke=!1;try{u.call(n,function(zt){Ke||(Ke=!0,g.call(j,zt))},re)}catch(zt){re(zt)}}(n,j,u,g,S),!0}catch(re){return g.call(S,re),!0}return!1}function Fo(n){n.h||(n.h=!0,Zi(n.fc,n))}function Lo(n){var u=null;return n.b&&(n.b=(u=n.b).next,u.next=null),n.b||(n.f=null),u}function fs(n,u,g,S){if(g==Cr&&u.b&&!u.c)for(;n&&n.g;n=n.c)n.g=!1;if(u.a)u.a.c=null,Ys(u,g,S);else try{u.c?u.g.call(u.f):Ys(u,g,S)}catch(j){qo.call(null,j)}vt(Wo,u)}function Ys(n,u,g){u==Qi?n.g.call(n.f,g):n.b&&n.b.call(n.f,g)}Un.prototype.then=function(n,u,g){return rr(this,Me(n)?n:null,Me(u)?u:null,g)},Un.prototype.$goog_Thenable=!0,(A=Un.prototype).na=function(n,u){return(n=Ji(n,n,u)).c=!0,oi(this,n),this},A.s=function(n,u){return rr(this,null,n,u)},A.cancel=function(n){if(this.a==Si){var u=new co(n);Zi(function(){eo(this,u)},this)}},A.Zc=function(n){this.a=Si,Wi(this,Qi,n)},A.$c=function(n){this.a=Si,Wi(this,Cr,n)},A.fc=function(){for(var n;n=Lo(this);)fs(this,n,this.a,this.i);this.h=!1};var qo=Go;function co(n){ot.call(this,n)}function Zo(){0!=Xi&&(Q[ut(this)]=this),this.xa=this.xa,this.oa=this.oa}x(co,ot),co.prototype.name="cancel";var Xi=0,Q={};function G(n){if(!n.xa&&(n.xa=!0,n.Da(),0!=Xi)){var u=ut(n);if(0!=Xi&&n.oa&&0<n.oa.length)throw Error(n+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Q[u]}}Zo.prototype.xa=!1,Zo.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var he=Object.freeze||function(n){return n},Ae=!se||9<=Number(qn),He=se&&!wi("9"),it=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var n=!1,u=Object.defineProperty({},"passive",{get:function(){n=!0}});try{z.addEventListener("test",we,u),z.removeEventListener("test",we,u)}catch(g){}return n}();function Pt(n,u){this.type=n,this.b=this.target=u,this.defaultPrevented=!1}function qt(n,u){if(Pt.call(this,n?n.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,n){var g=this.type=n.type,S=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.b=u,u=n.relatedTarget){if(Ye){e:{try{le(u.nodeName);var j=!0;break e}catch(re){}j=!1}j||(u=null)}}else"mouseover"==g?u=n.fromElement:"mouseout"==g&&(u=n.toElement);this.relatedTarget=u,S?(this.clientX=void 0!==S.clientX?S.clientX:S.pageX,this.clientY=void 0!==S.clientY?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:$t[n.pointerType]||"",this.a=n,n.defaultPrevented&&this.preventDefault()}}Pt.prototype.preventDefault=function(){this.defaultPrevented=!0},x(qt,Pt);var $t=he({2:"touch",3:"pen",4:"mouse"});qt.prototype.preventDefault=function(){qt.$a.preventDefault.call(this);var n=this.a;if(n.preventDefault)n.preventDefault();else if(n.returnValue=!1,He)try{(n.ctrlKey||112<=n.keyCode&&123>=n.keyCode)&&(n.keyCode=-1)}catch(u){}},qt.prototype.g=function(){return this.a};var ln="closure_listenable_"+(1e6*Math.random()|0),wn=0;function q(n,u,g,S,j){this.listener=n,this.proxy=null,this.src=u,this.type=g,this.capture=!!S,this.Ua=j,this.key=++wn,this.va=this.Oa=!1}function te(n){n.va=!0,n.listener=null,n.proxy=null,n.src=null,n.Ua=null}function $(n){this.src=n,this.a={},this.b=0}function fe(n,u){var g=u.type;g in n.a&&sn(n.a[g],u)&&(te(u),0==n.a[g].length&&(delete n.a[g],n.b--))}function je(n,u,g,S){for(var j=0;j<n.length;++j){var re=n[j];if(!re.va&&re.listener==u&&re.capture==!!g&&re.Ua==S)return j}return-1}$.prototype.add=function(n,u,g,S,j){var re=n.toString();(n=this.a[re])||(n=this.a[re]=[],this.b++);var pe=je(n,u,S,j);return-1<pe?(u=n[pe],g||(u.Oa=!1)):((u=new q(u,this.src,re,!!S,j)).Oa=g,n.push(u)),u};var Dt="closure_lm_"+(1e6*Math.random()|0),Xt={};function yn(n,u,g,S,j){if(S&&S.once)cr(n,u,g,S,j);else if(Array.isArray(u))for(var re=0;re<u.length;re++)yn(n,u[re],g,S,j);else g=Or(g),n&&n[ln]?Ao(n,u,g,Pe(S)?!!S.capture:!!S,j):wr(n,u,g,!1,S,j)}function wr(n,u,g,S,j,re){if(!u)throw Error("Invalid event type");var pe=Pe(j)?!!j.capture:!!j,Ke=Br(n);if(Ke||(n[Dt]=Ke=new $(n)),!(g=Ke.add(u,g,S,pe,re)).proxy)if(S=function(){var n=hs,u=Ae?function(g){return n.call(u.src,u.listener,g)}:function(g){if(!(g=n.call(u.src,u.listener,g)))return g};return u}(),g.proxy=S,S.src=n,S.listener=g,n.addEventListener)it||(j=pe),void 0===j&&(j=!1),n.addEventListener(u.toString(),S,j);else if(n.attachEvent)n.attachEvent(Ei(u.toString()),S);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(S)}}function cr(n,u,g,S,j){if(Array.isArray(u))for(var re=0;re<u.length;re++)cr(n,u[re],g,S,j);else g=Or(g),n&&n[ln]?ha(n,u,g,Pe(S)?!!S.capture:!!S,j):wr(n,u,g,!0,S,j)}function Gn(n,u,g,S,j){if(Array.isArray(u))for(var re=0;re<u.length;re++)Gn(n,u[re],g,S,j);else S=Pe(S)?!!S.capture:!!S,g=Or(g),n&&n[ln]?(n=n.v,(u=String(u).toString())in n.a&&-1<(g=je(re=n.a[u],g,S,j))&&(te(re[g]),Array.prototype.splice.call(re,g,1),0==re.length&&(delete n.a[u],n.b--))):n&&(n=Br(n))&&(u=n.a[u.toString()],n=-1,u&&(n=je(u,g,S,j)),(g=-1<n?u[n]:null)&&Sn(g))}function Sn(n){if("number"!=typeof n&&n&&!n.va){var u=n.src;if(u&&u[ln])fe(u.v,n);else{var g=n.type,S=n.proxy;u.removeEventListener?u.removeEventListener(g,S,n.capture):u.detachEvent?u.detachEvent(Ei(g),S):u.addListener&&u.removeListener&&u.removeListener(S),(g=Br(u))?(fe(g,n),0==g.b&&(g.src=null,u[Dt]=null)):te(n)}}}function Ei(n){return n in Xt?Xt[n]:Xt[n]="on"+n}function Ii(n,u,g,S){var j=!0;if((n=Br(n))&&(u=n.a[u.toString()]))for(u=u.concat(),n=0;n<u.length;n++){var re=u[n];re&&re.capture==g&&!re.va&&(re=ti(re,S),j=j&&!1!==re)}return j}function ti(n,u){var g=n.listener,S=n.Ua||n.src;return n.Oa&&Sn(n),g.call(S,u)}function hs(n,u){if(n.va)return!0;if(!Ae){if(!u)e:{u=["window","event"];for(var g=z,S=0;S<u.length;S++)if(null==(g=g[u[S]])){u=null;break e}u=g}if(u=new qt(S=u,this),g=!0,!(0>S.keyCode||null!=S.returnValue)){e:{var j=!1;if(0==S.keyCode)try{S.keyCode=-1;break e}catch(pe){j=!0}(j||null==S.returnValue)&&(S.returnValue=!0)}for(S=[],j=u.b;j;j=j.parentNode)S.push(j);for(n=n.type,j=S.length-1;0<=j;j--){u.b=S[j];var re=Ii(S[j],n,!0,u);g=g&&re}for(j=0;j<S.length;j++)u.b=S[j],re=Ii(S[j],n,!1,u),g=g&&re}return g}return ti(n,new qt(u,this))}function Br(n){return(n=n[Dt])instanceof $?n:null}var dr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Or(n){return Me(n)?n:(n[dr]||(n[dr]=function(u){return n.handleEvent(u)}),n[dr])}function zr(){Zo.call(this),this.v=new $(this),this.$b=this,this.fb=null}function Ao(n,u,g,S,j){n.v.add(String(u),g,!1,S,j)}function ha(n,u,g,S,j){n.v.add(String(u),g,!0,S,j)}function Bi(n,u,g,S){if(!(u=n.v.a[String(u)]))return!0;u=u.concat();for(var j=!0,re=0;re<u.length;++re){var pe=u[re];if(pe&&!pe.va&&pe.capture==g){var Ke=pe.listener,zt=pe.Ua||pe.src;pe.Oa&&fe(n.v,pe),j=!1!==Ke.call(zt,S)&&j}}return j&&!S.defaultPrevented}function Ls(n,u,g){if(Me(n))g&&(n=at(n,g));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=at(n.handleEvent,n)}return 2147483647<Number(u)?-1:z.setTimeout(n,u||0)}function Xr(n){var u=null;return new Un(function(g,S){-1==(u=Ls(function(){g(void 0)},n))&&S(Error("Failed to schedule timer."))}).s(function(g){throw z.clearTimeout(u),g})}function Bn(n){if(n.V&&"function"==typeof n.V)return n.V();if("string"==typeof n)return n.split("");if(gt(n)){for(var u=[],g=n.length,S=0;S<g;S++)u.push(n[S]);return u}for(S in u=[],g=0,n)u[g++]=n[S];return u}function Pa(n){if(n.Y&&"function"==typeof n.Y)return n.Y();if(!n.V||"function"!=typeof n.V){if(gt(n)||"string"==typeof n){var u=[];n=n.length;for(var g=0;g<n;g++)u.push(g);return u}for(var S in u=[],g=0,n)u[g++]=S;return u}}function no(n,u){this.b={},this.a=[],this.c=0;var g=arguments.length;if(1<g){if(g%2)throw Error("Uneven number of arguments");for(var S=0;S<g;S+=2)this.set(arguments[S],arguments[S+1])}else if(n)if(n instanceof no)for(g=n.Y(),S=0;S<g.length;S++)this.set(g[S],n.get(g[S]));else for(S in n)this.set(S,n[S])}function Di(n){if(n.c!=n.a.length){for(var u=0,g=0;u<n.a.length;){var S=n.a[u];Ro(n.b,S)&&(n.a[g++]=S),u++}n.a.length=g}if(n.c!=n.a.length){var j={};for(g=u=0;u<n.a.length;)Ro(j,S=n.a[u])||(n.a[g++]=S,j[S]=1),u++;n.a.length=g}}function Ro(n,u){return Object.prototype.hasOwnProperty.call(n,u)}x(zr,Zo),zr.prototype[ln]=!0,zr.prototype.addEventListener=function(n,u,g,S){yn(this,n,u,g,S)},zr.prototype.removeEventListener=function(n,u,g,S){Gn(this,n,u,g,S)},zr.prototype.dispatchEvent=function(n){var u,g=this.fb;if(g)for(u=[];g;g=g.fb)u.push(g);g=this.$b;var S=n.type||n;if("string"==typeof n)n=new Pt(n,g);else if(n instanceof Pt)n.target=n.target||g;else{var j=n;Nn(n=new Pt(S,g),j)}if(j=!0,u)for(var re=u.length-1;0<=re;re--){var pe=n.b=u[re];j=Bi(pe,S,!0,n)&&j}if(j=Bi(pe=n.b=g,S,!0,n)&&j,j=Bi(pe,S,!1,n)&&j,u)for(re=0;re<u.length;re++)j=Bi(pe=n.b=u[re],S,!1,n)&&j;return j},zr.prototype.Da=function(){if(zr.$a.Da.call(this),this.v){var g,n=this.v;for(g in n.a){for(var S=n.a[g],j=0;j<S.length;j++)te(S[j]);delete n.a[g],n.b--}}this.fb=null},(A=no.prototype).V=function(){Di(this);for(var n=[],u=0;u<this.a.length;u++)n.push(this.b[this.a[u]]);return n},A.Y=function(){return Di(this),this.a.concat()},A.clear=function(){this.b={},this.c=this.a.length=0},A.get=function(n,u){return Ro(this.b,n)?this.b[n]:u},A.set=function(n,u){Ro(this.b,n)||(this.c++,this.a.push(n)),this.b[n]=u},A.forEach=function(n,u){for(var g=this.Y(),S=0;S<g.length;S++){var j=g[S],re=this.get(j);n.call(u,re,j,this)}};var da=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Zt(n,u){var g;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,n instanceof Zt?(this.i=void 0!==u?u:n.i,br(this,n.f),this.l=n.l,this.a=n.a,_o(this,n.g),this.c=n.c,Lr(this,js(n.b)),this.h=n.h):n&&(g=String(n).match(da))?(this.i=!!u,br(this,g[1]||"",!0),this.l=ds(g[2]||""),this.a=ds(g[3]||"",!0),_o(this,g[4]),this.c=ds(g[5]||"",!0),Lr(this,g[6]||"",!0),this.h=ds(g[7]||"")):(this.i=!!u,this.b=new lo(null,this.i))}function br(n,u,g){n.f=g?ds(u,!0):u,n.f&&(n.f=n.f.replace(/:$/,""))}function _o(n,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);n.g=u}else n.g=null}function Lr(n,u,g){u instanceof lo?(n.b=u,function(n,u){u&&!n.f&&(Fi(n),n.c=null,n.a.forEach(function(g,S){var j=S.toLowerCase();S!=j&&(No(this,S),Kr(this,j,g))},n)),n.f=u}(n.b,n.i)):(g||(u=es(u,ki)),n.b=new lo(u,n.i))}function $n(n,u,g){n.b.set(u,g)}function jr(n,u){return n.b.get(u)}function vi(n){return n instanceof Zt?new Zt(n):new Zt(n,void 0)}function wo(n,u,g,S){var j=new Zt(null,void 0);return n&&br(j,n),u&&(j.a=u),g&&_o(j,g),S&&(j.c=S),j}function ds(n,u){return n?u?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function es(n,u,g){return"string"==typeof n?(n=encodeURI(n).replace(u,pa),g&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function pa(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Zt.prototype.toString=function(){var n=[],u=this.f;u&&n.push(es(u,Xs,!0),":");var g=this.a;return(g||"file"==u)&&(n.push("//"),(u=this.l)&&n.push(es(u,Xs,!0),"@"),n.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(g=this.g)&&n.push(":",String(g))),(g=this.c)&&(this.a&&"/"!=g.charAt(0)&&n.push("/"),n.push(es(g,"/"==g.charAt(0)?Ai:$o,!0))),(g=this.b.toString())&&n.push("?",g),(g=this.h)&&n.push("#",es(g,bo)),n.join("")},Zt.prototype.resolve=function(n){var u=new Zt(this),g=!!n.f;g?br(u,n.f):g=!!n.l,g?u.l=n.l:g=!!n.a,g?u.a=n.a:g=null!=n.g;var S=n.c;if(g)_o(u,n.g);else if(g=!!n.c){if("/"!=S.charAt(0))if(this.a&&!this.c)S="/"+S;else{var j=u.c.lastIndexOf("/");-1!=j&&(S=u.c.substr(0,j+1)+S)}if(".."==(j=S)||"."==j)S="";else if(ye(j,"./")||ye(j,"/.")){S=0==j.lastIndexOf("/",0),j=j.split("/");for(var re=[],pe=0;pe<j.length;){var Ke=j[pe++];"."==Ke?S&&pe==j.length&&re.push(""):".."==Ke?((1<re.length||1==re.length&&""!=re[0])&&re.pop(),S&&pe==j.length&&re.push("")):(re.push(Ke),S=!0)}S=re.join("/")}else S=j}return g?u.c=S:g=""!==n.b.toString(),g?Lr(u,js(n.b)):g=!!n.h,g&&(u.h=n.h),u};var Xs=/[#\/\?@]/g,$o=/[#\?:]/g,Ai=/[#\?]/g,ki=/[#\?@]/g,bo=/#/g;function lo(n,u){this.b=this.a=null,this.c=n||null,this.f=!!u}function Fi(n){n.a||(n.a=new no,n.b=0,n.c&&function(n,u){if(n){n=n.split("&");for(var g=0;g<n.length;g++){var S=n[g].indexOf("="),j=null;if(0<=S){var re=n[g].substring(0,S);j=n[g].substring(S+1)}else re=n[g];u(re,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}(n.c,function(u,g){n.add(decodeURIComponent(u.replace(/\+/g," ")),g)}))}function zo(n){var u=Pa(n);if(void 0===u)throw Error("Keys are undefined");var g=new lo(null,void 0);n=Bn(n);for(var S=0;S<u.length;S++){var j=u[S],re=n[S];Array.isArray(re)?Kr(g,j,re):g.add(j,re)}return g}function No(n,u){Fi(n),u=dn(n,u),Ro(n.a.b,u)&&(n.c=null,n.b-=n.a.get(u).length,Ro((n=n.a).b,u)&&(delete n.b[u],n.c--,n.a.length>2*n.c&&Di(n)))}function Us(n,u){return Fi(n),u=dn(n,u),Ro(n.a.b,u)}function Kr(n,u,g){No(n,u),0<g.length&&(n.c=null,n.a.set(dn(n,u),zn(g)),n.b+=g.length)}function js(n){var u=new lo;return u.c=n.c,n.a&&(u.a=new no(n.a),u.b=n.b),u}function dn(n,u){return u=String(u),n.f&&(u=u.toLowerCase()),u}function Zs(n){var u=[];return Ko(new Js,n,u),u.join("")}function Js(){}function Ko(n,u,g){if(null==u)g.push("null");else{if("object"==typeof u){if(Array.isArray(u)){var S=u;u=S.length,g.push("[");for(var j="",re=0;re<u;re++)g.push(j),Ko(n,S[re],g),j=",";return void g.push("]")}if(!(u instanceof String||u instanceof Number||u instanceof Boolean)){for(S in g.push("{"),j="",u)Object.prototype.hasOwnProperty.call(u,S)&&"function"!=typeof(re=u[S])&&(g.push(j),ts(S,g),g.push(":"),Ko(n,re,g),j=",");return void g.push("}")}u=u.valueOf()}switch(typeof u){case"string":ts(u,g);break;case"number":g.push(isFinite(u)&&!isNaN(u)?String(u):"null");break;case"boolean":g.push(String(u));break;case"function":g.push("null");break;default:throw Error("Unknown type: "+typeof u)}}}(A=lo.prototype).add=function(n,u){Fi(this),this.c=null,n=dn(this,n);var g=this.a.get(n);return g||this.a.set(n,g=[]),g.push(u),this.b+=1,this},A.clear=function(){this.a=this.c=null,this.b=0},A.forEach=function(n,u){Fi(this),this.a.forEach(function(g,S){qe(g,function(j){n.call(u,j,S,this)},this)},this)},A.Y=function(){Fi(this);for(var n=this.a.V(),u=this.a.Y(),g=[],S=0;S<u.length;S++)for(var j=n[S],re=0;re<j.length;re++)g.push(u[S]);return g},A.V=function(n){Fi(this);var u=[];if("string"==typeof n)Us(this,n)&&(u=sr(u,this.a.get(dn(this,n))));else{n=this.a.V();for(var g=0;g<n.length;g++)u=sr(u,n[g])}return u},A.set=function(n,u){return Fi(this),this.c=null,Us(this,n=dn(this,n))&&(this.b-=this.a.get(n).length),this.a.set(n,[u]),this.b+=1,this},A.get=function(n,u){return n&&0<(n=this.V(n)).length?String(n[0]):u},A.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var n=[],u=this.a.Y(),g=0;g<u.length;g++){var S=u[g],j=encodeURIComponent(String(S));S=this.V(S);for(var re=0;re<S.length;re++){var pe=j;""!==S[re]&&(pe+="="+encodeURIComponent(String(S[re]))),n.push(pe)}}return this.c=n.join("&")};var ro={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ma=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ts(n,u){u.push('"',n.replace(Ma,function(g){var S=ro[g];return S||(S="\\u"+(65536|g.charCodeAt(0)).toString(16).substr(1),ro[g]=S),S}),'"')}function ci(){var n=Ci();return se&&!!qn&&11==qn||/Edge\/\d+/.test(n)}function m(){return z.window&&z.window.location.href||self&&self.location&&self.location.href||""}function L(n,u){u=u||z.window;var g="about:blank";n&&(g=Lt(mn(n))),u.location.href=g}function X(n,u){var S,g=[];for(S in n)S in u?typeof n[S]!=typeof u[S]?g.push(S):"object"==typeof n[S]&&null!=n[S]&&null!=u[S]?0<X(n[S],u[S]).length&&g.push(S):n[S]!==u[S]&&g.push(S):g.push(S);for(S in u)S in n||g.push(S);return g}function $e(n){return!!((n=(n||Ci()).toLowerCase()).match(/android/)||n.match(/webos/)||n.match(/iphone|ipad|ipod/)||n.match(/blackberry/)||n.match(/windows phone/)||n.match(/iemobile/))}function Et(n){n=n||z.window;try{n.close()}catch(u){}}function fn(n,u,g){var S=Math.floor(1e9*Math.random()).toString();u=u||500,g=g||600;var j=(window.screen.availHeight-g)/2,re=(window.screen.availWidth-u)/2;for(pe in u={width:u,height:g,top:0<j?j:0,left:0<re?re:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},g=Ci().toLowerCase(),S&&(u.target=S,ye(g,"crios/")&&(u.target="_blank")),ns(Ci())==eu&&(n=n||"http://localhost",u.scrollbars=!0),g=n||"",(n=u)||(n={}),S=window,u=g instanceof Tt?g:mn(void 0!==g.href?g.href:String(g)),g=n.target||g.target,j=[],n)switch(pe){case"width":case"height":case"top":case"left":j.push(pe+"="+n[pe]);break;case"target":case"noopener":case"noreferrer":break;default:j.push(pe+"="+(n[pe]?1:0))}var pe=j.join(",");if((tn("iPhone")&&!tn("iPod")&&!tn("iPad")||tn("iPad")||tn("iPod"))&&S.navigator&&S.navigator.standalone&&g&&"_self"!=g?(Ir(pe=Fr(document,"A"),"HTMLAnchorElement"),u instanceof Tt||u instanceof Tt||(u="object"==typeof u&&u.sa?u.ra():String(u),rn.test(u)||(u="about:invalid#zClosurez"),u=new Tt(Qt,u)),pe.href=Lt(u),pe.setAttribute("target",g),n.noreferrer&&pe.setAttribute("rel","noreferrer"),(n=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,S,1),pe.dispatchEvent(n),pe={}):n.noreferrer?(pe=S.open("",g,pe),n=Lt(u),pe&&(Fe&&ye(n,";")&&(n="'"+n.replace(/'/g,"%27")+"'"),pe.opener=null,n=or('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Je(n)+'">'),S=pe.document)&&(S.write(fr(n)),S.close())):(pe=S.open(Lt(u),g,pe))&&n.noopener&&(pe.opener=null),pe)try{pe.focus()}catch(Ke){}return pe}var Ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ri=/^[^@]+@[^@]+$/;function fo(){var n=null;return new Un(function(u){"complete"==z.document.readyState?u():(n=function(){u()},cr(window,"load",n))}).s(function(u){throw Gn(window,"load",n),u})}function Ts(n){return n=n||Ci(),!("file:"!==l()&&"ionic:"!==l()||!n.toLowerCase().match(/iphone|ipad|ipod|android/))}function Oo(){var n=z.window;try{return!(!n||n==n.top)}catch(u){return!1}}function Zr(){return void 0!==z.WorkerGlobalScope&&"function"==typeof z.importScripts}function mi(){return M.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":M.INTERNAL.hasOwnProperty("node")?"Node":Zr()?"Worker":"Browser"}function ps(){var n=mi();return"ReactNative"===n||"Node"===n}var eu="Firefox";function ns(n){var u=n.toLowerCase();return ye(u,"opera/")||ye(u,"opr/")||ye(u,"opios/")?"Opera":ye(u,"iemobile")?"IEMobile":ye(u,"msie")||ye(u,"trident/")?"IE":ye(u,"edge/")?"Edge":ye(u,"firefox/")?eu:ye(u,"silk/")?"Silk":ye(u,"blackberry")?"Blackberry":ye(u,"webos")?"Webos":!ye(u,"safari/")||ye(u,"chrome/")||ye(u,"crios/")||ye(u,"android")?!ye(u,"chrome/")&&!ye(u,"crios/")||ye(u,"edge/")?ye(u,"android")?"Android":(n=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==n.length?n[1]:"Other":"Chrome":"Safari"}var ka={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Ds(n,u){u=u||[];var j,g=[],S={};for(j in ka)S[ka[j]]=!0;for(j=0;j<u.length;j++)void 0!==S[u[j]]&&(delete S[u[j]],g.push(u[j]));return g.sort(),(u=g).length||(u=["FirebaseCore-web"]),"Browser"===(g=mi())?g=ns(S=Ci()):"Worker"===g&&(g=ns(S=Ci())+"-"+g),g+"/JsCore/"+n+"/"+u.join(",")}function Ci(){return z.navigator&&z.navigator.userAgent||""}function li(n,u){n=n.split("."),u=u||z;for(var g=0;g<n.length&&"object"==typeof u&&null!=u;g++)u=u[n[g]];return g!=n.length&&(u=void 0),u}function ga(){try{var n=z.localStorage,u=Z();if(n)return n.setItem(u,"1"),n.removeItem(u),!ci()||!!z.indexedDB}catch(g){return Zr()&&!!z.indexedDB}return!1}function As(){return(v()||"chrome-extension:"===l()||Ts())&&!ps()&&ga()&&!Zr()}function v(){return"http:"===l()||"https:"===l()}function l(){return z.location&&z.location.protocol||null}function d(n){return!($e(n=n||Ci())||ns(n)==eu)}function _(n){return void 0===n?null:Zs(n)}function N(n){var g,u={};for(g in n)n.hasOwnProperty(g)&&null!=n[g]&&(u[g]=n[g]);return u}function F(n){if(null!==n)return JSON.parse(n)}function Z(n){return n||Math.floor(1e9*Math.random()).toString()}function ce(n){return!("Safari"==ns(n=n||Ci())||n.toLowerCase().match(/iphone|ipad|ipod/))}function Ee(){var n=z.___jsl;if(n&&n.H)for(var u in n.H)if(n.H[u].r=n.H[u].r||[],n.H[u].L=n.H[u].L||[],n.H[u].r=n.H[u].L.concat(),n.CP)for(var g=0;g<n.CP.length;g++)n.CP[g]=null}function be(n,u){if(n>u)throw Error("Short delay should be less than long delay!");this.a=n,this.c=u,n=Ci(),u=mi(),this.b=$e(n)||"ReactNative"===u}function lt(){var n=z.document;return!n||void 0===n.visibilityState||"visible"==n.visibilityState}function jt(n){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n)}function un(n){try{var u=new Date(parseInt(n,10));if(!isNaN(u.getTime())&&!/[^0-9]/.test(n))return u.toUTCString()}catch(g){}return null}function In(){return!(!li("fireauth.oauthhelper",z)&&!li("fireauth.iframe",z))}be.prototype.get=function(){var n=z.navigator;return!n||"boolean"!=typeof n.onLine||!v()&&"chrome-extension:"!==l()&&void 0===n.connection||n.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var io,Mr={};function yi(n){Mr[n]||(Mr[n]=!0,jt(n))}try{var rs={};Object.defineProperty(rs,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(rs,"abcd",{configurable:!0,enumerable:!0,value:2}),io=2==rs.abcd}catch(n){io=!1}function Pn(n,u,g){io?Object.defineProperty(n,u,{configurable:!0,enumerable:!0,value:g}):n[u]=g}function Ni(n,u){if(u)for(var g in u)u.hasOwnProperty(g)&&Pn(n,g,u[g])}function ho(n){var u={};return Ni(u,n),u}function Yu(n){var u=n;if("object"==typeof n&&null!=n)for(var g in u="length"in n?[]:{},n)Pn(u,g,Yu(n[g]));return u}function Xu(n){var u=n&&(n[Cc]?"phone":null);if(!(u&&n&&n[va]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");Pn(this,"uid",n[va]),Pn(this,"displayName",n[Vs]||null);var g=null;n[qi]&&(g=new Date(n[qi]).toUTCString()),Pn(this,"enrollmentTime",g),Pn(this,"factorId",u)}function Ic(n){try{var u=new ma(n)}catch(g){u=null}return u}Xu.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Vs="displayName",qi="enrolledAt",va="mfaEnrollmentId",Cc="phoneInfo";function ma(n){Xu.call(this,n),Pn(this,"phoneNumber",n[Cc])}function bu(n){var u={},g=n[Kc],S=n[nu],j=n[ru];if(n=Ic(n[Bs]),!j||j!=tu&&j!=ta&&!g||j==ta&&!S||j==Qo&&!n)throw Error("Invalid checkActionCode response!");j==ta?(u[Rs]=g||null,u[Po]=g||null,u[$i]=S):(u[Rs]=S||null,u[Po]=S||null,u[$i]=g||null),u[Jr]=n||null,Pn(this,rf,j),Pn(this,Vf,Yu(u))}x(ma,Xu),ma.prototype.w=function(){var n=ma.$a.w.call(this);return n.phoneNumber=this.phoneNumber,n};var Qo="REVERT_SECOND_FACTOR_ADDITION",tu="EMAIL_SIGNIN",ta="VERIFY_AND_CHANGE_EMAIL",Kc="email",Bs="mfaInfo",nu="newEmail",ru="requestType",$i="email",Rs="fromEmail",Jr="multiFactorInfo",Po="previousEmail",Vf="data",rf="operation";function Hi(n){var u=jr(n=vi(n),Hs)||null,g=jr(n,Gr)||null,S=jr(n,Fa)||null;if(S=S&&La[S]||null,!u||!g||!S)throw new C("argument-error",Hs+", "+Gr+"and "+Fa+" are required in a valid action code URL.");Ni(this,{apiKey:u,operation:S,code:g,continueUrl:jr(n,po)||null,languageCode:jr(n,is)||null,tenantId:jr(n,Tc)||null})}var Hs="apiKey",Gr="oobCode",po="continueUrl",is="languageCode",Fa="mode",Tc="tenantId",La={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Qo,signIn:tu,verifyAndChangeEmail:ta,verifyEmail:"VERIFY_EMAIL"};function of(n){try{return new Hi(n)}catch(u){return null}}function Eu(n){var u=n[na];if(void 0===u)throw new C("missing-continue-uri");if("string"!=typeof u||"string"==typeof u&&!u.length)throw new C("invalid-continue-uri");this.h=u,this.b=this.a=null,this.g=!1;var g=n[ml];if(g&&"object"==typeof g){u=g[iu];var S=g[ja];if(g=g[zi],"string"==typeof u&&u.length){if(this.a=u,void 0!==S&&"boolean"!=typeof S)throw new C("argument-error",ja+" property must be a boolean when specified.");if(this.g=!!S,void 0!==g&&("string"!=typeof g||"string"==typeof g&&!g.length))throw new C("argument-error",zi+" property must be a non empty string when specified.");this.b=g||null}else{if(void 0!==u)throw new C("argument-error",iu+" property must be a non empty string when specified.");if(void 0!==S||void 0!==g)throw new C("missing-android-pkg-name")}}else if(void 0!==g)throw new C("argument-error",ml+" property must be a non null object when specified.");if(this.f=null,(u=n[Iu])&&"object"==typeof u){if("string"==typeof(u=u[Uo])&&u.length)this.f=u;else if(void 0!==u)throw new C("argument-error",Uo+" property must be a non empty string when specified.")}else if(void 0!==u)throw new C("argument-error",Iu+" property must be a non null object when specified.");if(void 0!==(u=n[yl])&&"boolean"!=typeof u)throw new C("argument-error",yl+" property must be a boolean when specified.");if(this.c=!!u,void 0!==(n=n[Ua])&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new C("argument-error",Ua+" property must be a non empty string when specified.");this.i=n||null}var ml="android",Ua="dynamicLinkDomain",yl="handleCodeInApp",Iu="iOS",na="url",ja="installApp",zi="minimumVersion",iu="packageName",Uo="bundleId";function ou(n){var u={};for(var g in u.continueUrl=n.h,u.canHandleCodeInApp=n.c,(u.androidPackageName=n.a)&&(u.androidMinimumVersion=n.b,u.androidInstallApp=n.g),u.iOSBundleId=n.f,u.dynamicLinkDomain=n.i,u)null===u[g]&&delete u[g];return u}var jo=null;function Gs(n){var u=_l(n);if(!(u&&u.sub&&u.iss&&u.aud&&u.exp))throw Error("Invalid JWT");this.g=n,this.c=u.exp,this.h=u.sub,R(),this.a=u.provider_id||u.firebase&&u.firebase.sign_in_provider||null,this.f=u.firebase&&u.firebase.tenant||null,this.b=!!u.is_anonymous||"anonymous"==this.a}function Tu(n){try{return new Gs(n)}catch(u){return null}}function _l(n){if(!n||3!=(n=n.split(".")).length)return null;for(var u=(4-(n=n[1]).length%4)%4,g=0;g<u;g++)n+=".";try{return JSON.parse(function(n){var u="";return function(n,u){function g(zt){for(;S<n.length;){var hn=n.charAt(S++),Sr=jo[hn];if(null!=Sr)return Sr;if(!/^[\s\xa0]*$/.test(hn))throw Error("Unknown base64 encoding at char: "+hn)}return zt}!function(){if(!jo){jo={};for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],g=0;5>g;g++)for(var S=n.concat(u[g].split("")),j=0;j<S.length;j++){var re=S[j];void 0===jo[re]&&(jo[re]=j)}}}();for(var S=0;;){var j=g(-1),re=g(0),pe=g(64),Ke=g(64);if(64===Ke&&-1===j)break;u(j<<2|re>>4),64!=pe&&(u(re<<4&240|pe>>2),64!=Ke&&u(pe<<6&192|Ke))}}(n,function(g){u+=String.fromCharCode(g)}),u}(n))}catch(S){}return null}Gs.prototype.S=function(){return this.f},Gs.prototype.i=function(){return this.b},Gs.prototype.toString=function(){return this.g};var wl="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Su=["client_id","response_type","scope","redirect_uri","state"],Ba={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Su},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Su},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Su},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:wl},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Du(n){for(var u in Ba)if(Ba[u].fa==n)return Ba[u];return null}function Vo(n){var u={};u["facebook.com"]=go,u["google.com"]=Qc,u["github.com"]=bl,u["twitter.com"]=El;var g=n&&n[Ha];try{if(g)return u[g]?new u[g](n):new vs(n);if(void 0!==n[Au])return new ya(n)}catch(S){}return null}var Au="idToken",Ha="providerId";function ya(n){var u=n[Ha];if(!u&&n[Au]){var g=Tu(n[Au]);g&&g.a&&(u=g.a)}if(!u)throw Error("Invalid additional user info!");("anonymous"==u||"custom"==u)&&(u=null),g=!1,void 0!==n.isNewUser?g=!!n.isNewUser:"identitytoolkit#SignupNewUserResponse"===n.kind&&(g=!0),Pn(this,"providerId",u),Pn(this,"isNewUser",g)}function vs(n){ya.call(this,n),Pn(this,"profile",Yu((n=F(n.rawUserInfo||"{}"))||{}))}function go(n){if(vs.call(this,n),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function bl(n){if(vs.call(this,n),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Pn(this,"username",this.profile&&this.profile.login||null)}function Qc(n){if(vs.call(this,n),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function El(n){if(vs.call(this,n),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Pn(this,"username",n.screenName||null)}function Dc(n){var u=vi(n),g=jr(u,"link"),S=jr(vi(g),"link");return u=jr(u,"deep_link_id"),jr(vi(u),"link")||u||S||g||n}function Ga(n,u){if(!n&&!u)throw new C("internal-error","Internal assert: no raw session string available");if(n&&u)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=n||null,this.b=u||null,this.type=this.a?Wa:su}x(vs,ya),x(go,vs),x(bl,vs),x(Qc,vs),x(El,vs);var Wa="enroll",su="signin";function au(){}function Ws(n,u){return n.then(function(g){if(g[Es]){var S=Tu(g[Es]);if(!S||u!=S.h)throw new C("user-mismatch");return g}throw new C("user-mismatch")}).s(function(g){throw g&&g.code&&g.code==K+"user-not-found"?new C("user-mismatch"):g})}function _a(n,u){if(!u)throw new C("internal-error","failed to construct a credential");this.a=u,Pn(this,"providerId",n),Pn(this,"signInMethod",n)}function ms(n){return{pendingToken:n.a,requestUri:"http://localhost"}}function Zu(n){if(n&&n.providerId&&n.signInMethod&&0==n.providerId.indexOf("saml.")&&n.pendingToken)try{return new _a(n.providerId,n.pendingToken)}catch(u){}return null}function os(n,u,g){if(this.a=null,u.idToken||u.accessToken)u.idToken&&Pn(this,"idToken",u.idToken),u.accessToken&&Pn(this,"accessToken",u.accessToken),u.nonce&&!u.pendingToken&&Pn(this,"nonce",u.nonce),u.pendingToken&&(this.a=u.pendingToken);else{if(!u.oauthToken||!u.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");Pn(this,"accessToken",u.oauthToken),Pn(this,"secret",u.oauthTokenSecret)}Pn(this,"providerId",n),Pn(this,"signInMethod",g)}function Ac(n){var u={};return n.idToken&&(u.id_token=n.idToken),n.accessToken&&(u.access_token=n.accessToken),n.secret&&(u.oauth_token_secret=n.secret),u.providerId=n.providerId,n.nonce&&!n.a&&(u.nonce=n.nonce),u={postBody:zo(u).toString(),requestUri:"http://localhost"},n.a&&(delete u.postBody,u.pendingToken=n.a),u}function Ru(n){if(n&&n.providerId&&n.signInMethod){var u={idToken:n.oauthIdToken,accessToken:n.oauthTokenSecret?null:n.oauthAccessToken,oauthTokenSecret:n.oauthTokenSecret,oauthToken:n.oauthTokenSecret&&n.oauthAccessToken,nonce:n.nonce,pendingToken:n.pendingToken};try{return new os(n.providerId,u,n.signInMethod)}catch(g){}}return null}function qs(n,u){this.Pc=u||[],Ni(this,{providerId:n,isOAuthProvider:!0}),this.Hb={},this.ob=(Du(n)||{}).Ja||null,this.nb=null}function Nu(n){if("string"!=typeof n||0!=n.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');qs.call(this,n,[])}function Io(n){qs.call(this,n,Su),this.a=[]}function Ti(){Io.call(this,"facebook.com")}function Rc(n){if(!n)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=n;return Pe(n)&&(u=n.accessToken),(new Ti).credential({accessToken:u})}function Wr(){Io.call(this,"github.com")}function Ou(n){if(!n)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=n;return Pe(n)&&(u=n.accessToken),(new Wr).credential({accessToken:u})}function wa(){Io.call(this,"google.com"),this.Ca("profile")}function ys(n,u){var g=n;return Pe(n)&&(g=n.idToken,u=n.accessToken),(new wa).credential({idToken:g,accessToken:u})}function $s(){qs.call(this,"twitter.com",wl)}function Ju(n,u){var g=n;if(Pe(g)||(g={oauthToken:n,oauthTokenSecret:u}),!g.oauthToken||!g.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new os("twitter.com",g,"twitter.com")}function Ns(n,u,g){this.a=n,this.f=u,Pn(this,"providerId","password"),Pn(this,"signInMethod",g===_s.EMAIL_LINK_SIGN_IN_METHOD?_s.EMAIL_LINK_SIGN_IN_METHOD:_s.EMAIL_PASSWORD_SIGN_IN_METHOD)}function uu(n){return n&&n.email&&n.password?new Ns(n.email,n.password,n.signInMethod):null}function _s(){Ni(this,{providerId:"password",isOAuthProvider:!1})}function qa(n,u){if(!(u=Os(u)))throw new C("argument-error","Invalid email link!");return new Ns(n,u.code,_s.EMAIL_LINK_SIGN_IN_METHOD)}function Os(n){return(n=of(n=Dc(n)))&&n.operation===tu?n:null}function Ps(n){if(!(n.cb&&n.bb||n.La&&n.ea))throw new C("internal-error");this.a=n,Pn(this,"providerId","phone"),this.fa="phone",Pn(this,"signInMethod","phone")}function ra(n){if(n&&"phone"===n.providerId&&(n.verificationId&&n.verificationCode||n.temporaryProof&&n.phoneNumber)){var u={};return qe(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(g){n[g]&&(u[g]=n[g])}),new Ps(u)}return null}function Nc(n){return n.a.La&&n.a.ea?{temporaryProof:n.a.La,phoneNumber:n.a.ea}:{sessionInfo:n.a.cb,code:n.a.bb}}function Co(n){try{this.a=n||M.auth()}catch(u){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ni(this,{providerId:"phone",isOAuthProvider:!1})}function ia(n,u){if(!n)throw new C("missing-verification-id");if(!u)throw new C("missing-verification-code");return new Ps({cb:n,bb:u})}function ws(n){if(n.temporaryProof&&n.phoneNumber)return new Ps({La:n.temporaryProof,ea:n.phoneNumber});var u=n&&n.providerId;if(!u||"password"===u)return null;var g=n&&n.oauthAccessToken,S=n&&n.oauthTokenSecret,j=n&&n.nonce,re=n&&n.oauthIdToken,pe=n&&n.pendingToken;try{switch(u){case"google.com":return ys(re,g);case"facebook.com":return Rc(g);case"github.com":return Ou(g);case"twitter.com":return Ju(g,S);default:return g||S||re||pe?pe?0==u.indexOf("saml.")?new _a(u,pe):new os(u,{pendingToken:pe,idToken:n.oauthIdToken,accessToken:n.oauthAccessToken},u):new Io(u).credential({idToken:re,accessToken:g,rawNonce:j}):null}}catch(Ke){return null}}function ec(n){if(!n.isOAuthProvider)throw new C("invalid-oauth-provider")}function xs(n,u,g,S,j,re,pe){if(this.c=n,this.b=u||null,this.g=g||null,this.f=S||null,this.i=re||null,this.h=pe||null,this.a=j||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function Yc(n){return(n=n||{}).type?new xs(n.type,n.eventId,n.urlResponse,n.sessionId,n.error&&B(n.error),n.postBody,n.tenantId):null}function Pu(){this.b=null,this.a=[]}Ga.prototype.Ha=function(){return Ln(this.a?this.a:this.b)},Ga.prototype.w=function(){return this.type==Wa?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},au.prototype.ja=function(){},au.prototype.b=function(){},au.prototype.c=function(){},au.prototype.w=function(){},_a.prototype.ja=function(n){return Ml(n,ms(this))},_a.prototype.b=function(n,u){var g=ms(this);return g.idToken=u,il(n,g)},_a.prototype.c=function(n,u){return Ws(Uc(n,ms(this)),u)},_a.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},os.prototype.ja=function(n){return Ml(n,Ac(this))},os.prototype.b=function(n,u){var g=Ac(this);return g.idToken=u,il(n,g)},os.prototype.c=function(n,u){return Ws(Uc(n,Ac(this)),u)},os.prototype.w=function(){var n={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(n.oauthIdToken=this.idToken),this.accessToken&&(n.oauthAccessToken=this.accessToken),this.secret&&(n.oauthTokenSecret=this.secret),this.nonce&&(n.nonce=this.nonce),this.a&&(n.pendingToken=this.a),n},qs.prototype.Ka=function(n){return this.Hb=pn(n),this},x(Nu,qs),x(Io,qs),Io.prototype.Ca=function(n){return An(this.a,n)||this.a.push(n),this},Io.prototype.Pb=function(){return zn(this.a)},Io.prototype.credential=function(n,u){var g;if(!(g=Pe(n)?{idToken:n.idToken||null,accessToken:n.accessToken||null,nonce:n.rawNonce||null}:{idToken:n||null,accessToken:u||null}).idToken&&!g.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new os(this.providerId,g,this.providerId)},x(Ti,Io),Pn(Ti,"PROVIDER_ID","facebook.com"),Pn(Ti,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),x(Wr,Io),Pn(Wr,"PROVIDER_ID","github.com"),Pn(Wr,"GITHUB_SIGN_IN_METHOD","github.com"),x(wa,Io),Pn(wa,"PROVIDER_ID","google.com"),Pn(wa,"GOOGLE_SIGN_IN_METHOD","google.com"),x($s,qs),Pn($s,"PROVIDER_ID","twitter.com"),Pn($s,"TWITTER_SIGN_IN_METHOD","twitter.com"),Ns.prototype.ja=function(n){return this.signInMethod==_s.EMAIL_LINK_SIGN_IN_METHOD?Er(n,vd,{email:this.a,oobCode:this.f}):Er(n,Tr,{email:this.a,password:this.f})},Ns.prototype.b=function(n,u){return this.signInMethod==_s.EMAIL_LINK_SIGN_IN_METHOD?Er(n,md,{idToken:u,email:this.a,oobCode:this.f}):Er(n,Ge,{idToken:u,email:this.a,password:this.f})},Ns.prototype.c=function(n,u){return Ws(this.ja(n),u)},Ns.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ni(_s,{PROVIDER_ID:"password"}),Ni(_s,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ni(_s,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ps.prototype.ja=function(n){return n.eb(Nc(this))},Ps.prototype.b=function(n,u){var g=Nc(this);return g.idToken=u,Er(n,hi,g)},Ps.prototype.c=function(n,u){var g=Nc(this);return g.operation="REAUTH",Ws(n=Er(n,Ui,g),u)},Ps.prototype.w=function(){var n={providerId:"phone"};return this.a.cb&&(n.verificationId=this.a.cb),this.a.bb&&(n.verificationCode=this.a.bb),this.a.La&&(n.temporaryProof=this.a.La),this.a.ea&&(n.phoneNumber=this.a.ea),n},Co.prototype.eb=function(n,u){var g=this.a.a;return Ln(u.verify()).then(function(S){if("string"!=typeof S)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(u.type){case"recaptcha":var j=Pe(n)?n.session:null,re=Pe(n)?n.phoneNumber:n;return(j&&j.type==Wa?j.Ha().then(function(Ke){return function(n,u){return Er(n,yt,u).then(function(g){return g.phoneSessionInfo.sessionInfo})}(g,{idToken:Ke,phoneEnrollmentInfo:{phoneNumber:re,recaptchaToken:S}})}):j&&j.type==su?j.Ha().then(function(Ke){return function(n,u){return Er(n,Ft,u).then(function(g){return g.phoneResponseInfo.sessionInfo})}(g,{mfaPendingCredential:Ke,mfaEnrollmentId:n.multiFactorHint&&n.multiFactorHint.uid||n.multiFactorUid,phoneSignInInfo:{recaptchaToken:S}})}):function(n,u){return Er(n,de,u)}(g,{phoneNumber:re,recaptchaToken:S})).then(function(Ke){return"function"==typeof u.reset&&u.reset(),Ke},function(Ke){throw"function"==typeof u.reset&&u.reset(),Ke});default:throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Ni(Co,{PROVIDER_ID:"phone"}),Ni(Co,{PHONE_SIGN_IN_METHOD:"phone"}),xs.prototype.getUid=function(){var n=[];return n.push(this.c),this.b&&n.push(this.b),this.f&&n.push(this.f),this.h&&n.push(this.h),n.join("-")},xs.prototype.S=function(){return this.h},xs.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Zc,cu=null;function Xc(n){var u="unauthorized-domain",g=void 0,S=vi(n);n=S.a,"chrome-extension"==(S=S.f)?g=Ue("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",n):"http"==S||"https"==S?g=Ue("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",n):u="operation-not-supported-in-this-environment",C.call(this,u,g)}function $a(n,u,g){C.call(this,n,g),(n=u||{}).Ib&&Pn(this,"email",n.Ib),n.ea&&Pn(this,"phoneNumber",n.ea),n.credential&&Pn(this,"credential",n.credential),n.Yb&&Pn(this,"tenantId",n.Yb)}function Oc(n){if(n.code){var u=n.code||"";0==u.indexOf(K)&&(u=u.substring(K.length));var g={credential:ws(n),Yb:n.tenantId};if(n.email)g.Ib=n.email;else if(n.phoneNumber)g.ea=n.phoneNumber;else if(!g.credential)return new C(u,n.message||void 0);return new $a(u,g,n.message)}return null}function tc(){}function Pc(){}function xu(n){if(!n.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var u=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],g=0;g<u.length;g++){var S=u[g];try{return new ActiveXObject(S),n.f=S}catch(j){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return n.f}function za(){}function Ka(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=at(this.pc,this),this.a.onerror=at(this.Rb,this),this.a.onprogress=at(this.qc,this),this.a.ontimeout=at(this.uc,this)}function Qa(n,u){n.readyState=u,n.onreadystatechange&&n.onreadystatechange()}function Mu(n,u,g){this.reset(n,u,g,void 0,void 0)}function ku(n){this.f=n,this.b=this.c=this.a=null}function oa(n,u){this.name=n,this.value=u}x(Xc,C),x($a,C),$a.prototype.w=function(){var n={code:this.code,message:this.message};this.email&&(n.email=this.email),this.phoneNumber&&(n.phoneNumber=this.phoneNumber),this.tenantId&&(n.tenantId=this.tenantId);var u=this.credential&&this.credential.w();return u&&Nn(n,u),n},$a.prototype.toJSON=function(){return this.w()},tc.prototype.c=null,x(Pc,tc),Pc.prototype.a=function(){var n=xu(this);return n?new ActiveXObject(n):new XMLHttpRequest},Pc.prototype.b=function(){var n={};return xu(this)&&(n[0]=!0,n[1]=!0),n},Zc=new Pc,x(za,tc),za.prototype.a=function(){var n=new XMLHttpRequest;if("withCredentials"in n)return n;if("undefined"!=typeof XDomainRequest)return new Ka;throw Error("Unsupported browser")},za.prototype.b=function(){return{}},(A=Ka.prototype).open=function(n,u,g){if(null!=g&&!g)throw Error("Only async requests are supported.");this.a.open(n,u)},A.send=function(n){if(n){if("string"!=typeof n)throw Error("Only string data is supported");this.a.send(n)}else this.a.send()},A.abort=function(){this.a.abort()},A.setRequestHeader=function(){},A.getResponseHeader=function(n){return"content-type"==n.toLowerCase()?this.a.contentType:""},A.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Qa(this,4)},A.Rb=function(){this.status=500,this.response=this.responseText="",Qa(this,4)},A.uc=function(){this.Rb()},A.qc=function(){this.status=200,Qa(this,1)},A.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Mu.prototype.a=null,Mu.prototype.reset=function(n,u,g,S,j){S||R(),delete this.a},oa.prototype.toString=function(){return this.name};var ba=new oa("SEVERE",1e3),rc=new oa("WARNING",900),Jc=new oa("CONFIG",700),lu=new oa("FINE",500);function Cl(n){return n.c?n.c:n.a?Cl(n.a):(Ze("Root logger has no level set."),null)}ku.prototype.log=function(n,u,g){if(n.value>=Cl(this).value)for(Me(u)&&(u=u()),n=new Mu(n,String(u),this.f),g&&(n.a=g),g=this;g;)g=g.a};var el={},ic=null;function xc(n){var u;if(ic||(ic=new ku(""),el[""]=ic,ic.c=Jc),!(u=el[n])){u=new ku(n);var g=n.lastIndexOf("."),S=n.substr(g+1);(g=xc(n.substr(0,g))).b||(g.b={}),g.b[S]=u,u.a=g,el[n]=u}return u}function Ms(n,u){n&&n.log(lu,u,void 0)}function zs(n){this.f=n}function Ya(n){zr.call(this),this.o=n,this.readyState=Fu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=xc("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}x(zs,tc),zs.prototype.a=function(){return new Ya(this.f)},zs.prototype.b=function(n){return function(){return n}}({}),x(Ya,zr);var Fu=0;function oc(n){n.c.read().then(n.oc.bind(n)).catch(n.Ta.bind(n))}function sc(n,u){u&&n.f&&(n.status=n.f.status,n.statusText=n.f.statusText),n.readyState=4,n.f=null,n.c=null,n.l=null,ac(n)}function ac(n){n.onreadystatechange&&n.onreadystatechange.call(n)}function uc(n){zr.call(this),this.headers=new no,this.O=n||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=T,this.u=this.R=!1}(A=Ya.prototype).open=function(n,u){if(this.readyState!=Fu)throw this.abort(),Error("Error reopening a connection");this.m=n,this.g=u,this.readyState=1,ac(this)},A.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var u={headers:this.i,method:this.m,credentials:void 0,cache:void 0};n&&(u.body=n),this.o.fetch(new Request(this.g,u)).then(this.tc.bind(this),this.Ta.bind(this))},A.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,sc(this,!1)),this.readyState=Fu},A.tc=function(n){this.a&&(this.f=n,this.b||(this.b=n.headers,this.readyState=2,ac(this)),this.a&&(this.readyState=3,ac(this),this.a&&("arraybuffer"===this.responseType?n.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==z.ReadableStream&&"body"in n?(this.response=this.responseText="",this.c=n.body.getReader(),this.l=new TextDecoder,oc(this)):n.text().then(this.sc.bind(this),this.Ta.bind(this)))))},A.oc=function(n){if(this.a){var u=this.l.decode(n.value?n.value:new Uint8Array(0),{stream:!n.done});u&&(this.response=this.responseText+=u),n.done?sc(this,!0):ac(this),3==this.readyState&&oc(this)}},A.sc=function(n){this.a&&(this.response=this.responseText=n,sc(this,!0))},A.rc=function(n){this.a&&(this.response=n,sc(this,!0))},A.Ta=function(n){var u=this.h;u&&u.log(rc,"Failed to fetch url "+this.g,n instanceof Error?n:Error(n)),this.a&&sc(this,!0)},A.setRequestHeader=function(n,u){this.i.append(n,u)},A.getResponseHeader=function(n){return this.b?this.b.get(n.toLowerCase())||"":((n=this.h)&&n.log(rc,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},A.getAllResponseHeaders=function(){if(!this.b){var n=this.h;return n&&n.log(rc,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}n=[];for(var u=this.b.entries(),g=u.next();!g.done;)n.push((g=g.value)[0]+": "+g[1]),g=u.next();return n.join("\r\n")},x(uc,zr);var T="";uc.prototype.b=xc("goog.net.XhrIo");var E=/^https?$/i,y=["POST","PUT"];function ne(n){return"content-type"==n.toLowerCase()}function De(n,u){n.c=!1,n.a&&(n.f=!0,n.a.abort(),n.f=!1),n.h=u,Be(n),xn(n)}function Be(n){n.G||(n.G=!0,n.dispatchEvent("complete"),n.dispatchEvent("error"))}function kt(n){if(n.c&&void 0!==oe)if(n.A[1]&&4==gr(n)&&2==fi(n))Ms(n.b,oo(n,"Local request error detected and ignored"));else if(n.i&&4==gr(n))Ls(n.Ub,0,n);else if(n.dispatchEvent("readystatechange"),4==gr(n)){Ms(n.b,oo(n,"Request complete")),n.c=!1;try{var S,u=fi(n);e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}if(!(S=g)){var j;if(j=0===u){var re=String(n.l).match(da)[1]||null;if(!re&&z.self&&z.self.location){var pe=z.self.location.protocol;re=pe.substr(0,pe.length-1)}j=!E.test(re?re.toLowerCase():"")}S=j}if(S)n.dispatchEvent("complete"),n.dispatchEvent("success");else{try{var Ke=2<gr(n)?n.a.statusText:""}catch(zt){Ms(n.b,"Can not get status: "+zt.message),Ke=""}n.h=Ke+" ["+fi(n)+"]",Be(n)}}finally{xn(n)}}}function xn(n,u){if(n.a){Wn(n);var g=n.a,S=n.A[0]?we:null;n.a=null,n.A=null,u||n.dispatchEvent("ready");try{g.onreadystatechange=S}catch(j){(n=n.b)&&n.log(ba,"Problem encountered resetting onreadystatechange: "+j.message,void 0)}}}function Wn(n){n.a&&n.u&&(n.a.ontimeout=null),n.o&&(z.clearTimeout(n.o),n.o=null)}function gr(n){return n.a?n.a.readyState:0}function fi(n){try{return 2<gr(n)?n.a.status:-1}catch(u){return-1}}function oo(n,u){return u+" ["+n.P+" "+n.l+" "+fi(n)+"]"}function xo(n){var u=Gf;this.g=[],this.u=u,this.o=n||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Yo(n,u,g){n.a=!0,n.c=g,n.f=!u,Bf(n)}function bs(n){if(n.a){if(!n.m)throw new af(n);n.m=!1}}function To(n,u,g,S){n.g.push([u,g,S]),n.a&&Bf(n)}function sa(n){return Wt(n.g,function(u){return Me(u[1])})}function Bf(n){if(n.h&&n.a&&sa(n)){var u=n.h,g=Tl[u];g&&(z.clearTimeout(g.a),delete Tl[u]),n.h=0}n.b&&(n.b.l--,delete n.b),u=n.c;for(var S=g=!1;n.g.length&&!n.i;){var j=n.g.shift(),re=j[0],pe=j[1];if(j=j[2],re=n.f?pe:re)try{var Ke=re.call(j||n.o,u);void 0!==Ke&&(n.f=n.f&&(Ke==u||Ke instanceof Error),n.c=u=Ke),(ve(u)||"function"==typeof z.Promise&&u instanceof z.Promise)&&(S=!0,n.i=!0)}catch(zt){u=zt,n.f=!0,sa(n)||(g=!0)}}n.c=u,S&&(Ke=at(n.v,n,!0),S=at(n.v,n,!1),u instanceof xo?(To(u,Ke,S),u.A=!0):u.then(Ke,S)),g&&(u=new Hf(u),Tl[u.a]=u,n.h=u.a)}function af(){ot.call(this)}function Mc(){ot.call(this)}function Hf(n){this.a=z.setTimeout(at(this.c,this),0),this.b=n}(A=uc.prototype).Ma=function(){void 0!==oe&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ms(this.b,oo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},A.abort=function(){this.a&&this.c&&(Ms(this.b,oo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xn(this))},A.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),xn(this,!0)),uc.$a.Da.call(this)},A.Ub=function(){this.xa||(this.N||this.i||this.f?kt(this):this.Ic())},A.Ic=function(){kt(this)},A.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case T:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var n=this.b;return n&&n.log(ba,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(u){return Ms(this.b,"Can not get response: "+u.message),null}},xo.prototype.cancel=function(n){if(this.a)this.c instanceof xo&&this.c.cancel();else{if(this.b){var u=this.b;delete this.b,n?u.cancel(n):(u.l--,0>=u.l&&u.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(n=new Mc(this),bs(this),Yo(this,!1,n))}},xo.prototype.v=function(n,u){this.i=!1,Yo(this,n,u)},xo.prototype.then=function(n,u,g){var S,j,re=new Un(function(pe,Ke){S=pe,j=Ke});return To(this,S,function(pe){pe instanceof Mc?re.cancel():j(pe)}),re.then(n,u,g)},xo.prototype.$goog_Thenable=!0,x(af,ot),af.prototype.message="Deferred has already fired",af.prototype.name="AlreadyCalledError",x(Mc,ot),Mc.prototype.message="Deferred was canceled",Mc.prototype.name="CanceledError",Hf.prototype.c=function(){throw delete Tl[this.a],this.b};var Tl={};function kc(n){var u={},g=u.document||document,S=ei(n).toString(),j=Fr(document,"SCRIPT"),re={Vb:j,Ma:void 0},pe=new xo(re),Ke=null,zt=null!=u.timeout?u.timeout:5e3;return 0<zt&&(Ke=window.setTimeout(function(){Ea(j,!0);var hn=new Al(Dl,"Timeout reached for loading script "+S);bs(pe),Yo(pe,!1,hn)},zt),re.Ma=Ke),j.onload=j.onreadystatechange=function(){j.readyState&&"loaded"!=j.readyState&&"complete"!=j.readyState||(Ea(j,u.wd||!1,Ke),bs(pe),Yo(pe,!0,null))},j.onerror=function(){Ea(j,!0,Ke);var hn=new Al(Wf,"Error while loading script "+S);bs(pe),Yo(pe,!1,hn)},Nn(re=u.attributes||{},{type:"text/javascript",charset:"UTF-8"}),pi(j,re),function(n,u){Ir(n,"HTMLScriptElement"),n.src=ei(u),null===xe&&(xe=(u=(u=z.document).querySelector&&u.querySelector("script[nonce]"))&&(u=u.nonce||u.getAttribute("nonce"))&&Ie.test(u)?u:""),(u=xe)&&n.setAttribute("nonce",u)}(j,n),function(n){var u;return(u=(n||document).getElementsByTagName("HEAD"))&&0!=u.length?u[0]:n.documentElement}(g).appendChild(j),pe}function Gf(){if(this&&this.Vb){var n=this.Vb;n&&"SCRIPT"==n.tagName&&Ea(n,!0,this.Ma)}}function Ea(n,u,g){null!=g&&z.clearTimeout(g),n.onload=we,n.onerror=we,n.onreadystatechange=we,u&&window.setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)},0)}var Wf=0,Dl=1;function Al(n,u){var g="Jsloader error (code #"+n+")";u&&(g+=": "+u),ot.call(this,g),this.code=n}function Li(n){this.f=n}function Ia(n,u,g){if(this.c=n,this.l=(n=u||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=n.secureTokenTimeout||Rl,this.g=pn(n.secureTokenHeaders||qf),this.h=n.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=n.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=n.firebaseTimeout||cc,this.a=pn(n.firebaseHeaders||$f),g&&(this.a["X-Client-Version"]=g,this.g["X-Client-Version"]=g),g="Node"==mi(),!(g=z.XMLHttpRequest||g&&M.INTERNAL.node&&M.INTERNAL.node.XMLHttpRequest)&&!Zr())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=Zr()?new zs(self):ps()?new Li(g):new za,this.b=null}x(Al,ot),x(Li,tc),Li.prototype.a=function(){return new this.f},Li.prototype.b=function(){return{}};var tl,Es="idToken",Rl=new be(3e4,6e4),qf={"Content-Type":"application/x-www-form-urlencoded"},cc=new be(3e4,6e4),$f={"Content-Type":"application/json"};function uf(n,u){u?n.a["X-Firebase-Locale"]=u:delete n.a["X-Firebase-Locale"]}function Lu(n,u){u&&(n.l=Fc("https://securetoken.googleapis.com/v1/token",u),n.h=Fc("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",u),n.i=Fc("https://identitytoolkit.googleapis.com/v2/",u))}function Fc(n,u){return n=vi(n),u=vi(u.url),n.c=n.a+n.c,br(n,u.f),n.a=u.a,_o(n,u.g),n.toString()}function cf(n,u){u?(n.a["X-Client-Version"]=u,n.g["X-Client-Version"]=u):(delete n.a["X-Client-Version"],delete n.g["X-Client-Version"])}function Uu(n,u,g,S,j,re,pe){(function(){var n=Ci();return!((n="Chrome"!=ns(n)?null:(n=n.match(/\sChrome\/(\d+)/i))&&2==n.length?parseInt(n[1],10):null)&&30>n||se&&qn&&!(9<qn))})()||Zr()?n=at(n.u,n):(tl||(tl=new Un(function(Ke,zt){!function(n,u){((window.gapi||{}).client||{}).request?n():(z[Nl]=function(){((window.gapi||{}).client||{}).request?n():u(Error("CORS_UNSUPPORTED"))},function(n,u){To(n,null,u,void 0)}(kc(bi(ss,{onload:Nl})),function(){u(Error("CORS_UNSUPPORTED"))}))}(Ke,zt)})),n=at(n.o,n)),n(u,g,S,j,re,pe)}Ia.prototype.S=function(){return this.b},Ia.prototype.u=function(n,u,g,S,j,re){if(Zr()&&(void 0===z.fetch||void 0===z.Headers||void 0===z.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var pe=new uc(this.f);if(re){pe.g=Math.max(0,re);var Ke=setTimeout(function(){pe.dispatchEvent("timeout")},re)}Ao(pe,"complete",function(){Ke&&clearTimeout(Ke);var zt=null;try{zt=JSON.parse(function(n){try{return n.a?n.a.responseText:""}catch(u){return Ms(n.b,"Can not get responseText: "+u.message),""}}(this))||null}catch(hn){zt=null}u&&u(zt)}),ha(pe,"ready",function(){Ke&&clearTimeout(Ke),G(this)}),ha(pe,"timeout",function(){Ke&&clearTimeout(Ke),G(this),u&&u(null)}),function(n,u,g,S,j){if(n.a)throw Error("[goog.net.XhrIo] Object is active with another request="+n.l+"; newUri="+u);g=g?g.toUpperCase():"GET",n.l=u,n.h="",n.P=g,n.G=!1,n.c=!0,n.a=n.O?n.O.a():Zc.a(),n.A=function(n){return n.c||(n.c=n.b())}(n.O?n.O:Zc),n.a.onreadystatechange=at(n.Ub,n);try{Ms(n.b,oo(n,"Opening Xhr")),n.N=!0,n.a.open(g,String(u),!0),n.N=!1}catch(pe){return Ms(n.b,oo(n,"Error opening Xhr: "+pe.message)),void De(n,pe)}u=S||"";var re=new no(n.headers);j&&function(n,u){if(n.forEach&&"function"==typeof n.forEach)n.forEach(u,void 0);else if(gt(n)||"string"==typeof n)qe(n,u,void 0);else for(var g=Pa(n),S=Bn(n),j=S.length,re=0;re<j;re++)u.call(void 0,S[re],g&&g[re],n)}(j,function(pe,Ke){re.set(Ke,pe)}),j=function(n){e:{for(var u=ne,g=n.length,S="string"==typeof n?n.split(""):n,j=0;j<g;j++)if(j in S&&u.call(void 0,S[j],j,n)){u=j;break e}u=-1}return 0>u?null:"string"==typeof n?n.charAt(u):n[u]}(re.Y()),S=z.FormData&&u instanceof z.FormData,!An(y,g)||j||S||re.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),re.forEach(function(pe,Ke){this.a.setRequestHeader(Ke,pe)},n),n.m&&(n.a.responseType=n.m),"withCredentials"in n.a&&n.a.withCredentials!==n.R&&(n.a.withCredentials=n.R);try{Wn(n),0<n.g&&(n.u=function(n){return se&&wi(9)&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(n.a),Ms(n.b,oo(n,"Will abort after "+n.g+"ms if incomplete, xhr2 "+n.u)),n.u?(n.a.timeout=n.g,n.a.ontimeout=at(n.Ma,n)):n.o=Ls(n.Ma,n.g,n)),Ms(n.b,oo(n,"Sending request")),n.i=!0,n.a.send(u),n.i=!1}catch(pe){Ms(n.b,oo(n,"Send error: "+pe.message)),De(n,pe)}}(pe,n,g,S,j)};var ss=new Yn(Nr,"https://apis.google.com/js/client.js?onload=%{onload}"),Nl="__fcb"+Math.floor(1e6*Math.random()).toString();function aa(n){if("string"!=typeof(n=n.email)||!Ri.test(n))throw new C("invalid-email")}function nl(n){"email"in n&&aa(n)}function as(n){if(!n[Es])throw n.mfaPendingCredential?new C("multi-factor-auth-required",null,pn(n)):new C("internal-error")}function Ol(n){if(n.phoneNumber||n.temporaryProof){if(!n.phoneNumber||!n.temporaryProof)throw new C("internal-error")}else{if(!n.sessionInfo)throw new C("missing-verification-id");if(!n.code)throw new C("missing-verification-code")}}Ia.prototype.o=function(n,u,g,S,j){var re=this;tl.then(function(){window.gapi.client.setApiKey(re.c);var pe=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:n,method:g,body:S,headers:j,authType:"none",callback:function(Ke){window.gapi.auth.setToken(pe),u&&u(Ke)}})}).s(function(pe){u&&u({error:{message:pe&&pe.message||"CORS_UNSUPPORTED"}})})},Ia.prototype.yb=function(){return Er(this,Xe,{})},Ia.prototype.Ab=function(n,u){return Er(this,Te,{idToken:n,email:u})},Ia.prototype.Bb=function(n,u){return Er(this,Ge,{idToken:n,password:u})};var fu={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Pl(n){if(!n.phoneVerificationInfo)throw new C("internal-error");if(!n.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!n.phoneVerificationInfo.code)throw new C("missing-verification-code")}function rl(n){if(!n.requestUri||!n.sessionId&&!n.postBody&&!n.pendingToken)throw new C("internal-error")}function Lc(n,u){return u.oauthIdToken&&u.providerId&&0==u.providerId.indexOf("oidc.")&&!u.pendingToken&&(n.sessionId?u.nonce=n.sessionId:n.postBody&&Us(n=new lo(n.postBody),"nonce")&&(u.nonce=n.get("nonce"))),u}function xl(n){var u=null;if(n.needConfirmation?(n.code="account-exists-with-different-credential",u=Oc(n)):"FEDERATED_USER_ID_ALREADY_LINKED"==n.errorMessage?(n.code="credential-already-in-use",u=Oc(n)):"EMAIL_EXISTS"==n.errorMessage?(n.code="email-already-in-use",u=Oc(n)):n.errorMessage&&(u=pu(n.errorMessage)),u)throw u;as(n)}function Ml(n,u){return u.returnIdpCredential=!0,Er(n,Jt,u)}function il(n,u){return u.returnIdpCredential=!0,Er(n,jn,u)}function Uc(n,u){return u.returnIdpCredential=!0,u.autoCreate=!1,Er(n,Fn,u)}function hu(n){if(!n.oobCode)throw new C("invalid-action-code")}(A=Ia.prototype).Cb=function(n,u){var g={idToken:n},S=[];return En(fu,function(j,re){var pe=u[re];null===pe?S.push(j):re in u&&(g[re]=pe)}),S.length&&(g.deleteAttribute=S),Er(this,Te,g)},A.ub=function(n,u){return Nn(n={requestType:"PASSWORD_RESET",email:n},u),Er(this,b,n)},A.vb=function(n,u){return Nn(n={requestType:"EMAIL_SIGNIN",email:n},u),Er(this,s,n)},A.tb=function(n,u){return Nn(n={requestType:"VERIFY_EMAIL",idToken:n},u),Er(this,f,n)},A.Db=function(n,u,g){return Nn(n={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:n,newEmail:u},g),Er(this,p,n)},A.eb=function(n){return Er(this,Qr,n)},A.mb=function(n,u){return Er(this,Y,{oobCode:n,newPassword:u})},A.Qa=function(n){return Er(this,Xf,{oobCode:n})},A.ib=function(n){return Er(this,ff,{oobCode:n})};var ff={endpoint:"setAccountInfo",B:hu,Z:"email",C:!0},Xf={endpoint:"resetPassword",B:hu,F:function(n){var u=n.requestType;if(!u||!n.email&&"EMAIL_SIGNIN"!=u&&"VERIFY_AND_CHANGE_EMAIL"!=u)throw new C("internal-error")},C:!0},lc={endpoint:"signupNewUser",B:function(n){if(aa(n),!n.password)throw new C("weak-password")},F:as,U:!0,C:!0},du={endpoint:"createAuthUri",C:!0},gd={endpoint:"deleteAccount",M:["idToken"]},hf={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(n){if("array"!=ke(n.deleteProvider))throw new C("internal-error")}},vd={endpoint:"emailLinkSignin",M:["email","oobCode"],B:aa,F:as,U:!0,C:!0},md={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:aa,F:as,U:!0},ol={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:Pl,F:as,C:!0,Na:!0},a={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:Pl,F:as,C:!0,Na:!0},i={endpoint:"getAccountInfo"},s={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(n){if("EMAIL_SIGNIN"!=n.requestType)throw new C("internal-error");aa(n)},Z:"email",C:!0},f={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(n){if("VERIFY_EMAIL"!=n.requestType)throw new C("internal-error")},Z:"email",C:!0},p={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(n){if("VERIFY_AND_CHANGE_EMAIL"!=n.requestType)throw new C("internal-error")},Z:"email",C:!0},b={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(n){if("PASSWORD_RESET"!=n.requestType)throw new C("internal-error");aa(n)},Z:"email",C:!0},D={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},U={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(n){if(!n.recaptchaSiteKey)throw new C("internal-error")}},Y={endpoint:"resetPassword",B:hu,Z:"email",C:!0},de={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Te={endpoint:"setAccountInfo",M:["idToken"],B:nl,U:!0},Ge={endpoint:"setAccountInfo",M:["idToken"],B:function(n){if(nl(n),!n.password)throw new C("weak-password")},F:as,U:!0},Xe={endpoint:"signupNewUser",F:as,U:!0,C:!0},yt={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(n){if(!n.phoneEnrollmentInfo)throw new C("internal-error");if(!n.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!n.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},F:function(n){if(!n.phoneSessionInfo||!n.phoneSessionInfo.sessionInfo)throw new C("internal-error")},C:!0,Na:!0},Ft={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(n){if(!n.phoneSignInInfo||!n.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},F:function(n){if(!n.phoneResponseInfo||!n.phoneResponseInfo.sessionInfo)throw new C("internal-error")},C:!0,Na:!0},Jt={endpoint:"verifyAssertion",B:rl,Xa:Lc,F:xl,U:!0,C:!0},Fn={endpoint:"verifyAssertion",B:rl,Xa:Lc,F:function(n){if(n.errorMessage&&"USER_NOT_FOUND"==n.errorMessage)throw new C("user-not-found");if(n.errorMessage)throw pu(n.errorMessage);as(n)},U:!0,C:!0},jn={endpoint:"verifyAssertion",B:function(n){if(rl(n),!n.idToken)throw new C("internal-error")},Xa:Lc,F:xl,U:!0},er={endpoint:"verifyCustomToken",B:function(n){if(!n.token)throw new C("invalid-custom-token")},F:as,U:!0,C:!0},Tr={endpoint:"verifyPassword",B:function(n){if(aa(n),!n.password)throw new C("wrong-password")},F:as,U:!0,C:!0},Qr={endpoint:"verifyPhoneNumber",B:Ol,F:as,C:!0},hi={endpoint:"verifyPhoneNumber",B:function(n){if(!n.idToken)throw new C("internal-error");Ol(n)},F:function(n){if(n.temporaryProof)throw n.code="credential-already-in-use",Oc(n);as(n)}},Ui={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:Ol,F:as,C:!0},Ca={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(n){if(!!n[Es]^!!n.refreshToken)throw new C("internal-error")},C:!0,Na:!0};function Er(n,u,g){if(!function(n,u){if(!u||!u.length)return!0;if(!n)return!1;for(var g=0;g<u.length;g++){var S=n[u[g]];if(null==S||""===S)return!1}return!0}(g,u.M))return Xn(new C("internal-error"));var re,S=!!u.Na,j=u.Tb||"POST";return Ln(g).then(u.B).then(function(){return u.U&&(g.returnSecureToken=!0),u.C&&n.b&&void 0===g.tenantId&&(g.tenantId=n.b),function(n,u,g,S,j,re,pe){var Ke=vi(u+g);$n(Ke,"key",n.c),pe&&$n(Ke,"cb",R().toString());var zt="GET"==S;if(zt)for(var hn in j)j.hasOwnProperty(hn)&&$n(Ke,hn,j[hn]);return new Un(function(Sr,Yr){Uu(n,Ke.toString(),function(si){si?si.error?Yr(fc(si,re||{})):Sr(si):Yr(new C("network-request-failed"))},S,zt?void 0:Zs(N(j)),n.a,n.m.get())})}(n,S?n.i:n.h,u.endpoint,j,g,u.Gb,u.kb||!1)}).then(function(pe){return re=pe,u.Xa?u.Xa(g,re):re}).then(u.F).then(function(){if(!u.Z)return re;if(!(u.Z in re))throw new C("internal-error");return re[u.Z]})}function pu(n){return fc({error:{errors:[{message:n}],code:400,message:n}})}function fc(n,u){var g=(n.error&&n.error.errors&&n.error.errors[0]||{}).reason||"",S={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(g=S[g]?new C(S[g]):null)return g;for(var j in g=n.error&&n.error.message||"",Nn(S={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},u||{}),u=(u=g.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<u.length?u[1]:void 0,S)if(0===g.indexOf(j))return new C(S[j],u);return!u&&n&&(u=_(n)),new C("internal-error",u)}function kl(n){this.b=n,this.a=null,this.qb=function(n){return(Zf||(Zf=new Un(function(n,u){function g(){Ee(),li("gapi.load")("gapi.iframes",{callback:n,ontimeout:function(){Ee(),u(Error("Network Error"))},timeout:Ks.get()})}if(li("gapi.iframes.Iframe"))n();else if(li("gapi.load"))g();else{var S="__iframefcb"+Math.floor(1e6*Math.random()).toString();z[S]=function(){li("gapi.load")?g():u(Error("Network Error"))},Ln(kc(S=bi(yd,{onload:S}))).s(function(){u(Error("Network Error"))})}}).s(function(n){throw Zf=null,n}))).then(function(){return new Un(function(u,g){li("gapi.iframes.getContext")().open({where:document.body,url:n.b,messageHandlersFilter:li("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(S){function j(){clearTimeout(re),u()}n.a=S,n.a.restyle({setHideOnLeave:!1});var re=setTimeout(function(){g(Error("Network Error"))},Vu.get());S.ping(j).then(j,function(){g(Error("Network Error"))})})})})}(this)}var yd=new Yn(Nr,"https://apis.google.com/js/api.js?onload=%{onload}"),Ks=new be(3e4,6e4),Vu=new be(5e3,15e3),Zf=null;function Lp(n,u,g,S){this.l=n,this.h=u,this.i=g,this.g=S,this.f=null,n=this.g?wo((n=vi(this.g.url)).f,n.a,n.g,"/emulator/auth/iframe"):wo("https",this.l,null,"/__/auth/iframe"),this.a=n,$n(this.a,"apiKey",this.h),$n(this.a,"appName",this.i),this.b=null,this.c=[]}function _d(n,u,g,S,j,re){this.u=n,this.o=u,this.c=g,this.v=S,this.m=re,this.i=this.g=this.l=null,this.a=j,this.h=this.f=null}function wd(n){try{return M.app(n).auth().Ga()}catch(u){return[]}}function bd(n,u,g,S,j,re){this.o=n,this.g=u,this.b=g,this.f=re,this.c=S||null,this.i=j||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function Jf(n){var u=m();return function(n){return Er(n,D,{}).then(function(u){return u.authorizedDomains||[]})}(n).then(function(g){e:{var S=vi(u),j=S.f;S=S.a;for(var re=0;re<g.length;re++){var pe=g[re],Ke=S,zt=j;if(0==pe.indexOf("chrome-extension://")?Ke=vi(pe).a==Ke&&"chrome-extension"==zt:"http"!=zt&&"https"!=zt?Ke=!1:Ar.test(pe)?Ke=Ke==pe:(pe=pe.split(".").join("\\."),Ke=new RegExp("^(.+\\."+pe+"|"+pe+")$","i").test(Ke)),Ke){g=!0;break e}}g=!1}if(!g)throw new Xc(m())})}function Ed(n){return n.v||(n.v=fo().then(function(){if(!n.u){var u=n.c,g=n.i,S=wd(n.b),j=new Lp(n.o,n.g,n.b,n.f);j.f=u,j.b=g,j.c=zn(S||[]),n.u=j.toString()}n.m=new kl(n.u),function(n){if(!n.m)throw Error("IfcHandler must be initialized!");!function(n,u){n.qb.then(function(){n.a.register("authEvent",u,li("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(n.m,function(u){var g={};if(u&&u.authEvent){var S=!1;for(u=Yc(u.authEvent),g=0;g<n.h.length;g++)S=n.h[g](u)||S;return(g={}).status=S?"ACK":"ERROR",Ln(g)}return g.status="ERROR",Ln(g)})}(n)})),n.v}function eh(n){return n.l||(n.A=n.c?Ds(n.c,wd(n.b)):null,n.l=new Ia(n.g,ue(n.i),n.A),n.f&&Lu(n.l,n.f)),n.l}function df(n,u,g,S,j,re,pe,Ke,zt,hn,Sr,Yr){return(n=new _d(n,u,g,S,j,Yr)).l=re,n.g=pe,n.i=Ke,n.b=pn(zt||null),n.f=hn,n.xb(Sr).toString()}function Id(n){if(this.a=n||M.INTERNAL.reactNative&&M.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function jc(n){this.b=n,this.a={},this.f=at(this.c,this)}Lp.prototype.toString=function(){return this.f?$n(this.a,"v",this.f):No(this.a.b,"v"),this.b?$n(this.a,"eid",this.b):No(this.a.b,"eid"),this.c.length?$n(this.a,"fw",this.c.join(",")):No(this.a.b,"fw"),this.a.toString()},_d.prototype.xb=function(n){return this.h=n,this},_d.prototype.toString=function(){if(this.m){var n=vi(this.m.url);n=wo(n.f,n.a,n.g,"/emulator/auth/handler")}else n=wo("https",this.u,null,"/__/auth/handler");if($n(n,"apiKey",this.o),$n(n,"appName",this.c),$n(n,"authType",this.v),this.a.isOAuthProvider){var u=this.a;try{var g=M.app(this.c).auth().ka()}catch(Ke){g=null}for(var S in u.nb=g,$n(n,"providerId",this.a.providerId),u=N((g=this.a).Hb))u[S]=u[S].toString();S=g.Pc,u=pn(u);for(var j=0;j<S.length;j++){var re=S[j];re in u&&delete u[re]}g.ob&&g.nb&&!u[g.ob]&&(u[g.ob]=g.nb),Cn(u)||$n(n,"customParameters",_(u))}if("function"==typeof this.a.Pb&&(g=this.a.Pb()).length&&$n(n,"scopes",g.join(",")),this.l?$n(n,"redirectUrl",this.l):No(n.b,"redirectUrl"),this.g?$n(n,"eventId",this.g):No(n.b,"eventId"),this.i?$n(n,"v",this.i):No(n.b,"v"),this.b)for(var pe in this.b)this.b.hasOwnProperty(pe)&&!jr(n,pe)&&$n(n,pe,this.b[pe]);return this.h?$n(n,"tid",this.h):No(n.b,"tid"),this.f?$n(n,"eid",this.f):No(n.b,"eid"),(pe=wd(this.c)).length&&$n(n,"fw",pe.join(",")),n.toString()},(A=bd.prototype).Nb=function(n,u,g){var S=new C("popup-closed-by-user"),j=new C("web-storage-unsupported"),re=this,pe=!1;return this.la().then(function(){(function(n){var u={type:"webStorageSupport"};return Ed(n).then(function(){return function(n,u){return n.qb.then(function(){return new Un(function(g){n.a.send(u.type,u,g,li("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(n.m,u)}).then(function(g){if(g&&g.length&&void 0!==g[0].webStorageSupport)return g[0].webStorageSupport;throw Error()})})(re).then(function(Ke){Ke||(n&&Et(n),u(j),pe=!0)})}).s(function(){}).then(function(){if(!pe)return function(n){return new Un(function(u){return function g(){Xr(2e3).then(function(){if(n&&!n.closed)return g();u()})}()})}(n)}).then(function(){if(!pe)return Xr(g).then(function(){u(S)})})},A.Wb=function(){var n=Ci();return!d(n)&&!ce(n)},A.Sb=function(){return!1},A.Lb=function(n,u,g,S,j,re,pe,Ke){if(!n)return Xn(new C("popup-blocked"));if(pe&&!d())return this.la().s(function(hn){Et(n),j(hn)}),S(),Ln();this.a||(this.a=Jf(eh(this)));var zt=this;return this.a.then(function(){var hn=zt.la().s(function(Sr){throw Et(n),j(Sr),Sr});return S(),hn}).then(function(){ec(g),pe||L(df(zt.o,zt.g,zt.b,u,g,null,re,zt.c,void 0,zt.i,Ke,zt.f),n)}).s(function(hn){throw"auth/network-request-failed"==hn.code&&(zt.a=null),hn})},A.Mb=function(n,u,g,S){this.a||(this.a=Jf(eh(this)));var j=this;return this.a.then(function(){ec(u),L(df(j.o,j.g,j.b,n,u,m(),g,j.c,void 0,j.i,S,j.f))}).s(function(re){throw"auth/network-request-failed"==re.code&&(j.a=null),re})},A.la=function(){var n=this;return Ed(this).then(function(){return n.m.qb}).s(function(){throw n.a=null,new C("network-request-failed")})},A.Zb=function(){return!0},A.Ea=function(n){this.h.push(n)},A.Ra=function(n){Vn(this.h,function(u){return u==n})},(A=Id.prototype).get=function(n){return Ln(this.a.getItem(n)).then(function(u){return u&&F(u)})},A.set=function(n,u){return Ln(this.a.setItem(n,_(u)))},A.T=function(n){return Ln(this.a.removeItem(n))},A.ca=function(){},A.ia=function(){};var gf,Cd=[];function Vp(n,u,g){Cn(n.a)&&n.b.addEventListener("message",n.f),void 0===n.a[u]&&(n.a[u]=[]),n.a[u].push(g)}function pf(n){this.a=n}function Bp(n){this.c=n,this.b=!1,this.a=[]}function Td(n,u,g,S){var j,pe,Ke,zt,re=g||{},hn=null;if(n.b)return Xn(Error("connection_unavailable"));var Sr=S?800:50,Yr="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Un(function(si,ls){Yr?(j=Math.floor(Math.random()*Math.pow(10,20)).toString(),Yr.port1.start(),Ke=setTimeout(function(){ls(Error("unsupported_event"))},Sr),n.a.push(hn={messageChannel:Yr,onMessage:pe=function(pc){pc.data.eventId===j&&("ack"===pc.data.status?(clearTimeout(Ke),zt=setTimeout(function(){ls(Error("timeout"))},3e3)):"done"===pc.data.status?(clearTimeout(zt),void 0!==pc.data.response?si(pc.data.response):ls(Error("unknown_error"))):(clearTimeout(Ke),clearTimeout(zt),ls(Error("invalid_response"))))}}),Yr.port1.addEventListener("message",pe),n.c.postMessage({eventType:u,eventId:j,data:re},[Yr.port2])):ls(Error("connection_unavailable"))}).then(function(si){return th(n,hn),si}).s(function(si){throw th(n,hn),si})}function th(n,u){if(u){var g=u.messageChannel;g&&(g.port1.removeEventListener("message",u.onMessage),g.port1.close()),Vn(n.a,function(j){return j==u})}}function Sd(){if(!nh())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=z.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var n=this;Zr()&&self?(this.l=function(){var n=Zr()?self:null;if(qe(Cd,function(g){g.b==n&&(u=g)}),!u){var u=new jc(n);Cd.push(u)}return u}(),Vp(this.l,"keyChanged",function(u,g){return Gp(n).then(function(S){return 0<S.length&&qe(n.a,function(j){j(S)}),{keyProcessed:An(S,g.key)}})}),Vp(this.l,"ping",function(){return Ln(["keyChanged"])})):function(){var n=z.navigator;return n&&n.serviceWorker?Ln().then(function(){return n.serviceWorker.ready}).then(function(u){return u.active||null}).s(function(){return null}):Ln(null)}().then(function(u){(n.h=u)&&(n.g=new Bp(new pf(u)),Td(n.g,"ping",null,!0).then(function(g){g[0].fulfilled&&An(g[0].value,"keyChanged")&&(n.o=!0)}).s(function(){}))})}function vf(n){return new Un(function(u,g){var S=n.m.open("firebaseLocalStorageDb",1);S.onerror=function(j){try{j.preventDefault()}catch(re){}g(Error(j.target.error))},S.onupgradeneeded=function(j){j=j.target.result;try{j.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(re){g(re)}},S.onsuccess=function(j){(j=j.target.result).objectStoreNames.contains("firebaseLocalStorage")?u(j):function(n){return new Un(function(u,g){var S=n.m.deleteDatabase("firebaseLocalStorageDb");S.onsuccess=function(){u()},S.onerror=function(j){g(Error(j.target.error))}})}(n).then(function(){return vf(n)}).then(function(re){u(re)}).s(function(re){g(re)})}})}function al(n){return n.v||(n.v=vf(n)),n.v}function nh(){try{return!!z.indexedDB}catch(n){return!1}}function ul(n){return n.objectStore("firebaseLocalStorage")}function Ll(n,u){return n.transaction(["firebaseLocalStorage"],u?"readwrite":"readonly")}function Vc(n){return new Un(function(u,g){n.onsuccess=function(S){S&&S.target?u(S.target.result):u()},n.onerror=function(S){g(S.target.error)}})}function Ul(n,u){return n.g&&n.h&&function(){var n=z.navigator;return n&&n.serviceWorker&&n.serviceWorker.controller||null}()===n.h?Td(n.g,"keyChanged",{key:u},n.o).then(function(){}).s(function(){}):Ln()}function Gp(n){return al(n).then(function(u){var g=ul(Ll(u,!1));return g.getAll?Vc(g.getAll()):new Un(function(S,j){var re=[],pe=g.openCursor();pe.onsuccess=function(Ke){(Ke=Ke.target.result)?(re.push(Ke.value),Ke.continue()):S(re)},pe.onerror=function(Ke){j(Ke.target.error)}})}).then(function(u){var g={},S=[];if(0==n.b){for(S=0;S<u.length;S++)g[u[S].fbase_key]=u[S].value;S=X(n.c,g),n.c=g}return S})}function qp(n){n.i&&n.i.cancel("STOP_EVENT"),n.f&&(clearTimeout(n.f),n.f=null)}function $p(n){var u=this,g=null;this.a=[],this.type="indexedDB",this.c=n,this.b=Ln().then(function(){if(nh()){var S=Z(),j="__sak"+S;return gf||(gf=new Sd),(g=gf).set(j,S).then(function(){return g.get(j)}).then(function(re){if(re!==S)throw Error("indexedDB not supported!");return g.T(j)}).then(function(){return g}).s(function(){return u.c})}return u.c}).then(function(S){return u.type=S.type,S.ca(function(j){qe(u.a,function(re){re(j)})}),S})}function jl(){this.a={},this.type="inMemory"}function Vl(){if(!function(){var n="Node"==mi();if(!(n=Dd()||n&&M.INTERNAL.node&&M.INTERNAL.node.localStorage))return!1;try{return n.setItem("__sak","1"),n.removeItem("__sak"),!0}catch(u){return!1}}())throw"Node"==mi()?new C("internal-error","The LocalStorage compatibility library was not found."):new C("web-storage-unsupported");this.a=Dd()||M.INTERNAL.node.localStorage,this.type="localStorage"}function Dd(){try{var n=z.localStorage,u=Z();return n&&(n.setItem(u,"1"),n.removeItem(u)),n}catch(g){return null}}function rh(){this.type="nullStorage"}function Ad(){if(!function(){var n="Node"==mi();if(!(n=Rd()||n&&M.INTERNAL.node&&M.INTERNAL.node.sessionStorage))return!1;try{return n.setItem("__sak","1"),n.removeItem("__sak"),!0}catch(u){return!1}}())throw"Node"==mi()?new C("internal-error","The SessionStorage compatibility library was not found."):new C("web-storage-unsupported");this.a=Rd()||M.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Rd(){try{var n=z.sessionStorage,u=Z();return n&&(n.setItem(u,"1"),n.removeItem(u)),n}catch(g){return null}}function gv(){var n={};n.Browser=vv,n.Node=zp,n.ReactNative=mv,n.Worker=yv,this.a=n[mi()]}jc.prototype.c=function(n){var u=n.data.eventType,g=n.data.eventId,S=this.a[u];if(S&&0<S.length){n.ports[0].postMessage({status:"ack",eventId:g,eventType:u,response:null});var j=[];qe(S,function(re){j.push(Ln().then(function(){return re(n.origin,n.data.data)}))}),Do(j).then(function(re){var pe=[];qe(re,function(Ke){pe.push({fulfilled:Ke.Ob,value:Ke.value,reason:Ke.reason?Ke.reason.message:void 0})}),qe(pe,function(Ke){for(var zt in Ke)void 0===Ke[zt]&&delete Ke[zt]}),n.ports[0].postMessage({status:"done",eventId:g,eventType:u,response:pe})})}},pf.prototype.postMessage=function(n,u){this.a.postMessage(n,u)},Bp.prototype.close=function(){for(;0<this.a.length;)th(this,this.a[0]);this.b=!0},(A=Sd.prototype).set=function(n,u){var S,g=!1,j=this;return al(this).then(function(re){return Vc((re=ul(Ll(S=re,!0))).get(n))}).then(function(re){var pe=ul(Ll(S,!0));return re?(re.value=u,Vc(pe.put(re))):(j.b++,g=!0,(re={}).fbase_key=n,re.value=u,Vc(pe.add(re)))}).then(function(){return j.c[n]=u,Ul(j,n)}).na(function(){g&&j.b--})},A.get=function(n){return al(this).then(function(u){return Vc(ul(Ll(u,!1)).get(n))}).then(function(u){return u&&u.value})},A.T=function(n){var u=!1,g=this;return al(this).then(function(S){return u=!0,g.b++,Vc(ul(Ll(S,!0)).delete(n))}).then(function(){return delete g.c[n],Ul(g,n)}).na(function(){u&&g.b--})},A.ca=function(n){0==this.a.length&&function(n){qp(n),function u(){n.f=setTimeout(function(){n.i=Gp(n).then(function(g){0<g.length&&qe(n.a,function(S){S(g)})}).then(function(){u()}).s(function(g){"STOP_EVENT"!=g.message&&u()})},800)}()}(this),this.a.push(n)},A.ia=function(n){Vn(this.a,function(u){return u==n}),0==this.a.length&&qp(this)},(A=$p.prototype).get=function(n){return this.b.then(function(u){return u.get(n)})},A.set=function(n,u){return this.b.then(function(g){return g.set(n,u)})},A.T=function(n){return this.b.then(function(u){return u.T(n)})},A.ca=function(n){this.a.push(n)},A.ia=function(n){Vn(this.a,function(u){return u==n})},(A=jl.prototype).get=function(n){return Ln(this.a[n])},A.set=function(n,u){return this.a[n]=u,Ln()},A.T=function(n){return delete this.a[n],Ln()},A.ca=function(){},A.ia=function(){},(A=Vl.prototype).get=function(n){var u=this;return Ln().then(function(){return F(u.a.getItem(n))})},A.set=function(n,u){var g=this;return Ln().then(function(){var S=_(u);null===S?g.T(n):g.a.setItem(n,S)})},A.T=function(n){var u=this;return Ln().then(function(){u.a.removeItem(n)})},A.ca=function(n){z.window&&yn(z.window,"storage",n)},A.ia=function(n){z.window&&Gn(z.window,"storage",n)},(A=rh.prototype).get=function(){return Ln(null)},A.set=function(){return Ln()},A.T=function(){return Ln()},A.ca=function(){},A.ia=function(){},(A=Ad.prototype).get=function(n){var u=this;return Ln().then(function(){return F(u.a.getItem(n))})},A.set=function(n,u){var g=this;return Ln().then(function(){var S=_(u);null===S?g.T(n):g.a.setItem(n,S)})},A.T=function(n){var u=this;return Ln().then(function(){u.a.removeItem(n)})},A.ca=function(){},A.ia=function(){};var Sa,Od,vv={D:Vl,ab:Ad},zp={D:Vl,ab:Ad},mv={D:Id,ab:rh},yv={D:Vl,ab:rh},Bl={qd:"local",NONE:"none",sd:"session"};function Nd(){var n=!(ce(Ci())||!Oo()),u=d(),g=ga();this.v=n,this.h=u,this.l=g,this.a={},Sa||(Sa=new gv),n=Sa;try{this.g=!ci()&&In()||!z.indexedDB?new n.a.D:new $p(Zr()?new jl:new n.a.D)}catch(S){this.g=new jl,this.h=!0}try{this.i=new n.a.ab}catch(S){this.i=new jl}this.m=new jl,this.f=at(this.Xb,this),this.b={}}function mf(){return Od||(Od=new Nd),Od}function cl(n,u){switch(u){case"session":return n.i;case"none":return n.m;default:return n.g}}function vr(n,u){return"firebase:"+n.name+(u?":"+u:"")}function ll(n,u,g){return g=vr(u,g),"local"==u.D&&(n.b[g]=null),cl(n,u.D).T(g)}function Da(n){n.c&&(clearInterval(n.c),n.c=null)}function Qp(n){this.a=n,this.b=mf()}(A=Nd.prototype).get=function(n,u){return cl(this,n.D).get(vr(n,u))},A.set=function(n,u,g){var S=vr(n,g),j=this,re=cl(this,n.D);return re.set(S,u).then(function(){return re.get(S)}).then(function(pe){"local"==n.D&&(j.b[S]=pe)})},A.addListener=function(n,u,g){n=vr(n,u),this.l&&(this.b[n]=z.localStorage.getItem(n)),Cn(this.a)&&(cl(this,"local").ca(this.f),this.h||(ci()||!In())&&z.indexedDB||!this.l||function(n){Da(n),n.c=setInterval(function(){for(var u in n.a){var g=z.localStorage.getItem(u),S=n.b[u];g!=S&&(n.b[u]=g,g=new qt({type:"storage",key:u,target:window,oldValue:S,newValue:g,a:!0}),n.Xb(g))}},1e3)}(this)),this.a[n]||(this.a[n]=[]),this.a[n].push(g)},A.removeListener=function(n,u,g){n=vr(n,u),this.a[n]&&(Vn(this.a[n],function(S){return S==g}),0==this.a[n].length&&delete this.a[n]),Cn(this.a)&&(cl(this,"local").ia(this.f),Da(this))},A.Xb=function(n){if(n&&n.g){var u=n.a.key;if(null==u)for(var g in this.a){var S=this.b[g];void 0===S&&(S=null);var j=z.localStorage.getItem(g);j!==S&&(this.b[g]=j,this.lb(g))}else if(0==u.indexOf("firebase:")&&this.a[u]){if(void 0!==n.a.a?cl(this,"local").ia(this.f):Da(this),this.v)if(g=z.localStorage.getItem(u),(S=n.a.newValue)!==g)null!==S?z.localStorage.setItem(u,S):z.localStorage.removeItem(u);else if(this.b[u]===S&&void 0===n.a.a)return;var re=this;g=function(){(void 0!==n.a.a||re.b[u]!==z.localStorage.getItem(u))&&(re.b[u]=z.localStorage.getItem(u),re.lb(u))},se&&qn&&10==qn&&z.localStorage.getItem(u)!==n.a.newValue&&n.a.newValue!==n.a.oldValue?setTimeout(g,10):g()}}else qe(n,at(this.lb,this))},A.lb=function(n){this.a[n]&&qe(this.a[n],function(u){u()})};var Hl,Pd={name:"authEvent",D:"local"};function hc(){this.a=mf()}function yf(n,u){this.b=wv,this.f=z.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=n,this.h=u,this.l=z.Int32Array?new Int32Array(64):Array(64),void 0===Hl&&(Hl=z.Int32Array?new Int32Array(Ev):Ev),this.reset()}x(yf,function(){this.b=-1});for(var wv=64,Yp=wv-1,bv=[],gu=0;gu<Yp;gu++)bv[gu]=0;var _f=sr(128,bv);function Gl(n){for(var u=n.f,g=n.l,S=0,j=0;j<u.length;)g[S++]=u[j]<<24|u[j+1]<<16|u[j+2]<<8|u[j+3],j=4*S;for(u=16;64>u;u++){var re=(0|g[u-16])+(((j=0|g[u-15])>>>7|j<<25)^(j>>>18|j<<14)^j>>>3)|0,pe=(0|g[u-7])+(((S=0|g[u-2])>>>17|S<<15)^(S>>>19|S<<13)^S>>>10)|0;g[u]=re+pe|0}S=0|n.a[0],j=0|n.a[1];var Ke=0|n.a[2],zt=0|n.a[3],hn=0|n.a[4],Sr=0|n.a[5],Yr=0|n.a[6];for(re=0|n.a[7],u=0;64>u;u++){var si=((S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10))+(S&j^S&Ke^j&Ke)|0;pe=(re=re+((hn>>>6|hn<<26)^(hn>>>11|hn<<21)^(hn>>>25|hn<<7))|0)+((pe=(pe=hn&Sr^~hn&Yr)+(0|Hl[u])|0)+(0|g[u])|0)|0,re=Yr,Yr=Sr,Sr=hn,hn=zt+pe|0,zt=Ke,Ke=j,j=S,S=pe+si|0}n.a[0]=n.a[0]+S|0,n.a[1]=n.a[1]+j|0,n.a[2]=n.a[2]+Ke|0,n.a[3]=n.a[3]+zt|0,n.a[4]=n.a[4]+hn|0,n.a[5]=n.a[5]+Sr|0,n.a[6]=n.a[6]+Yr|0,n.a[7]=n.a[7]+re|0}function wf(n,u,g){void 0===g&&(g=u.length);var S=0,j=n.c;if("string"==typeof u)for(;S<g;)n.f[j++]=u.charCodeAt(S++),j==n.b&&(Gl(n),j=0);else{if(!gt(u))throw Error("message must be string or array");for(;S<g;){var re=u[S++];if(!("number"==typeof re&&0<=re&&255>=re&&re==(0|re)))throw Error("message must be a byte array");n.f[j++]=re,j==n.b&&(Gl(n),j=0)}}n.c=j,n.g+=g}yf.prototype.reset=function(){this.g=this.c=0,this.a=z.Int32Array?new Int32Array(this.h):zn(this.h)};var Ev=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Xp(){yf.call(this,8,Zp)}x(Xp,yf);var Zp=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Iv(n,u,g,S,j,re){this.m=n,this.i=u,this.l=g,this.v=S||null,this.u=j||null,this.o=re,this.h=u+":"+g,this.A=new hc,this.g=new Qp(this.h),this.f=null,this.b=[],this.a=this.c=null}function oh(n){return new C("invalid-cordova-configuration",n)}function tg(n,u){for(var g=0;g<n.b.length;g++)try{n.b[g](u)}catch(S){}}function sh(n){return n.f||(n.f=n.la().then(function(){return new Un(function(u){n.Ea(function g(S){return u(S),n.Ra(g),!1}),function(n){function u(pe){S=!0,j&&j.cancel(),ng(n).then(function(Ke){var zt=g;if(Ke&&pe&&pe.url){var hn=null;-1!=(zt=Dc(pe.url)).indexOf("/__/auth/callback")&&(hn=(hn="object"==typeof(hn=F(jr(hn=vi(zt),"firebaseError")||null))?B(hn):null)?new xs(Ke.c,Ke.b,null,null,hn,null,Ke.S()):new xs(Ke.c,Ke.b,zt,Ke.f,null,null,Ke.S())),zt=hn||g}tg(n,zt)})}var g=new xs("unknown",null,null,null,new C("no-auth-event")),S=!1,j=Xr(500).then(function(){return ng(n).then(function(){S||tg(n,g)})}),re=z.handleOpenURL;z.handleOpenURL=function(pe){if(0==pe.toLowerCase().indexOf(li("BuildInfo.packageName",z).toLowerCase()+"://")&&u({url:pe}),"function"==typeof re)try{re(pe)}catch(Ke){console.error(Ke)}},cu||(cu=new Pu),function(n){var u=cu;u.a.push(n),u.b||(u.b=function(g){for(var S=0;S<u.a.length;S++)u.a[S](g)},"function"==typeof(n=li("universalLinks.subscribe",z))&&n(null,u.b))}(u)}(n)})})),n.f}function ng(n){var u=null;return function(n){return n.b.get(Pd,n.a).then(function(u){return Yc(u)})}(n.g).then(function(g){return u=g,ll((g=n.g).b,Pd,g.a)}).then(function(){return u})}function Cy(n){this.a=n,this.b=mf()}(A=Iv.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(Ts(void 0)?fo().then(function(){return new Un(function(n,u){var g=z.document,S=setTimeout(function(){u(Error("Cordova framework is not ready."))},1e3);g.addEventListener("deviceready",function(){clearTimeout(S),n()},!1)})}):Xn(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof li("universalLinks.subscribe",z))throw oh("cordova-universal-links-plugin-fix is not installed");if(void 0===li("BuildInfo.packageName",z))throw oh("cordova-plugin-buildinfo is not installed");if("function"!=typeof li("cordova.plugins.browsertab.openUrl",z))throw oh("cordova-plugin-browsertab is not installed");if("function"!=typeof li("cordova.InAppBrowser.open",z))throw oh("cordova-plugin-inappbrowser is not installed")},function(){throw new C("cordova-not-ready")})},A.Nb=function(n,u){return u(new C("operation-not-supported-in-this-environment")),Ln()},A.Lb=function(){return Xn(new C("operation-not-supported-in-this-environment"))},A.Zb=function(){return!1},A.Wb=function(){return!0},A.Sb=function(){return!0},A.Mb=function(n,u,g,S){if(this.c)return Xn(new C("redirect-operation-pending"));var j=this,re=z.document,pe=null,Ke=null,zt=null,hn=null;return this.c=Ln().then(function(){return ec(u),sh(j)}).then(function(){return function(n,u,g,S,j){var re=function(){for(var n=20,u=[];0<n;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),n--;return u.join("")}(),pe=new xs(u,S,null,re,new C("no-auth-event"),null,j),Ke=li("BuildInfo.packageName",z);if("string"!=typeof Ke)throw new C("invalid-cordova-configuration");var zt=li("BuildInfo.displayName",z),hn={};if(Ci().toLowerCase().match(/iphone|ipad|ipod/))hn.ibi=Ke;else{if(!Ci().toLowerCase().match(/android/))return Xn(new C("operation-not-supported-in-this-environment"));hn.apn=Ke}zt&&(hn.appDisplayName=zt),re=function(n){var u=new Xp;wf(u,n),n=[];var g=8*u.g;wf(u,_f,56>u.c?56-u.c:u.b-(u.c-56));for(var S=63;56<=S;S--)u.f[S]=255&g,g/=256;for(Gl(u),S=g=0;S<u.i;S++)for(var j=24;0<=j;j-=8)n[g++]=u.a[S]>>j&255;return function(n){return Ht(n,function(u){return 1<(u=u.toString(16)).length?u:"0"+u}).join("")}(n)}(re),hn.sessionId=re;var Sr=df(n.m,n.i,n.l,u,g,null,S,n.v,hn,n.u,j,n.o);return n.la().then(function(){var Yr=n.h;return n.A.a.set(Pd,pe.w(),Yr)}).then(function(){var Yr=li("cordova.plugins.browsertab.isAvailable",z);if("function"!=typeof Yr)throw new C("invalid-cordova-configuration");var si=null;Yr(function(ls){if(ls){if("function"!=typeof(si=li("cordova.plugins.browsertab.openUrl",z)))throw new C("invalid-cordova-configuration");si(Sr)}else{if("function"!=typeof(si=li("cordova.InAppBrowser.open",z)))throw new C("invalid-cordova-configuration");ls=Ci(),n.a=si(Sr,ls.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||ls.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(j,n,u,g,S)}).then(function(){return new Un(function(Sr,Yr){Ke=function(){var si=li("cordova.plugins.browsertab.close",z);return Sr(),"function"==typeof si&&si(),j.a&&"function"==typeof j.a.close&&(j.a.close(),j.a=null),!1},j.Ea(Ke),hn=function(){lt()&&zt()},re.addEventListener("resume",zt=function(){pe||(pe=Xr(2e3).then(function(){Yr(new C("redirect-cancelled-by-user"))}))},!1),Ci().toLowerCase().match(/android/)||re.addEventListener("visibilitychange",hn,!1)}).s(function(Sr){return ng(j).then(function(){throw Sr})})}).na(function(){zt&&re.removeEventListener("resume",zt,!1),hn&&re.removeEventListener("visibilitychange",hn,!1),pe&&pe.cancel(),Ke&&j.Ra(Ke),j.c=null})},A.Ea=function(n){this.b.push(n),sh(this).s(function(u){"auth/invalid-cordova-configuration"===u.code&&(u=new xs("unknown",null,null,null,new C("no-auth-event")),n(u))})},A.Ra=function(n){Vn(this.b,function(u){return u==n})};var rg={name:"pendingRedirect",D:"session"};function ig(n){return ll(n.b,rg,n.a)}function kd(n,u,g,S){this.i={},this.u=0,this.O=n,this.m=u,this.v=g,this.G=S,this.h=[],this.f=!1,this.l=at(this.o,this),this.b=new Ld,this.A=new dh,this.g=new Cy(Fd(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Cv(this.O,this.m,this.v,Gt,this.G)}function Cv(n,u,g,S,j){var re=M.SDK_VERSION||null;return Ts()?new Iv(n,u,g,re,S,j):new bd(n,u,g,re,S,j)}function Tv(n){n.f||(n.f=!0,n.a.Ea(n.l));var u=n.a;return n.a.la().s(function(g){throw n.a==u&&n.reset(),g})}function Sv(n){n.a.Wb()&&Tv(n).s(function(u){var g=new xs("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));ch(u)&&n.o(g)}),n.a.Sb()||fh(n.b)}function Bu(n,u){An(n.h,u)||n.h.push(u),n.f||function(n){return n.b.get(rg,n.a).then(function(u){return"pending"==u})}(n.g).then(function(g){g?ig(n.g).then(function(){Tv(n).s(function(S){var j=new xs("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));ch(S)&&n.o(j)})}):Sv(n)}).s(function(){Sv(n)})}function ah(n,u){Vn(n.h,function(g){return g==u})}kd.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Cv(this.O,this.m,this.v,null,this.G),this.i={}},kd.prototype.o=function(n){if(!n)throw new C("invalid-auth-event");if(6e5<=R()-this.u&&(this.i={},this.u=0),n&&n.getUid()&&this.i.hasOwnProperty(n.getUid()))return!1;for(var u=!1,g=0;g<this.h.length;g++){var S=this.h[g];if(S.Eb(n.c,n.b)){(u=this.c[n.c])&&(u.h(n,S),n&&(n.f||n.b)&&(this.i[n.getUid()]=!0,this.u=R())),u=!0;break}}return fh(this.b),u};var Dv=new be(2e3,1e4),og=new be(3e4,6e4);function uh(n,u,g,S,j,re,pe){return n.a.Lb(u,g,S,function(){n.f||(n.f=!0,n.a.Ea(n.l))},function(){n.reset()},j,re,pe)}function ch(n){return!(!n||"auth/cordova-not-ready"!=n.code)}function lh(n,u,g,S,j){var re;return function(n){return n.b.set(rg,"pending",n.a)}(n.g).then(function(){return n.a.Mb(u,g,S,j).s(function(pe){if(ch(pe))throw new C("operation-not-supported-in-this-environment");return re=pe,ig(n.g).then(function(){throw re})}).then(function(){return n.a.Zb()?new Un(function(){}):ig(n.g).then(function(){return n.qa()}).then(function(){}).s(function(){})})})}function sg(n,u,g,S,j){return n.a.Nb(S,function(re){u.ma(g,null,re,j)},Dv.get())}kd.prototype.qa=function(){return this.b.qa()};var Hu={};function Fd(n,u,g){return n=n+":"+u,g&&(n=n+":"+g.url),n}function ag(n,u,g,S){var j=Fd(u,g,S);return Hu[j]||(Hu[j]=new kd(n,u,g,S)),Hu[j]}function Ld(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function fh(n){n.g||(n.g=!0,vu(n,!1,null,null))}function hh(n){n.g&&!n.i&&vu(n,!1,null,null)}function cg(n,u){if(n.b=function(){return Ln(u)},n.f.length)for(var g=0;g<n.f.length;g++)n.f[g](u)}function vu(n,u,g,S){u?S?function(n,u){if(n.b=function(){return Xn(u)},n.c.length)for(var g=0;g<n.c.length;g++)n.c[g](u)}(n,S):cg(n,g):cg(n,{user:null}),n.f=[],n.c=[]}function dh(){}function $l(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(n){this.hb=n},enumerable:!1})}function Bc(n,u){this.a=u,Pn(this,"verificationId",n)}function Ud(n,u,g,S){return new Co(n).eb(u,g).then(function(j){return new Bc(j,S)})}function lg(n){var u=_l(n);if(!(u&&u.exp&&u.auth_time&&u.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ni(this,{token:n,expirationTime:un(1e3*u.exp),authTime:un(1e3*u.auth_time),issuedAtTime:un(1e3*u.iat),signInProvider:u.firebase&&u.firebase.sign_in_provider?u.firebase.sign_in_provider:null,signInSecondFactor:u.firebase&&u.firebase.sign_in_second_factor?u.firebase.sign_in_second_factor:null,claims:u})}function ph(n,u,g){var S=u&&u[vh];if(!S)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=n,this.f=pn(u),this.g=g,this.c=new Ga(null,S),this.b=[];var j=this;qe(u[gh]||[],function(re){(re=Ic(re))&&j.b.push(re)}),Pn(this,"auth",this.a),Pn(this,"session",this.c),Pn(this,"hints",this.b)}Ld.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ld.prototype.h=function(n,u){if(n){this.reset(),this.g=!0;var g=n.c,S=n.b,j=n.a&&"auth/web-storage-unsupported"==n.a.code,re=n.a&&"auth/operation-not-supported-in-this-environment"==n.a.code;this.i=!(!j&&!re),"unknown"!=g||j||re?n.a?(vu(this,!0,null,n.a),Ln()):u.Fa(g,S)?function(n,u,g){g=g.Fa(u.c,u.b);var S=u.g,j=u.f,re=u.i,pe=u.S(),Ke=!!u.c.match(/Redirect$/);g(S,j,pe,re).then(function(zt){vu(n,Ke,zt,null)}).s(function(zt){vu(n,Ke,null,zt)})}(this,n,u):Xn(new C("invalid-auth-event")):(vu(this,!1,null,null),Ln())}else Xn(new C("invalid-auth-event"))},Ld.prototype.qa=function(){var n=this;return new Un(function(u,g){n.b?n.b().then(u,g):(n.f.push(u),n.c.push(g),function(n){var u=new C("timeout");n.a&&n.a.cancel(),n.a=Xr(og.get()).then(function(){n.b||(n.g=!0,vu(n,!0,null,u))})}(n))})},dh.prototype.h=function(n,u){if(n){var g=n.c,S=n.b;n.a?(u.ma(n.c,null,n.a,n.b),Ln()):u.Fa(g,S)?function(n,u){var g=n.b,S=n.c;u.Fa(S,g)(n.g,n.f,n.S(),n.i).then(function(j){u.ma(S,j,null,g)}).s(function(j){u.ma(S,null,j,g)})}(n,u):Xn(new C("invalid-auth-event"))}else Xn(new C("invalid-auth-event"))},Bc.prototype.confirm=function(n){return n=ia(this.verificationId,n),this.a(n)};var gh="mfaInfo",vh="mfaPendingCredential";function mh(n,u,g,S){C.call(this,"multi-factor-auth-required",S,u),this.b=new ph(n,u,g),Pn(this,"resolver",this.b)}function bf(n,u,g){if(n&&Pe(n.serverResponse)&&"auth/multi-factor-auth-required"===n.code)try{return new mh(u,n.serverResponse,g,n.message)}catch(S){}return null}function fg(){}function yh(n){Pn(this,"factorId",n.fa),this.a=n}function jd(n){if(yh.call(this,n),this.a.fa!=Co.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function zl(n,u){for(var g in Pt.call(this,n),u)this[g]=u[g]}function _h(n,u){this.a=n,this.b=[],this.c=at(this.xc,this),yn(this.a,"userReloaded",this.c);var g=[];u&&u.multiFactor&&u.multiFactor.enrolledFactors&&qe(u.multiFactor.enrolledFactors,function(S){var j=null,re={};if(S){S.uid&&(re[va]=S.uid),S.displayName&&(re[Vs]=S.displayName),S.enrollmentTime&&(re[qi]=new Date(S.enrollmentTime).toISOString()),S.phoneNumber&&(re[Cc]=S.phoneNumber);try{j=new ma(re)}catch(pe){}S=j}else S=null;S&&g.push(S)}),wh(this,g)}function wh(n,u){n.b=u,Pn(n,"enrolledFactors",u)}function Qs(n,u,g){if(this.h=n,this.i=u,this.g=g,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Vd(n,u){n.stop(),n.b=Xr(function(n,u){return u?(n.a=n.c,n.g()):(u=n.a,n.a*=2,n.a>n.f&&(n.a=n.f),u)}(n,u)).then(function(){return function(){var n=z.document,u=null;return lt()||!n?Ln():new Un(function(g){u=function(){lt()&&(n.removeEventListener("visibilitychange",u,!1),g())},n.addEventListener("visibilitychange",u,!1)}).s(function(g){throw n.removeEventListener("visibilitychange",u,!1),g})}()}).then(function(){return n.h()}).then(function(){Vd(n,!0)}).s(function(g){n.i(g)&&Vd(n,!1)})}function dg(n){this.c=n,this.b=this.a=null}function pg(n){return n.b&&1e3*n.b.c||0}function Bd(n,u){var g=u.refreshToken;n.b=Tu(u[Es]||""),n.a=g}function Kl(n,u){this.a=n||null,this.b=u||null,Ni(this,{lastSignInTime:un(u||null),creationTime:un(n||null)})}function Pv(n,u,g,S,j,re){Ni(this,{uid:n,displayName:S||null,photoURL:j||null,email:g||null,phoneNumber:re||null,providerId:u})}function Aa(n,u,g){this.G=[],this.l=n.apiKey,this.m=n.appName,this.o=n.authDomain||null;var S=M.SDK_VERSION?Ds(M.SDK_VERSION):null;this.a=new Ia(this.l,ue(Gt),S),n.emulatorConfig&&Lu(this.a,n.emulatorConfig),this.b=new dg(this.a),qd(this,u[Es]),Bd(this.b,u),Pn(this,"refreshToken",this.b.a),vg(this,g||{}),zr.call(this),this.P=!1,this.o&&As()&&(this.i=ag(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(n){return new Qs(function(){return n.I(!0)},function(u){return!(!u||"auth/network-request-failed"!=u.code)},function(){var u=pg(n.b)-R()-3e5;return 0<u?u:0})}(this),this.$=at(this.gb,this);var j=this;this.pa=null,this.Ba=function(re){j.wa(re.h)},this.ba=null,this.za=function(re){Lu(j.a,re.c)},this.W=null,this.X=[],this.Aa=function(re){Ef(j,re.f)},this.aa=null,this.N=new _h(this,g),Pn(this,"multiFactor",this.N)}function Hd(n,u){n.ba&&Gn(n.ba,"languageCodeChanged",n.Ba),(n.ba=u)&&yn(u,"languageCodeChanged",n.Ba)}function bh(n,u){n.W&&Gn(n.W,"emulatorConfigChanged",n.za),(n.W=u)&&yn(u,"emulatorConfigChanged",n.za)}function Ef(n,u){n.X=u,cf(n.a,M.SDK_VERSION?Ds(M.SDK_VERSION,n.X):null)}function Eh(n,u){n.aa&&Gn(n.aa,"frameworkChanged",n.Aa),(n.aa=u)&&yn(u,"frameworkChanged",n.Aa)}function Gd(n){try{return M.app(n.m).auth()}catch(u){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+n.m+"'!")}}function Wd(n){n.A||n.u.b||(n.u.start(),Gn(n,"tokenChanged",n.$),yn(n,"tokenChanged",n.$))}function Ih(n){Gn(n,"tokenChanged",n.$),n.u.stop()}function qd(n,u){n.ya=u,Pn(n,"_lat",u)}function dc(n){for(var u=[],g=0;g<n.R.length;g++)u.push(n.R[g](n));return Do(u).then(function(){return n})}function If(n){n.i&&!n.P&&(n.P=!0,Bu(n.i,n))}function vg(n,u){Ni(n,{uid:u.uid,displayName:u.displayName||null,photoURL:u.photoURL||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,isAnonymous:u.isAnonymous||!1,tenantId:u.tenantId||null,metadata:new Kl(u.createdAt,u.lastLoginAt),providerData:[]}),n.a.b=n.tenantId}function Mv(){}function Ch(n){return Ln().then(function(){if(n.A)throw new C("app-deleted")})}function $d(n){return Ht(n.providerData,function(u){return u.providerId})}function zd(n,u){u&&(mg(n,u.providerId),n.providerData.push(u))}function mg(n,u){Vn(n.providerData,function(g){return g.providerId==u})}function Wu(n,u,g){("uid"!=u||g)&&n.hasOwnProperty(u)&&Pn(n,u,g)}function Th(n,u){n!=u&&(Ni(n,{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,emailVerified:u.emailVerified,phoneNumber:u.phoneNumber,isAnonymous:u.isAnonymous,tenantId:u.tenantId,providerData:[]}),Pn(n,"metadata",u.metadata?function(n){return new Kl(n.a,n.b)}(u.metadata):new Kl),qe(u.providerData,function(g){zd(n,g)}),function(n,u){n.b=u.b,n.a=u.a}(n.b,u.b),Pn(n,"refreshToken",n.b.a),wh(n.N,u.N.b))}function Kd(n){return n.I().then(function(u){var g=n.isAnonymous;return function(n,u){return Er(n.a,i,{idToken:u}).then(at(n.Jc,n))}(n,u).then(function(){return g||Wu(n,"isAnonymous",!1),u})})}function Ra(n,u){u[Es]&&n.ya!=u[Es]&&(Bd(n.b,u),n.dispatchEvent(new zl("tokenChanged")),qd(n,u[Es]),Wu(n,"refreshToken",n.b.a))}function Ql(n,u){return Kd(n).then(function(){if(An($d(n),u))return dc(n).then(function(){throw new C("provider-already-linked")})})}function fl(n,u,g){return ho({user:n,credential:ws(u),additionalUserInfo:u=Vo(u),operationType:g})}function Yd(n,u){return Ra(n,u),n.reload().then(function(){return n})}function yg(n,u,g,S,j){if(!As())return Xn(new C("operation-not-supported-in-this-environment"));if(n.f&&!j)return Xn(n.f);var re=Du(g.providerId),pe=Z(n.uid+":::"),Ke=null;(!d()||Oo())&&n.o&&g.isOAuthProvider&&(Ke=df(n.o,n.l,n.m,u,g,null,pe,M.SDK_VERSION||null,null,null,n.tenantId));var zt=fn(Ke,re&&re.ua,re&&re.ta);return S=S().then(function(){if(Sh(n),!j)return n.I().then(function(){})}).then(function(){return uh(n.i,zt,u,g,pe,!!Ke,n.tenantId)}).then(function(){return new Un(function(hn,Sr){n.ma(u,null,new C("cancelled-popup-request"),n.h||null),n.g=hn,n.O=Sr,n.h=pe,n.c=sg(n.i,n,u,zt,pe)})}).then(function(hn){return zt&&Et(zt),hn?ho(hn):null}).s(function(hn){throw zt&&Et(zt),hn}),us(n,S,j)}function _g(n,u,g,S,j){if(!As())return Xn(new C("operation-not-supported-in-this-environment"));if(n.f&&!j)return Xn(n.f);var re=null,pe=Z(n.uid+":::");return S=S().then(function(){if(Sh(n),!j)return n.I().then(function(){})}).then(function(){return n.ga=pe,dc(n)}).then(function(Ke){return n.ha&&(Ke=(Ke=n.ha).b.set(Dh,n.w(),Ke.a)),Ke}).then(function(){return lh(n.i,u,g,pe,n.tenantId)}).s(function(Ke){if(re=Ke,n.ha)return qu(n.ha);throw re}).then(function(){if(re)throw re}),us(n,S,j)}function Sh(n){if(!n.i||!n.P)throw new C(n.i&&!n.P?"internal-error":"auth-domain-config-required")}function us(n,u,g){var S=function(n,u,g){return n.f&&!g?(u.cancel(),Xn(n.f)):u.s(function(S){throw!S||"auth/user-disabled"!=S.code&&"auth/user-token-expired"!=S.code||(n.f||n.dispatchEvent(new zl("userInvalidated")),n.f=S),S})}(n,u,g);return n.G.push(S),S.na(function(){sn(n.G,S)}),S.s(function(j){var re=null;throw j&&"auth/multi-factor-auth-required"===j.code&&(re=bf(j.w(),Gd(n),at(n.ic,n))),re||j})}function Xd(n){if(!n.apiKey)return null;var u={apiKey:n.apiKey,authDomain:n.authDomain,appName:n.appName,emulatorConfig:n.emulatorConfig},g={};if(!n.stsTokenManager||!n.stsTokenManager.accessToken)return null;g[Es]=n.stsTokenManager.accessToken,g.refreshToken=n.stsTokenManager.refreshToken||null;var S=new Aa(u,g,n);return n.providerData&&qe(n.providerData,function(j){j&&zd(S,ho(j))}),n.redirectEventId&&(S.ga=n.redirectEventId),S}function Eg(n){this.a=n,this.b=mf()}ph.prototype.Qc=function(n){var u=this;return n.rb(this.a.a,this.c).then(function(g){var S=pn(u.f);return delete S[gh],delete S[vh],Nn(S,g),u.g(S)})},x(mh,C),fg.prototype.rb=function(n,u,g){return u.type==Wa?function(n,u,g,S){return g.Ha().then(function(j){return j={idToken:j},void 0!==S&&(j.displayName=S),Nn(j,{phoneVerificationInfo:Nc(n.a)}),Er(u,ol,j)})}(this,n,u,g):function(n,u,g){return g.Ha().then(function(S){return Nn(S={mfaPendingCredential:S},{phoneVerificationInfo:Nc(n.a)}),Er(u,a,S)})}(this,n,u)},x(yh,fg),x(jd,yh),x(zl,Pt),(A=_h.prototype).xc=function(n){wh(this,function(n){var u=[];return qe(n.mfaInfo||[],function(g){(g=Ic(g))&&u.push(g)}),u}(n.gd))},A.Qb=function(){return this.a.I().then(function(n){return new Ga(n,null)})},A.ec=function(n,u){var g=this,S=this.a.a;return this.Qb().then(function(j){return n.rb(S,j,u)}).then(function(j){return Ra(g.a,j),g.a.reload()})},A.ad=function(n){var u=this,g="string"==typeof n?n:n.uid,S=this.a.a;return this.a.I().then(function(j){return Er(S,Ca,{idToken:j,mfaEnrollmentId:g})}).then(function(j){var re=Kt(u.b,function(pe){return pe.uid!=g});return wh(u,re),Ra(u.a,j),u.a.reload().s(function(pe){if("auth/user-token-expired"!=pe.code)throw pe})})},A.w=function(){return{multiFactor:{enrolledFactors:Ht(this.b,function(n){return n.w()})}}},Qs.prototype.start=function(){this.a=this.c,Vd(this,!0)},Qs.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dg.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:pg(this)}},dg.prototype.getToken=function(n){return n=!!n,this.b&&!this.a?Xn(new C("user-token-expired")):n||!this.b||R()>pg(this)-3e4?this.a?function(n,u){return function(n,u){return new Un(function(g,S){"refresh_token"==u.grant_type&&u.refresh_token||"authorization_code"==u.grant_type&&u.code?Uu(n,n.l+"?key="+encodeURIComponent(n.c),function(j){j?j.error?S(fc(j)):j.access_token&&j.refresh_token?g(j):S(new C("internal-error")):S(new C("network-request-failed"))},"POST",zo(u).toString(),n.g,n.v.get()):S(new C("internal-error"))})}(n.c,u).then(function(g){return n.b=Tu(g.access_token),n.a=g.refresh_token,{accessToken:n.b.toString(),refreshToken:n.a}}).s(function(g){throw"auth/user-token-expired"==g.code&&(n.a=null),g})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ln(null):Ln({accessToken:this.b.toString(),refreshToken:this.a})},Kl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},x(Aa,zr),Aa.prototype.wa=function(n){this.pa=n,uf(this.a,n)},Aa.prototype.ka=function(){return this.pa},Aa.prototype.Ga=function(){return zn(this.X)},Aa.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Pn(Aa.prototype,"providerId","firebase"),(A=Aa.prototype).reload=function(){var n=this;return us(this,Ch(this).then(function(){return Kd(n).then(function(){return dc(n)}).then(Mv)}))},A.nc=function(n){return this.I(n).then(function(u){return new lg(u)})},A.I=function(n){var u=this;return us(this,Ch(this).then(function(){return u.b.getToken(n)}).then(function(g){if(!g)throw new C("internal-error");return g.accessToken!=u.ya&&(qd(u,g.accessToken),u.dispatchEvent(new zl("tokenChanged"))),Wu(u,"refreshToken",g.refreshToken),g.accessToken}))},A.Jc=function(n){if(!(n=n.users)||!n.length)throw new C("internal-error");vg(this,{uid:(n=n[0]).localId,displayName:n.displayName,photoURL:n.photoUrl,email:n.email,emailVerified:!!n.emailVerified,phoneNumber:n.phoneNumber,lastLoginAt:n.lastLoginAt,createdAt:n.createdAt,tenantId:n.tenantId});for(var u=function(n){return(n=n.providerUserInfo)&&n.length?Ht(n,function(u){return new Pv(u.rawId,u.providerId,u.email,u.displayName,u.photoUrl,u.phoneNumber)}):[]}(n),g=0;g<u.length;g++)zd(this,u[g]);Wu(this,"isAnonymous",!(this.email&&n.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new zl("userReloaded",{gd:n}))},A.Kc=function(n){return yi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(n)},A.sb=function(n){var u=this,g=null;return us(this,n.c(this.a,this.uid).then(function(S){return Ra(u,S),g=fl(u,S,"reauthenticate"),u.f=null,u.reload()}).then(function(){return g}),!0)},A.Bc=function(n){return yi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(n)},A.pb=function(n){var u=this,g=null;return us(this,Ql(this,n.providerId).then(function(){return u.I()}).then(function(S){return n.b(u.a,S)}).then(function(S){return g=fl(u,S,"link"),Yd(u,S)}).then(function(){return g}))},A.Cc=function(n,u){var g=this;return us(this,Ql(this,"phone").then(function(){return Ud(Gd(g),n,u,at(g.pb,g))}))},A.Lc=function(n,u){var g=this;return us(this,Ln().then(function(){return Ud(Gd(g),n,u,at(g.sb,g))}),!0)},A.Ab=function(n){var u=this;return us(this,this.I().then(function(g){return u.a.Ab(g,n)}).then(function(g){return Ra(u,g),u.reload()}))},A.dd=function(n){var u=this;return us(this,this.I().then(function(g){return n.b(u.a,g)}).then(function(g){return Ra(u,g),u.reload()}))},A.Bb=function(n){var u=this;return us(this,this.I().then(function(g){return u.a.Bb(g,n)}).then(function(g){return Ra(u,g),u.reload()}))},A.Cb=function(n){if(void 0===n.displayName&&void 0===n.photoURL)return Ch(this);var u=this;return us(this,this.I().then(function(g){return u.a.Cb(g,{displayName:n.displayName,photoUrl:n.photoURL})}).then(function(g){return Ra(u,g),Wu(u,"displayName",g.displayName||null),Wu(u,"photoURL",g.photoUrl||null),qe(u.providerData,function(S){"password"===S.providerId&&(Pn(S,"displayName",u.displayName),Pn(S,"photoURL",u.photoURL))}),dc(u)}).then(Mv))},A.bd=function(n){var u=this;return us(this,Kd(this).then(function(g){return An($d(u),n)?function(n,u,g){return Er(n,hf,{idToken:u,deleteProvider:g})}(u.a,g,[n]).then(function(S){var j={};return qe(S.providerUserInfo||[],function(re){j[re.providerId]=!0}),qe($d(u),function(re){j[re]||mg(u,re)}),j[Co.PROVIDER_ID]||Pn(u,"phoneNumber",null),dc(u)}):dc(u).then(function(){throw new C("no-such-provider")})}))},A.delete=function(){var n=this;return us(this,this.I().then(function(u){return Er(n.a,gd,{idToken:u})}).then(function(){n.dispatchEvent(new zl("userDeleted"))})).then(function(){for(var u=0;u<n.G.length;u++)n.G[u].cancel("app-deleted");Hd(n,null),bh(n,null),Eh(n,null),n.G=[],n.A=!0,Ih(n),Pn(n,"refreshToken",null),n.i&&ah(n.i,n)})},A.Eb=function(n,u){return!!("linkViaPopup"==n&&(this.h||null)==u&&this.g||"reauthViaPopup"==n&&(this.h||null)==u&&this.g||"linkViaRedirect"==n&&(this.ga||null)==u||"reauthViaRedirect"==n&&(this.ga||null)==u)},A.ma=function(n,u,g,S){"linkViaPopup"!=n&&"reauthViaPopup"!=n||S!=(this.h||null)||(g&&this.O?this.O(g):u&&!g&&this.g&&this.g(u),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},A.Fa=function(n,u){return"linkViaPopup"==n&&u==(this.h||null)?at(this.Jb,this):"reauthViaPopup"==n&&u==(this.h||null)?at(this.Kb,this):"linkViaRedirect"==n&&(this.ga||null)==u?at(this.Jb,this):"reauthViaRedirect"==n&&(this.ga||null)==u?at(this.Kb,this):null},A.Dc=function(n){var u=this;return yg(this,"linkViaPopup",n,function(){return Ql(u,n.providerId).then(function(){return dc(u)})},!1)},A.Mc=function(n){return yg(this,"reauthViaPopup",n,function(){return Ln()},!0)},A.Ec=function(n){var u=this;return _g(this,"linkViaRedirect",n,function(){return Ql(u,n.providerId)},!1)},A.Nc=function(n){return _g(this,"reauthViaRedirect",n,function(){return Ln()},!0)},A.Jb=function(n,u,g,S){var j=this;this.c&&(this.c.cancel(),this.c=null);var re=null;return us(this,this.I().then(function(pe){return il(j.a,{requestUri:n,postBody:S,sessionId:u,idToken:pe})}).then(function(pe){return re=fl(j,pe,"link"),Yd(j,pe)}).then(function(){return re}))},A.Kb=function(n,u,g,S){var j=this;this.c&&(this.c.cancel(),this.c=null);var re=null;return us(this,Ln().then(function(){return Ws(Uc(j.a,{requestUri:n,sessionId:u,postBody:S,tenantId:g}),j.uid)}).then(function(Ke){return re=fl(j,Ke,"reauthenticate"),Ra(j,Ke),j.f=null,j.reload()}).then(function(){return re}),!0)},A.tb=function(n){var u=this,g=null;return us(this,this.I().then(function(S){return g=S,void 0===n||Cn(n)?{}:ou(new Eu(n))}).then(function(S){return u.a.tb(g,S)}).then(function(S){if(u.email!=S)return u.reload()}).then(function(){}))},A.Db=function(n,u){var g=this,S=null;return us(this,this.I().then(function(j){return S=j,void 0===u||Cn(u)?{}:ou(new Eu(u))}).then(function(j){return g.a.Db(S,n,j)}).then(function(j){if(g.email!=j)return g.reload()}).then(function(){}))},A.ic=function(n){var u=null,g=this;return us(this,n=Ws(Ln(n),g.uid).then(function(S){return u=fl(g,S,"reauthenticate"),Ra(g,S),g.f=null,g.reload()}).then(function(){return u}),!0)},A.toJSON=function(){return this.w()},A.w=function(){var n={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&Nn(n,this.metadata.w()),qe(this.providerData,function(u){n.providerData.push(function(n){var g,u={};for(g in n)n.hasOwnProperty(g)&&(u[g]=n[g]);return u}(u))}),Nn(n,this.N.w()),n};var Dh={name:"redirectUser",D:"session"};function qu(n){return ll(n.b,Dh,n.a)}function Zd(n){this.a=n,this.b=mf(),this.c=null,this.f=function(n){var u=mu("local"),g=mu("session"),S=mu("none");return function(n,u,g){var S=vr(u,g),j=cl(n,u.D);return n.get(u,g).then(function(re){var pe=null;try{pe=F(z.localStorage.getItem(S))}catch(Ke){}if(pe&&!re)return z.localStorage.removeItem(S),n.set(u,pe,g);pe&&re&&"localStorage"!=j.type&&z.localStorage.removeItem(S)})}(n.b,u,n.a).then(function(){return n.b.get(g,n.a)}).then(function(j){return j?g:n.b.get(S,n.a).then(function(re){return re?S:n.b.get(u,n.a).then(function(pe){return pe?u:n.b.get(Hc,n.a).then(function(Ke){return Ke?mu(Ke):u})})})}).then(function(j){return n.c=j,Jd(n,j.D)}).s(function(){n.c||(n.c=u)})}(this),this.b.addListener(mu("local"),this.a,at(this.g,this))}function Jd(n,u){var S,g=[];for(S in Bl)Bl[S]!==u&&g.push(ll(n.b,mu(Bl[S]),n.a));return g.push(ll(n.b,Hc,n.a)),function(n){return new Un(function(u,g){var S=n.length,j=[];if(S)for(var re=function(hn,Sr){S--,j[hn]=Sr,0==S&&u(j)},pe=function(hn){g(hn)},Ke=0;Ke<n.length;Ke++)Xo(n[Ke],Ot(re,Ke),pe);else u(j)})}(g)}Zd.prototype.g=function(){var n=this,u=mu("local");hl(this,function(){return Ln().then(function(){return n.c&&"local"!=n.c.D?n.b.get(u,n.a):null}).then(function(g){if(g)return Jd(n,"local").then(function(){n.c=u})})})};var Hc={name:"persistence",D:"session"};function mu(n){return{name:"authUser",D:n}}function Yl(n,u){return hl(n,function(){return n.b.set(n.c,u.w(),n.a)})}function Ig(n){return hl(n,function(){return ll(n.b,n.c,n.a)})}function Rh(n,u,g){return hl(n,function(){return n.b.get(n.c,n.a).then(function(S){return S&&u&&(S.authDomain=u),S&&g&&(S.emulatorConfig=g),Xd(S||{})})})}function hl(n,u){return n.f=n.f.then(u,u),n.f}function yu(n){if(this.m=!1,Pn(this,"settings",new $l),Pn(this,"app",n),!ji(this).options||!ji(this).options.apiKey)throw new C("invalid-api-key");n=M.SDK_VERSION?Ds(M.SDK_VERSION):null,this.a=new Ia(ji(this).options&&ji(this).options.apiKey,ue(Gt),n),this.R=[],this.u=[],this.P=[],this.ac=M.INTERNAL.createSubscribe(at(this.yc,this)),this.X=void 0,this.bc=M.INTERNAL.createSubscribe(at(this.zc,this)),Zl(this,null),this.l=new Zd(ji(this).options.apiKey+":"+ji(this).name),this.G=new Eg(ji(this).options.apiKey+":"+ji(this).name),this.$=so(this,function(n){var u=ji(n).options.authDomain,g=function(n){var u=function(n,u){return n.b.get(Dh,n.a).then(function(g){return g&&u&&(g.authDomain=u),Xd(g||{})})}(n.G,ji(n).options.authDomain).then(function(g){return(n.o=g)&&(g.ha=n.G),qu(n.G)});return so(n,u)}(n).then(function(){return Rh(n.l,u,n.f)}).then(function(S){return S?(S.ha=n.G,n.o&&(n.o.ga||null)==(S.ga||null)?S:S.reload().then(function(){return Yl(n.l,S).then(function(){return S})}).s(function(j){return"auth/network-request-failed"==j.code?S:Ig(n.l)})):null}).then(function(S){Zl(n,S||null)});return so(n,g)}(this)),this.i=so(this,function(n){return n.$.then(function(){return tp(n)}).s(function(){}).then(function(){if(!n.m)return n.pa()}).s(function(){}).then(function(){if(!n.m){n.ba=!0;var u=n.l;u.b.addListener(mu("local"),u.a,n.pa)}})}(this)),this.ba=!1,this.pa=at(this.Yc,this),this.Ba=at(this.da,this),this.ya=at(this.kc,this),this.za=at(this.vc,this),this.Aa=at(this.wc,this),this.b=null,function(n){var u=ji(n).options.authDomain,g=ji(n).options.apiKey;u&&As()&&(n.gb=n.$.then(function(){if(!n.m){if(n.b=ag(u,g,ji(n).name,n.f),Bu(n.b,n),qr(n)&&If(qr(n)),n.o){If(n.o);var S=n.o;S.wa(n.ka()),Hd(S,n),Ef(S=n.o,n.N),Eh(S,n),Lu((S=n.o).a,n.f),bh(S,n),n.o=null}return n.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=at(this.delete,this),this.INTERNAL.logFramework=at(this.Fc,this),this.A=0,zr.call(this),function(n){Object.defineProperty(n,"lc",{get:function(){return this.ka()},set:function(u){this.wa(u)},enumerable:!1}),n.aa=null,Object.defineProperty(n,"ti",{get:function(){return this.S()},set:function(u){this.xb(u)},enumerable:!1}),n.W=null}(this),this.N=[],this.f=null}function ep(n){Pt.call(this,"languageCodeChanged"),this.h=n}function Cg(n){Pt.call(this,"emulatorConfigChanged"),this.c=n}function Nh(n){Pt.call(this,"frameworkChanged"),this.f=n}function Oh(n){return n.gb||Xn(new C("auth-domain-config-required"))}function tp(n){if(!As())return Xn(new C("operation-not-supported-in-this-environment"));var u=Oh(n).then(function(){return n.b.qa()}).then(function(g){return g?ho(g):null});return so(n,u)}function Zl(n,u){qr(n)&&(function(n,u){Vn(n.R,function(g){return g==u})}(qr(n),n.Ba),Gn(qr(n),"tokenChanged",n.ya),Gn(qr(n),"userDeleted",n.za),Gn(qr(n),"userInvalidated",n.Aa),Ih(qr(n))),u&&(u.R.push(n.Ba),yn(u,"tokenChanged",n.ya),yn(u,"userDeleted",n.za),yn(u,"userInvalidated",n.Aa),0<n.A&&Wd(u)),Pn(n,"currentUser",u),u&&(u.wa(n.ka()),Hd(u,n),Ef(u,n.N),Eh(u,n),Lu(u.a,n.f),bh(u,n))}function dl(n,u){var g=null,S=null;return so(n,u.then(function(j){return g=ws(j),S=Vo(j),function(n,u){var g={};return g.apiKey=ji(n).options.apiKey,g.authDomain=ji(n).options.authDomain,g.appName=ji(n).name,n.f&&(g.emulatorConfig=n.f),n.$.then(function(){return function(n,u,g,S){var j=new Aa(n,u);return g&&(j.ha=g),S&&Ef(j,S),j.reload().then(function(){return j})}(g,u,n.G,n.Ga())}).then(function(S){return qr(n)&&S.uid==qr(n).uid?(Th(qr(n),S),n.da(S)):(Zl(n,S),If(S),n.da(S))}).then(function(){ef(n)})}(n,j)},function(j){var re=null;throw j&&"auth/multi-factor-auth-required"===j.code&&(re=bf(j.w(),n,at(n.jc,n))),re||j}).then(function(){return ho({user:qr(n),credential:g,additionalUserInfo:S,operationType:"signIn"})}))}function ji(n){return n.app}function qr(n){return n.currentUser}function Ph(n){return qr(n)&&qr(n)._lat||null}function ef(n){if(n.ba){for(var u=0;u<n.u.length;u++)n.u[u]&&n.u[u](Ph(n));if(n.X!==n.getUid()&&n.P.length)for(n.X=n.getUid(),u=0;u<n.P.length;u++)n.P[u]&&n.P[u](Ph(n))}}function so(n,u){return n.R.push(u),u.na(function(){sn(n.R,u)}),u}function xh(){}function ua(){this.a={},this.b=1e12}Zd.prototype.wb=function(n){var u=null,g=this;return function(n){var u=new C("invalid-persistence-type"),g=new C("unsupported-persistence-type");e:{for(S in Bl)if(Bl[S]==n){var S=!0;break e}S=!1}if(!S||"string"!=typeof n)throw u;switch(mi()){case"ReactNative":if("session"===n)throw g;break;case"Node":if("none"!==n)throw g;break;case"Worker":if("session"===n||!nh()&&"none"!==n)throw g;break;default:if(!ga()&&"none"!==n)throw g}}(n),hl(this,function(){return n!=g.c.D?g.b.get(g.c,g.a).then(function(S){return u=S,Jd(g,n)}).then(function(){if(g.c=mu(n),u)return g.b.set(g.c,u,g.a)}):Ln()})},x(yu,zr),x(ep,Pt),x(Cg,Pt),x(Nh,Pt),(A=yu.prototype).wb=function(n){return so(this,n=this.l.wb(n))},A.wa=function(n){this.aa===n||this.m||(this.aa=n,uf(this.a,this.aa),this.dispatchEvent(new ep(this.ka())))},A.ka=function(){return this.aa},A.ed=function(){var n=z.navigator;this.wa(n&&(n.languages&&n.languages[0]||n.language||n.userLanguage)||null)},A.fd=function(n){if(!this.f){if(!/^https?:\/\//.test(n))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");jt("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),z.document&&fo().then(function(){var n=z.document.createElement("div");n.innerText="Running in emulator mode. Do not use with production credentials.",n.style.position="fixed",n.style.width="100%",n.style.backgroundColor="#ffffff",n.style.border=".1em solid #000000",n.style.color="#ff0000",n.style.bottom="0px",n.style.left="0px",n.style.margin="0px",n.style.zIndex=1e4,n.style.textAlign="center",n.classList.add("firebase-emulator-warning"),z.document.body.appendChild(n)}),this.f={url:n},this.settings.hb=!0,Lu(this.a,this.f),this.dispatchEvent(new Cg(this.f))}},A.Fc=function(n){this.N.push(n),cf(this.a,M.SDK_VERSION?Ds(M.SDK_VERSION,this.N):null),this.dispatchEvent(new Nh(this.N))},A.Ga=function(){return zn(this.N)},A.xb=function(n){this.W===n||this.m||(this.W=n,this.a.b=this.W)},A.S=function(){return this.W},A.toJSON=function(){return{apiKey:ji(this).options.apiKey,authDomain:ji(this).options.authDomain,appName:ji(this).name,currentUser:qr(this)&&qr(this).w()}},A.Eb=function(n,u){switch(n){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==u&&!!this.g;default:return!1}},A.ma=function(n,u,g,S){"signInViaPopup"==n&&this.h==S&&(g&&this.O?this.O(g):u&&!g&&this.g&&this.g(u),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},A.Fa=function(n,u){return"signInViaRedirect"==n||"signInViaPopup"==n&&this.h==u&&this.g?at(this.hc,this):null},A.hc=function(n,u,g,S){var j=this,re={requestUri:n,postBody:S,sessionId:u,tenantId:g};return this.c&&(this.c.cancel(),this.c=null),j.$.then(function(){return dl(j,Ml(j.a,re))})},A.Wc=function(n){if(!As())return Xn(new C("operation-not-supported-in-this-environment"));var u=this,g=Du(n.providerId),S=Z(),j=null;(!d()||Oo())&&ji(this).options.authDomain&&n.isOAuthProvider&&(j=df(ji(this).options.authDomain,ji(this).options.apiKey,ji(this).name,"signInViaPopup",n,null,S,M.SDK_VERSION||null,null,null,this.S(),this.f));var re=fn(j,g&&g.ua,g&&g.ta);return so(this,g=Oh(this).then(function(pe){return uh(pe,re,"signInViaPopup",n,S,!!j,u.S())}).then(function(){return new Un(function(pe,Ke){u.ma("signInViaPopup",null,new C("cancelled-popup-request"),u.h),u.g=pe,u.O=Ke,u.h=S,u.c=sg(u.b,u,"signInViaPopup",re,S)})}).then(function(pe){return re&&Et(re),pe?ho(pe):null}).s(function(pe){throw re&&Et(re),pe}))},A.Xc=function(n){if(!As())return Xn(new C("operation-not-supported-in-this-environment"));var u=this;return so(this,Oh(this).then(function(){return function(n){return hl(n,function(){return n.b.set(Hc,n.c.D,n.a)})}(u.l)}).then(function(){return lh(u.b,"signInViaRedirect",n,void 0,u.S())}))},A.qa=function(){var n=this;return tp(this).then(function(u){return n.b&&hh(n.b.b),u}).s(function(u){throw n.b&&hh(n.b.b),u})},A.cd=function(n){if(!n)return Xn(new C("null-user"));if(this.W!=n.tenantId)return Xn(new C("tenant-id-mismatch"));var u=this,g={};g.apiKey=ji(this).options.apiKey,g.authDomain=ji(this).options.authDomain,g.appName=ji(this).name;var S=function(n,u,g,S){var j=n.b,re={};return re[Es]=j.b&&j.b.toString(),re.refreshToken=j.a,u=new Aa(u||{apiKey:n.l,authDomain:n.o,appName:n.m},re),g&&(u.ha=g),S&&Ef(u,S),Th(u,n),u}(n,g,u.G,u.Ga());return so(this,this.i.then(function(){if(ji(u).options.apiKey!=n.l)return S.reload()}).then(function(){return qr(u)&&n.uid==qr(u).uid?(Th(qr(u),n),u.da(n)):(Zl(u,S),If(S),u.da(S))}).then(function(){ef(u)}))},A.zb=function(){var n=this;return so(this,this.i.then(function(){return n.b&&hh(n.b.b),qr(n)?(Zl(n,null),Ig(n.l).then(function(){ef(n)})):Ln()}))},A.Yc=function(){var n=this;return Rh(this.l,ji(this).options.authDomain).then(function(u){if(!n.m){var g;if(g=qr(n)&&u){g=qr(n).uid;var S=u.uid;g=null!=g&&""!==g&&null!=S&&""!==S&&g==S}if(g)return Th(qr(n),u),qr(n).I();(qr(n)||u)&&(Zl(n,u),u&&(If(u),u.ha=n.G),n.b&&Bu(n.b,n),ef(n))}})},A.da=function(n){return Yl(this.l,n)},A.kc=function(){ef(this),this.da(qr(this))},A.vc=function(){this.zb()},A.wc=function(){this.zb()},A.jc=function(n){var u=this;return this.i.then(function(){return dl(u,Ln(n))})},A.yc=function(n){var u=this;this.addAuthTokenListener(function(){n.next(qr(u))})},A.zc=function(n){var u=this;!function(n,u){n.P.push(u),so(n,n.i.then(function(){!n.m&&An(n.P,u)&&n.X!==n.getUid()&&(n.X=n.getUid(),u(Ph(n)))}))}(this,function(){n.next(qr(u))})},A.Hc=function(n,u,g){var S=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof n?n(qr(S)):"function"==typeof n.next&&n.next(qr(S))}),this.ac(n,u,g)},A.Gc=function(n,u,g){var S=this;return this.ba&&Promise.resolve().then(function(){S.X=S.getUid(),"function"==typeof n?n(qr(S)):"function"==typeof n.next&&n.next(qr(S))}),this.bc(n,u,g)},A.mc=function(n){var u=this;return so(this,this.i.then(function(){return qr(u)?qr(u).I(n).then(function(S){return{accessToken:S}}):null}))},A.Sc=function(n){var u=this;return this.i.then(function(){return dl(u,Er(u.a,er,{token:n}))}).then(function(g){var S=g.user;return Wu(S,"isAnonymous",!1),u.da(S),g})},A.Tc=function(n,u){var g=this;return this.i.then(function(){return dl(g,Er(g.a,Tr,{email:n,password:u}))})},A.dc=function(n,u){var g=this;return this.i.then(function(){return dl(g,Er(g.a,lc,{email:n,password:u}))})},A.Za=function(n){var u=this;return this.i.then(function(){return dl(u,n.ja(u.a))})},A.Rc=function(n){return yi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(n)},A.yb=function(){var n=this;return this.i.then(function(){var u=qr(n);if(u&&u.isAnonymous){var g=ho({providerId:null,isNewUser:!1});return ho({user:u,credential:null,additionalUserInfo:g,operationType:"signIn"})}return dl(n,n.a.yb()).then(function(S){var j=S.user;return Wu(j,"isAnonymous",!0),n.da(j),S})})},A.getUid=function(){return qr(this)&&qr(this).uid||null},A.cc=function(n){this.addAuthTokenListener(n),this.A++,0<this.A&&qr(this)&&Wd(qr(this))},A.Oc=function(n){var u=this;qe(this.u,function(g){g==n&&u.A--}),0>this.A&&(this.A=0),0==this.A&&qr(this)&&Ih(qr(this)),this.removeAuthTokenListener(n)},A.addAuthTokenListener=function(n){var u=this;this.u.push(n),so(this,this.i.then(function(){u.m||An(u.u,n)&&n(Ph(u))}))},A.removeAuthTokenListener=function(n){Vn(this.u,function(u){return u==n})},A.delete=function(){this.m=!0;for(var n=0;n<this.R.length;n++)this.R[n].cancel("app-deleted");return this.R=[],this.l&&(n=this.l).b.removeListener(mu("local"),n.a,this.pa),this.b&&(ah(this.b,this),hh(this.b.b)),Promise.resolve()},A.gc=function(n){return so(this,function(n,u){return Er(n,du,{identifier:u,continueUri:v()?m():"http://localhost"}).then(function(g){return g.signinMethods||[]})}(this.a,n))},A.Ac=function(n){return!!Os(n)},A.vb=function(n,u){var g=this;return so(this,Ln().then(function(){var S=new Eu(u);if(!S.c)throw new C("argument-error",yl+" must be true when sending sign in link to email");return ou(S)}).then(function(S){return g.a.vb(n,S)}).then(function(){}))},A.hd=function(n){return this.Qa(n).then(function(u){return u.data.email})},A.mb=function(n,u){return so(this,this.a.mb(n,u).then(function(){}))},A.Qa=function(n){return so(this,this.a.Qa(n).then(function(u){return new bu(u)}))},A.ib=function(n){return so(this,this.a.ib(n).then(function(){}))},A.ub=function(n,u){var g=this;return so(this,Ln().then(function(){return void 0===u||Cn(u)?{}:ou(new Eu(u))}).then(function(S){return g.a.ub(n,S)}).then(function(){}))},A.Vc=function(n,u){return so(this,Ud(this,n,u,at(this.Za,this)))},A.Uc=function(n,u){var g=this;return so(this,Ln().then(function(){var S=u||m(),j=qa(n,S);if(!(S=Os(S)))throw new C("argument-error","Invalid email link!");if(S.tenantId!==g.S())throw new C("tenant-id-mismatch");return g.Za(j)}))},xh.prototype.render=function(){},xh.prototype.reset=function(){},xh.prototype.getResponse=function(){},xh.prototype.execute=function(){};var Tf=null;function Sf(n,u){return(u=Hv(u))&&n.a[u]||null}function Hv(n){return(n=void 0===n?1e12:n)?n.toString():null}function Mh(n,u){this.g=!1,this.c=u,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ri(n);var g=this;this.i=function(){g.execute()},this.h?this.execute():yn(this.f,"click",this.i)}function np(n){if(n.g)throw Error("reCAPTCHA mock was already deleted!")}function kh(){}function Fh(){}ua.prototype.render=function(n,u){return this.a[this.b.toString()]=new Mh(n,u),this.b++},ua.prototype.reset=function(n){var u=Sf(this,n);n=Hv(n),u&&n&&(u.delete(),delete this.a[n])},ua.prototype.getResponse=function(n){return(n=Sf(this,n))?n.getResponse():null},ua.prototype.execute=function(n){(n=Sf(this,n))&&n.execute()},Mh.prototype.getResponse=function(){return np(this),this.b},Mh.prototype.execute=function(){np(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var n=50,u=[];0<n;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),n--;return u.join("")}();var u=n.c.callback,g=n.c["expired-callback"];if(u)try{u(n.b)}catch(S){}n.a=setTimeout(function(){if(n.a=null,n.b=null,g)try{g()}catch(S){}n.h&&n.execute()},6e4)},500))},Mh.prototype.delete=function(){np(this),this.g=!0,clearTimeout(this.a),this.a=null,Gn(this.f,"click",this.i)},Pn(kh,"FACTOR_ID","phone"),Fh.prototype.g=function(){return Tf||(Tf=new ua),Ln(Tf)},Fh.prototype.c=function(){};var Lh=null;function Uh(){this.b=z.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Gv=new Yn(Nr,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Wv=new be(3e4,6e4);Uh.prototype.g=function(n){var u=this;return new Un(function(g,S){var j=setTimeout(function(){S(new C("network-request-failed"))},Wv.get());!z.grecaptcha||n!==u.f&&!u.b?(z[u.a]=function(){if(z.grecaptcha){u.f=n;var pe=z.grecaptcha.render;z.grecaptcha.render=function(Ke,zt){return Ke=pe(Ke,zt),u.b++,Ke},clearTimeout(j),g(z.grecaptcha)}else clearTimeout(j),S(new C("internal-error"));delete z[u.a]},Ln(kc(bi(Gv,{onload:u.a,hl:n||""}))).s(function(){clearTimeout(j),S(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(j),g(z.grecaptcha))})},Uh.prototype.c=function(){this.b--};var pl=null;function Df(n,u,g,S,j,re,pe){if(Pn(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=u,this.g=null,pe?(Lh||(Lh=new Fh),pe=Lh):(pl||(pl=new Uh),pe=pl),this.v=pe,this.a=g||{theme:"light",type:"image"},this.h=[],this.a[op])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Tg],!z.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ri(u)||!this.i&&ri(u).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ia(n,re||null,j||null),this.u=S||function(){return null};var Ke=this;this.l=[];var zt=this.a[rp];this.a[rp]=function(Sr){if(Sg(Ke,Sr),"function"==typeof zt)zt(Sr);else if("string"==typeof zt){var Yr=li(zt,z);"function"==typeof Yr&&Yr(Sr)}};var hn=this.a[ip];this.a[ip]=function(){if(Sg(Ke,null),"function"==typeof hn)hn();else if("string"==typeof hn){var Sr=li(hn,z);"function"==typeof Sr&&Sr()}}}var rp="callback",ip="expired-callback",op="sitekey",Tg="size";function Sg(n,u){for(var g=0;g<n.l.length;g++)try{n.l[g](u)}catch(S){}}function sp(n,u){return n.h.push(u),u.na(function(){sn(n.h,u)}),u}function jh(n){if(n.A)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vh(n,u,g){var S=!1;try{this.b=g||M.app()}catch(pe){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");g=this.b.options.apiKey;var j=this,re=null;try{re=this.b.auth().Ga()}catch(pe){}try{S=this.b.auth().settings.appVerificationDisabledForTesting}catch(pe){}re=M.SDK_VERSION?Ds(M.SDK_VERSION,re):null,Df.call(this,g,n,u,function(){try{var pe=j.b.auth().ka()}catch(Ke){pe=null}return pe},re,ue(Gt),S)}function $v(n,u,g,S){e:{g=Array.prototype.slice.call(g);for(var j=0,re=!1,pe=0;pe<u.length;pe++)if(u[pe].optional)re=!0;else{if(re)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");j++}if(re=u.length,g.length<j||re<g.length)S="Expected "+(j==re?1==j?"1 argument":j+" arguments":j+"-"+re+" arguments")+" but got "+g.length+".";else{for(j=0;j<g.length;j++)if(re=u[j].optional&&void 0===g[j],!u[j].K(g[j])&&!re){if(u=u[j],0>j||j>=ap.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");g=ap[j],S=(S?"":g+" argument ")+(u.name?'"'+u.name+'" ':"")+"must be "+u.J+".";break e}S=null}}if(S)throw new C("argument-error",n+" failed: "+S)}(A=Df.prototype).Ia=function(){var n=this;return this.f?this.f:this.f=sp(this,Ln().then(function(){if(v()&&!Zr())return fo();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return n.v.g(n.u())}).then(function(u){return n.g=u,Er(n.o,U,{})}).then(function(u){n.a[op]=u.recaptchaSiteKey}).s(function(u){throw n.f=null,u}))},A.render=function(){jh(this);var n=this;return sp(this,this.Ia().then(function(){if(null===n.c){var u=n.m;if(!n.i){var g=ri(u);u=function(n,u,g){var S=arguments,j=document,re=String(S[0]),pe=S[1];if(!ko&&pe&&(pe.name||pe.type)){if(re=["<",re],pe.name&&re.push(' name="',Je(pe.name),'"'),pe.type){re.push(' type="',Je(pe.type),'"');var Ke={};Nn(Ke,pe),delete Ke.type,pe=Ke}re.push(">"),re=re.join("")}return re=Fr(j,re),pe&&("string"==typeof pe?re.className=pe:Array.isArray(pe)?re.className=pe.join(" "):pi(re,pe)),2<S.length&&xi(j,re,S),re}("DIV"),g.appendChild(u)}n.c=n.g.render(u,n.a)}return n.c}))},A.verify=function(){jh(this);var n=this;return sp(this,this.render().then(function(u){return new Un(function(g){var S=n.g.getResponse(u);if(S)g(S);else{var j=function(re){re&&(function(n,u){Vn(n.l,function(g){return g==u})}(n,j),g(re))};n.l.push(j),n.i&&n.g.execute(n.c)}})}))},A.reset=function(){jh(this),null!==this.c&&this.g.reset(this.c)},A.clear=function(){jh(this),this.A=!0,this.v.c();for(var n=0;n<this.h.length;n++)this.h[n].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){n=ri(this.m);for(var u;u=n.firstChild;)n.removeChild(u)}},x(Vh,Df);var ap="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Kn(n,u){return{name:n||"",J:"a valid string",optional:!!u,K:function(g){return"string"==typeof g}}}function up(n,u){return{name:n||"",J:"a boolean",optional:!!u,K:function(g){return"boolean"==typeof g}}}function cs(n,u){return{name:n||"",J:"a valid object",optional:!!u,K:Pe}}function Af(n,u){return{name:n||"",J:"a function",optional:!!u,K:function(g){return"function"==typeof g}}}function Za(n,u){return{name:n||"",J:"null",optional:!!u,K:function(g){return null===g}}}function gl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(u){return!!u&&!(!u.ja||n&&u.providerId!==n)}}}function Rg(n,u){return Pe(n)&&"string"==typeof n.type&&n.type===u&&"function"==typeof n.Ha}function Kv(n){return Pe(n)&&"string"==typeof n.uid}function So(n,u,g,S){return{name:g||"",J:n.J+" or "+u.J,optional:!!S,K:function(j){return n.K(j)||u.K(j)}}}function ao(n,u){for(var g in u){var S=u[g].name;n[S]=cp(S,n[g],u[g].j)}}function Ng(n,u){for(var g in u){var S=u[g].name;S!==g&&Object.defineProperty(n,S,{get:Ot(function(j){return this[j]},g),set:Ot(function(j,re,pe,Ke){$v(j,[pe],[Ke],!0),this[re]=Ke},S,g,u[g].jb),enumerable:!0})}}function Bo(n,u,g,S){n[u]=cp(u,g,S)}function cp(n,u,g){function S(){var pe=Array.prototype.slice.call(arguments);return $v(j,g,pe),u.apply(this,pe)}if(!g)return u;var re,j=function(n){return(n=n.split("."))[n.length-1]}(n);for(re in u)S[re]=u[re];for(re in u.prototype)S.prototype[re]=u.prototype[re];return S}ao(yu.prototype,{ib:{name:"applyActionCode",j:[Kn("code")]},Qa:{name:"checkActionCode",j:[Kn("code")]},mb:{name:"confirmPasswordReset",j:[Kn("code"),Kn("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Kn("email"),Kn("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Kn("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Kn("emailLink")]},Gc:{name:"onAuthStateChanged",j:[So(cs(),Af(),"nextOrObserver"),Af("opt_error",!0),Af("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[So(cs(),Af(),"nextOrObserver"),Af("opt_error",!0),Af("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Kn("email"),So(cs("opt_actionCodeSettings",!0),Za(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Kn("email"),cs("actionCodeSettings")]},wb:{name:"setPersistence",j:[Kn("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[gl()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[gl()]},Sc:{name:"signInWithCustomToken",j:[Kn("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Kn("email"),Kn("password")]},Uc:{name:"signInWithEmailLink",j:[Kn("email"),Kn("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Kn("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(n){return!(!n||"string"!=typeof n.type||"function"!=typeof n.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[So({name:"user",J:"an instance of Firebase User",optional:!1,K:function(u){return!!(u&&u instanceof Aa)}},Za(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Kn(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Kn("url")]},hd:{name:"verifyPasswordResetCode",j:[Kn("code")]}}),Ng(yu.prototype,{lc:{name:"languageCode",jb:So(Kn(),Za(),"languageCode")},ti:{name:"tenantId",jb:So(Kn(),Za(),"tenantId")}}),(yu.Persistence=Bl).LOCAL="local",yu.Persistence.SESSION="session",yu.Persistence.NONE="none",ao(Aa.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[up("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[up("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[gl()]},pb:{name:"linkWithCredential",j:[gl()]},Cc:{name:"linkWithPhoneNumber",j:[Kn("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(n){return!(!n||"string"!=typeof n.type||"function"!=typeof n.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[gl()]},sb:{name:"reauthenticateWithCredential",j:[gl()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Kn("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(n){return!(!n||"string"!=typeof n.type||"function"!=typeof n.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[So(cs("opt_actionCodeSettings",!0),Za(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Kn(null,!0)]},bd:{name:"unlink",j:[Kn("provider")]},Ab:{name:"updateEmail",j:[Kn("email")]},Bb:{name:"updatePassword",j:[Kn("password")]},dd:{name:"updatePhoneNumber",j:[gl("phone")]},Cb:{name:"updateProfile",j:[cs("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Kn("email"),So(cs("opt_actionCodeSettings",!0),Za(null,!0),"opt_actionCodeSettings",!0)]}}),ao(ua.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ao(xh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ao(Un.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Ng($l.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:up("appVerificationDisabledForTesting")}}),ao(Bc.prototype,{confirm:{name:"confirm",j:[Kn("verificationCode")]}}),Bo(au,"fromJSON",function(n){n="string"==typeof n?JSON.parse(n):n;for(var u,g=[Ru,uu,ra,Zu],S=0;S<g.length;S++)if(u=g[S](n))return u;return null},[So(Kn(),cs(),"json")]),Bo(_s,"credential",function(n,u){return new Ns(n,u)},[Kn("email"),Kn("password")]),ao(Ns.prototype,{w:{name:"toJSON",j:[Kn(null,!0)]}}),ao(Ti.prototype,{Ca:{name:"addScope",j:[Kn("scope")]},Ka:{name:"setCustomParameters",j:[cs("customOAuthParameters")]}}),Bo(Ti,"credential",Rc,[So(Kn(),cs(),"token")]),Bo(_s,"credentialWithLink",qa,[Kn("email"),Kn("emailLink")]),ao(Wr.prototype,{Ca:{name:"addScope",j:[Kn("scope")]},Ka:{name:"setCustomParameters",j:[cs("customOAuthParameters")]}}),Bo(Wr,"credential",Ou,[So(Kn(),cs(),"token")]),ao(wa.prototype,{Ca:{name:"addScope",j:[Kn("scope")]},Ka:{name:"setCustomParameters",j:[cs("customOAuthParameters")]}}),Bo(wa,"credential",ys,[So(Kn(),So(cs(),Za()),"idToken"),So(Kn(),Za(),"accessToken",!0)]),ao($s.prototype,{Ka:{name:"setCustomParameters",j:[cs("customOAuthParameters")]}}),Bo($s,"credential",Ju,[So(Kn(),cs(),"token"),Kn("secret",!0)]),ao(Io.prototype,{Ca:{name:"addScope",j:[Kn("scope")]},credential:{name:"credential",j:[So(Kn(),So(cs(),Za()),"optionsOrIdToken"),So(Kn(),Za(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[cs("customOAuthParameters")]}}),ao(os.prototype,{w:{name:"toJSON",j:[Kn(null,!0)]}}),ao(_a.prototype,{w:{name:"toJSON",j:[Kn(null,!0)]}}),Bo(Co,"credential",ia,[Kn("verificationId"),Kn("verificationCode")]),ao(Co.prototype,{eb:{name:"verifyPhoneNumber",j:[So(Kn(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(g){return!!g&&(g.session&&g.phoneNumber?Rg(g.session,Wa)&&"string"==typeof g.phoneNumber:g.session&&g.multiFactorHint?Rg(g.session,su)&&Kv(g.multiFactorHint):g.session&&g.multiFactorUid?Rg(g.session,su)&&"string"==typeof g.multiFactorUid:!!g.phoneNumber&&"string"==typeof g.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(n){return!(!n||"string"!=typeof n.type||"function"!=typeof n.verify)}}]}}),ao(Ps.prototype,{w:{name:"toJSON",j:[Kn(null,!0)]}}),ao(C.prototype,{toJSON:{name:"toJSON",j:[Kn(null,!0)]}}),ao($a.prototype,{toJSON:{name:"toJSON",j:[Kn(null,!0)]}}),ao(Xc.prototype,{toJSON:{name:"toJSON",j:[Kn(null,!0)]}}),ao(mh.prototype,{toJSON:{name:"toJSON",j:[Kn(null,!0)]}}),ao(ph.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(n){return!!n&&!!n.rb}}]}}),ao(_h.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(n){return!!n&&!!n.rb}},Kn("displayName",!0)]},ad:{name:"unenroll",j:[So({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Kv},Kn(),"multiFactorInfoIdentifier")]}}),ao(Vh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Bo(Hi,"parseLink",of,[Kn("link")]),Bo(kh,"assertion",function(n){return new jd(n)},[gl("phone")]),function(){if(void 0===M||!M.INTERNAL||!M.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var n={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:tu,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Qo,VERIFY_AND_CHANGE_EMAIL:ta,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:yu,AuthCredential:au,Error:C};Bo(n,"EmailAuthProvider",_s,[]),Bo(n,"FacebookAuthProvider",Ti,[]),Bo(n,"GithubAuthProvider",Wr,[]),Bo(n,"GoogleAuthProvider",wa,[]),Bo(n,"TwitterAuthProvider",$s,[]),Bo(n,"OAuthProvider",Io,[Kn("providerId")]),Bo(n,"SAMLAuthProvider",Nu,[Kn("providerId")]),Bo(n,"PhoneAuthProvider",Co,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(n){return!!(n&&n instanceof yu)}}]),Bo(n,"RecaptchaVerifier",Vh,[So(Kn(),{name:"",J:"an HTML element",optional:!1,K:function(n){return!!(n&&n instanceof Element)}},"recaptchaContainer"),cs("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(n){return!!(n&&n instanceof M.app.App)}}]),Bo(n,"ActionCodeURL",Hi,[]),Bo(n,"PhoneMultiFactorGenerator",kh,[]),M.INTERNAL.registerComponent({name:"auth",instanceFactory:function(u){return new yu(u=u.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:n,instantiationMode:"LAZY",type:"PUBLIC"}),M.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(u){return{getUid:at((u=u.getProvider("auth").getImmediate()).getUid,u),getToken:at(u.mc,u),addAuthTokenListener:at(u.cc,u),removeAuthTokenListener:at(u.Oc,u)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),M.registerVersion("@firebase/auth","0.15.0"),M.INTERNAL.extendNamespace({User:Aa})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},1100:(On,We,ge)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});var M=ge(5385),A=ge(1704),J=function(){function oe(z,Ie,xe){this.name=z,this.instanceFactory=Ie,this.type=xe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return oe.prototype.setInstantiationMode=function(z){return this.instantiationMode=z,this},oe.prototype.setMultipleInstances=function(z){return this.multipleInstances=z,this},oe.prototype.setServiceProps=function(z){return this.serviceProps=z,this},oe}(),mt="[DEFAULT]",Le=function(){function oe(z,Ie){this.name=z,this.container=Ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return oe.prototype.get=function(z){void 0===z&&(z=mt);var Ie=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(Ie)){var xe=new A.Deferred;this.instancesDeferred.set(Ie,xe);try{var we=this.getOrInitializeService(Ie);we&&xe.resolve(we)}catch(ke){}}return this.instancesDeferred.get(Ie).promise},oe.prototype.getImmediate=function(z){var Ie=M.__assign({identifier:mt,optional:!1},z),we=Ie.optional,ke=this.normalizeInstanceIdentifier(Ie.identifier);try{var gt=this.getOrInitializeService(ke);if(!gt){if(we)return null;throw Error("Service "+this.name+" is not available")}return gt}catch(Me){if(we)return null;throw Me}},oe.prototype.getComponent=function(){return this.component},oe.prototype.setComponent=function(z){var Ie,xe;if(z.name!==this.name)throw Error("Mismatching Component "+z.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=z,function(oe){return"EAGER"===oe.instantiationMode}(z))try{this.getOrInitializeService(mt)}catch(rt){}try{for(var we=M.__values(this.instancesDeferred.entries()),ke=we.next();!ke.done;ke=we.next()){var gt=M.__read(ke.value,2),Pe=gt[1],ut=this.normalizeInstanceIdentifier(gt[0]);try{var ze=this.getOrInitializeService(ut);Pe.resolve(ze)}catch(rt){}}}catch(rt){Ie={error:rt}}finally{try{ke&&!ke.done&&(xe=we.return)&&xe.call(we)}finally{if(Ie)throw Ie.error}}},oe.prototype.clearInstance=function(z){void 0===z&&(z=mt),this.instancesDeferred.delete(z),this.instances.delete(z)},oe.prototype.delete=function(){return M.__awaiter(this,void 0,void 0,function(){var z;return M.__generator(this,function(Ie){switch(Ie.label){case 0:return z=Array.from(this.instances.values()),[4,Promise.all(M.__spread(z.filter(function(xe){return"INTERNAL"in xe}).map(function(xe){return xe.INTERNAL.delete()}),z.filter(function(xe){return"_delete"in xe}).map(function(xe){return xe._delete()})))];case 1:return Ie.sent(),[2]}})})},oe.prototype.isComponentSet=function(){return null!=this.component},oe.prototype.getOrInitializeService=function(z){var Ie=this.instances.get(z);return!Ie&&this.component&&(Ie=this.component.instanceFactory(this.container,function(oe){return oe===mt?void 0:oe}(z)),this.instances.set(z,Ie)),Ie||null},oe.prototype.normalizeInstanceIdentifier=function(z){return this.component?this.component.multipleInstances?z:mt:z},oe}(),ft=function(){function oe(z){this.name=z,this.providers=new Map}return oe.prototype.addComponent=function(z){var Ie=this.getProvider(z.name);if(Ie.isComponentSet())throw new Error("Component "+z.name+" has already been registered with "+this.name);Ie.setComponent(z)},oe.prototype.addOrOverwriteComponent=function(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)},oe.prototype.getProvider=function(z){if(this.providers.has(z))return this.providers.get(z);var Ie=new Le(z,this);return this.providers.set(z,Ie),Ie},oe.prototype.getProviders=function(){return Array.from(this.providers.values())},oe}();We.Component=J,We.ComponentContainer=ft,We.Provider=Le},4614:(On,We,ge)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});var M=ge(6279),A=ge(209),J=ge(1704),mt=ge(300),Le=ge(1100);function st(v){return v&&"object"==typeof v&&"default"in v?v:{default:v}}var v,tt=st(M),ft=function(){function v(l){this.domStorage_=l,this.prefix_="firebase:"}return v.prototype.set=function(l,d){null==d?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),J.stringify(d))},v.prototype.get=function(l){var d=this.domStorage_.getItem(this.prefixedName_(l));return null==d?null:J.jsonEval(d)},v.prototype.remove=function(l){this.domStorage_.removeItem(this.prefixedName_(l))},v.prototype.prefixedName_=function(l){return this.prefix_+l},v.prototype.toString=function(){return this.domStorage_.toString()},v}(),oe=function(){function v(){this.cache_={},this.isInMemoryStorage=!0}return v.prototype.set=function(l,d){null==d?delete this.cache_[l]:this.cache_[l]=d},v.prototype.get=function(l){return J.contains(this.cache_,l)?this.cache_[l]:null},v.prototype.remove=function(l){delete this.cache_[l]},v}(),z=function(v){try{if("undefined"!=typeof window&&void 0!==window[v]){var l=window[v];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new ft(l)}}catch(d){}return new oe},Ie=z("localStorage"),xe=z("sessionStorage"),we=new mt.Logger("@firebase/database"),ke=(v=1,function(){return v++}),gt=function(v){var l=J.stringToByteArray(v),d=new J.Sha1;d.update(l);var _=d.digest();return J.base64.encodeByteArray(_)},Me=function(){for(var v=[],l=0;l<arguments.length;l++)v[l]=arguments[l];for(var d="",_=0;_<v.length;_++){var N=v[_];Array.isArray(N)||N&&"object"==typeof N&&"number"==typeof N.length?d+=Me.apply(null,N):d+="object"==typeof N?J.stringify(N):N,d+=" "}return d},Pe=null,ut=!0,ze=function(v,l){J.assert(!l||!0===v||!1===v,"Can't turn on custom loggers persistently."),!0===v?(we.logLevel=mt.LogLevel.VERBOSE,Pe=we.log.bind(we),l&&xe.set("logging_enabled",!0)):"function"==typeof v?Pe=v:(Pe=null,xe.remove("logging_enabled"))},rt=function(){for(var v=[],l=0;l<arguments.length;l++)v[l]=arguments[l];if(!0===ut&&(ut=!1,null===Pe&&!0===xe.get("logging_enabled")&&ze(!0)),Pe){var d=Me.apply(null,v);Pe(d)}},Ut=function(v){return function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];rt.apply(void 0,A.__spread([v],l))}},Nt=function(){for(var v=[],l=0;l<arguments.length;l++)v[l]=arguments[l];var d="FIREBASE INTERNAL ERROR: "+Me.apply(void 0,A.__spread(v));we.error(d)},at=function(){for(var v=[],l=0;l<arguments.length;l++)v[l]=arguments[l];var d="FIREBASE FATAL ERROR: "+Me.apply(void 0,A.__spread(v));throw we.error(d),new Error(d)},Ot=function(){for(var v=[],l=0;l<arguments.length;l++)v[l]=arguments[l];var d="FIREBASE WARNING: "+Me.apply(void 0,A.__spread(v));we.warn(d)},x=function(v){return"number"==typeof v&&(v!=v||v===Number.POSITIVE_INFINITY||v===Number.NEGATIVE_INFINITY)},B="[MIN_NAME]",K="[MAX_NAME]",k=function(v,l){if(v===l)return 0;if(v===B||l===K)return-1;if(l===B||v===K)return 1;var d=Ct(v),_=Ct(l);return null!==d?null!==_?d-_==0?v.length-l.length:d-_:-1:null!==_?1:v<l?-1:1},ae=function(v,l){return v===l?0:v<l?-1:1},ue=function(v,l){if(l&&v in l)return l[v];throw new Error("Missing required key ("+v+") in object: "+J.stringify(l))},Gt=function(v){if("object"!=typeof v||null===v)return J.stringify(v);var l=[];for(var d in v)l.push(d);l.sort();for(var _="{",N=0;N<l.length;N++)0!==N&&(_+=","),_+=J.stringify(l[N]),_+=":",_+=Gt(v[l[N]]);return _+"}"},ve=function(v,l){var d=v.length;if(d<=l)return[v];for(var _=[],N=0;N<d;N+=l)_.push(v.substring(N,N+l>d?d:N+l));return _};function ot(v,l){for(var d in v)v.hasOwnProperty(d)&&l(d,v[d])}var bt,Lt,Qt,fr,nr,Fe,Vt=function(v){J.assert(!x(v),"Invalid JSON number");var N,F,Z,ce,Ee,_=1023;0===v?(F=0,Z=0,N=1/v==-1/0?1:0):(N=v<0,(v=Math.abs(v))>=Math.pow(2,1-_)?(F=(ce=Math.min(Math.floor(Math.log(v)/Math.LN2),_))+_,Z=Math.round(v*Math.pow(2,52-ce)-Math.pow(2,52))):(F=0,Z=Math.round(v/Math.pow(2,-1074))));var be=[];for(Ee=52;Ee;Ee-=1)be.push(Z%2?1:0),Z=Math.floor(Z/2);for(Ee=11;Ee;Ee-=1)be.push(F%2?1:0),F=Math.floor(F/2);be.push(N?1:0),be.reverse();var lt=be.join(""),Rt="";for(Ee=0;Ee<64;Ee+=8){var jt=parseInt(lt.substr(Ee,8),2).toString(16);1===jt.length&&(jt="0"+jt),Rt+=jt}return Rt.toLowerCase()},It=new RegExp("^-?(0*)\\d{1,10}$"),Ct=function(v){if(It.test(v)){var l=Number(v);if(l>=-2147483648&&l<=2147483647)return l}return null},_t=function(v){try{v()}catch(l){setTimeout(function(){throw Ot("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},an=function(v,l){var d=setTimeout(v,l);return"object"==typeof d&&d.unref&&d.unref(),d},qe=function(){function v(l,d){if(void 0===d){this.pieces_=l.split("/");for(var _=0,N=0;N<this.pieces_.length;N++)this.pieces_[N].length>0&&(this.pieces_[_]=this.pieces_[N],_++);this.pieces_.length=_,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=d}return Object.defineProperty(v,"Empty",{get:function(){return new v("")},enumerable:!1,configurable:!0}),v.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},v.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},v.prototype.popFront=function(){var l=this.pieceNum_;return l<this.pieces_.length&&l++,new v(this.pieces_,l)},v.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},v.prototype.toString=function(){for(var l="",d=this.pieceNum_;d<this.pieces_.length;d++)""!==this.pieces_[d]&&(l+="/"+this.pieces_[d]);return l||"/"},v.prototype.toUrlEncodedString=function(){for(var l="",d=this.pieceNum_;d<this.pieces_.length;d++)""!==this.pieces_[d]&&(l+="/"+encodeURIComponent(String(this.pieces_[d])));return l||"/"},v.prototype.slice=function(l){return void 0===l&&(l=0),this.pieces_.slice(this.pieceNum_+l)},v.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var l=[],d=this.pieceNum_;d<this.pieces_.length-1;d++)l.push(this.pieces_[d]);return new v(l,0)},v.prototype.child=function(l){for(var d=[],_=this.pieceNum_;_<this.pieces_.length;_++)d.push(this.pieces_[_]);if(l instanceof v)for(_=l.pieceNum_;_<l.pieces_.length;_++)d.push(l.pieces_[_]);else{var N=l.split("/");for(_=0;_<N.length;_++)N[_].length>0&&d.push(N[_])}return new v(d,0)},v.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},v.relativePath=function(l,d){var _=l.getFront(),N=d.getFront();if(null===_)return d;if(_===N)return v.relativePath(l.popFront(),d.popFront());throw new Error("INTERNAL ERROR: innerPath ("+d+") is not within outerPath ("+l+")")},v.comparePaths=function(l,d){for(var _=l.slice(),N=d.slice(),F=0;F<_.length&&F<N.length;F++){var Z=k(_[F],N[F]);if(0!==Z)return Z}return _.length===N.length?0:_.length<N.length?-1:1},v.prototype.equals=function(l){if(this.getLength()!==l.getLength())return!1;for(var d=this.pieceNum_,_=l.pieceNum_;d<=this.pieces_.length;d++,_++)if(this.pieces_[d]!==l.pieces_[_])return!1;return!0},v.prototype.contains=function(l){var d=this.pieceNum_,_=l.pieceNum_;if(this.getLength()>l.getLength())return!1;for(;d<this.pieces_.length;){if(this.pieces_[d]!==l.pieces_[_])return!1;++d,++_}return!0},v}(),pt=function(){function v(l,d){this.errorPrefix_=d,this.parts_=l.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var _=0;_<this.parts_.length;_++)this.byteLength_+=J.stringLength(this.parts_[_]);this.checkValid_()}return Object.defineProperty(v,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(v,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),v.prototype.push=function(l){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(l),this.byteLength_+=J.stringLength(l),this.checkValid_()},v.prototype.pop=function(){var l=this.parts_.pop();this.byteLength_-=J.stringLength(l),this.parts_.length>0&&(this.byteLength_-=1)},v.prototype.checkValid_=function(){if(this.byteLength_>v.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+v.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>v.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+v.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},v.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},v}(),sn="firebaseio.com",zn="websocket",ur="long_polling",Rr=function(){function v(l,d,_,N,F,Z,ce){void 0===F&&(F=!1),void 0===Z&&(Z=""),void 0===ce&&(ce=!1),this.secure=d,this.namespace=_,this.webSocketOnly=N,this.nodeAdmin=F,this.persistenceKey=Z,this.includeNamespaceInQueryParams=ce,this.host=l.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Ie.get("host:"+l)||this.host}return v.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},v.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},v.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},v.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},v.prototype.updateHost=function(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&Ie.set("host:"+this.host,this.internalHost))},v.prototype.connectionURL=function(l,d){var _;if(J.assert("string"==typeof l,"typeof type must == string"),J.assert("object"==typeof d,"typeof params must == object"),l===zn)_=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(l!==ur)throw new Error("Unknown connection type: "+l);_=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(d.ns=this.namespace);var N=[];return ot(d,function(F,Z){N.push(F+"="+Z)}),_+N.join("&")},v.prototype.toString=function(){var l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l},v.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},v}(),Jn=function(v,l){var d=Hn(v),_=d.namespace;return"firebase.com"===d.domain&&at(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!_||"undefined"===_)&&"localhost"!==d.domain&&at("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Rr(d.host,d.secure,_,l,"ws"===d.scheme||"wss"===d.scheme,"",_!==d.subdomain),path:new qe(d.pathString)}},Hn=function(v){var l="",d="",_="",N="",F="",Z=!0,ce="https",Ee=443;if("string"==typeof v){var be=v.indexOf("//");be>=0&&(ce=v.substring(0,be-1),v=v.substring(be+2));var lt=v.indexOf("/");-1===lt&&(lt=v.length);var Rt=v.indexOf("?");-1===Rt&&(Rt=v.length),l=v.substring(0,Math.min(lt,Rt)),lt<Rt&&(N=function(v){for(var l="",d=v.split("/"),_=0;_<d.length;_++)if(d[_].length>0){var N=d[_];try{N=decodeURIComponent(N.replace(/\+/g," "))}catch(F){}l+="/"+N}return l}(v.substring(lt,Rt)));var jt=function(v){var l,d,_={};"?"===v.charAt(0)&&(v=v.substring(1));try{for(var N=A.__values(v.split("&")),F=N.next();!F.done;F=N.next()){var Z=F.value;if(0!==Z.length){var ce=Z.split("=");2===ce.length?_[decodeURIComponent(ce[0])]=decodeURIComponent(ce[1]):Ot("Invalid query segment '"+Z+"' in query '"+v+"'")}}}catch(Ee){l={error:Ee}}finally{try{F&&!F.done&&(d=N.return)&&d.call(N)}finally{if(l)throw l.error}}return _}(v.substring(Math.min(v.length,Rt)));(be=l.indexOf(":"))>=0?(Z="https"===ce||"wss"===ce,Ee=parseInt(l.substring(be+1),10)):be=l.length;var un=l.slice(0,be);if("localhost"===un.toLowerCase())d="localhost";else if(un.split(".").length<=2)d=un;else{var In=l.indexOf(".");_=l.substring(0,In).toLowerCase(),d=l.substring(In+1),F=_}"ns"in jt&&(F=jt.ns)}return{host:l,port:Ee,domain:d,subdomain:_,secure:Z,scheme:ce,pathString:N,namespace:F}},Rn=/[\[\].#$\/\u0000-\u001F\u007F]/,nt=/[\[\].#$\u0000-\u001F\u007F]/,ye=10485760,Ve=function(v){return"string"==typeof v&&0!==v.length&&!Rn.test(v)},wt=function(v){return"string"==typeof v&&0!==v.length&&!nt.test(v)},nn=function(v){return null===v||"string"==typeof v||"number"==typeof v&&!x(v)||v&&"object"==typeof v&&J.contains(v,".sv")},tn=function(v,l,d,_,N){N&&void 0===d||En(J.errorPrefix(v,l,N),d,_)},En=function(v,l,d){var _=d instanceof qe?new pt(d,v):d;if(void 0===l)throw new Error(v+"contains undefined "+_.toErrorString());if("function"==typeof l)throw new Error(v+"contains a function "+_.toErrorString()+" with contents = "+l.toString());if(x(l))throw new Error(v+"contains "+l.toString()+" "+_.toErrorString());if("string"==typeof l&&l.length>ye/3&&J.stringLength(l)>ye)throw new Error(v+"contains a string greater than "+ye+" utf8 bytes "+_.toErrorString()+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){var N=!1,F=!1;if(ot(l,function(Z,ce){if(".value"===Z)N=!0;else if(".priority"!==Z&&".sv"!==Z&&(F=!0,!Ve(Z)))throw new Error(v+" contains an invalid key ("+Z+") "+_.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');_.push(Z),En(v,ce,_),_.pop()}),N&&F)throw new Error(v+' contains ".value" child '+_.toErrorString()+" in addition to actual children.")}},pn=function(v,l,d,_,N){if(!N||void 0!==d){var F=J.errorPrefix(v,l,N);if(!d||"object"!=typeof d||Array.isArray(d))throw new Error(F+" must be an object containing the children to replace.");var Z=[];ot(d,function(ce,Ee){var be=new qe(ce);if(En(F,Ee,_.child(be)),".priority"===be.getBack()&&!nn(Ee))throw new Error(F+"contains an invalid value for '"+be.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");Z.push(be)}),function(v,l){var d,_;for(d=0;d<l.length;d++)for(var N=(_=l[d]).slice(),F=0;F<N.length;F++)if((".priority"!==N[F]||F!==N.length-1)&&!Ve(N[F]))throw new Error(v+"contains an invalid key ("+N[F]+") in path "+_.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');l.sort(qe.comparePaths);var Z=null;for(d=0;d<l.length;d++){if(_=l[d],null!==Z&&Z.contains(_))throw new Error(v+"contains a path "+Z.toString()+" that is ancestor of another path "+_.toString());Z=_}}(F,Z)}},_r=function(v,l,d,_){if(!_||void 0!==d){if(x(d))throw new Error(J.errorPrefix(v,l,_)+"is "+d.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!nn(d))throw new Error(J.errorPrefix(v,l,_)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Nn=function(v,l,d,_){if(!_||void 0!==d)switch(d){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(J.errorPrefix(v,l,_)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ir=function(v,l,d,_){if(!(_&&void 0===d||Ve(d)))throw new Error(J.errorPrefix(v,l,_)+'was an invalid key = "'+d+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Yn=function(v,l,d,_){if(!(_&&void 0===d||wt(d)))throw new Error(J.errorPrefix(v,l,_)+'was an invalid path = "'+d+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ir=function(v,l,d,_){d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),Yn(v,l,d,_)},ar=function(v,l){if(".info"===l.getFront())throw new Error(v+" failed = Can't modify data under /.info/")},Nr=function(v,l,d){var _=d.path.toString();if("string"!=typeof d.repoInfo.host||0===d.repoInfo.host.length||!Ve(d.repoInfo.namespace)&&"localhost"!==d.repoInfo.host.split(":")[0]||0!==_.length&&!function(v){return v&&(v=v.replace(/^\/*\.info(\/|$)/,"/")),wt(v)}(_))throw new Error(J.errorPrefix(v,l,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},_i=function(v,l,d,_){if((!_||void 0!==d)&&"boolean"!=typeof d)throw new Error(J.errorPrefix(v,l,_)+"must be a boolean.")},Qn=function(){function v(l,d){this.repo_=l,this.path_=d}return v.prototype.cancel=function(l){J.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),J.validateCallback("OnDisconnect.cancel",1,l,!0);var d=new J.Deferred;return this.repo_.onDisconnectCancel(this.path_,d.wrapCallback(l)),d.promise},v.prototype.remove=function(l){J.validateArgCount("OnDisconnect.remove",0,1,arguments.length),ar("OnDisconnect.remove",this.path_),J.validateCallback("OnDisconnect.remove",1,l,!0);var d=new J.Deferred;return this.repo_.onDisconnectSet(this.path_,null,d.wrapCallback(l)),d.promise},v.prototype.set=function(l,d){J.validateArgCount("OnDisconnect.set",1,2,arguments.length),ar("OnDisconnect.set",this.path_),tn("OnDisconnect.set",1,l,this.path_,!1),J.validateCallback("OnDisconnect.set",2,d,!0);var _=new J.Deferred;return this.repo_.onDisconnectSet(this.path_,l,_.wrapCallback(d)),_.promise},v.prototype.setWithPriority=function(l,d,_){J.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),ar("OnDisconnect.setWithPriority",this.path_),tn("OnDisconnect.setWithPriority",1,l,this.path_,!1),_r("OnDisconnect.setWithPriority",2,d,!1),J.validateCallback("OnDisconnect.setWithPriority",3,_,!0);var N=new J.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,l,d,N.wrapCallback(_)),N.promise},v.prototype.update=function(l,d){if(J.validateArgCount("OnDisconnect.update",1,2,arguments.length),ar("OnDisconnect.update",this.path_),Array.isArray(l)){for(var _={},N=0;N<l.length;++N)_[""+N]=l[N];l=_,Ot("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pn("OnDisconnect.update",1,l,this.path_,!1),J.validateCallback("OnDisconnect.update",2,d,!0);var F=new J.Deferred;return this.repo_.onDisconnectUpdate(this.path_,l,F.wrapCallback(d)),F.promise},v}(),ei=function(){function v(l,d){this.committed=l,this.snapshot=d}return v.prototype.toJSON=function(){return J.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},v}(),bi=function(){var v="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",l=0,d=[];return function(_){var N=_===l;l=_;var F,Z=new Array(8);for(F=7;F>=0;F--)Z[F]=v.charAt(_%64),_=Math.floor(_/64);J.assert(0===_,"Cannot push at time == 0");var ce=Z.join("");if(N){for(F=11;F>=0&&63===d[F];F--)d[F]=0;d[F]++}else for(F=0;F<12;F++)d[F]=Math.floor(64*Math.random());for(F=0;F<12;F++)ce+=v.charAt(d[F]);return J.assert(20===ce.length,"nextPushId: Length should be 20."),ce}}(),Re=function(){function v(l,d){this.name=l,this.node=d}return v.Wrap=function(l,d){return new v(l,d)},v}(),ht=function(){function v(){}return v.prototype.getCompare=function(){return this.compare.bind(this)},v.prototype.indexedValueChanged=function(l,d){var _=new Re(B,l),N=new Re(B,d);return 0!==this.compare(_,N)},v.prototype.minPost=function(){return Re.MIN},v}(),Mt=function(v){function l(){return null!==v&&v.apply(this,arguments)||this}return A.__extends(l,v),Object.defineProperty(l,"__EMPTY_NODE",{get:function(){return bt},set:function(d){bt=d},enumerable:!1,configurable:!0}),l.prototype.compare=function(d,_){return k(d.name,_.name)},l.prototype.isDefinedOn=function(d){throw J.assertionError("KeyIndex.isDefinedOn not expected to be called.")},l.prototype.indexedValueChanged=function(d,_){return!1},l.prototype.minPost=function(){return Re.MIN},l.prototype.maxPost=function(){return new Re(K,bt)},l.prototype.makePost=function(d,_){return J.assert("string"==typeof d,"KeyIndex indexValue must always be a string."),new Re(d,bt)},l.prototype.toString=function(){return".key"},l}(ht),Tt=new Mt,mn=function(v){return"number"==typeof v?"number:"+Vt(v):"string:"+v},Mn=function(v){if(v.isLeafNode()){var l=v.val();J.assert("string"==typeof l||"number"==typeof l||"object"==typeof l&&J.contains(l,".sv"),"Priority must be a string or number.")}else J.assert(v===Lt||v.isEmpty(),"priority of unexpected type.");J.assert(v===Lt||v.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Tn=function(){function v(l,d){void 0===d&&(d=v.__childrenNodeConstructor.EMPTY_NODE),this.value_=l,this.priorityNode_=d,this.lazyHash_=null,J.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Mn(this.priorityNode_)}return Object.defineProperty(v,"__childrenNodeConstructor",{get:function(){return Qt},set:function(l){Qt=l},enumerable:!1,configurable:!0}),v.prototype.isLeafNode=function(){return!0},v.prototype.getPriority=function(){return this.priorityNode_},v.prototype.updatePriority=function(l){return new v(this.value_,l)},v.prototype.getImmediateChild=function(l){return".priority"===l?this.priorityNode_:v.__childrenNodeConstructor.EMPTY_NODE},v.prototype.getChild=function(l){return l.isEmpty()?this:".priority"===l.getFront()?this.priorityNode_:v.__childrenNodeConstructor.EMPTY_NODE},v.prototype.hasChild=function(){return!1},v.prototype.getPredecessorChildName=function(l,d){return null},v.prototype.updateImmediateChild=function(l,d){return".priority"===l?this.updatePriority(d):d.isEmpty()&&".priority"!==l?this:v.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,d).updatePriority(this.priorityNode_)},v.prototype.updateChild=function(l,d){var _=l.getFront();return null===_?d:d.isEmpty()&&".priority"!==_?this:(J.assert(".priority"!==_||1===l.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(_,v.__childrenNodeConstructor.EMPTY_NODE.updateChild(l.popFront(),d)))},v.prototype.isEmpty=function(){return!1},v.prototype.numChildren=function(){return 0},v.prototype.forEachChild=function(l,d){return!1},v.prototype.val=function(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},v.prototype.hash=function(){if(null===this.lazyHash_){var l="";this.priorityNode_.isEmpty()||(l+="priority:"+mn(this.priorityNode_.val())+":");var d=typeof this.value_;l+=d+":",l+="number"===d?Vt(this.value_):this.value_,this.lazyHash_=gt(l)}return this.lazyHash_},v.prototype.getValue=function(){return this.value_},v.prototype.compareTo=function(l){return l===v.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof v.__childrenNodeConstructor?-1:(J.assert(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))},v.prototype.compareToLeafNode_=function(l){var d=typeof l.value_,_=typeof this.value_,N=v.VALUE_TYPE_ORDER.indexOf(d),F=v.VALUE_TYPE_ORDER.indexOf(_);return J.assert(N>=0,"Unknown leaf type: "+d),J.assert(F>=0,"Unknown leaf type: "+_),N===F?"object"===_?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:F-N},v.prototype.withIndex=function(){return this},v.prototype.isIndexed=function(){return!0},v.prototype.equals=function(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))},v.VALUE_TYPE_ORDER=["object","boolean","number","string"],v}(),Ce=new(function(v){function l(){return null!==v&&v.apply(this,arguments)||this}return A.__extends(l,v),l.prototype.compare=function(d,_){var N=d.node.getPriority(),F=_.node.getPriority(),Z=N.compareTo(F);return 0===Z?k(d.name,_.name):Z},l.prototype.isDefinedOn=function(d){return!d.getPriority().isEmpty()},l.prototype.indexedValueChanged=function(d,_){return!d.getPriority().equals(_.getPriority())},l.prototype.minPost=function(){return Re.MIN},l.prototype.maxPost=function(){return new Re(K,new Tn("[PRIORITY-POST]",nr))},l.prototype.makePost=function(d,_){var N=fr(d);return new Re(_,new Tn("[PRIORITY-POST]",N))},l.prototype.toString=function(){return".priority"},l}(ht)),Ue=function(){function v(l,d,_,N,F){void 0===F&&(F=null),this.isReverse_=N,this.resultGenerator_=F,this.nodeStack_=[];for(var Z=1;!l.isEmpty();)if(l=l,Z=d?_(l.key,d):1,N&&(Z*=-1),Z<0)l=this.isReverse_?l.left:l.right;else{if(0===Z){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}return v.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var d,l=this.nodeStack_.pop();if(d=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return d},v.prototype.hasNext=function(){return this.nodeStack_.length>0},v.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}},v}(),Je=function(){function v(l,d,_,N,F){this.key=l,this.value=d,this.color=null!=_?_:v.RED,this.left=null!=N?N:V.EMPTY_NODE,this.right=null!=F?F:V.EMPTY_NODE}return v.prototype.copy=function(l,d,_,N,F){return new v(null!=l?l:this.key,null!=d?d:this.value,null!=_?_:this.color,null!=N?N:this.left,null!=F?F:this.right)},v.prototype.count=function(){return this.left.count()+1+this.right.count()},v.prototype.isEmpty=function(){return!1},v.prototype.inorderTraversal=function(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)},v.prototype.reverseTraversal=function(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)},v.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},v.prototype.minKey=function(){return this.min_().key},v.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},v.prototype.insert=function(l,d,_){var N=this,F=_(l,N.key);return(N=F<0?N.copy(null,null,null,N.left.insert(l,d,_),null):0===F?N.copy(null,d,null,null,null):N.copy(null,null,null,null,N.right.insert(l,d,_))).fixUp_()},v.prototype.removeMin_=function(){if(this.left.isEmpty())return V.EMPTY_NODE;var l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),(l=l.copy(null,null,null,l.left.removeMin_(),null)).fixUp_()},v.prototype.remove=function(l,d){var _,N;if(d(l,(_=this).key)<0)!_.left.isEmpty()&&!_.left.isRed_()&&!_.left.left.isRed_()&&(_=_.moveRedLeft_()),_=_.copy(null,null,null,_.left.remove(l,d),null);else{if(_.left.isRed_()&&(_=_.rotateRight_()),!_.right.isEmpty()&&!_.right.isRed_()&&!_.right.left.isRed_()&&(_=_.moveRedRight_()),0===d(l,_.key)){if(_.right.isEmpty())return V.EMPTY_NODE;N=_.right.min_(),_=_.copy(N.key,N.value,null,null,_.right.removeMin_())}_=_.copy(null,null,null,null,_.right.remove(l,d))}return _.fixUp_()},v.prototype.isRed_=function(){return this.color},v.prototype.fixUp_=function(){var l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l},v.prototype.moveRedLeft_=function(){var l=this.colorFlip_();return l.right.left.isRed_()&&(l=(l=(l=l.copy(null,null,null,null,l.right.rotateRight_())).rotateLeft_()).colorFlip_()),l},v.prototype.moveRedRight_=function(){var l=this.colorFlip_();return l.left.left.isRed_()&&(l=(l=l.rotateRight_()).colorFlip_()),l},v.prototype.rotateLeft_=function(){var l=this.copy(null,null,v.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)},v.prototype.rotateRight_=function(){var l=this.copy(null,null,v.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)},v.prototype.colorFlip_=function(){var l=this.left.copy(null,null,!this.left.color,null,null),d=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,d)},v.prototype.checkMaxDepth_=function(){var l=this.check_();return Math.pow(2,l)<=this.count()+1},v.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)},v.RED=!0,v.BLACK=!1,v}(),le=function(){function v(){}return v.prototype.copy=function(l,d,_,N,F){return this},v.prototype.insert=function(l,d,_){return new Je(l,d,null)},v.prototype.remove=function(l,d){return this},v.prototype.count=function(){return 0},v.prototype.isEmpty=function(){return!0},v.prototype.inorderTraversal=function(l){return!1},v.prototype.reverseTraversal=function(l){return!1},v.prototype.minKey=function(){return null},v.prototype.maxKey=function(){return null},v.prototype.check_=function(){return 0},v.prototype.isRed_=function(){return!1},v}(),V=function(){function v(l,d){void 0===d&&(d=v.EMPTY_NODE),this.comparator_=l,this.root_=d}return v.prototype.insert=function(l,d){return new v(this.comparator_,this.root_.insert(l,d,this.comparator_).copy(null,null,Je.BLACK,null,null))},v.prototype.remove=function(l){return new v(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,Je.BLACK,null,null))},v.prototype.get=function(l){for(var d,_=this.root_;!_.isEmpty();){if(0===(d=this.comparator_(l,_.key)))return _.value;d<0?_=_.left:d>0&&(_=_.right)}return null},v.prototype.getPredecessorKey=function(l){for(var d,_=this.root_,N=null;!_.isEmpty();){if(0===(d=this.comparator_(l,_.key))){if(_.left.isEmpty())return N?N.key:null;for(_=_.left;!_.right.isEmpty();)_=_.right;return _.key}d<0?_=_.left:d>0&&(N=_,_=_.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},v.prototype.isEmpty=function(){return this.root_.isEmpty()},v.prototype.count=function(){return this.root_.count()},v.prototype.minKey=function(){return this.root_.minKey()},v.prototype.maxKey=function(){return this.root_.maxKey()},v.prototype.inorderTraversal=function(l){return this.root_.inorderTraversal(l)},v.prototype.reverseTraversal=function(l){return this.root_.reverseTraversal(l)},v.prototype.getIterator=function(l){return new Ue(this.root_,null,this.comparator_,!1,l)},v.prototype.getIteratorFrom=function(l,d){return new Ue(this.root_,l,this.comparator_,!1,d)},v.prototype.getReverseIteratorFrom=function(l,d){return new Ue(this.root_,l,this.comparator_,!0,d)},v.prototype.getReverseIterator=function(l){return new Ue(this.root_,null,this.comparator_,!0,l)},v.EMPTY_NODE=new le,v}(),ie=Math.log(2),se=function(){function v(l){this.count=parseInt(Math.log(l+1)/ie,10),this.current_=this.count-1;var N=parseInt(Array(this.count+1).join("1"),2);this.bits_=l+1&N}return v.prototype.nextBitIsOne=function(){var l=!(this.bits_&1<<this.current_);return this.current_--,l},v}(),Ne=function(v,l,d,_){v.sort(l);var N=function(Ee,be){var Rt,jt,lt=be-Ee;if(0===lt)return null;if(1===lt)return Rt=v[Ee],jt=d?d(Rt):Rt,new Je(jt,Rt.node,Je.BLACK,null,null);var un=parseInt(lt/2,10)+Ee,In=N(Ee,un),Dn=N(un+1,be);return Rt=v[un],jt=d?d(Rt):Rt,new Je(jt,Rt.node,Je.BLACK,In,Dn)},ce=function(Ee){for(var be=null,lt=null,Rt=v.length,jt=function(Mr,yi){var io=Rt-Mr,rs=Rt;Rt-=Mr;var Pn=N(io+1,rs),Ni=v[io],ho=d?d(Ni):Ni;un(new Je(ho,Ni.node,yi,null,Pn))},un=function(Mr){be?(be.left=Mr,be=Mr):(lt=Mr,be=Mr)},In=0;In<Ee.count;++In){var Dn=Ee.nextBitIsOne(),pr=Math.pow(2,Ee.count-(In+1));Dn?jt(pr,Je.BLACK):(jt(pr,Je.BLACK),jt(pr,Je.RED))}return lt}(new se(v.length));return new V(_||l,ce)},Ye={},St=function(){function v(l,d){this.indexes_=l,this.indexSet_=d}return Object.defineProperty(v,"Default",{get:function(){return J.assert(Ye&&Ce,"ChildrenNode.ts has not been loaded"),Fe=Fe||new v({".priority":Ye},{".priority":Ce})},enumerable:!1,configurable:!0}),v.prototype.get=function(l){var d=J.safeGet(this.indexes_,l);if(!d)throw new Error("No index defined for "+l);return d instanceof V?d:null},v.prototype.hasIndex=function(l){return J.contains(this.indexSet_,l.toString())},v.prototype.addIndex=function(l,d){J.assert(l!==Tt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var _=[],N=!1,F=d.getIterator(Re.Wrap),Z=F.getNext();Z;)N=N||l.isDefinedOn(Z.node),_.push(Z),Z=F.getNext();var ce;ce=N?Ne(_,l.getCompare()):Ye;var Ee=l.toString(),be=A.__assign({},this.indexSet_);be[Ee]=l;var lt=A.__assign({},this.indexes_);return lt[Ee]=ce,new v(lt,be)},v.prototype.addToIndexes=function(l,d){var _=this;return new v(J.map(this.indexes_,function(F,Z){var ce=J.safeGet(_.indexSet_,Z);if(J.assert(ce,"Missing index implementation for "+Z),F===Ye){if(ce.isDefinedOn(l.node)){for(var Ee=[],be=d.getIterator(Re.Wrap),lt=be.getNext();lt;)lt.name!==l.name&&Ee.push(lt),lt=be.getNext();return Ee.push(l),Ne(Ee,ce.getCompare())}return Ye}var Rt=d.get(l.name),jt=F;return Rt&&(jt=jt.remove(new Re(l.name,Rt))),jt.insert(l,l.node)}),this.indexSet_)},v.prototype.removeFromIndexes=function(l,d){return new v(J.map(this.indexes_,function(N){if(N===Ye)return N;var F=d.get(l.name);return F?N.remove(new Re(l.name,F)):N}),this.indexSet_)},v}();function Yt(v,l){return k(v.name,l.name)}function kn(v,l){return k(v,l)}var cn,gn=function(){function v(l,d,_){this.children_=l,this.priorityNode_=d,this.indexMap_=_,this.lazyHash_=null,this.priorityNode_&&Mn(this.priorityNode_),this.children_.isEmpty()&&J.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(v,"EMPTY_NODE",{get:function(){return cn||(cn=new v(new V(kn),null,St.Default))},enumerable:!1,configurable:!0}),v.prototype.isLeafNode=function(){return!1},v.prototype.getPriority=function(){return this.priorityNode_||cn},v.prototype.updatePriority=function(l){return this.children_.isEmpty()?this:new v(this.children_,l,this.indexMap_)},v.prototype.getImmediateChild=function(l){if(".priority"===l)return this.getPriority();var d=this.children_.get(l);return null===d?cn:d},v.prototype.getChild=function(l){var d=l.getFront();return null===d?this:this.getImmediateChild(d).getChild(l.popFront())},v.prototype.hasChild=function(l){return null!==this.children_.get(l)},v.prototype.updateImmediateChild=function(l,d){if(J.assert(d,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(d);var _=new Re(l,d),N=void 0,F=void 0;d.isEmpty()?(N=this.children_.remove(l),F=this.indexMap_.removeFromIndexes(_,this.children_)):(N=this.children_.insert(l,d),F=this.indexMap_.addToIndexes(_,this.children_));var Z=N.isEmpty()?cn:this.priorityNode_;return new v(N,Z,F)},v.prototype.updateChild=function(l,d){var _=l.getFront();if(null===_)return d;J.assert(".priority"!==l.getFront()||1===l.getLength(),".priority must be the last token in a path");var N=this.getImmediateChild(_).updateChild(l.popFront(),d);return this.updateImmediateChild(_,N)},v.prototype.isEmpty=function(){return this.children_.isEmpty()},v.prototype.numChildren=function(){return this.children_.count()},v.prototype.val=function(l){if(this.isEmpty())return null;var d={},_=0,N=0,F=!0;if(this.forEachChild(Ce,function(Ee,be){d[Ee]=be.val(l),_++,F&&v.INTEGER_REGEXP_.test(Ee)?N=Math.max(N,Number(Ee)):F=!1}),!l&&F&&N<2*_){var Z=[];for(var ce in d)Z[ce]=d[ce];return Z}return l&&!this.getPriority().isEmpty()&&(d[".priority"]=this.getPriority().val()),d},v.prototype.hash=function(){if(null===this.lazyHash_){var l="";this.getPriority().isEmpty()||(l+="priority:"+mn(this.getPriority().val())+":"),this.forEachChild(Ce,function(d,_){var N=_.hash();""!==N&&(l+=":"+d+":"+N)}),this.lazyHash_=""===l?"":gt(l)}return this.lazyHash_},v.prototype.getPredecessorChildName=function(l,d,_){var N=this.resolveIndex_(_);if(N){var F=N.getPredecessorKey(new Re(l,d));return F?F.name:null}return this.children_.getPredecessorKey(l)},v.prototype.getFirstChildName=function(l){var d=this.resolveIndex_(l);if(d){var _=d.minKey();return _&&_.name}return this.children_.minKey()},v.prototype.getFirstChild=function(l){var d=this.getFirstChildName(l);return d?new Re(d,this.children_.get(d)):null},v.prototype.getLastChildName=function(l){var d=this.resolveIndex_(l);if(d){var _=d.maxKey();return _&&_.name}return this.children_.maxKey()},v.prototype.getLastChild=function(l){var d=this.getLastChildName(l);return d?new Re(d,this.children_.get(d)):null},v.prototype.forEachChild=function(l,d){var _=this.resolveIndex_(l);return _?_.inorderTraversal(function(N){return d(N.name,N.node)}):this.children_.inorderTraversal(d)},v.prototype.getIterator=function(l){return this.getIteratorFrom(l.minPost(),l)},v.prototype.getIteratorFrom=function(l,d){var _=this.resolveIndex_(d);if(_)return _.getIteratorFrom(l,function(Z){return Z});for(var N=this.children_.getIteratorFrom(l.name,Re.Wrap),F=N.peek();null!=F&&d.compare(F,l)<0;)N.getNext(),F=N.peek();return N},v.prototype.getReverseIterator=function(l){return this.getReverseIteratorFrom(l.maxPost(),l)},v.prototype.getReverseIteratorFrom=function(l,d){var _=this.resolveIndex_(d);if(_)return _.getReverseIteratorFrom(l,function(Z){return Z});for(var N=this.children_.getReverseIteratorFrom(l.name,Re.Wrap),F=N.peek();null!=F&&d.compare(F,l)>0;)N.getNext(),F=N.peek();return N},v.prototype.compareTo=function(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===vn?-1:0},v.prototype.withIndex=function(l){if(l===Tt||this.indexMap_.hasIndex(l))return this;var d=this.indexMap_.addIndex(l,this.children_);return new v(this.children_,this.priorityNode_,d)},v.prototype.isIndexed=function(l){return l===Tt||this.indexMap_.hasIndex(l)},v.prototype.equals=function(l){if(l===this)return!0;if(l.isLeafNode())return!1;var d=l;if(this.getPriority().equals(d.getPriority())){if(this.children_.count()===d.children_.count()){for(var _=this.getIterator(Ce),N=d.getIterator(Ce),F=_.getNext(),Z=N.getNext();F&&Z;){if(F.name!==Z.name||!F.node.equals(Z.node))return!1;F=_.getNext(),Z=N.getNext()}return null===F&&null===Z}return!1}return!1},v.prototype.resolveIndex_=function(l){return l===Tt?null:this.indexMap_.get(l.toString())},v.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,v}(),vn=new(function(v){function l(){return v.call(this,new V(kn),gn.EMPTY_NODE,St.Default)||this}return A.__extends(l,v),l.prototype.compareTo=function(d){return d===this?0:1},l.prototype.equals=function(d){return d===this},l.prototype.getPriority=function(){return this},l.prototype.getImmediateChild=function(d){return gn.EMPTY_NODE},l.prototype.isEmpty=function(){return!1},l}(gn));function qn(v,l){if(void 0===l&&(l=null),null===v)return gn.EMPTY_NODE;if("object"==typeof v&&".priority"in v&&(l=v[".priority"]),J.assert(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof v&&".value"in v&&null!==v[".value"]&&(v=v[".value"]),"object"!=typeof v||".sv"in v)return new Tn(v,qn(l));if(v instanceof Array){var Ee=gn.EMPTY_NODE;return ot(v,function(be,lt){if(J.contains(v,be)&&"."!==be.substring(0,1)){var Rt=qn(lt);(Rt.isLeafNode()||!Rt.isEmpty())&&(Ee=Ee.updateImmediateChild(be,Rt))}}),Ee.updatePriority(qn(l))}var _=[],N=!1;if(ot(v,function(be,lt){if("."!==be.substring(0,1)){var Rt=qn(lt);Rt.isEmpty()||(N=N||!Rt.getPriority().isEmpty(),_.push(new Re(be,Rt)))}}),0===_.length)return gn.EMPTY_NODE;var Z=Ne(_,Yt,function(be){return be.name},kn);if(N){var ce=Ne(_,Ce.getCompare());return new gn(Z,qn(l),new St({".priority":ce},{".priority":Ce}))}return new gn(Z,qn(l),St.Default)}Object.defineProperties(Re,{MIN:{value:new Re(B,gn.EMPTY_NODE)},MAX:{value:new Re(K,vn)}}),Mt.__EMPTY_NODE=gn.EMPTY_NODE,Tn.__childrenNodeConstructor=gn,function(v){Lt=v}(vn),function(v){nr=v}(vn),function(v){fr=v}(qn);var Go,ri=new(function(v){function l(){return null!==v&&v.apply(this,arguments)||this}return A.__extends(l,v),l.prototype.compare=function(d,_){var N=d.node.compareTo(_.node);return 0===N?k(d.name,_.name):N},l.prototype.isDefinedOn=function(d){return!0},l.prototype.indexedValueChanged=function(d,_){return!d.equals(_)},l.prototype.minPost=function(){return Re.MIN},l.prototype.maxPost=function(){return Re.MAX},l.prototype.makePost=function(d,_){var N=qn(d);return new Re(_,N)},l.prototype.toString=function(){return".value"},l}(ht)),pi=function(v){function l(d){var _=v.call(this)||this;return _.indexPath_=d,J.assert(!d.isEmpty()&&".priority"!==d.getFront(),"Can't create PathIndex with empty path or .priority key"),_}return A.__extends(l,v),l.prototype.extractChild=function(d){return d.getChild(this.indexPath_)},l.prototype.isDefinedOn=function(d){return!d.getChild(this.indexPath_).isEmpty()},l.prototype.compare=function(d,_){var N=this.extractChild(d.node),F=this.extractChild(_.node),Z=N.compareTo(F);return 0===Z?k(d.name,_.name):Z},l.prototype.makePost=function(d,_){var N=qn(d),F=gn.EMPTY_NODE.updateChild(this.indexPath_,N);return new Re(_,F)},l.prototype.maxPost=function(){var d=gn.EMPTY_NODE.updateChild(this.indexPath_,vn);return new Re(K,d)},l.prototype.toString=function(){return this.indexPath_.slice().join("/")},l}(ht),Pi=function(){function v(l,d,_){this.node_=l,this.ref_=d,this.index_=_}return v.prototype.val=function(){return J.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},v.prototype.exportVal=function(){return J.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},v.prototype.toJSON=function(){return J.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},v.prototype.exists=function(){return J.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},v.prototype.child=function(l){J.validateArgCount("DataSnapshot.child",0,1,arguments.length),l=String(l),Yn("DataSnapshot.child",1,l,!1);var d=new qe(l),_=this.ref_.child(d);return new v(this.node_.getChild(d),_,Ce)},v.prototype.hasChild=function(l){J.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),Yn("DataSnapshot.hasChild",1,l,!1);var d=new qe(l);return!this.node_.getChild(d).isEmpty()},v.prototype.getPriority=function(){return J.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},v.prototype.forEach=function(l){var d=this;if(J.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),J.validateCallback("DataSnapshot.forEach",1,l,!1),this.node_.isLeafNode())return!1;var _=this.node_;return!!_.forEachChild(this.index_,function(N,F){return l(new v(F,d.ref_.child(N),Ce))})},v.prototype.hasChildren=function(){return J.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(v.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),v.prototype.numChildren=function(){return J.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},v.prototype.getRef=function(){return J.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(v.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),v}(),uo=function(){function v(l,d,_,N){this.eventType=l,this.eventRegistration=d,this.snapshot=_,this.prevName=N}return v.prototype.getPath=function(){var l=this.snapshot.getRef();return"value"===this.eventType?l.path:l.getParent().path},v.prototype.getEventType=function(){return this.eventType},v.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},v.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+J.stringify(this.snapshot.exportVal())},v}(),xi=function(){function v(l,d,_){this.eventRegistration=l,this.error=d,this.path=_}return v.prototype.getPath=function(){return this.path},v.prototype.getEventType=function(){return"cancel"},v.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},v.prototype.toString=function(){return this.path.toString()+":cancel"},v}(),Fr=function(){function v(l,d,_){this.callback_=l,this.cancelCallback_=d,this.context_=_}return v.prototype.respondsTo=function(l){return"value"===l},v.prototype.createEvent=function(l,d){var _=d.getQueryParams().getIndex();return new uo("value",this,new Pi(l.snapshotNode,d.getRef(),_))},v.prototype.getEventRunner=function(l){var d=this.context_;if("cancel"===l.getEventType()){J.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var _=this.cancelCallback_;return function(){_.call(d,l.error)}}var N=this.callback_;return function(){N.call(d,l.snapshot)}},v.prototype.createCancelEvent=function(l,d){return this.cancelCallback_?new xi(this,l,d):null},v.prototype.matches=function(l){return l instanceof v&&(!l.callback_||!this.callback_||l.callback_===this.callback_&&l.context_===this.context_)},v.prototype.hasAnyCallback=function(){return null!==this.callback_},v}(),mo=function(){function v(l,d,_){this.callbacks_=l,this.cancelCallback_=d,this.context_=_}return v.prototype.respondsTo=function(l){var d="children_added"===l?"child_added":l;return J.contains(this.callbacks_,d="children_removed"===d?"child_removed":d)},v.prototype.createCancelEvent=function(l,d){return this.cancelCallback_?new xi(this,l,d):null},v.prototype.createEvent=function(l,d){J.assert(null!=l.childName,"Child events should have a childName.");var _=d.getRef().child(l.childName),N=d.getQueryParams().getIndex();return new uo(l.type,this,new Pi(l.snapshotNode,_,N),l.prevName)},v.prototype.getEventRunner=function(l){var d=this.context_;if("cancel"===l.getEventType()){J.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var _=this.cancelCallback_;return function(){_.call(d,l.error)}}var N=this.callbacks_[l.eventType];return function(){N.call(d,l.snapshot,l.prevName)}},v.prototype.matches=function(l){var d=this;if(l instanceof v){if(!this.callbacks_||!l.callbacks_)return!0;if(this.context_===l.context_){var _=Object.keys(l.callbacks_),N=Object.keys(this.callbacks_),F=_.length;if(F===N.length){if(1===F){var ce=_[0],Ee=N[0];return!(Ee!==ce||l.callbacks_[ce]&&this.callbacks_[Ee]&&l.callbacks_[ce]!==this.callbacks_[Ee])}return N.every(function(be){return l.callbacks_[be]===d.callbacks_[be]})}}}return!1},v.prototype.hasAnyCallback=function(){return null!==this.callbacks_},v}(),Mi=function(){function v(l,d,_,N){this.repo=l,this.path=d,this.queryParams_=_,this.orderByCalled_=N}return Object.defineProperty(v,"__referenceConstructor",{get:function(){return J.assert(Go,"Reference.ts has not been loaded"),Go},set:function(l){Go=l},enumerable:!1,configurable:!0}),v.validateQueryEndpoints_=function(l){var d=null,_=null;if(l.hasStart()&&(d=l.getIndexStartValue()),l.hasEnd()&&(_=l.getIndexEndValue()),l.getIndex()===Tt){var N="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",F="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(l.hasStart()){if(l.getIndexStartName()!==B)throw new Error(N);if("string"!=typeof d)throw new Error(F)}if(l.hasEnd()){if(l.getIndexEndName()!==K)throw new Error(N);if("string"!=typeof _)throw new Error(F)}}else if(l.getIndex()===Ce){if(null!=d&&!nn(d)||null!=_&&!nn(_))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(J.assert(l.getIndex()instanceof pi||l.getIndex()===ri,"unknown index type."),null!=d&&"object"==typeof d||null!=_&&"object"==typeof _)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},v.validateLimit_=function(l){if(l.hasStart()&&l.hasEnd()&&l.hasLimit()&&!l.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},v.prototype.validateNoPreviousOrderByCall_=function(l){if(!0===this.orderByCalled_)throw new Error(l+": You can't combine multiple orderBy calls.")},v.prototype.getQueryParams=function(){return this.queryParams_},v.prototype.getRef=function(){return J.validateArgCount("Query.ref",0,0,arguments.length),new v.__referenceConstructor(this.repo,this.path)},v.prototype.on=function(l,d,_,N){J.validateArgCount("Query.on",2,4,arguments.length),Nn("Query.on",1,l,!1),J.validateCallback("Query.on",2,d,!1);var F=v.getCancelAndContextArgs_("Query.on",_,N);if("value"===l)this.onValueEvent(d,F.cancel,F.context);else{var Z={};Z[l]=d,this.onChildEvent(Z,F.cancel,F.context)}return d},v.prototype.onValueEvent=function(l,d,_){var N=new Fr(l,d||null,_||null);this.repo.addEventCallbackForQuery(this,N)},v.prototype.onChildEvent=function(l,d,_){var N=new mo(l,d,_);this.repo.addEventCallbackForQuery(this,N)},v.prototype.off=function(l,d,_){J.validateArgCount("Query.off",0,3,arguments.length),Nn("Query.off",1,l,!0),J.validateCallback("Query.off",2,d,!0),J.validateContextObject("Query.off",3,_,!0);var N=null,F=null;if("value"===l){var Z=d||null;N=new Fr(Z,null,_||null)}else l&&(d&&((F={})[l]=d),N=new mo(F,null,_||null));this.repo.removeEventCallbackForQuery(this,N)},v.prototype.once=function(l,d,_,N){var F=this;J.validateArgCount("Query.once",1,4,arguments.length),Nn("Query.once",1,l,!1),J.validateCallback("Query.once",2,d,!0);var Z=v.getCancelAndContextArgs_("Query.once",_,N),ce=!0,Ee=new J.Deferred;Ee.promise.catch(function(){});var be=function(lt){ce&&(ce=!1,F.off(l,be),d&&d.bind(Z.context)(lt),Ee.resolve(lt))};return this.on(l,be,function(lt){F.off(l,be),Z.cancel&&Z.cancel.bind(Z.context)(lt),Ee.reject(lt)}),Ee.promise},v.prototype.limitToFirst=function(l){if(J.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new v(this.repo,this.path,this.queryParams_.limitToFirst(l),this.orderByCalled_)},v.prototype.limitToLast=function(l){if(J.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new v(this.repo,this.path,this.queryParams_.limitToLast(l),this.orderByCalled_)},v.prototype.orderByChild=function(l){if(J.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===l)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===l)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===l)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Yn("Query.orderByChild",1,l,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var d=new qe(l);if(d.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var _=new pi(d),N=this.queryParams_.orderBy(_);return v.validateQueryEndpoints_(N),new v(this.repo,this.path,N,!0)},v.prototype.orderByKey=function(){J.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var l=this.queryParams_.orderBy(Tt);return v.validateQueryEndpoints_(l),new v(this.repo,this.path,l,!0)},v.prototype.orderByPriority=function(){J.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var l=this.queryParams_.orderBy(Ce);return v.validateQueryEndpoints_(l),new v(this.repo,this.path,l,!0)},v.prototype.orderByValue=function(){J.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var l=this.queryParams_.orderBy(ri);return v.validateQueryEndpoints_(l),new v(this.repo,this.path,l,!0)},v.prototype.startAt=function(l,d){void 0===l&&(l=null),J.validateArgCount("Query.startAt",0,2,arguments.length),tn("Query.startAt",1,l,this.path,!0),Ir("Query.startAt",2,d,!0);var _=this.queryParams_.startAt(l,d);if(v.validateLimit_(_),v.validateQueryEndpoints_(_),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===l&&(l=null,d=null),new v(this.repo,this.path,_,this.orderByCalled_)},v.prototype.endAt=function(l,d){void 0===l&&(l=null),J.validateArgCount("Query.endAt",0,2,arguments.length),tn("Query.endAt",1,l,this.path,!0),Ir("Query.endAt",2,d,!0);var _=this.queryParams_.endAt(l,d);if(v.validateLimit_(_),v.validateQueryEndpoints_(_),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new v(this.repo,this.path,_,this.orderByCalled_)},v.prototype.equalTo=function(l,d){if(J.validateArgCount("Query.equalTo",1,2,arguments.length),tn("Query.equalTo",1,l,this.path,!1),Ir("Query.equalTo",2,d,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(l,d).endAt(l,d)},v.prototype.toString=function(){return J.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},v.prototype.toJSON=function(){return J.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},v.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},v.prototype.queryIdentifier=function(){var l=this.queryObject(),d=Gt(l);return"{}"===d?"default":d},v.prototype.isEqual=function(l){if(J.validateArgCount("Query.isEqual",1,1,arguments.length),!(l instanceof v)){var d="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(d)}var _=this.repo===l.repo,N=this.path.equals(l.path),F=this.queryIdentifier()===l.queryIdentifier();return _&&N&&F},v.getCancelAndContextArgs_=function(l,d,_){var N={cancel:null,context:null};if(d&&_)N.cancel=d,J.validateCallback(l,3,N.cancel,!0),N.context=_,J.validateContextObject(l,4,N.context,!0);else if(d)if("object"==typeof d&&null!==d)N.context=d;else{if("function"!=typeof d)throw new Error(J.errorPrefix(l,3,!0)+" must either be a cancel callback or a context object.");N.cancel=d}return N},Object.defineProperty(v.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),v}(),yo=function(){function v(l){this.node_=l}return v.prototype.getImmediateChild=function(l){return new v(this.node_.getImmediateChild(l))},v.prototype.node=function(){return this.node_},v}(),Zi=function(){function v(l,d){this.syncTree_=l,this.path_=d}return v.prototype.getImmediateChild=function(l){var d=this.path_.child(l);return new v(this.syncTree_,d)},v.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},v}(),ii=function(v,l,d){return v&&"object"==typeof v?(J.assert(".sv"in v,"Unexpected leaf node or priority contents"),"string"==typeof v[".sv"]?Pr(v[".sv"],l,d):"object"==typeof v[".sv"]?ui(v[".sv"],l):void J.assert(!1,"Unexpected server value: "+JSON.stringify(v,null,2))):v},Pr=function(v,l,d){switch(v){case"timestamp":return d.timestamp;default:J.assert(!1,"Unexpected server value: "+v)}},ui=function(v,l,d){v.hasOwnProperty("increment")||J.assert(!1,"Unexpected server value: "+JSON.stringify(v,null,2));var _=v.increment;"number"!=typeof _&&J.assert(!1,"Unexpected increment value: "+_);var N=l.node();if(J.assert(null!=N,"Expected ChildrenNode.EMPTY_NODE for nulls"),!N.isLeafNode())return _;var Z=N.getValue();return"number"!=typeof Z?_:Z+_},Zn=function(v,l,d,_){return Si(l,new Zi(d,v),_)},Un=function(v,l,d){return Si(v,new yo(l),d)};function Si(v,l,d){var F,_=v.getPriority().val(),N=ii(_,l.getImmediateChild(".priority"),d);if(v.isLeafNode()){var Z=v,ce=ii(Z.getValue(),l,d);return ce!==Z.getValue()||N!==Z.getPriority().val()?new Tn(ce,qn(N)):v}var Ee=v;return F=Ee,N!==Ee.getPriority().val()&&(F=F.updatePriority(new Tn(N))),Ee.forEachChild(Ce,function(be,lt){var Rt=Si(lt,l.getImmediateChild(be),d);Rt!==lt&&(F=F.updateImmediateChild(be,Rt))}),F}var Ji,co,Qi=function(){function v(){this.value=null,this.children=new Map}return v.prototype.find=function(l){if(null!=this.value)return this.value.getChild(l);if(!l.isEmpty()&&this.children.size>0){var d=l.getFront();return l=l.popFront(),this.children.has(d)?this.children.get(d).find(l):null}return null},v.prototype.remember=function(l,d){if(l.isEmpty())this.value=d,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(l,d);else{var _=l.getFront();this.children.has(_)||this.children.set(_,new v);var N=this.children.get(_);l=l.popFront(),N.remember(l,d)}},v.prototype.forget=function(l){if(l.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var d=this.value;this.value=null;var _=this;return d.forEachChild(Ce,function(Z,ce){_.remember(new qe(Z),ce)}),this.forget(l)}if(this.children.size>0){var N=l.getFront();return l=l.popFront(),this.children.has(N)&&this.children.get(N).forget(l)&&this.children.delete(N),0===this.children.size}return!0},v.prototype.forEachTree=function(l,d){null!==this.value?d(l,this.value):this.forEachChild(function(_,N){var F=new qe(l.toString()+"/"+_);N.forEachTree(F,d)})},v.prototype.forEachChild=function(l){this.children.forEach(function(d,_){l(_,d)})},v}(),Cr=(()=>(function(v){v[v.OVERWRITE=0]="OVERWRITE",v[v.MERGE=1]="MERGE",v[v.ACK_USER_WRITE=2]="ACK_USER_WRITE",v[v.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Cr||(Cr={})),Cr))(),gi=function(){function v(l,d,_,N){this.fromUser=l,this.fromServer=d,this.queryId=_,this.tagged=N,J.assert(!N||d,"Tagged queries must be from server.")}return v.User=new v(!0,!1,null,!1),v.Server=new v(!1,!0,null,!1),v.forServerTaggedQuery=function(l){return new v(!1,!0,l,!0)},v}(),Wo=function(){function v(l,d,_){this.path=l,this.affectedTree=d,this.revert=_,this.type=Cr.ACK_USER_WRITE,this.source=gi.User}return v.prototype.operationForChild=function(l){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return J.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var d=this.affectedTree.subtree(new qe(l));return new v(qe.Empty,d,this.revert)}return J.assert(this.path.getFront()===l,"operationForChild called for unrelated child."),new v(this.path.popFront(),this.affectedTree,this.revert)},v}(),Xn=function(){function v(l,d){void 0===d&&(Ji||(Ji=new V(ae)),d=Ji),this.value=l,this.children=d}return v.fromObject=function(l){var d=v.Empty;return ot(l,function(_,N){d=d.set(new qe(_),N)}),d},v.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},v.prototype.findRootMostMatchingPathAndValue=function(l,d){if(null!=this.value&&d(this.value))return{path:qe.Empty,value:this.value};if(l.isEmpty())return null;var _=l.getFront(),N=this.children.get(_);if(null!==N){var F=N.findRootMostMatchingPathAndValue(l.popFront(),d);return null!=F?{path:new qe(_).child(F.path),value:F.value}:null}return null},v.prototype.findRootMostValueAndPath=function(l){return this.findRootMostMatchingPathAndValue(l,function(){return!0})},v.prototype.subtree=function(l){if(l.isEmpty())return this;var d=l.getFront(),_=this.children.get(d);return null!==_?_.subtree(l.popFront()):v.Empty},v.prototype.set=function(l,d){if(l.isEmpty())return new v(d,this.children);var _=l.getFront(),F=(this.children.get(_)||v.Empty).set(l.popFront(),d),Z=this.children.insert(_,F);return new v(this.value,Z)},v.prototype.remove=function(l){if(l.isEmpty())return this.children.isEmpty()?v.Empty:new v(null,this.children);var d=l.getFront(),_=this.children.get(d);if(_){var N=_.remove(l.popFront()),F=void 0;return F=N.isEmpty()?this.children.remove(d):this.children.insert(d,N),null===this.value&&F.isEmpty()?v.Empty:new v(this.value,F)}return this},v.prototype.get=function(l){if(l.isEmpty())return this.value;var d=l.getFront(),_=this.children.get(d);return _?_.get(l.popFront()):null},v.prototype.setTree=function(l,d){if(l.isEmpty())return d;var Z,_=l.getFront(),F=(this.children.get(_)||v.Empty).setTree(l.popFront(),d);return Z=F.isEmpty()?this.children.remove(_):this.children.insert(_,F),new v(this.value,Z)},v.prototype.fold=function(l){return this.fold_(qe.Empty,l)},v.prototype.fold_=function(l,d){var _={};return this.children.inorderTraversal(function(N,F){_[N]=F.fold_(l.child(N),d)}),d(l,this.value,_)},v.prototype.findOnPath=function(l,d){return this.findOnPath_(l,qe.Empty,d)},v.prototype.findOnPath_=function(l,d,_){var N=!!this.value&&_(d,this.value);if(N)return N;if(l.isEmpty())return null;var F=l.getFront(),Z=this.children.get(F);return Z?Z.findOnPath_(l.popFront(),d.child(F),_):null},v.prototype.foreachOnPath=function(l,d){return this.foreachOnPath_(l,qe.Empty,d)},v.prototype.foreachOnPath_=function(l,d,_){if(l.isEmpty())return this;this.value&&_(d,this.value);var N=l.getFront(),F=this.children.get(N);return F?F.foreachOnPath_(l.popFront(),d.child(N),_):v.Empty},v.prototype.foreach=function(l){this.foreach_(qe.Empty,l)},v.prototype.foreach_=function(l,d){this.children.inorderTraversal(function(_,N){N.foreach_(l.child(_),d)}),this.value&&d(l,this.value)},v.prototype.foreachChild=function(l){this.children.inorderTraversal(function(d,_){_.value&&l(d,_.value)})},v.Empty=new v(null),v}(),Xo=function(){function v(l,d){this.source=l,this.path=d,this.type=Cr.LISTEN_COMPLETE}return v.prototype.operationForChild=function(l){return this.path.isEmpty()?new v(this.source,qe.Empty):new v(this.source,this.path.popFront())},v}(),Gi=function(){function v(l,d,_){this.source=l,this.path=d,this.snap=_,this.type=Cr.OVERWRITE}return v.prototype.operationForChild=function(l){return this.path.isEmpty()?new v(this.source,qe.Empty,this.snap.getImmediateChild(l)):new v(this.source,this.path.popFront(),this.snap)},v}(),Do=function(){function v(l,d,_){this.source=l,this.path=d,this.children=_,this.type=Cr.MERGE}return v.prototype.operationForChild=function(l){if(this.path.isEmpty()){var d=this.children.subtree(new qe(l));return d.isEmpty()?null:d.value?new Gi(this.source,qe.Empty,d.value):new v(this.source,qe.Empty,d)}return J.assert(this.path.getFront()===l,"Can't get a merge for a child not on the path of the operation"),new v(this.source,this.path.popFront(),this.children)},v.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},v}(),eo=function(){function v(l,d,_){this.node_=l,this.fullyInitialized_=d,this.filtered_=_}return v.prototype.isFullyInitialized=function(){return this.fullyInitialized_},v.prototype.isFiltered=function(){return this.filtered_},v.prototype.isCompleteForPath=function(l){if(l.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var d=l.getFront();return this.isCompleteForChild(d)},v.prototype.isCompleteForChild=function(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)},v.prototype.getNode=function(){return this.node_},v}(),oi=function(){function v(l,d){this.eventCache_=l,this.serverCache_=d}return v.prototype.updateEventSnap=function(l,d,_){return new v(new eo(l,d,_),this.serverCache_)},v.prototype.updateServerSnap=function(l,d,_){return new v(this.eventCache_,new eo(l,d,_))},v.prototype.getEventCache=function(){return this.eventCache_},v.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},v.prototype.getServerCache=function(){return this.serverCache_},v.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},v.Empty=new v(new eo(gn.EMPTY_NODE,!1,!1),new eo(gn.EMPTY_NODE,!1,!1)),v}(),rr=function(){function v(l,d,_,N,F){this.type=l,this.snapshotNode=d,this.childName=_,this.oldSnap=N,this.prevName=F}return v.valueChange=function(l){return new v(v.VALUE,l)},v.childAddedChange=function(l,d){return new v(v.CHILD_ADDED,d,l)},v.childRemovedChange=function(l,d){return new v(v.CHILD_REMOVED,d,l)},v.childChangedChange=function(l,d,_){return new v(v.CHILD_CHANGED,d,l,_)},v.childMovedChange=function(l,d){return new v(v.CHILD_MOVED,d,l)},v.CHILD_ADDED="child_added",v.CHILD_REMOVED="child_removed",v.CHILD_CHANGED="child_changed",v.CHILD_MOVED="child_moved",v.VALUE="value",v}(),Wi=function(){function v(l){this.index_=l}return v.prototype.updateChild=function(l,d,_,N,F,Z){J.assert(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");var ce=l.getImmediateChild(d);return ce.getChild(N).equals(_.getChild(N))&&ce.isEmpty()===_.isEmpty()||(null!=Z&&(_.isEmpty()?l.hasChild(d)?Z.trackChildChange(rr.childRemovedChange(d,ce)):J.assert(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ce.isEmpty()?Z.trackChildChange(rr.childAddedChange(d,_)):Z.trackChildChange(rr.childChangedChange(d,_,ce))),l.isLeafNode()&&_.isEmpty())?l:l.updateImmediateChild(d,_).withIndex(this.index_)},v.prototype.updateFullNode=function(l,d,_){return null!=_&&(l.isLeafNode()||l.forEachChild(Ce,function(N,F){d.hasChild(N)||_.trackChildChange(rr.childRemovedChange(N,F))}),d.isLeafNode()||d.forEachChild(Ce,function(N,F){if(l.hasChild(N)){var Z=l.getImmediateChild(N);Z.equals(F)||_.trackChildChange(rr.childChangedChange(N,F,Z))}else _.trackChildChange(rr.childAddedChange(N,F))})),d.withIndex(this.index_)},v.prototype.updatePriority=function(l,d){return l.isEmpty()?gn.EMPTY_NODE:l.updatePriority(d)},v.prototype.filtersNodes=function(){return!1},v.prototype.getIndexedFilter=function(){return this},v.prototype.getIndex=function(){return this.index_},v}(),to=function(){function v(){this.changeMap=new Map}return v.prototype.trackChildChange=function(l){var d=l.type,_=l.childName;J.assert(d===rr.CHILD_ADDED||d===rr.CHILD_CHANGED||d===rr.CHILD_REMOVED,"Only child changes supported for tracking"),J.assert(".priority"!==_,"Only non-priority child changes can be tracked.");var N=this.changeMap.get(_);if(N){var F=N.type;if(d===rr.CHILD_ADDED&&F===rr.CHILD_REMOVED)this.changeMap.set(_,rr.childChangedChange(_,l.snapshotNode,N.snapshotNode));else if(d===rr.CHILD_REMOVED&&F===rr.CHILD_ADDED)this.changeMap.delete(_);else if(d===rr.CHILD_REMOVED&&F===rr.CHILD_CHANGED)this.changeMap.set(_,rr.childRemovedChange(_,N.oldSnap));else if(d===rr.CHILD_CHANGED&&F===rr.CHILD_ADDED)this.changeMap.set(_,rr.childAddedChange(_,l.snapshotNode));else{if(d!==rr.CHILD_CHANGED||F!==rr.CHILD_CHANGED)throw J.assertionError("Illegal combination of changes: "+l+" occurred after "+N);this.changeMap.set(_,rr.childChangedChange(_,l.snapshotNode,N.oldSnap))}}else this.changeMap.set(_,l)},v.prototype.getChanges=function(){return Array.from(this.changeMap.values())},v}(),Fo=new(function(){function v(){}return v.prototype.getCompleteChild=function(l){return null},v.prototype.getChildAfterChild=function(l,d,_){return null},v}()),Lo=function(){function v(l,d,_){void 0===_&&(_=null),this.writes_=l,this.viewCache_=d,this.optCompleteServerCache_=_}return v.prototype.getCompleteChild=function(l){var d=this.viewCache_.getEventCache();if(d.isCompleteForChild(l))return d.getNode().getImmediateChild(l);var _=null!=this.optCompleteServerCache_?new eo(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(l,_)},v.prototype.getChildAfterChild=function(l,d,_){var N=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),F=this.writes_.calcIndexedSlice(N,d,1,_,l);return 0===F.length?null:F[0]},v}(),fs=function(l,d){this.viewCache=l,this.changes=d},Ys=function(){function v(l){this.filter_=l}return v.prototype.assertIndexed=function(l){J.assert(l.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),J.assert(l.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},v.prototype.applyOperation=function(l,d,_,N){var Z,ce,F=new to;if(d.type===Cr.OVERWRITE){var Ee=d;Ee.source.fromUser?Z=this.applyUserOverwrite_(l,Ee.path,Ee.snap,_,N,F):(J.assert(Ee.source.fromServer,"Unknown source."),ce=Ee.source.tagged||l.getServerCache().isFiltered()&&!Ee.path.isEmpty(),Z=this.applyServerOverwrite_(l,Ee.path,Ee.snap,_,N,ce,F))}else if(d.type===Cr.MERGE){var be=d;be.source.fromUser?Z=this.applyUserMerge_(l,be.path,be.children,_,N,F):(J.assert(be.source.fromServer,"Unknown source."),ce=be.source.tagged||l.getServerCache().isFiltered(),Z=this.applyServerMerge_(l,be.path,be.children,_,N,ce,F))}else if(d.type===Cr.ACK_USER_WRITE){var lt=d;Z=lt.revert?this.revertUserWrite_(l,lt.path,_,N,F):this.ackUserWrite_(l,lt.path,lt.affectedTree,_,N,F)}else{if(d.type!==Cr.LISTEN_COMPLETE)throw J.assertionError("Unknown operation type: "+d.type);Z=this.listenComplete_(l,d.path,_,F)}var Rt=F.getChanges();return v.maybeAddValueEvent_(l,Z,Rt),new fs(Z,Rt)},v.maybeAddValueEvent_=function(l,d,_){var N=d.getEventCache();if(N.isFullyInitialized()){var F=N.getNode().isLeafNode()||N.getNode().isEmpty(),Z=l.getCompleteEventSnap();(_.length>0||!l.getEventCache().isFullyInitialized()||F&&!N.getNode().equals(Z)||!N.getNode().getPriority().equals(Z.getPriority()))&&_.push(rr.valueChange(d.getCompleteEventSnap()))}},v.prototype.generateEventCacheAfterServerEvent_=function(l,d,_,N,F){var Z=l.getEventCache();if(null!=_.shadowingWrite(d))return l;var ce=void 0,Ee=void 0;if(d.isEmpty())if(J.assert(l.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),l.getServerCache().isFiltered()){var be=l.getCompleteServerSnap(),Rt=_.calcCompleteEventChildren(be instanceof gn?be:gn.EMPTY_NODE);ce=this.filter_.updateFullNode(l.getEventCache().getNode(),Rt,F)}else{var jt=_.calcCompleteEventCache(l.getCompleteServerSnap());ce=this.filter_.updateFullNode(l.getEventCache().getNode(),jt,F)}else{var un=d.getFront();if(".priority"===un){J.assert(1===d.getLength(),"Can't have a priority with additional path components");var In=Z.getNode();Ee=l.getServerCache().getNode();var Dn=_.calcEventCacheAfterServerOverwrite(d,In,Ee);ce=null!=Dn?this.filter_.updatePriority(In,Dn):Z.getNode()}else{var pr=d.popFront(),Mr=void 0;if(Z.isCompleteForChild(un)){Ee=l.getServerCache().getNode();var yi=_.calcEventCacheAfterServerOverwrite(d,Z.getNode(),Ee);Mr=null!=yi?Z.getNode().getImmediateChild(un).updateChild(pr,yi):Z.getNode().getImmediateChild(un)}else Mr=_.calcCompleteChild(un,l.getServerCache());ce=null!=Mr?this.filter_.updateChild(Z.getNode(),un,Mr,pr,N,F):Z.getNode()}}return l.updateEventSnap(ce,Z.isFullyInitialized()||d.isEmpty(),this.filter_.filtersNodes())},v.prototype.applyServerOverwrite_=function(l,d,_,N,F,Z,ce){var be,Ee=l.getServerCache(),lt=Z?this.filter_:this.filter_.getIndexedFilter();if(d.isEmpty())be=lt.updateFullNode(Ee.getNode(),_,null);else if(lt.filtersNodes()&&!Ee.isFiltered()){var Rt=Ee.getNode().updateChild(d,_);be=lt.updateFullNode(Ee.getNode(),Rt,null)}else{var jt=d.getFront();if(!Ee.isCompleteForPath(d)&&d.getLength()>1)return l;var un=d.popFront(),Dn=Ee.getNode().getImmediateChild(jt).updateChild(un,_);be=".priority"===jt?lt.updatePriority(Ee.getNode(),Dn):lt.updateChild(Ee.getNode(),jt,Dn,un,Fo,null)}var pr=l.updateServerSnap(be,Ee.isFullyInitialized()||d.isEmpty(),lt.filtersNodes()),Mr=new Lo(N,pr,F);return this.generateEventCacheAfterServerEvent_(pr,d,N,Mr,ce)},v.prototype.applyUserOverwrite_=function(l,d,_,N,F,Z){var Ee,be,ce=l.getEventCache(),lt=new Lo(N,l,F);if(d.isEmpty())be=this.filter_.updateFullNode(l.getEventCache().getNode(),_,Z),Ee=l.updateEventSnap(be,!0,this.filter_.filtersNodes());else{var Rt=d.getFront();if(".priority"===Rt)be=this.filter_.updatePriority(l.getEventCache().getNode(),_),Ee=l.updateEventSnap(be,ce.isFullyInitialized(),ce.isFiltered());else{var jt=d.popFront(),un=ce.getNode().getImmediateChild(Rt),In=void 0;if(jt.isEmpty())In=_;else{var Dn=lt.getCompleteChild(Rt);In=null!=Dn?".priority"===jt.getBack()&&Dn.getChild(jt.parent()).isEmpty()?Dn:Dn.updateChild(jt,_):gn.EMPTY_NODE}if(un.equals(In))Ee=l;else{var pr=this.filter_.updateChild(ce.getNode(),Rt,In,jt,lt,Z);Ee=l.updateEventSnap(pr,ce.isFullyInitialized(),this.filter_.filtersNodes())}}}return Ee},v.cacheHasChild_=function(l,d){return l.getEventCache().isCompleteForChild(d)},v.prototype.applyUserMerge_=function(l,d,_,N,F,Z){var ce=this,Ee=l;return _.foreach(function(be,lt){var Rt=d.child(be);v.cacheHasChild_(l,Rt.getFront())&&(Ee=ce.applyUserOverwrite_(Ee,Rt,lt,N,F,Z))}),_.foreach(function(be,lt){var Rt=d.child(be);v.cacheHasChild_(l,Rt.getFront())||(Ee=ce.applyUserOverwrite_(Ee,Rt,lt,N,F,Z))}),Ee},v.prototype.applyMerge_=function(l,d){return d.foreach(function(_,N){l=l.updateChild(_,N)}),l},v.prototype.applyServerMerge_=function(l,d,_,N,F,Z,ce){var Ee=this;if(l.getServerCache().getNode().isEmpty()&&!l.getServerCache().isFullyInitialized())return l;var lt,be=l;lt=d.isEmpty()?_:Xn.Empty.setTree(d,_);var Rt=l.getServerCache().getNode();return lt.children.inorderTraversal(function(jt,un){if(Rt.hasChild(jt)){var In=l.getServerCache().getNode().getImmediateChild(jt),Dn=Ee.applyMerge_(In,un);be=Ee.applyServerOverwrite_(be,new qe(jt),Dn,N,F,Z,ce)}}),lt.children.inorderTraversal(function(jt,un){var In=!l.getServerCache().isCompleteForChild(jt)&&null==un.value;if(!Rt.hasChild(jt)&&!In){var Dn=l.getServerCache().getNode().getImmediateChild(jt),pr=Ee.applyMerge_(Dn,un);be=Ee.applyServerOverwrite_(be,new qe(jt),pr,N,F,Z,ce)}}),be},v.prototype.ackUserWrite_=function(l,d,_,N,F,Z){if(null!=N.shadowingWrite(d))return l;var ce=l.getServerCache().isFiltered(),Ee=l.getServerCache();if(null!=_.value){if(d.isEmpty()&&Ee.isFullyInitialized()||Ee.isCompleteForPath(d))return this.applyServerOverwrite_(l,d,Ee.getNode().getChild(d),N,F,ce,Z);if(d.isEmpty()){var be=Xn.Empty;return Ee.getNode().forEachChild(Tt,function(Rt,jt){be=be.set(new qe(Rt),jt)}),this.applyServerMerge_(l,d,be,N,F,ce,Z)}return l}var lt=Xn.Empty;return _.foreach(function(Rt,jt){var un=d.child(Rt);Ee.isCompleteForPath(un)&&(lt=lt.set(Rt,Ee.getNode().getChild(un)))}),this.applyServerMerge_(l,d,lt,N,F,ce,Z)},v.prototype.listenComplete_=function(l,d,_,N){var F=l.getServerCache(),Z=l.updateServerSnap(F.getNode(),F.isFullyInitialized()||d.isEmpty(),F.isFiltered());return this.generateEventCacheAfterServerEvent_(Z,d,_,Fo,N)},v.prototype.revertUserWrite_=function(l,d,_,N,F){var Z;if(null!=_.shadowingWrite(d))return l;var ce=new Lo(_,l,N),Ee=l.getEventCache().getNode(),be=void 0;if(d.isEmpty()||".priority"===d.getFront()){var lt=void 0;if(l.getServerCache().isFullyInitialized())lt=_.calcCompleteEventCache(l.getCompleteServerSnap());else{var Rt=l.getServerCache().getNode();J.assert(Rt instanceof gn,"serverChildren would be complete if leaf node"),lt=_.calcCompleteEventChildren(Rt)}be=this.filter_.updateFullNode(Ee,lt=lt,F)}else{var jt=d.getFront(),un=_.calcCompleteChild(jt,l.getServerCache());null==un&&l.getServerCache().isCompleteForChild(jt)&&(un=Ee.getImmediateChild(jt)),(be=null!=un?this.filter_.updateChild(Ee,jt,un,d.popFront(),ce,F):l.getEventCache().getNode().hasChild(jt)?this.filter_.updateChild(Ee,jt,gn.EMPTY_NODE,d.popFront(),ce,F):Ee).isEmpty()&&l.getServerCache().isFullyInitialized()&&(Z=_.calcCompleteEventCache(l.getCompleteServerSnap())).isLeafNode()&&(be=this.filter_.updateFullNode(be,Z,F))}return Z=l.getServerCache().isFullyInitialized()||null!=_.shadowingWrite(qe.Empty),l.updateEventSnap(be,Z,this.filter_.filtersNodes())},v}(),$r=function(){function v(l){this.query_=l,this.index_=this.query_.getQueryParams().getIndex()}return v.prototype.generateEventsForChanges=function(l,d,_){var N=this,F=[],Z=[];return l.forEach(function(ce){ce.type===rr.CHILD_CHANGED&&N.index_.indexedValueChanged(ce.oldSnap,ce.snapshotNode)&&Z.push(rr.childMovedChange(ce.childName,ce.snapshotNode))}),this.generateEventsForType_(F,rr.CHILD_REMOVED,l,_,d),this.generateEventsForType_(F,rr.CHILD_ADDED,l,_,d),this.generateEventsForType_(F,rr.CHILD_MOVED,Z,_,d),this.generateEventsForType_(F,rr.CHILD_CHANGED,l,_,d),this.generateEventsForType_(F,rr.VALUE,l,_,d),F},v.prototype.generateEventsForType_=function(l,d,_,N,F){var Z=this,ce=_.filter(function(Ee){return Ee.type===d});ce.sort(this.compareChanges_.bind(this)),ce.forEach(function(Ee){var be=Z.materializeSingleChange_(Ee,F);N.forEach(function(lt){lt.respondsTo(Ee.type)&&l.push(lt.createEvent(be,Z.query_))})})},v.prototype.materializeSingleChange_=function(l,d){return"value"===l.type||"child_removed"===l.type||(l.prevName=d.getPredecessorChildName(l.childName,l.snapshotNode,this.index_)),l},v.prototype.compareChanges_=function(l,d){if(null==l.childName||null==d.childName)throw J.assertionError("Should only compare child_ events.");var _=new Re(l.childName,l.snapshotNode),N=new Re(d.childName,d.snapshotNode);return this.index_.compare(_,N)},v}(),qo=function(){function v(l,d){this.query_=l,this.eventRegistrations_=[];var _=this.query_.getQueryParams(),N=new Wi(_.getIndex()),F=_.getNodeFilter();this.processor_=new Ys(F);var Z=d.getServerCache(),ce=d.getEventCache(),Ee=N.updateFullNode(gn.EMPTY_NODE,Z.getNode(),null),be=F.updateFullNode(gn.EMPTY_NODE,ce.getNode(),null),lt=new eo(Ee,Z.isFullyInitialized(),N.filtersNodes()),Rt=new eo(be,ce.isFullyInitialized(),F.filtersNodes());this.viewCache_=new oi(Rt,lt),this.eventGenerator_=new $r(this.query_)}return v.prototype.getQuery=function(){return this.query_},v.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},v.prototype.getCompleteServerCache=function(l){var d=this.viewCache_.getCompleteServerSnap();return d&&(this.query_.getQueryParams().loadsAllData()||!l.isEmpty()&&!d.getImmediateChild(l.getFront()).isEmpty())?d.getChild(l):null},v.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},v.prototype.addEventRegistration=function(l){this.eventRegistrations_.push(l)},v.prototype.removeEventRegistration=function(l,d){var _=[];if(d){J.assert(null==l,"A cancel should cancel all event registrations.");var N=this.query_.path;this.eventRegistrations_.forEach(function(Ee){var be=Ee.createCancelEvent(d=d,N);be&&_.push(be)})}if(l){for(var F=[],Z=0;Z<this.eventRegistrations_.length;++Z){var ce=this.eventRegistrations_[Z];if(ce.matches(l)){if(l.hasAnyCallback()){F=F.concat(this.eventRegistrations_.slice(Z+1));break}}else F.push(ce)}this.eventRegistrations_=F}else this.eventRegistrations_=[];return _},v.prototype.applyOperation=function(l,d,_){l.type===Cr.MERGE&&null!==l.source.queryId&&(J.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),J.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var N=this.viewCache_,F=this.processor_.applyOperation(N,l,d,_);return this.processor_.assertIndexed(F.viewCache),J.assert(F.viewCache.getServerCache().isFullyInitialized()||!N.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=F.viewCache,this.generateEventsForChanges_(F.changes,F.viewCache.getEventCache().getNode(),null)},v.prototype.getInitialEvents=function(l){var d=this.viewCache_.getEventCache(),_=[];return d.getNode().isLeafNode()||d.getNode().forEachChild(Ce,function(F,Z){_.push(rr.childAddedChange(F,Z))}),d.isFullyInitialized()&&_.push(rr.valueChange(d.getNode())),this.generateEventsForChanges_(_,d.getNode(),l)},v.prototype.generateEventsForChanges_=function(l,d,_){return this.eventGenerator_.generateEventsForChanges(l,d,_?[_]:this.eventRegistrations_)},v}(),Zo=function(){function v(){this.views=new Map}return Object.defineProperty(v,"__referenceConstructor",{get:function(){return J.assert(co,"Reference.ts has not been loaded"),co},set:function(l){J.assert(!co,"__referenceConstructor has already been defined"),co=l},enumerable:!1,configurable:!0}),v.prototype.isEmpty=function(){return 0===this.views.size},v.prototype.applyOperation=function(l,d,_){var N,F,Z=l.source.queryId;if(null!==Z){var ce=this.views.get(Z);return J.assert(null!=ce,"SyncTree gave us an op for an invalid query."),ce.applyOperation(l,d,_)}var Ee=[];try{for(var be=A.__values(this.views.values()),lt=be.next();!lt.done;lt=be.next())Ee=Ee.concat((ce=lt.value).applyOperation(l,d,_))}catch(Rt){N={error:Rt}}finally{try{lt&&!lt.done&&(F=be.return)&&F.call(be)}finally{if(N)throw N.error}}return Ee},v.prototype.addEventRegistration=function(l,d,_,N,F){var Z=l.queryIdentifier(),ce=this.views.get(Z);if(!ce){var Ee=_.calcCompleteEventCache(F?N:null),be=!1;Ee?be=!0:N instanceof gn?(Ee=_.calcCompleteEventChildren(N),be=!1):(Ee=gn.EMPTY_NODE,be=!1);var lt=new oi(new eo(Ee,be,!1),new eo(N,F,!1));ce=new qo(l,lt),this.views.set(Z,ce)}return ce.addEventRegistration(d),ce.getInitialEvents(d)},v.prototype.removeEventRegistration=function(l,d,_){var N,F,Z=l.queryIdentifier(),ce=[],Ee=[],be=this.hasCompleteView();if("default"===Z)try{for(var lt=A.__values(this.views.entries()),Rt=lt.next();!Rt.done;Rt=lt.next()){var In,jt=A.__read(Rt.value,2),un=jt[0];Ee=Ee.concat((In=jt[1]).removeEventRegistration(d,_)),In.isEmpty()&&(this.views.delete(un),In.getQuery().getQueryParams().loadsAllData()||ce.push(In.getQuery()))}}catch(Dn){N={error:Dn}}finally{try{Rt&&!Rt.done&&(F=lt.return)&&F.call(lt)}finally{if(N)throw N.error}}else(In=this.views.get(Z))&&(Ee=Ee.concat(In.removeEventRegistration(d,_)),In.isEmpty()&&(this.views.delete(Z),In.getQuery().getQueryParams().loadsAllData()||ce.push(In.getQuery())));return be&&!this.hasCompleteView()&&ce.push(new v.__referenceConstructor(l.repo,l.path)),{removed:ce,events:Ee}},v.prototype.getQueryViews=function(){var l,d,_=[];try{for(var N=A.__values(this.views.values()),F=N.next();!F.done;F=N.next()){var Z=F.value;Z.getQuery().getQueryParams().loadsAllData()||_.push(Z)}}catch(ce){l={error:ce}}finally{try{F&&!F.done&&(d=N.return)&&d.call(N)}finally{if(l)throw l.error}}return _},v.prototype.getCompleteServerCache=function(l){var d,_,N=null;try{for(var F=A.__values(this.views.values()),Z=F.next();!Z.done;Z=F.next())N=N||Z.value.getCompleteServerCache(l)}catch(Ee){d={error:Ee}}finally{try{Z&&!Z.done&&(_=F.return)&&_.call(F)}finally{if(d)throw d.error}}return N},v.prototype.viewForQuery=function(l){if(l.getQueryParams().loadsAllData())return this.getCompleteView();var _=l.queryIdentifier();return this.views.get(_)},v.prototype.viewExistsForQuery=function(l){return null!=this.viewForQuery(l)},v.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},v.prototype.getCompleteView=function(){var l,d;try{for(var _=A.__values(this.views.values()),N=_.next();!N.done;N=_.next()){var F=N.value;if(F.getQuery().getQueryParams().loadsAllData())return F}}catch(Z){l={error:Z}}finally{try{N&&!N.done&&(d=_.return)&&d.call(_)}finally{if(l)throw l.error}}return null},v}(),Xi=function(){function v(l){this.writeTree_=l}return v.prototype.addWrite=function(l,d){if(l.isEmpty())return new v(new Xn(d));var _=this.writeTree_.findRootMostValueAndPath(l);if(null!=_){var N=_.path,F=_.value,Z=qe.relativePath(N,l);return F=F.updateChild(Z,d),new v(this.writeTree_.set(N,F))}var ce=new Xn(d);return new v(this.writeTree_.setTree(l,ce))},v.prototype.addWrites=function(l,d){var _=this;return ot(d,function(N,F){_=_.addWrite(l.child(N),F)}),_},v.prototype.removeWrite=function(l){return l.isEmpty()?v.Empty:new v(this.writeTree_.setTree(l,Xn.Empty))},v.prototype.hasCompleteWrite=function(l){return null!=this.getCompleteNode(l)},v.prototype.getCompleteNode=function(l){var d=this.writeTree_.findRootMostValueAndPath(l);return null!=d?this.writeTree_.get(d.path).getChild(qe.relativePath(d.path,l)):null},v.prototype.getCompleteChildren=function(){var l=[],d=this.writeTree_.value;return null!=d?d.isLeafNode()||d.forEachChild(Ce,function(_,N){l.push(new Re(_,N))}):this.writeTree_.children.inorderTraversal(function(_,N){null!=N.value&&l.push(new Re(_,N.value))}),l},v.prototype.childCompoundWrite=function(l){if(l.isEmpty())return this;var d=this.getCompleteNode(l);return new v(null!=d?new Xn(d):this.writeTree_.subtree(l))},v.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},v.prototype.apply=function(l){return Q(qe.Empty,this.writeTree_,l)},v.Empty=new v(new Xn(null)),v}();function Q(v,l,d){if(null!=l.value)return d.updateChild(v,l.value);var _=null;return l.children.inorderTraversal(function(N,F){".priority"===N?(J.assert(null!==F.value,"Priority writes must always be leaf nodes"),_=F.value):d=Q(v.child(N),F,d)}),!d.getChild(v).isEmpty()&&null!==_&&(d=d.updateChild(v.child(".priority"),_)),d}var G=function(){function v(){this.visibleWrites_=Xi.Empty,this.allWrites_=[],this.lastWriteId_=-1}return v.prototype.childWrites=function(l){return new he(l,this)},v.prototype.addOverwrite=function(l,d,_,N){J.assert(_>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===N&&(N=!0),this.allWrites_.push({path:l,snap:d,writeId:_,visible:N}),N&&(this.visibleWrites_=this.visibleWrites_.addWrite(l,d)),this.lastWriteId_=_},v.prototype.addMerge=function(l,d,_){J.assert(_>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:l,children:d,writeId:_,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(l,d),this.lastWriteId_=_},v.prototype.getWrite=function(l){for(var d=0;d<this.allWrites_.length;d++){var _=this.allWrites_[d];if(_.writeId===l)return _}return null},v.prototype.removeWrite=function(l){var d=this,_=this.allWrites_.findIndex(function(lt){return lt.writeId===l});J.assert(_>=0,"removeWrite called with nonexistent writeId.");var N=this.allWrites_[_];this.allWrites_.splice(_,1);for(var F=N.visible,Z=!1,ce=this.allWrites_.length-1;F&&ce>=0;){var Ee=this.allWrites_[ce];Ee.visible&&(ce>=_&&this.recordContainsPath_(Ee,N.path)?F=!1:N.path.contains(Ee.path)&&(Z=!0)),ce--}return!!F&&(Z?(this.resetTree_(),!0):(N.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(N.path):ot(N.children,function(lt){d.visibleWrites_=d.visibleWrites_.removeWrite(N.path.child(lt))}),!0))},v.prototype.getCompleteWriteData=function(l){return this.visibleWrites_.getCompleteNode(l)},v.prototype.calcCompleteEventCache=function(l,d,_,N){if(_||N){var Ee=this.visibleWrites_.childCompoundWrite(l);return!N&&Ee.isEmpty()?d:N||null!=d||Ee.hasCompleteWrite(qe.Empty)?v.layerTree_(this.allWrites_,function(jt){return(jt.visible||N)&&(!_||!~_.indexOf(jt.writeId))&&(jt.path.contains(l)||l.contains(jt.path))},l).apply(d||gn.EMPTY_NODE):null}var F=this.visibleWrites_.getCompleteNode(l);if(null!=F)return F;var Z=this.visibleWrites_.childCompoundWrite(l);return Z.isEmpty()?d:null!=d||Z.hasCompleteWrite(qe.Empty)?Z.apply(d||gn.EMPTY_NODE):null},v.prototype.calcCompleteEventChildren=function(l,d){var _=gn.EMPTY_NODE,N=this.visibleWrites_.getCompleteNode(l);if(N)return N.isLeafNode()||N.forEachChild(Ce,function(ce,Ee){_=_.updateImmediateChild(ce,Ee)}),_;if(d){var F=this.visibleWrites_.childCompoundWrite(l);return d.forEachChild(Ce,function(ce,Ee){var be=F.childCompoundWrite(new qe(ce)).apply(Ee);_=_.updateImmediateChild(ce,be)}),F.getCompleteChildren().forEach(function(ce){_=_.updateImmediateChild(ce.name,ce.node)}),_}return this.visibleWrites_.childCompoundWrite(l).getCompleteChildren().forEach(function(ce){_=_.updateImmediateChild(ce.name,ce.node)}),_},v.prototype.calcEventCacheAfterServerOverwrite=function(l,d,_,N){J.assert(_||N,"Either existingEventSnap or existingServerSnap must exist");var F=l.child(d);if(this.visibleWrites_.hasCompleteWrite(F))return null;var Z=this.visibleWrites_.childCompoundWrite(F);return Z.isEmpty()?N.getChild(d):Z.apply(N.getChild(d))},v.prototype.calcCompleteChild=function(l,d,_){var N=l.child(d),F=this.visibleWrites_.getCompleteNode(N);return null!=F?F:_.isCompleteForChild(d)?this.visibleWrites_.childCompoundWrite(N).apply(_.getNode().getImmediateChild(d)):null},v.prototype.shadowingWrite=function(l){return this.visibleWrites_.getCompleteNode(l)},v.prototype.calcIndexedSlice=function(l,d,_,N,F,Z){var ce,Ee=this.visibleWrites_.childCompoundWrite(l),be=Ee.getCompleteNode(qe.Empty);if(null!=be)ce=be;else{if(null==d)return[];ce=Ee.apply(d)}if((ce=ce.withIndex(Z)).isEmpty()||ce.isLeafNode())return[];for(var lt=[],Rt=Z.getCompare(),jt=F?ce.getReverseIteratorFrom(_,Z):ce.getIteratorFrom(_,Z),un=jt.getNext();un&&lt.length<N;)0!==Rt(un,_)&&lt.push(un),un=jt.getNext();return lt},v.prototype.recordContainsPath_=function(l,d){if(l.snap)return l.path.contains(d);for(var _ in l.children)if(l.children.hasOwnProperty(_)&&l.path.child(_).contains(d))return!0;return!1},v.prototype.resetTree_=function(){this.visibleWrites_=v.layerTree_(this.allWrites_,v.DefaultFilter_,qe.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},v.DefaultFilter_=function(l){return l.visible},v.layerTree_=function(l,d,_){for(var N=Xi.Empty,F=0;F<l.length;++F){var Z=l[F];if(d(Z)){var ce=Z.path,Ee=void 0;if(Z.snap)_.contains(ce)?(Ee=qe.relativePath(_,ce),N=N.addWrite(Ee,Z.snap)):ce.contains(_)&&(Ee=qe.relativePath(ce,_),N=N.addWrite(qe.Empty,Z.snap.getChild(Ee)));else{if(!Z.children)throw J.assertionError("WriteRecord should have .snap or .children");if(_.contains(ce))Ee=qe.relativePath(_,ce),N=N.addWrites(Ee,Z.children);else if(ce.contains(_))if((Ee=qe.relativePath(ce,_)).isEmpty())N=N.addWrites(qe.Empty,Z.children);else{var be=J.safeGet(Z.children,Ee.getFront());if(be){var lt=be.getChild(Ee.popFront());N=N.addWrite(qe.Empty,lt)}}}}}return N},v}(),he=function(){function v(l,d){this.treePath_=l,this.writeTree_=d}return v.prototype.calcCompleteEventCache=function(l,d,_){return this.writeTree_.calcCompleteEventCache(this.treePath_,l,d,_)},v.prototype.calcCompleteEventChildren=function(l){return this.writeTree_.calcCompleteEventChildren(this.treePath_,l)},v.prototype.calcEventCacheAfterServerOverwrite=function(l,d,_){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,l,d,_)},v.prototype.shadowingWrite=function(l){return this.writeTree_.shadowingWrite(this.treePath_.child(l))},v.prototype.calcIndexedSlice=function(l,d,_,N,F){return this.writeTree_.calcIndexedSlice(this.treePath_,l,d,_,N,F)},v.prototype.calcCompleteChild=function(l,d){return this.writeTree_.calcCompleteChild(this.treePath_,l,d)},v.prototype.child=function(l){return new v(this.treePath_.child(l),this.writeTree_)},v}(),Ae=function(){function v(l){this.listenProvider_=l,this.syncPointTree_=Xn.Empty,this.pendingWriteTree_=new G,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return v.prototype.applyUserOverwrite=function(l,d,_,N){return this.pendingWriteTree_.addOverwrite(l,d,_,N),N?this.applyOperationToSyncPoints_(new Gi(gi.User,l,d)):[]},v.prototype.applyUserMerge=function(l,d,_){this.pendingWriteTree_.addMerge(l,d,_);var N=Xn.fromObject(d);return this.applyOperationToSyncPoints_(new Do(gi.User,l,N))},v.prototype.ackUserWrite=function(l,d){void 0===d&&(d=!1);var _=this.pendingWriteTree_.getWrite(l);if(this.pendingWriteTree_.removeWrite(l)){var F=Xn.Empty;return null!=_.snap?F=F.set(qe.Empty,!0):ot(_.children,function(Z,ce){F=F.set(new qe(Z),ce)}),this.applyOperationToSyncPoints_(new Wo(_.path,F,d))}return[]},v.prototype.applyServerOverwrite=function(l,d){return this.applyOperationToSyncPoints_(new Gi(gi.Server,l,d))},v.prototype.applyServerMerge=function(l,d){var _=Xn.fromObject(d);return this.applyOperationToSyncPoints_(new Do(gi.Server,l,_))},v.prototype.applyListenComplete=function(l){return this.applyOperationToSyncPoints_(new Xo(gi.Server,l))},v.prototype.applyTaggedQueryOverwrite=function(l,d,_){var N=this.queryKeyForTag_(_);if(null!=N){var F=v.parseQueryKey_(N),Z=F.path,ce=F.queryId,Ee=qe.relativePath(Z,l),be=new Gi(gi.forServerTaggedQuery(ce),Ee,d);return this.applyTaggedOperation_(Z,be)}return[]},v.prototype.applyTaggedQueryMerge=function(l,d,_){var N=this.queryKeyForTag_(_);if(N){var F=v.parseQueryKey_(N),Z=F.path,ce=F.queryId,Ee=qe.relativePath(Z,l),be=Xn.fromObject(d),lt=new Do(gi.forServerTaggedQuery(ce),Ee,be);return this.applyTaggedOperation_(Z,lt)}return[]},v.prototype.applyTaggedListenComplete=function(l,d){var _=this.queryKeyForTag_(d);if(_){var N=v.parseQueryKey_(_),F=N.path,Z=N.queryId,ce=qe.relativePath(F,l),Ee=new Xo(gi.forServerTaggedQuery(Z),ce);return this.applyTaggedOperation_(F,Ee)}return[]},v.prototype.addEventRegistration=function(l,d){var _=l.path,N=null,F=!1;this.syncPointTree_.foreachOnPath(_,function(Dn,pr){var Mr=qe.relativePath(Dn,_);N=N||pr.getCompleteServerCache(Mr),F=F||pr.hasCompleteView()});var ce,Z=this.syncPointTree_.get(_);Z?(F=F||Z.hasCompleteView(),N=N||Z.getCompleteServerCache(qe.Empty)):(Z=new Zo,this.syncPointTree_=this.syncPointTree_.set(_,Z)),null!=N?ce=!0:(ce=!1,N=gn.EMPTY_NODE,this.syncPointTree_.subtree(_).foreachChild(function(Dn,pr){var Mr=pr.getCompleteServerCache(qe.Empty);Mr&&(N=N.updateImmediateChild(Dn,Mr))}));var be=Z.viewExistsForQuery(l);if(!be&&!l.getQueryParams().loadsAllData()){var lt=v.makeQueryKey_(l);J.assert(!this.queryToTagMap.has(lt),"View does not exist, but we have a tag");var Rt=v.getNextQueryTag_();this.queryToTagMap.set(lt,Rt),this.tagToQueryMap.set(Rt,lt)}var jt=this.pendingWriteTree_.childWrites(_),un=Z.addEventRegistration(l,d,jt,N,ce);if(!be&&!F){var In=Z.viewForQuery(l);un=un.concat(this.setupListener_(l,In))}return un},v.prototype.removeEventRegistration=function(l,d,_){var N=this,F=l.path,Z=this.syncPointTree_.get(F),ce=[];if(Z&&("default"===l.queryIdentifier()||Z.viewExistsForQuery(l))){var Ee=Z.removeEventRegistration(l,d,_);Z.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(F));var be=Ee.removed;ce=Ee.events;var lt=-1!==be.findIndex(function(io){return io.getQueryParams().loadsAllData()}),Rt=this.syncPointTree_.findOnPath(F,function(io,rs){return rs.hasCompleteView()});if(lt&&!Rt){var jt=this.syncPointTree_.subtree(F);if(!jt.isEmpty())for(var un=this.collectDistinctViewsForSubTree_(jt),In=0;In<un.length;++In){var Dn=un[In],pr=Dn.getQuery(),Mr=this.createListenerForView_(Dn);this.listenProvider_.startListening(v.queryForListening_(pr),this.tagForQuery_(pr),Mr.hashFn,Mr.onComplete)}}!Rt&&be.length>0&&!_&&(lt?this.listenProvider_.stopListening(v.queryForListening_(l),null):be.forEach(function(io){var rs=N.queryToTagMap.get(v.makeQueryKey_(io));N.listenProvider_.stopListening(v.queryForListening_(io),rs)})),this.removeTags_(be)}return ce},v.prototype.calcCompleteEventCache=function(l,d){var N=this.pendingWriteTree_,F=this.syncPointTree_.findOnPath(l,function(Z,ce){var Ee=qe.relativePath(Z,l),be=ce.getCompleteServerCache(Ee);if(be)return be});return N.calcCompleteEventCache(l,F,d,!0)},v.prototype.collectDistinctViewsForSubTree_=function(l){return l.fold(function(d,_,N){if(_&&_.hasCompleteView())return[_.getCompleteView()];var Z=[];return _&&(Z=_.getQueryViews()),ot(N,function(ce,Ee){Z=Z.concat(Ee)}),Z})},v.prototype.removeTags_=function(l){for(var d=0;d<l.length;++d){var _=l[d];if(!_.getQueryParams().loadsAllData()){var N=v.makeQueryKey_(_),F=this.queryToTagMap.get(N);this.queryToTagMap.delete(N),this.tagToQueryMap.delete(F)}}},v.queryForListening_=function(l){return l.getQueryParams().loadsAllData()&&!l.getQueryParams().isDefault()?l.getRef():l},v.prototype.setupListener_=function(l,d){var _=l.path,N=this.tagForQuery_(l),F=this.createListenerForView_(d),Z=this.listenProvider_.startListening(v.queryForListening_(l),N,F.hashFn,F.onComplete),ce=this.syncPointTree_.subtree(_);if(N)J.assert(!ce.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var Ee=ce.fold(function(Rt,jt,un){if(!Rt.isEmpty()&&jt&&jt.hasCompleteView())return[jt.getCompleteView().getQuery()];var In=[];return jt&&(In=In.concat(jt.getQueryViews().map(function(Dn){return Dn.getQuery()}))),ot(un,function(Dn,pr){In=In.concat(pr)}),In}),be=0;be<Ee.length;++be){var lt=Ee[be];this.listenProvider_.stopListening(v.queryForListening_(lt),this.tagForQuery_(lt))}return Z},v.prototype.createListenerForView_=function(l){var d=this,_=l.getQuery(),N=this.tagForQuery_(_);return{hashFn:function(){return(l.getServerCache()||gn.EMPTY_NODE).hash()},onComplete:function(F){if("ok"===F)return N?d.applyTaggedListenComplete(_.path,N):d.applyListenComplete(_.path);var Z=function(v,l){var d="Unknown Error";"too_big"===v?d="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===v?d="Client doesn't have permission to access the desired data.":"unavailable"===v&&(d="The service is unavailable");var _=new Error(v+" at "+l.path.toString()+": "+d);return _.code=v.toUpperCase(),_}(F,_);return d.removeEventRegistration(_,null,Z)}}},v.makeQueryKey_=function(l){return l.path.toString()+"$"+l.queryIdentifier()},v.parseQueryKey_=function(l){var d=l.indexOf("$");return J.assert(-1!==d&&d<l.length-1,"Bad queryKey."),{queryId:l.substr(d+1),path:new qe(l.substr(0,d))}},v.prototype.queryKeyForTag_=function(l){return this.tagToQueryMap.get(l)},v.prototype.tagForQuery_=function(l){var d=v.makeQueryKey_(l);return this.queryToTagMap.get(d)},v.getNextQueryTag_=function(){return v.nextQueryTag_++},v.prototype.applyTaggedOperation_=function(l,d){var _=this.syncPointTree_.get(l);J.assert(_,"Missing sync point for query tag that we're tracking");var N=this.pendingWriteTree_.childWrites(l);return _.applyOperation(d,N,null)},v.prototype.applyOperationToSyncPoints_=function(l){return this.applyOperationHelper_(l,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(qe.Empty))},v.prototype.applyOperationHelper_=function(l,d,_,N){if(l.path.isEmpty())return this.applyOperationDescendantsHelper_(l,d,_,N);var F=d.get(qe.Empty);null==_&&null!=F&&(_=F.getCompleteServerCache(qe.Empty));var Z=[],ce=l.path.getFront(),Ee=l.operationForChild(ce),be=d.children.get(ce);if(be&&Ee){var lt=_?_.getImmediateChild(ce):null,Rt=N.child(ce);Z=Z.concat(this.applyOperationHelper_(Ee,be,lt,Rt))}return F&&(Z=Z.concat(F.applyOperation(l,N,_))),Z},v.prototype.applyOperationDescendantsHelper_=function(l,d,_,N){var F=this,Z=d.get(qe.Empty);null==_&&null!=Z&&(_=Z.getCompleteServerCache(qe.Empty));var ce=[];return d.children.inorderTraversal(function(Ee,be){var lt=_?_.getImmediateChild(Ee):null,Rt=N.child(Ee),jt=l.operationForChild(Ee);jt&&(ce=ce.concat(F.applyOperationDescendantsHelper_(jt,be,lt,Rt)))}),Z&&(ce=ce.concat(Z.applyOperation(l,N,_))),ce},v.nextQueryTag_=1,v}(),He=function(){function v(){this.rootNode_=gn.EMPTY_NODE}return v.prototype.getNode=function(l){return this.rootNode_.getChild(l)},v.prototype.updateSnapshot=function(l,d){this.rootNode_=this.rootNode_.updateChild(l,d)},v}(),it=function(){function v(){this.counters_={}}return v.prototype.incrementCounter=function(l,d){void 0===d&&(d=1),J.contains(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=d},v.prototype.get=function(){return J.deepCopy(this.counters_)},v}(),Pt=function(){function v(){}return v.getCollection=function(l){var d=l.toString();return this.collections_[d]||(this.collections_[d]=new it),this.collections_[d]},v.getOrCreateReporter=function(l,d){var _=l.toString();return this.reporters_[_]||(this.reporters_[_]=d()),this.reporters_[_]},v.collections_={},v.reporters_={},v}(),qt=function(){function v(l){this.collection_=l,this.last_=null}return v.prototype.get=function(){var l=this.collection_.get(),d=A.__assign({},l);return this.last_&&ot(this.last_,function(_,N){d[_]=d[_]-N}),this.last_=l,d},v}(),q=function(){function v(l,d){this.server_=d,this.statsToReport_={},this.statsListener_=new qt(l);var _=1e4+2e4*Math.random();an(this.reportStats_.bind(this),Math.floor(_))}return v.prototype.includeStat=function(l){this.statsToReport_[l]=!0},v.prototype.reportStats_=function(){var l=this,d=this.statsListener_.get(),_={},N=!1;ot(d,function(F,Z){Z>0&&J.contains(l.statsToReport_,F)&&(_[F]=Z,N=!0)}),N&&this.server_.reportStats(_),an(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},v}(),te=function(){function v(){this.eventLists_=[],this.recursionDepth_=0}return v.prototype.queueEvents=function(l){for(var d=null,_=0;_<l.length;_++){var N=l[_],F=N.getPath();null!==d&&!F.equals(d.getPath())&&(this.eventLists_.push(d),d=null),null===d&&(d=new $(F)),d.add(N)}d&&this.eventLists_.push(d)},v.prototype.raiseEventsAtPath=function(l,d){this.queueEvents(d),this.raiseQueuedEventsMatchingPredicate_(function(_){return _.equals(l)})},v.prototype.raiseEventsForChangedPath=function(l,d){this.queueEvents(d),this.raiseQueuedEventsMatchingPredicate_(function(_){return _.contains(l)||l.contains(_)})},v.prototype.raiseQueuedEventsMatchingPredicate_=function(l){this.recursionDepth_++;for(var d=!0,_=0;_<this.eventLists_.length;_++){var N=this.eventLists_[_];N&&(l(N.getPath())?(this.eventLists_[_].raise(),this.eventLists_[_]=null):d=!1)}d&&(this.eventLists_=[]),this.recursionDepth_--},v}(),$=function(){function v(l){this.path_=l,this.events_=[]}return v.prototype.add=function(l){this.events_.push(l)},v.prototype.raise=function(){for(var l=0;l<this.events_.length;l++){var d=this.events_[l];if(null!==d){this.events_[l]=null;var _=d.getEventRunner();Pe&&rt("event: "+d.toString()),_t(_)}}},v.prototype.getPath=function(){return this.path_},v}(),fe=function(){function v(l){this.allowedEvents_=l,this.listeners_={},J.assert(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}return v.prototype.trigger=function(l){for(var d=[],_=1;_<arguments.length;_++)d[_-1]=arguments[_];if(Array.isArray(this.listeners_[l]))for(var N=A.__spread(this.listeners_[l]),F=0;F<N.length;F++)N[F].callback.apply(N[F].context,d)},v.prototype.on=function(l,d,_){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:d,context:_});var N=this.getInitialEvent(l);N&&d.apply(_,N)},v.prototype.off=function(l,d,_){this.validateEventType_(l);for(var N=this.listeners_[l]||[],F=0;F<N.length;F++)if(N[F].callback===d&&(!_||_===N[F].context))return void N.splice(F,1)},v.prototype.validateEventType_=function(l){J.assert(this.allowedEvents_.find(function(d){return d===l}),"Unknown event: "+l)},v}(),je=function(v){function l(){var _,N,d=v.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(N="visibilitychange",_="hidden"):void 0!==document.mozHidden?(N="mozvisibilitychange",_="mozHidden"):void 0!==document.msHidden?(N="msvisibilitychange",_="msHidden"):void 0!==document.webkitHidden&&(N="webkitvisibilitychange",_="webkitHidden")),d.visible_=!0,N&&document.addEventListener(N,function(){var F=!document[_];F!==d.visible_&&(d.visible_=F,d.trigger("visible",F))},!1),d}return A.__extends(l,v),l.getInstance=function(){return new l},l.prototype.getInitialEvent=function(d){return J.assert("visible"===d,"Unknown event type: "+d),[this.visible_]},l}(fe),Dt=function(v){function l(){var d=v.call(this,["online"])||this;return d.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!J.isMobileCordova()&&(window.addEventListener("online",function(){d.online_||(d.online_=!0,d.trigger("online",!0))},!1),window.addEventListener("offline",function(){d.online_&&(d.online_=!1,d.trigger("online",!1))},!1)),d}return A.__extends(l,v),l.getInstance=function(){return new l},l.prototype.getInitialEvent=function(d){return J.assert("online"===d,"Unknown event type: "+d),[this.online_]},l.prototype.currentlyOnline=function(){return this.online_},l}(fe),Xt=function(){function v(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return v.prototype.closeAfter=function(l,d){this.closeAfterResponse=l,this.onClose=d,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},v.prototype.handleResponse=function(l,d){var _=this;this.pendingResponses[l]=d;for(var N=function(){var ce=F.pendingResponses[F.currentResponseNum];delete F.pendingResponses[F.currentResponseNum];for(var Ee=function(lt){ce[lt]&&_t(function(){_.onMessage_(ce[lt])})},be=0;be<ce.length;++be)Ee(be);if(F.currentResponseNum===F.closeAfterResponse)return F.onClose&&(F.onClose(),F.onClose=null),"break";F.currentResponseNum++},F=this;this.pendingResponses[this.currentResponseNum]&&"break"!==N(););},v}(),Bi=function(){function v(l,d,_,N,F){this.connId=l,this.repoInfo=d,this.applicationId=_,this.transportSessionId=N,this.lastSessionId=F,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ut(l),this.stats_=Pt.getCollection(d),this.urlFn=function(Z){return d.connectionURL(ur,Z)}}return v.prototype.open=function(l,d){var _=this;this.curSegmentNum=0,this.onDisconnect_=d,this.myPacketOrderer=new Xt(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){_.log_("Timed out trying to connect."),_.onClosed_(),_.connectTimeoutTimer_=null},Math.floor(3e4)),function(v){if(J.isNodeSdk()||"complete"===document.readyState)v();else{var l=!1,d=function(){document.body?l||(l=!0,v()):setTimeout(d,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&d()}),window.attachEvent("onload",d))}}(function(){if(!_.isClosed_){_.scriptTagHolder=new Ls(function(){for(var Z=[],ce=0;ce<arguments.length;ce++)Z[ce]=arguments[ce];var Ee=A.__read(Z,5),be=Ee[0],lt=Ee[1],Rt=Ee[2];if(_.incrementIncomingBytes_(Z),_.scriptTagHolder)if(_.connectTimeoutTimer_&&(clearTimeout(_.connectTimeoutTimer_),_.connectTimeoutTimer_=null),_.everConnected_=!0,"start"===be)_.id=lt,_.password=Rt;else{if("close"!==be)throw new Error("Unrecognized command received: "+be);lt?(_.scriptTagHolder.sendNewPolls=!1,_.myPacketOrderer.closeAfter(lt,function(){_.onClosed_()})):_.onClosed_()}},function(){for(var Z=[],ce=0;ce<arguments.length;ce++)Z[ce]=arguments[ce];var Ee=A.__read(Z,2),be=Ee[0],lt=Ee[1];_.incrementIncomingBytes_(Z),_.myPacketOrderer.handleResponse(be,lt)},function(){_.onClosed_()},_.urlFn);var N={start:"t"};N.ser=Math.floor(1e8*Math.random()),_.scriptTagHolder.uniqueCallbackIdentifier&&(N.cb=_.scriptTagHolder.uniqueCallbackIdentifier),N.v="5",_.transportSessionId&&(N.s=_.transportSessionId),_.lastSessionId&&(N.ls=_.lastSessionId),_.applicationId&&(N.p=_.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(sn)&&(N.r="f");var F=_.urlFn(N);_.log_("Connecting via long-poll to "+F),_.scriptTagHolder.addTag(F,function(){})}})},v.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},v.forceAllow=function(){v.forceAllow_=!0},v.forceDisallow=function(){v.forceDisallow_=!0},v.isAvailable=function(){return!(J.isNodeSdk()||!v.forceAllow_&&(v.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},v.prototype.markConnectionHealthy=function(){},v.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},v.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},v.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},v.prototype.send=function(l){var d=J.stringify(l);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);for(var _=J.base64Encode(d),N=ve(_,1840),F=0;F<N.length;F++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,N.length,N[F]),this.curSegmentNum++},v.prototype.addDisconnectPingFrame=function(l,d){if(!J.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var _={dframe:"t"};_.id=l,_.pw=d,this.myDisconnFrame.src=this.urlFn(_),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},v.prototype.incrementIncomingBytes_=function(l){var d=J.stringify(l).length;this.bytesReceived+=d,this.stats_.incrementCounter("bytes_received",d)},v}(),Ls=function(){function v(l,d,_,N){if(this.onDisconnect=_,this.urlFn=N,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,J.isNodeSdk())this.commandCB=l,this.onMessageCB=d;else{this.uniqueCallbackIdentifier=ke(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=d,this.myIFrame=v.createIFrame_();var F="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(F='<script>document.domain="'+document.domain+'";<\/script>');var ce="<html><body>"+F+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(ce),this.myIFrame.doc.close()}catch(Ee){rt("frame writing exception"),Ee.stack&&rt(Ee.stack),rt(Ee)}}}return v.createIFrame_=function(){var l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||rt("No IE domain setting required")}catch(N){var _=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+_+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l},v.prototype.close=function(){var l=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==l.myIFrame&&(document.body.removeChild(l.myIFrame),l.myIFrame=null)},Math.floor(0)));var d=this.onDisconnect;d&&(this.onDisconnect=null,d())},v.prototype.startLongPoll=function(l,d){for(this.myID=l,this.myPW=d,this.alive=!0;this.newRequest_(););},v.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;for(var d=this.urlFn(l),_="",N=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+_.length<=1870;){var Z=this.pendingSegs.shift();_=_+"&seg"+N+"="+Z.seg+"&ts"+N+"="+Z.ts+"&d"+N+"="+Z.d,N++}return this.addLongPollTag_(d+=_,this.currentSerial),!0}return!1},v.prototype.enqueueSegment=function(l,d,_){this.pendingSegs.push({seg:l,ts:d,d:_}),this.alive&&this.newRequest_()},v.prototype.addLongPollTag_=function(l,d){var _=this;this.outstandingRequests.add(d);var N=function(){_.outstandingRequests.delete(d),_.newRequest_()},F=setTimeout(N,Math.floor(25e3));this.addTag(l,function(){clearTimeout(F),N()})},v.prototype.addTag=function(l,d){var _=this;J.isNodeSdk()?this.doNodeLongPoll(l,d):setTimeout(function(){try{if(!_.sendNewPolls)return;var N=_.myIFrame.doc.createElement("script");N.type="text/javascript",N.async=!0,N.src=l,N.onload=N.onreadystatechange=function(){var F=N.readyState;(!F||"loaded"===F||"complete"===F)&&(N.onload=N.onreadystatechange=null,N.parentNode&&N.parentNode.removeChild(N),d())},N.onerror=function(){rt("Long-poll script failed to load: "+l),_.sendNewPolls=!1,_.close()},_.myIFrame.doc.body.appendChild(N)}catch(F){}},Math.floor(1))},v}(),Xr="",no=null;"undefined"!=typeof MozWebSocket?no=MozWebSocket:"undefined"!=typeof WebSocket&&(no=WebSocket);var Di=function(){function v(l,d,_,N,F){this.connId=l,this.applicationId=_,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ut(this.connId),this.stats_=Pt.getCollection(d),this.connURL=v.connectionURL_(d,N,F),this.nodeAdmin=d.nodeAdmin}return v.connectionURL_=function(l,d,_){var N={v:"5"};return!J.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(sn)&&(N.r="f"),d&&(N.s=d),_&&(N.ls=_),l.connectionURL(zn,N)},v.prototype.open=function(l,d){var _=this;this.onDisconnect=d,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ie.set("previous_websocket_failure",!0);try{if(J.isNodeSdk()){var F={headers:{"User-Agent":"Firebase/5/"+Xr+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},Z=process.env,ce=0===this.connURL.indexOf("wss://")?Z.HTTPS_PROXY||Z.https_proxy:Z.HTTP_PROXY||Z.http_proxy;ce&&(F.proxy={origin:ce}),this.mySock=new no(this.connURL,[],F)}else this.mySock=new no(this.connURL,[],F={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(be){this.log_("Error instantiating WebSocket.");var Ee=be.message||be.data;return Ee&&this.log_(Ee),void this.onClosed_()}this.mySock.onopen=function(){_.log_("Websocket connected."),_.everConnected_=!0},this.mySock.onclose=function(){_.log_("Websocket connection was disconnected."),_.mySock=null,_.onClosed_()},this.mySock.onmessage=function(be){_.handleIncomingFrame(be)},this.mySock.onerror=function(be){_.log_("WebSocket error.  Closing connection.");var lt=be.message||be.data;lt&&_.log_(lt),_.onClosed_()}},v.prototype.start=function(){},v.forceDisallow=function(){v.forceDisallow_=!0},v.isAvailable=function(){var l=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var _=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);_&&_.length>1&&parseFloat(_[1])<4.4&&(l=!0)}return!l&&null!==no&&!v.forceDisallow_},v.previouslyFailed=function(){return Ie.isInMemoryStorage||!0===Ie.get("previous_websocket_failure")},v.prototype.markConnectionHealthy=function(){Ie.remove("previous_websocket_failure")},v.prototype.appendFrame_=function(l){if(this.frames.push(l),this.frames.length===this.totalFrames){var d=this.frames.join("");this.frames=null;var _=J.jsonEval(d);this.onMessage(_)}},v.prototype.handleNewFrameCount_=function(l){this.totalFrames=l,this.frames=[]},v.prototype.extractFrameCount_=function(l){if(J.assert(null===this.frames,"We already have a frame buffer"),l.length<=6){var d=Number(l);if(!isNaN(d))return this.handleNewFrameCount_(d),null}return this.handleNewFrameCount_(1),l},v.prototype.handleIncomingFrame=function(l){if(null!==this.mySock){var d=l.data;if(this.bytesReceived+=d.length,this.stats_.incrementCounter("bytes_received",d.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(d);else{var _=this.extractFrameCount_(d);null!==_&&this.appendFrame_(_)}}},v.prototype.send=function(l){this.resetKeepAlive();var d=J.stringify(l);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);var _=ve(d,16384);_.length>1&&this.sendString_(String(_.length));for(var N=0;N<_.length;N++)this.sendString_(_[N])},v.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},v.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},v.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},v.prototype.resetKeepAlive=function(){var l=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){l.mySock&&l.sendString_("0"),l.resetKeepAlive()},Math.floor(45e3))},v.prototype.sendString_=function(l){try{this.mySock.send(l)}catch(d){this.log_("Exception thrown from WebSocket.send():",d.message||d.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},v.responsesRequiredToBeHealthy=2,v.healthyTimeout=3e4,v}(),Ro=function(){function v(l){this.initTransports_(l)}return Object.defineProperty(v,"ALL_TRANSPORTS",{get:function(){return[Bi,Di]},enumerable:!1,configurable:!0}),v.prototype.initTransports_=function(l){var d,_,N=Di&&Di.isAvailable(),F=N&&!Di.previouslyFailed();if(l.webSocketOnly&&(N||Ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),F=!0),F)this.transports_=[Di];else{var Z=this.transports_=[];try{for(var ce=A.__values(v.ALL_TRANSPORTS),Ee=ce.next();!Ee.done;Ee=ce.next()){var be=Ee.value;be&&be.isAvailable()&&Z.push(be)}}catch(lt){d={error:lt}}finally{try{Ee&&!Ee.done&&(_=ce.return)&&_.call(ce)}finally{if(d)throw d.error}}}},v.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},v.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},v}(),$o=function(){function v(l,d,_,N,F,Z,ce,Ee){this.id=l,this.repoInfo_=d,this.applicationId_=_,this.onMessage_=N,this.onReady_=F,this.onDisconnect_=Z,this.onKill_=ce,this.lastSessionId=Ee,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ut("c:"+this.id+":"),this.transportManager_=new Ro(d),this.log_("Connection created"),this.start_()}return v.prototype.start_=function(){var l=this,d=this.transportManager_.initialTransport();this.conn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;var _=this.connReceiver_(this.conn_),N=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){l.conn_&&l.conn_.open(_,N)},Math.floor(0));var F=d.healthyTimeout||0;F>0&&(this.healthyTimeout_=an(function(){l.healthyTimeout_=null,l.isHealthy_||(l.conn_&&l.conn_.bytesReceived>102400?(l.log_("Connection exceeded healthy timeout but has received "+l.conn_.bytesReceived+" bytes.  Marking connection healthy."),l.isHealthy_=!0,l.conn_.markConnectionHealthy()):l.conn_&&l.conn_.bytesSent>10240?l.log_("Connection exceeded healthy timeout but has sent "+l.conn_.bytesSent+" bytes.  Leaving connection alive."):(l.log_("Closing unhealthy connection after timeout."),l.close()))},Math.floor(F)))},v.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},v.prototype.disconnReceiver_=function(l){var d=this;return function(_){l===d.conn_?d.onConnectionLost_(_):l===d.secondaryConn_?(d.log_("Secondary connection lost."),d.onSecondaryConnectionLost_()):d.log_("closing an old connection")}},v.prototype.connReceiver_=function(l){var d=this;return function(_){2!==d.state_&&(l===d.rx_?d.onPrimaryMessageReceived_(_):l===d.secondaryConn_?d.onSecondaryMessageReceived_(_):d.log_("message on old connection"))}},v.prototype.sendRequest=function(l){this.sendData_({t:"d",d:l})},v.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},v.prototype.onSecondaryControl_=function(l){if("t"in l){var d=l.t;"a"===d?this.upgradeIfSecondaryHealthy_():"r"===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===d&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},v.prototype.onSecondaryMessageReceived_=function(l){var d=ue("t",l),_=ue("d",l);if("c"===d)this.onSecondaryControl_(_);else{if("d"!==d)throw new Error("Unknown protocol layer: "+d);this.pendingDataMessages.push(_)}},v.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},v.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},v.prototype.onPrimaryMessageReceived_=function(l){var d=ue("t",l),_=ue("d",l);"c"===d?this.onControl_(_):"d"===d&&this.onDataMessage_(_)},v.prototype.onDataMessage_=function(l){this.onPrimaryResponse_(),this.onMessage_(l)},v.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},v.prototype.onControl_=function(l){var d=ue("t",l);if("d"in l){var _=l.d;if("h"===d)this.onHandshake_(_);else if("n"===d){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var N=0;N<this.pendingDataMessages.length;++N)this.onDataMessage_(this.pendingDataMessages[N]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===d?this.onConnectionShutdown_(_):"r"===d?this.onReset_(_):"e"===d?Nt("Server Error: "+_):"o"===d?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Nt("Unknown control packet command: "+d)}},v.prototype.onHandshake_=function(l){var d=l.ts,_=l.v,N=l.h;this.sessionId=l.s,this.repoInfo_.updateHost(N),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,d),"5"!==_&&Ot("Protocol version mismatch detected"),this.tryStartUpgrade_())},v.prototype.tryStartUpgrade_=function(){var l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)},v.prototype.startUpgrade_=function(l){var d=this;this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;var _=this.connReceiver_(this.secondaryConn_),N=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(_,N),an(function(){d.secondaryConn_&&(d.log_("Timed out trying to upgrade."),d.secondaryConn_.close())},Math.floor(6e4))},v.prototype.onReset_=function(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.updateHost(l),1===this.state_?this.close():(this.closeConnections_(),this.start_())},v.prototype.onConnectionEstablished_=function(l,d){var _=this;this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(d,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):an(function(){_.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},v.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},v.prototype.onSecondaryConnectionLost_=function(){var l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()},v.prototype.onConnectionLost_=function(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ie.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},v.prototype.onConnectionShutdown_=function(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()},v.prototype.sendData_=function(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)},v.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},v.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},v}(),Ai=function(){function v(){}return v.prototype.put=function(l,d,_,N){},v.prototype.merge=function(l,d,_,N){},v.prototype.refreshAuthToken=function(l){},v.prototype.onDisconnectPut=function(l,d,_){},v.prototype.onDisconnectMerge=function(l,d,_){},v.prototype.onDisconnectCancel=function(l,d){},v.prototype.reportStats=function(l){},v}(),ki=1e3,Kr=function(v){function l(d,_,N,F,Z,ce,Ee){var be=v.call(this)||this;if(be.repoInfo_=d,be.applicationId_=_,be.onDataUpdate_=N,be.onConnectStatus_=F,be.onServerInfoUpdate_=Z,be.authTokenProvider_=ce,be.authOverride_=Ee,be.id=l.nextPersistentConnectionId_++,be.log_=Ut("p:"+be.id+":"),be.interruptReasons_={},be.listens=new Map,be.outstandingPuts_=[],be.outstandingPutCount_=0,be.onDisconnectRequestQueue_=[],be.connected_=!1,be.reconnectDelay_=ki,be.maxReconnectDelay_=3e5,be.securityDebugCallback_=null,be.lastSessionId=null,be.establishConnectionTimer_=null,be.visible_=!1,be.requestCBHash_={},be.requestNumber_=0,be.realtime_=null,be.authToken_=null,be.forceTokenRefresh_=!1,be.invalidAuthTokenCount_=0,be.firstConnection_=!0,be.lastConnectionAttemptTime_=null,be.lastConnectionEstablishedTime_=null,Ee&&!J.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return be.scheduleConnect_(0),je.getInstance().on("visible",be.onVisible_,be),-1===d.host.indexOf("fblocal")&&Dt.getInstance().on("online",be.onOnline_,be),be}return A.__extends(l,v),l.prototype.sendRequest=function(d,_,N){var F=++this.requestNumber_,Z={r:F,a:d,b:_};this.log_(J.stringify(Z)),J.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(Z),N&&(this.requestCBHash_[F]=N)},l.prototype.listen=function(d,_,N,F){var Z=d.queryIdentifier(),ce=d.path.toString();this.log_("Listen called for "+ce+" "+Z),this.listens.has(ce)||this.listens.set(ce,new Map),J.assert(d.getQueryParams().isDefault()||!d.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),J.assert(!this.listens.get(ce).has(Z),"listen() called twice for same path/queryId.");var Ee={onComplete:F,hashFn:_,query:d,tag:N};this.listens.get(ce).set(Z,Ee),this.connected_&&this.sendListen_(Ee)},l.prototype.sendListen_=function(d){var _=this,N=d.query,F=N.path.toString(),Z=N.queryIdentifier();this.log_("Listen on "+F+" for "+Z);var ce={p:F};d.tag&&(ce.q=N.queryObject(),ce.t=d.tag),ce.h=d.hashFn(),this.sendRequest("q",ce,function(be){var lt=be.d,Rt=be.s;l.warnOnListenWarnings_(lt,N),(_.listens.get(F)&&_.listens.get(F).get(Z))===d&&(_.log_("listen response",be),"ok"!==Rt&&_.removeListen_(F,Z),d.onComplete&&d.onComplete(Rt,lt))})},l.warnOnListenWarnings_=function(d,_){if(d&&"object"==typeof d&&J.contains(d,"w")){var N=J.safeGet(d,"w");if(Array.isArray(N)&&~N.indexOf("no_index")){var F='".indexOn": "'+_.getQueryParams().getIndex().toString()+'"',Z=_.path.toString();Ot("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+F+" at "+Z+" to your security rules for better performance.")}}},l.prototype.refreshAuthToken=function(d){this.authToken_=d,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(d)},l.prototype.reduceReconnectDelayIfAdminCredential_=function(d){(d&&40===d.length||J.isAdmin(d))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},l.prototype.tryAuth=function(){var d=this;if(this.connected_&&this.authToken_){var _=this.authToken_,N=J.isValidFormat(_)?"auth":"gauth",F={cred:_};null===this.authOverride_?F.noauth=!0:"object"==typeof this.authOverride_&&(F.authvar=this.authOverride_),this.sendRequest(N,F,function(Z){var ce=Z.s,Ee=Z.d||"error";d.authToken_===_&&("ok"===ce?d.invalidAuthTokenCount_=0:d.onAuthRevoked_(ce,Ee))})}},l.prototype.unlisten=function(d,_){var N=d.path.toString(),F=d.queryIdentifier();this.log_("Unlisten called for "+N+" "+F),J.assert(d.getQueryParams().isDefault()||!d.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(N,F)&&this.connected_&&this.sendUnlisten_(N,F,d.queryObject(),_)},l.prototype.sendUnlisten_=function(d,_,N,F){this.log_("Unlisten on "+d+" for "+_);var Z={p:d};F&&(Z.q=N,Z.t=F),this.sendRequest("n",Z)},l.prototype.onDisconnectPut=function(d,_,N){this.connected_?this.sendOnDisconnect_("o",d,_,N):this.onDisconnectRequestQueue_.push({pathString:d,action:"o",data:_,onComplete:N})},l.prototype.onDisconnectMerge=function(d,_,N){this.connected_?this.sendOnDisconnect_("om",d,_,N):this.onDisconnectRequestQueue_.push({pathString:d,action:"om",data:_,onComplete:N})},l.prototype.onDisconnectCancel=function(d,_){this.connected_?this.sendOnDisconnect_("oc",d,null,_):this.onDisconnectRequestQueue_.push({pathString:d,action:"oc",data:null,onComplete:_})},l.prototype.sendOnDisconnect_=function(d,_,N,F){var Z={p:_,d:N};this.log_("onDisconnect "+d,Z),this.sendRequest(d,Z,function(ce){F&&setTimeout(function(){F(ce.s,ce.d)},Math.floor(0))})},l.prototype.put=function(d,_,N,F){this.putInternal("p",d,_,N,F)},l.prototype.merge=function(d,_,N,F){this.putInternal("m",d,_,N,F)},l.prototype.putInternal=function(d,_,N,F,Z){var ce={p:_,d:N};void 0!==Z&&(ce.h=Z),this.outstandingPuts_.push({action:d,request:ce,onComplete:F}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+_)},l.prototype.sendPut_=function(d){var _=this,N=this.outstandingPuts_[d].action,F=this.outstandingPuts_[d].request,Z=this.outstandingPuts_[d].onComplete;this.outstandingPuts_[d].queued=this.connected_,this.sendRequest(N,F,function(ce){_.log_(N+" response",ce),delete _.outstandingPuts_[d],_.outstandingPutCount_--,0===_.outstandingPutCount_&&(_.outstandingPuts_=[]),Z&&Z(ce.s,ce.d)})},l.prototype.reportStats=function(d){var _=this;if(this.connected_){var N={c:d};this.log_("reportStats",N),this.sendRequest("s",N,function(F){"ok"!==F.s&&_.log_("reportStats","Error sending stats: "+F.d)})}},l.prototype.onDataMessage_=function(d){if("r"in d){this.log_("from server: "+J.stringify(d));var _=d.r,N=this.requestCBHash_[_];N&&(delete this.requestCBHash_[_],N(d.b))}else{if("error"in d)throw"A server-side error has occurred: "+d.error;"a"in d&&this.onDataPush_(d.a,d.b)}},l.prototype.onDataPush_=function(d,_){this.log_("handleServerMessage",d,_),"d"===d?this.onDataUpdate_(_.p,_.d,!1,_.t):"m"===d?this.onDataUpdate_(_.p,_.d,!0,_.t):"c"===d?this.onListenRevoked_(_.p,_.q):"ac"===d?this.onAuthRevoked_(_.s,_.d):"sd"===d?this.onSecurityDebugPacket_(_):Nt("Unrecognized action received from server: "+J.stringify(d)+"\nAre you using the latest client?")},l.prototype.onReady_=function(d,_){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(d),this.lastSessionId=_,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},l.prototype.scheduleConnect_=function(d){var _=this;J.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){_.establishConnectionTimer_=null,_.establishConnection_()},Math.floor(d))},l.prototype.onVisible_=function(d){d&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ki,this.realtime_||this.scheduleConnect_(0)),this.visible_=d},l.prototype.onOnline_=function(d){d?(this.log_("Browser went online."),this.reconnectDelay_=ki,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},l.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ki),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var _=(new Date).getTime()-this.lastConnectionAttemptTime_,N=Math.max(0,this.reconnectDelay_-_);N=Math.random()*N,this.log_("Trying to reconnect in "+N+"ms"),this.scheduleConnect_(N),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},l.prototype.establishConnection_=function(){var d=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var _=this.onDataMessage_.bind(this),N=this.onReady_.bind(this),F=this.onRealtimeDisconnect_.bind(this),Z=this.id+":"+l.nextConnectionId_++,ce=this,Ee=this.lastSessionId,be=!1,lt=null,Rt=function(){lt?lt.close():(be=!0,F())};this.realtime_={close:Rt,sendRequest:function(In){J.assert(lt,"sendRequest call when we're not connected not allowed."),lt.sendRequest(In)}};var un=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(un).then(function(In){be?rt("getToken() completed but was canceled"):(rt("getToken() completed. Creating connection."),ce.authToken_=In&&In.accessToken,lt=new $o(Z,ce.repoInfo_,ce.applicationId_,_,N,F,function(Dn){Ot(Dn+" ("+ce.repoInfo_.toString()+")"),ce.interrupt("server_kill")},Ee))}).then(null,function(In){ce.log_("Failed to get token: "+In),be||(d.repoInfo_.nodeAdmin&&Ot(In),Rt())})}},l.prototype.interrupt=function(d){rt("Interrupting connection for reason: "+d),this.interruptReasons_[d]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},l.prototype.resume=function(d){rt("Resuming connection for reason: "+d),delete this.interruptReasons_[d],J.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=ki,this.realtime_||this.scheduleConnect_(0))},l.prototype.handleTimestamp_=function(d){var _=d-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:_})},l.prototype.cancelSentTransactions_=function(){for(var d=0;d<this.outstandingPuts_.length;d++){var _=this.outstandingPuts_[d];_&&"h"in _.request&&_.queued&&(_.onComplete&&_.onComplete("disconnect"),delete this.outstandingPuts_[d],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},l.prototype.onListenRevoked_=function(d,_){var N;N=_?_.map(function(Z){return Gt(Z)}).join("$"):"default";var F=this.removeListen_(d,N);F&&F.onComplete&&F.onComplete("permission_denied")},l.prototype.removeListen_=function(d,_){var F,N=new qe(d).toString();if(this.listens.has(N)){var Z=this.listens.get(N);F=Z.get(_),Z.delete(_),0===Z.size&&this.listens.delete(N)}else F=void 0;return F},l.prototype.onAuthRevoked_=function(d,_){rt("Auth token revoked: "+d+"/"+_),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===d||"permission_denied"===d)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},l.prototype.onSecurityDebugPacket_=function(d){this.securityDebugCallback_?this.securityDebugCallback_(d):"msg"in d&&console.log("FIREBASE: "+d.msg.replace("\n","\nFIREBASE: "))},l.prototype.restoreState_=function(){var d,_,N,F;this.tryAuth();try{for(var Z=A.__values(this.listens.values()),ce=Z.next();!ce.done;ce=Z.next()){var Ee=ce.value;try{for(var be=(N=void 0,A.__values(Ee.values())),lt=be.next();!lt.done;lt=be.next())this.sendListen_(lt.value)}catch(In){N={error:In}}finally{try{lt&&!lt.done&&(F=be.return)&&F.call(be)}finally{if(N)throw N.error}}}}catch(In){d={error:In}}finally{try{ce&&!ce.done&&(_=Z.return)&&_.call(Z)}finally{if(d)throw d.error}}for(var jt=0;jt<this.outstandingPuts_.length;jt++)this.outstandingPuts_[jt]&&this.sendPut_(jt);for(;this.onDisconnectRequestQueue_.length;){var un=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(un.action,un.pathString,un.data,un.onComplete)}},l.prototype.sendConnectStats_=function(){var d={},_="js";J.isNodeSdk()&&(_=this.repoInfo_.nodeAdmin?"admin_node":"node"),d["sdk."+_+"."+Xr.replace(/\./g,"-")]=1,J.isMobileCordova()?d["framework.cordova"]=1:J.isReactNative()&&(d["framework.reactnative"]=1),this.reportStats(d)},l.prototype.shouldReconnect_=function(){var d=Dt.getInstance().currentlyOnline();return J.isEmpty(this.interruptReasons_)&&d},l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l}(Ai),js=function(v){function l(d,_,N){var F=v.call(this)||this;return F.repoInfo_=d,F.onDataUpdate_=_,F.authTokenProvider_=N,F.log_=Ut("p:rest:"),F.listens_={},F}return A.__extends(l,v),l.prototype.reportStats=function(d){throw new Error("Method not implemented.")},l.getListenId_=function(d,_){return void 0!==_?"tag$"+_:(J.assert(d.getQueryParams().isDefault(),"should have a tag if it's not a default query."),d.path.toString())},l.prototype.listen=function(d,_,N,F){var Z=this,ce=d.path.toString();this.log_("Listen called for "+ce+" "+d.queryIdentifier());var Ee=l.getListenId_(d,N),be={};this.listens_[Ee]=be;var lt=d.getQueryParams().toRestQueryStringParameters();this.restRequest_(ce+".json",lt,function(Rt,jt){var un=jt;404===Rt&&(un=null,Rt=null),null===Rt&&Z.onDataUpdate_(ce,un,!1,N),J.safeGet(Z.listens_,Ee)===be&&F(Rt?401===Rt?"permission_denied":"rest_error:"+Rt:"ok",null)})},l.prototype.unlisten=function(d,_){var N=l.getListenId_(d,_);delete this.listens_[N]},l.prototype.refreshAuthToken=function(d){},l.prototype.restRequest_=function(d,_,N){var F=this;void 0===_&&(_={}),_.format="export",this.authTokenProvider_.getToken(!1).then(function(Z){var ce=Z&&Z.accessToken;ce&&(_.auth=ce);var Ee=(F.repoInfo_.secure?"https://":"http://")+F.repoInfo_.host+d+"?ns="+F.repoInfo_.namespace+J.querystring(_);F.log_("Sending REST request for "+Ee);var be=new XMLHttpRequest;be.onreadystatechange=function(){if(N&&4===be.readyState){F.log_("REST Response for "+Ee+" received. status:",be.status,"response:",be.responseText);var lt=null;if(be.status>=200&&be.status<300){try{lt=J.jsonEval(be.responseText)}catch(Rt){Ot("Failed to parse JSON response for "+Ee+": "+be.responseText)}N(null,lt)}else 401!==be.status&&404!==be.status&&Ot("Got unsuccessful REST response for "+Ee+" Status: "+be.status),N(be.status);N=null}},be.open("GET",Ee,!0),be.send()})},l}(Ai),dn="repo_interrupt",Hr=function(){function v(l,d,_,N){var F=this;if(this.repoInfo_=l,this.app=_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new te,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Qi,this.persistentConnection_=null,this.stats_=Pt.getCollection(l),d||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new js(this.repoInfo_,this.onDataUpdate_.bind(this),N),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var Z=_.options.databaseAuthVariableOverride;if(null!=Z){if("object"!=typeof Z)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{J.stringify(Z)}catch(ce){throw new Error("Invalid authOverride provided: "+ce)}}this.persistentConnection_=new Kr(this.repoInfo_,_.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),N,Z),this.server_=this.persistentConnection_}N.addTokenChangeListener(function(ce){F.server_.refreshAuthToken(ce)}),this.statsReporter_=Pt.getOrCreateReporter(l,function(){return new q(F.stats_,F.server_)}),this.transactionsInit_(),this.infoData_=new He,this.infoSyncTree_=new Ae({startListening:function(ce,Ee,be,lt){var Rt=[],jt=F.infoData_.getNode(ce.path);return jt.isEmpty()||(Rt=F.infoSyncTree_.applyServerOverwrite(ce.path,jt),setTimeout(function(){lt("ok")},0)),Rt},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ae({startListening:function(ce,Ee,be,lt){return F.server_.listen(ce,be,Ee,function(Rt,jt){var un=lt(Rt,jt);F.eventQueue_.raiseEventsForChangedPath(ce.path,un)}),[]},stopListening:function(ce,Ee){F.server_.unlisten(ce,Ee)}})}return v.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},v.prototype.name=function(){return this.repoInfo_.namespace},v.prototype.serverTime=function(){var d=this.infoData_.getNode(new qe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+d},v.prototype.generateServerValues=function(){return function(v){return(v=v||{}).timestamp=v.timestamp||(new Date).getTime(),v}({timestamp:this.serverTime()})},v.prototype.onDataUpdate_=function(l,d,_,N){this.dataUpdateCount++;var F=new qe(l);d=this.interceptServerDataCallback_?this.interceptServerDataCallback_(l,d):d;var Z=[];if(N)if(_){var ce=J.map(d,function(jt){return qn(jt)});Z=this.serverSyncTree_.applyTaggedQueryMerge(F,ce,N)}else{var Ee=qn(d);Z=this.serverSyncTree_.applyTaggedQueryOverwrite(F,Ee,N)}else if(_){var be=J.map(d,function(jt){return qn(jt)});Z=this.serverSyncTree_.applyServerMerge(F,be)}else{var lt=qn(d);Z=this.serverSyncTree_.applyServerOverwrite(F,lt)}var Rt=F;Z.length>0&&(Rt=this.rerunTransactions_(F)),this.eventQueue_.raiseEventsForChangedPath(Rt,Z)},v.prototype.interceptServerData_=function(l){this.interceptServerDataCallback_=l},v.prototype.onConnectStatus_=function(l){this.updateInfo_("connected",l),!1===l&&this.runOnDisconnectEvents_()},v.prototype.onServerInfoUpdate_=function(l){var d=this;ot(l,function(_,N){d.updateInfo_(_,N)})},v.prototype.updateInfo_=function(l,d){var _=new qe("/.info/"+l),N=qn(d);this.infoData_.updateSnapshot(_,N);var F=this.infoSyncTree_.applyServerOverwrite(_,N);this.eventQueue_.raiseEventsForChangedPath(_,F)},v.prototype.getNextWriteId_=function(){return this.nextWriteId_++},v.prototype.setWithPriority=function(l,d,_,N){var F=this;this.log_("set",{path:l.toString(),value:d,priority:_});var Z=this.generateServerValues(),ce=qn(d,_),Ee=this.serverSyncTree_.calcCompleteEventCache(l),be=Un(ce,Ee,Z),lt=this.getNextWriteId_(),Rt=this.serverSyncTree_.applyUserOverwrite(l,be,lt,!0);this.eventQueue_.queueEvents(Rt),this.server_.put(l.toString(),ce.val(!0),function(un,In){var Dn="ok"===un;Dn||Ot("set at "+l+" failed: "+un);var pr=F.serverSyncTree_.ackUserWrite(lt,!Dn);F.eventQueue_.raiseEventsForChangedPath(l,pr),F.callOnCompleteCallback(N,un,In)});var jt=this.abortTransactions_(l);this.rerunTransactions_(jt),this.eventQueue_.raiseEventsForChangedPath(jt,[])},v.prototype.update=function(l,d,_){var N=this;this.log_("update",{path:l.toString(),value:d});var F=!0,Z=this.generateServerValues(),ce={};if(ot(d,function(lt,Rt){F=!1,ce[lt]=Zn(l.child(lt),qn(Rt),N.serverSyncTree_,Z)}),F)rt("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(_,"ok");else{var Ee=this.getNextWriteId_(),be=this.serverSyncTree_.applyUserMerge(l,ce,Ee);this.eventQueue_.queueEvents(be),this.server_.merge(l.toString(),d,function(lt,Rt){var jt="ok"===lt;jt||Ot("update at "+l+" failed: "+lt);var un=N.serverSyncTree_.ackUserWrite(Ee,!jt),In=un.length>0?N.rerunTransactions_(l):l;N.eventQueue_.raiseEventsForChangedPath(In,un),N.callOnCompleteCallback(_,lt,Rt)}),ot(d,function(lt){var Rt=N.abortTransactions_(l.child(lt));N.rerunTransactions_(Rt)}),this.eventQueue_.raiseEventsForChangedPath(l,[])}},v.prototype.runOnDisconnectEvents_=function(){var l=this;this.log_("onDisconnectEvents");var d=this.generateServerValues(),_=new Qi;this.onDisconnect_.forEachTree(qe.Empty,function(F,Z){var ce=Zn(F,Z,l.serverSyncTree_,d);_.remember(F,ce)});var N=[];_.forEachTree(qe.Empty,function(F,Z){N=N.concat(l.serverSyncTree_.applyServerOverwrite(F,Z));var ce=l.abortTransactions_(F);l.rerunTransactions_(ce)}),this.onDisconnect_=new Qi,this.eventQueue_.raiseEventsForChangedPath(qe.Empty,N)},v.prototype.onDisconnectCancel=function(l,d){var _=this;this.server_.onDisconnectCancel(l.toString(),function(N,F){"ok"===N&&_.onDisconnect_.forget(l),_.callOnCompleteCallback(d,N,F)})},v.prototype.onDisconnectSet=function(l,d,_){var N=this,F=qn(d);this.server_.onDisconnectPut(l.toString(),F.val(!0),function(Z,ce){"ok"===Z&&N.onDisconnect_.remember(l,F),N.callOnCompleteCallback(_,Z,ce)})},v.prototype.onDisconnectSetWithPriority=function(l,d,_,N){var F=this,Z=qn(d,_);this.server_.onDisconnectPut(l.toString(),Z.val(!0),function(ce,Ee){"ok"===ce&&F.onDisconnect_.remember(l,Z),F.callOnCompleteCallback(N,ce,Ee)})},v.prototype.onDisconnectUpdate=function(l,d,_){var N=this;if(J.isEmpty(d))return rt("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(_,"ok");this.server_.onDisconnectMerge(l.toString(),d,function(F,Z){"ok"===F&&ot(d,function(ce,Ee){var be=qn(Ee);N.onDisconnect_.remember(l.child(ce),be)}),N.callOnCompleteCallback(_,F,Z)})},v.prototype.addEventCallbackForQuery=function(l,d){var _;_=".info"===l.path.getFront()?this.infoSyncTree_.addEventRegistration(l,d):this.serverSyncTree_.addEventRegistration(l,d),this.eventQueue_.raiseEventsAtPath(l.path,_)},v.prototype.removeEventCallbackForQuery=function(l,d){var _;_=".info"===l.path.getFront()?this.infoSyncTree_.removeEventRegistration(l,d):this.serverSyncTree_.removeEventRegistration(l,d),this.eventQueue_.raiseEventsAtPath(l.path,_)},v.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(dn)},v.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(dn)},v.prototype.stats=function(l){if(void 0===l&&(l=!1),"undefined"!=typeof console){var d;l?(this.statsListener_||(this.statsListener_=new qt(this.stats_)),d=this.statsListener_.get()):d=this.stats_.get();var _=Object.keys(d).reduce(function(N,F){return Math.max(F.length,N)},0);ot(d,function(N,F){for(var Z=N,ce=N.length;ce<_+2;ce++)Z+=" ";console.log(Z+F)})}},v.prototype.statsIncrementCounter=function(l){this.stats_.incrementCounter(l),this.statsReporter_.includeStat(l)},v.prototype.log_=function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var _="";this.persistentConnection_&&(_=this.persistentConnection_.id+":"),rt.apply(void 0,A.__spread([_],l))},v.prototype.callOnCompleteCallback=function(l,d,_){l&&_t(function(){if("ok"===d)l(null);else{var N=(d||"error").toUpperCase(),F=N;_&&(F+=": "+_);var Z=new Error(F);Z.code=N,l(Z)}})},Object.defineProperty(v.prototype,"database",{get:function(){return this.__database||(this.__database=new Et(this))},enumerable:!1,configurable:!0}),v}(),Zs=function(){function v(l){this.indexedFilter_=new Wi(l.getIndex()),this.index_=l.getIndex(),this.startPost_=v.getStartPost_(l),this.endPost_=v.getEndPost_(l)}return v.prototype.getStartPost=function(){return this.startPost_},v.prototype.getEndPost=function(){return this.endPost_},v.prototype.matches=function(l){return this.index_.compare(this.getStartPost(),l)<=0&&this.index_.compare(l,this.getEndPost())<=0},v.prototype.updateChild=function(l,d,_,N,F,Z){return this.matches(new Re(d,_))||(_=gn.EMPTY_NODE),this.indexedFilter_.updateChild(l,d,_,N,F,Z)},v.prototype.updateFullNode=function(l,d,_){d.isLeafNode()&&(d=gn.EMPTY_NODE);var N=d.withIndex(this.index_);N=N.updatePriority(gn.EMPTY_NODE);var F=this;return d.forEachChild(Ce,function(Z,ce){F.matches(new Re(Z,ce))||(N=N.updateImmediateChild(Z,gn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,N,_)},v.prototype.updatePriority=function(l,d){return l},v.prototype.filtersNodes=function(){return!0},v.prototype.getIndexedFilter=function(){return this.indexedFilter_},v.prototype.getIndex=function(){return this.index_},v.getStartPost_=function(l){if(l.hasStart()){var d=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),d)}return l.getIndex().minPost()},v.getEndPost_=function(l){if(l.hasEnd()){var d=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),d)}return l.getIndex().maxPost()},v}(),Js=function(){function v(l){this.rangedFilter_=new Zs(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft()}return v.prototype.updateChild=function(l,d,_,N,F,Z){return this.rangedFilter_.matches(new Re(d,_))||(_=gn.EMPTY_NODE),l.getImmediateChild(d).equals(_)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,d,_,N,F,Z):this.fullLimitUpdateChild_(l,d,_,F,Z)},v.prototype.updateFullNode=function(l,d,_){var N;if(d.isLeafNode()||d.isEmpty())N=gn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<d.numChildren()&&d.isIndexed(this.index_)){N=gn.EMPTY_NODE.withIndex(this.index_);var F=void 0;F=this.reverse_?d.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var Z=0;F.hasNext()&&Z<this.limit_;){var ce=F.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ce)<=0:this.index_.compare(ce,this.rangedFilter_.getEndPost())<=0))break;N=N.updateImmediateChild(ce.name,ce.node),Z++}}else{N=(N=d.withIndex(this.index_)).updatePriority(gn.EMPTY_NODE);var be=void 0,lt=void 0,Rt=void 0;if(F=void 0,this.reverse_){F=N.getReverseIterator(this.index_),be=this.rangedFilter_.getEndPost(),lt=this.rangedFilter_.getStartPost();var jt=this.index_.getCompare();Rt=function(pr,Mr){return jt(Mr,pr)}}else F=N.getIterator(this.index_),be=this.rangedFilter_.getStartPost(),lt=this.rangedFilter_.getEndPost(),Rt=this.index_.getCompare();Z=0;for(var un=!1;F.hasNext();)ce=F.getNext(),!un&&Rt(be,ce)<=0&&(un=!0),un&&Z<this.limit_&&Rt(ce,lt)<=0?Z++:N=N.updateImmediateChild(ce.name,gn.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,N,_)},v.prototype.updatePriority=function(l,d){return l},v.prototype.filtersNodes=function(){return!0},v.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},v.prototype.getIndex=function(){return this.index_},v.prototype.fullLimitUpdateChild_=function(l,d,_,N,F){var Z;if(this.reverse_){var ce=this.index_.getCompare();Z=function(yi,io){return ce(io,yi)}}else Z=this.index_.getCompare();var Ee=l;J.assert(Ee.numChildren()===this.limit_,"");var be=new Re(d,_),lt=this.reverse_?Ee.getFirstChild(this.index_):Ee.getLastChild(this.index_),Rt=this.rangedFilter_.matches(be);if(Ee.hasChild(d)){for(var jt=Ee.getImmediateChild(d),un=N.getChildAfterChild(this.index_,lt,this.reverse_);null!=un&&(un.name===d||Ee.hasChild(un.name));)un=N.getChildAfterChild(this.index_,un,this.reverse_);var In=null==un?1:Z(un,be);if(Rt&&!_.isEmpty()&&In>=0)return null!=F&&F.trackChildChange(rr.childChangedChange(d,_,jt)),Ee.updateImmediateChild(d,_);null!=F&&F.trackChildChange(rr.childRemovedChange(d,jt));var pr=Ee.updateImmediateChild(d,gn.EMPTY_NODE);return null!=un&&this.rangedFilter_.matches(un)?(null!=F&&F.trackChildChange(rr.childAddedChange(un.name,un.node)),pr.updateImmediateChild(un.name,un.node)):pr}return _.isEmpty()?l:Rt&&Z(lt,be)>=0?(null!=F&&(F.trackChildChange(rr.childRemovedChange(lt.name,lt.node)),F.trackChildChange(rr.childAddedChange(d,_))),Ee.updateImmediateChild(d,_).updateImmediateChild(lt.name,gn.EMPTY_NODE)):l},v}(),Ko=function(){function v(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ce}return v.prototype.hasStart=function(){return this.startSet_},v.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===v.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},v.prototype.getIndexStartValue=function(){return J.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},v.prototype.getIndexStartName=function(){return J.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:B},v.prototype.hasEnd=function(){return this.endSet_},v.prototype.getIndexEndValue=function(){return J.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},v.prototype.getIndexEndName=function(){return J.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:K},v.prototype.hasLimit=function(){return this.limitSet_},v.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},v.prototype.getLimit=function(){return J.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},v.prototype.getIndex=function(){return this.index_},v.prototype.copy_=function(){var l=new v;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l},v.prototype.limit=function(l){var d=this.copy_();return d.limitSet_=!0,d.limit_=l,d.viewFrom_="",d},v.prototype.limitToFirst=function(l){var d=this.copy_();return d.limitSet_=!0,d.limit_=l,d.viewFrom_=v.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,d},v.prototype.limitToLast=function(l){var d=this.copy_();return d.limitSet_=!0,d.limit_=l,d.viewFrom_=v.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,d},v.prototype.startAt=function(l,d){var _=this.copy_();return _.startSet_=!0,void 0===l&&(l=null),_.indexStartValue_=l,null!=d?(_.startNameSet_=!0,_.indexStartName_=d):(_.startNameSet_=!1,_.indexStartName_=""),_},v.prototype.endAt=function(l,d){var _=this.copy_();return _.endSet_=!0,void 0===l&&(l=null),_.indexEndValue_=l,void 0!==d?(_.endNameSet_=!0,_.indexEndName_=d):(_.endNameSet_=!1,_.indexEndName_=""),_},v.prototype.orderBy=function(l){var d=this.copy_();return d.index_=l,d},v.prototype.getQueryObject=function(){var l=v.WIRE_PROTOCOL_CONSTANTS_,d={};if(this.startSet_&&(d[l.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(d[l.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(d[l.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(d[l.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){d[l.LIMIT]=this.limit_;var _=this.viewFrom_;""===_&&(_=this.isViewFromLeft()?l.VIEW_FROM_LEFT:l.VIEW_FROM_RIGHT),d[l.VIEW_FROM]=_}return this.index_!==Ce&&(d[l.INDEX]=this.index_.toString()),d},v.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},v.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ce},v.prototype.getNodeFilter=function(){return this.loadsAllData()?new Wi(this.getIndex()):this.hasLimit()?new Js(this):new Zs(this)},v.prototype.toRestQueryStringParameters=function(){var _,l=v.REST_QUERY_CONSTANTS_,d={};return this.isDefault()||(this.index_===Ce?_=l.PRIORITY_INDEX:this.index_===ri?_=l.VALUE_INDEX:this.index_===Tt?_=l.KEY_INDEX:(J.assert(this.index_ instanceof pi,"Unrecognized index type!"),_=this.index_.toString()),d[l.ORDER_BY]=J.stringify(_),this.startSet_&&(d[l.START_AT]=J.stringify(this.indexStartValue_),this.startNameSet_&&(d[l.START_AT]+=","+J.stringify(this.indexStartName_))),this.endSet_&&(d[l.END_AT]=J.stringify(this.indexEndValue_),this.endNameSet_&&(d[l.END_AT]+=","+J.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?d[l.LIMIT_TO_FIRST]=this.limit_:d[l.LIMIT_TO_LAST]=this.limit_)),d},v.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},v.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},v.DEFAULT=new v,v}(),ro=function(v){function l(d,_){if(!(d instanceof Hr))throw new Error("new Reference() no longer supported - use app.database().");return v.call(this,d,_,Ko.DEFAULT,!1)||this}return A.__extends(l,v),l.prototype.getKey=function(){return J.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},l.prototype.child=function(d){return J.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof d?d=String(d):d instanceof qe||(null===this.path.getFront()?ir("Reference.child",1,d,!1):Yn("Reference.child",1,d,!1)),new l(this.repo,this.path.child(d))},l.prototype.getParent=function(){J.validateArgCount("Reference.parent",0,0,arguments.length);var d=this.path.parent();return null===d?null:new l(this.repo,d)},l.prototype.getRoot=function(){J.validateArgCount("Reference.root",0,0,arguments.length);for(var d=this;null!==d.getParent();)d=d.getParent();return d},l.prototype.databaseProp=function(){return this.repo.database},l.prototype.set=function(d,_){J.validateArgCount("Reference.set",1,2,arguments.length),ar("Reference.set",this.path),tn("Reference.set",1,d,this.path,!1),J.validateCallback("Reference.set",2,_,!0);var N=new J.Deferred;return this.repo.setWithPriority(this.path,d,null,N.wrapCallback(_)),N.promise},l.prototype.update=function(d,_){if(J.validateArgCount("Reference.update",1,2,arguments.length),ar("Reference.update",this.path),Array.isArray(d)){for(var N={},F=0;F<d.length;++F)N[""+F]=d[F];d=N,Ot("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pn("Reference.update",1,d,this.path,!1),J.validateCallback("Reference.update",2,_,!0);var Z=new J.Deferred;return this.repo.update(this.path,d,Z.wrapCallback(_)),Z.promise},l.prototype.setWithPriority=function(d,_,N){if(J.validateArgCount("Reference.setWithPriority",2,3,arguments.length),ar("Reference.setWithPriority",this.path),tn("Reference.setWithPriority",1,d,this.path,!1),_r("Reference.setWithPriority",2,_,!1),J.validateCallback("Reference.setWithPriority",3,N,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var F=new J.Deferred;return this.repo.setWithPriority(this.path,d,_,F.wrapCallback(N)),F.promise},l.prototype.remove=function(d){return J.validateArgCount("Reference.remove",0,1,arguments.length),ar("Reference.remove",this.path),J.validateCallback("Reference.remove",1,d,!0),this.set(null,d)},l.prototype.transaction=function(d,_,N){if(J.validateArgCount("Reference.transaction",1,3,arguments.length),ar("Reference.transaction",this.path),J.validateCallback("Reference.transaction",1,d,!1),J.validateCallback("Reference.transaction",2,_,!0),_i("Reference.transaction",3,N,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===N&&(N=!0);var F=new J.Deferred;"function"==typeof _&&F.promise.catch(function(){});var Z=function(ce,Ee,be){ce?F.reject(ce):F.resolve(new ei(Ee,be)),"function"==typeof _&&_(ce,Ee,be)};return this.repo.startTransaction(this.path,d,Z,N),F.promise},l.prototype.setPriority=function(d,_){J.validateArgCount("Reference.setPriority",1,2,arguments.length),ar("Reference.setPriority",this.path),_r("Reference.setPriority",1,d,!1),J.validateCallback("Reference.setPriority",2,_,!0);var N=new J.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),d,null,N.wrapCallback(_)),N.promise},l.prototype.push=function(d,_){J.validateArgCount("Reference.push",0,2,arguments.length),ar("Reference.push",this.path),tn("Reference.push",1,d,this.path,!0),J.validateCallback("Reference.push",2,_,!0);var Ee,N=this.repo.serverTime(),F=bi(N),Z=this.child(F),ce=this.child(F);return Ee=null!=d?Z.set(d,_).then(function(){return ce}):Promise.resolve(ce),Z.then=Ee.then.bind(Ee),Z.catch=Ee.then.bind(Ee,void 0),"function"==typeof _&&Ee.catch(function(){}),Z},l.prototype.onDisconnect=function(){return ar("Reference.onDisconnect",this.path),new Qn(this.repo,this.path)},Object.defineProperty(l.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),l}(Mi);Mi.__referenceConstructor=ro,Zo.__referenceConstructor=ro;var Ma=function(){this.children={},this.childCount=0,this.value=null},ts=function(){function v(l,d,_){void 0===l&&(l=""),void 0===d&&(d=null),void 0===_&&(_=new Ma),this.name_=l,this.parent_=d,this.node_=_}return v.prototype.subTree=function(l){for(var d=l instanceof qe?l:new qe(l),_=this,N=d.getFront();null!==N;)_=new v(N,_,J.safeGet(_.node_.children,N)||new Ma),N=(d=d.popFront()).getFront();return _},v.prototype.getValue=function(){return this.node_.value},v.prototype.setValue=function(l){J.assert(void 0!==l,"Cannot set value to undefined"),this.node_.value=l,this.updateParents_()},v.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},v.prototype.hasChildren=function(){return this.node_.childCount>0},v.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},v.prototype.forEachChild=function(l){var d=this;ot(this.node_.children,function(_,N){l(new v(_,d,N))})},v.prototype.forEachDescendant=function(l,d,_){d&&!_&&l(this),this.forEachChild(function(N){N.forEachDescendant(l,!0,_)}),d&&_&&l(this)},v.prototype.forEachAncestor=function(l,d){for(var _=d?this:this.parent();null!==_;){if(l(_))return!0;_=_.parent()}return!1},v.prototype.forEachImmediateDescendantWithValue=function(l){this.forEachChild(function(d){null!==d.getValue()?l(d):d.forEachImmediateDescendantWithValue(l)})},v.prototype.path=function(){return new qe(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},v.prototype.name=function(){return this.name_},v.prototype.parent=function(){return this.parent_},v.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},v.prototype.updateChild_=function(l,d){var _=d.isEmpty(),N=J.contains(this.node_.children,l);_&&N?(delete this.node_.children[l],this.node_.childCount--,this.updateParents_()):!_&&!N&&(this.node_.children[l]=d.node_,this.node_.childCount++,this.updateParents_())},v}(),ci=(()=>(function(v){v[v.RUN=0]="RUN",v[v.SENT=1]="SENT",v[v.COMPLETED=2]="COMPLETED",v[v.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",v[v.NEEDS_ABORT=4]="NEEDS_ABORT"}(ci||(ci={})),ci))();Hr.MAX_TRANSACTION_RETRIES_=25,Hr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new ts},Hr.prototype.startTransaction=function(v,l,d,_){this.log_("transaction on "+v);var N=function(){},F=new ro(this,v);F.on("value",N);var ce={path:v,update:l,onComplete:d,status:null,order:ke(),applyLocally:_,retryCount:0,unwatcher:function(){F.off("value",N)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},Ee=this.getLatestState_(v);ce.currentInputSnapshot=Ee;var be=ce.update(Ee.val());if(void 0===be){if(ce.unwatcher(),ce.currentOutputSnapshotRaw=null,ce.currentOutputSnapshotResolved=null,ce.onComplete){var lt=new Pi(ce.currentInputSnapshot,new ro(this,ce.path),Ce);ce.onComplete(null,!1,lt)}}else{En("transaction failed: Data returned ",be,ce.path),ce.status=ci.RUN;var Rt=this.transactionQueueTree_.subTree(v),jt=Rt.getValue()||[];jt.push(ce),Rt.setValue(jt);var un=void 0;"object"==typeof be&&null!==be&&J.contains(be,".priority")?(un=J.safeGet(be,".priority"),J.assert(nn(un),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):un=(this.serverSyncTree_.calcCompleteEventCache(v)||gn.EMPTY_NODE).getPriority().val(),un=un;var Dn=this.generateServerValues(),pr=qn(be,un),Mr=Un(pr,Ee,Dn);ce.currentOutputSnapshotRaw=pr,ce.currentOutputSnapshotResolved=Mr,ce.currentWriteId=this.getNextWriteId_();var yi=this.serverSyncTree_.applyUserOverwrite(v,Mr,ce.currentWriteId,ce.applyLocally);this.eventQueue_.raiseEventsForChangedPath(v,yi),this.sendReadyTransactions_()}},Hr.prototype.getLatestState_=function(v,l){return this.serverSyncTree_.calcCompleteEventCache(v,l)||gn.EMPTY_NODE},Hr.prototype.sendReadyTransactions_=function(v){var l=this;if(void 0===v&&(v=this.transactionQueueTree_),v||this.pruneCompletedTransactionsBelowNode_(v),null!==v.getValue()){var d=this.buildTransactionQueue_(v);J.assert(d.length>0,"Sending zero length transaction queue"),d.every(function(N){return N.status===ci.RUN})&&this.sendTransactionQueue_(v.path(),d)}else v.hasChildren()&&v.forEachChild(function(N){l.sendReadyTransactions_(N)})},Hr.prototype.sendTransactionQueue_=function(v,l){for(var d=this,_=l.map(function(jt){return jt.currentWriteId}),N=this.getLatestState_(v,_),F=N,Z=N.hash(),ce=0;ce<l.length;ce++){var Ee=l[ce];J.assert(Ee.status===ci.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),Ee.status=ci.SENT,Ee.retryCount++;var be=qe.relativePath(v,Ee.path);F=F.updateChild(be,Ee.currentOutputSnapshotRaw)}var lt=F.val(!0),Rt=v;this.server_.put(Rt.toString(),lt,function(jt){d.log_("transaction put response",{path:Rt.toString(),status:jt});var un=[];if("ok"===jt){for(var In=[],Dn=0;Dn<l.length;Dn++){if(l[Dn].status=ci.COMPLETED,un=un.concat(d.serverSyncTree_.ackUserWrite(l[Dn].currentWriteId)),l[Dn].onComplete){var pr=l[Dn].currentOutputSnapshotResolved,Mr=new ro(d,l[Dn].path),yi=new Pi(pr,Mr,Ce);In.push(l[Dn].onComplete.bind(null,null,!0,yi))}l[Dn].unwatcher()}for(d.pruneCompletedTransactionsBelowNode_(d.transactionQueueTree_.subTree(v)),d.sendReadyTransactions_(),d.eventQueue_.raiseEventsForChangedPath(v,un),Dn=0;Dn<In.length;Dn++)_t(In[Dn])}else{if("datastale"===jt)for(Dn=0;Dn<l.length;Dn++)l[Dn].status=l[Dn].status===ci.SENT_NEEDS_ABORT?ci.NEEDS_ABORT:ci.RUN;else for(Ot("transaction at "+Rt.toString()+" failed: "+jt),Dn=0;Dn<l.length;Dn++)l[Dn].status=ci.NEEDS_ABORT,l[Dn].abortReason=jt;d.rerunTransactions_(v)}},Z)},Hr.prototype.rerunTransactions_=function(v){var l=this.getAncestorTransactionNode_(v),d=l.path(),_=this.buildTransactionQueue_(l);return this.rerunTransactionQueue_(_,d),d},Hr.prototype.rerunTransactionQueue_=function(v,l){if(0!==v.length){for(var d=[],_=[],F=v.filter(function(Pn){return Pn.status===ci.RUN}).map(function(Pn){return Pn.currentWriteId}),Z=0;Z<v.length;Z++){var ce=v[Z],Ee=qe.relativePath(l,ce.path),be=!1,lt=void 0;if(J.assert(null!==Ee,"rerunTransactionsUnderNode_: relativePath should not be null."),ce.status===ci.NEEDS_ABORT)be=!0,lt=ce.abortReason,_=_.concat(this.serverSyncTree_.ackUserWrite(ce.currentWriteId,!0));else if(ce.status===ci.RUN)if(ce.retryCount>=Hr.MAX_TRANSACTION_RETRIES_)be=!0,lt="maxretry",_=_.concat(this.serverSyncTree_.ackUserWrite(ce.currentWriteId,!0));else{var Rt=this.getLatestState_(ce.path,F);ce.currentInputSnapshot=Rt;var jt=v[Z].update(Rt.val());if(void 0!==jt){En("transaction failed: Data returned ",jt,ce.path);var un=qn(jt);"object"==typeof jt&&null!=jt&&J.contains(jt,".priority")||(un=un.updatePriority(Rt.getPriority()));var Dn=ce.currentWriteId,pr=this.generateServerValues(),Mr=Un(un,Rt,pr);ce.currentOutputSnapshotRaw=un,ce.currentOutputSnapshotResolved=Mr,ce.currentWriteId=this.getNextWriteId_(),F.splice(F.indexOf(Dn),1),_=(_=_.concat(this.serverSyncTree_.applyUserOverwrite(ce.path,Mr,ce.currentWriteId,ce.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(Dn,!0))}else be=!0,lt="nodata",_=_.concat(this.serverSyncTree_.ackUserWrite(ce.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(l,_),_=[],be&&(v[Z].status=ci.COMPLETED,setTimeout(v[Z].unwatcher,Math.floor(0)),v[Z].onComplete))if("nodata"===lt){var yi=new ro(this,v[Z].path),rs=new Pi(v[Z].currentInputSnapshot,yi,Ce);d.push(v[Z].onComplete.bind(null,null,!1,rs))}else d.push(v[Z].onComplete.bind(null,new Error(lt),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),Z=0;Z<d.length;Z++)_t(d[Z]);this.sendReadyTransactions_()}},Hr.prototype.getAncestorTransactionNode_=function(v){var l,d=this.transactionQueueTree_;for(l=v.getFront();null!==l&&null===d.getValue();)d=d.subTree(l),l=(v=v.popFront()).getFront();return d},Hr.prototype.buildTransactionQueue_=function(v){var l=[];return this.aggregateTransactionQueuesForNode_(v,l),l.sort(function(d,_){return d.order-_.order}),l},Hr.prototype.aggregateTransactionQueuesForNode_=function(v,l){var d=this,_=v.getValue();if(null!==_)for(var N=0;N<_.length;N++)l.push(_[N]);v.forEachChild(function(F){d.aggregateTransactionQueuesForNode_(F,l)})},Hr.prototype.pruneCompletedTransactionsBelowNode_=function(v){var l=this,d=v.getValue();if(d){for(var _=0,N=0;N<d.length;N++)d[N].status!==ci.COMPLETED&&(d[_]=d[N],_++);d.length=_,v.setValue(d.length>0?d:null)}v.forEachChild(function(F){l.pruneCompletedTransactionsBelowNode_(F)})},Hr.prototype.abortTransactions_=function(v){var l=this,d=this.getAncestorTransactionNode_(v).path(),_=this.transactionQueueTree_.subTree(v);return _.forEachAncestor(function(N){l.abortTransactionsOnNode_(N)}),this.abortTransactionsOnNode_(_),_.forEachDescendant(function(N){l.abortTransactionsOnNode_(N)}),d},Hr.prototype.abortTransactionsOnNode_=function(v){var l=v.getValue();if(null!==l){for(var d=[],_=[],N=-1,F=0;F<l.length;F++)l[F].status!==ci.SENT_NEEDS_ABORT&&(l[F].status===ci.SENT?(J.assert(N===F-1,"All SENT items should be at beginning of queue."),N=F,l[F].status=ci.SENT_NEEDS_ABORT,l[F].abortReason="set"):(J.assert(l[F].status===ci.RUN,"Unexpected transaction status in abort"),l[F].unwatcher(),_=_.concat(this.serverSyncTree_.ackUserWrite(l[F].currentWriteId,!0)),l[F].onComplete&&d.push(l[F].onComplete.bind(null,new Error("set"),!1,null))));for(-1===N?v.setValue(null):l.length=N+1,this.eventQueue_.raiseEventsForChangedPath(v.path(),_),F=0;F<d.length;F++)_t(d[F])}};var _e,m=function(){function v(l,d){var _=this;this.app_=l,this.authProvider_=d,this.auth_=null,this.auth_=d.getImmediate({optional:!0}),this.auth_||d.get().then(function(N){return _.auth_=N})}return v.prototype.getToken=function(l){return this.auth_?this.auth_.getToken(l).catch(function(d){return d&&"auth/token-not-initialized"===d.code?(rt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(d)}):Promise.resolve(null)},v.prototype.addTokenChangeListener=function(l){this.auth_?this.auth_.addAuthTokenListener(l):(setTimeout(function(){return l(null)},0),this.authProvider_.get().then(function(d){return d.addAuthTokenListener(l)}))},v.prototype.removeTokenChangeListener=function(l){this.authProvider_.get().then(function(d){return d.removeAuthTokenListener(l)})},v.prototype.notifyForInvalidToken=function(){var l='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';Ot(l+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},v}(),L=function(){function v(){}return v.prototype.getToken=function(l){return Promise.resolve({accessToken:v.EMULATOR_AUTH_TOKEN})},v.prototype.addTokenChangeListener=function(l){l(v.EMULATOR_AUTH_TOKEN)},v.prototype.removeTokenChangeListener=function(l){},v.prototype.notifyForInvalidToken=function(){},v.EMULATOR_AUTH_TOKEN="owner",v}(),$e=function(){function v(){this.repos_={},this.useRestClient_=!1}return v.getInstance=function(){return _e||(_e=new v),_e},v.prototype.interrupt=function(){var l,d,_,N;try{for(var F=A.__values(Object.keys(this.repos_)),Z=F.next();!Z.done;Z=F.next()){var ce=Z.value;try{for(var Ee=(_=void 0,A.__values(Object.keys(this.repos_[ce]))),be=Ee.next();!be.done;be=Ee.next())this.repos_[ce][be.value].interrupt()}catch(Rt){_={error:Rt}}finally{try{be&&!be.done&&(N=Ee.return)&&N.call(Ee)}finally{if(_)throw _.error}}}}catch(Rt){l={error:Rt}}finally{try{Z&&!Z.done&&(d=F.return)&&d.call(F)}finally{if(l)throw l.error}}},v.prototype.resume=function(){var l,d,_,N;try{for(var F=A.__values(Object.keys(this.repos_)),Z=F.next();!Z.done;Z=F.next()){var ce=Z.value;try{for(var Ee=(_=void 0,A.__values(Object.keys(this.repos_[ce]))),be=Ee.next();!be.done;be=Ee.next())this.repos_[ce][be.value].resume()}catch(Rt){_={error:Rt}}finally{try{be&&!be.done&&(N=Ee.return)&&N.call(Ee)}finally{if(_)throw _.error}}}}catch(Rt){l={error:Rt}}finally{try{Z&&!Z.done&&(d=F.return)&&d.call(F)}finally{if(l)throw l.error}}},v.prototype.databaseFromApp=function(l,d,_,N){var F=_||l.options.databaseURL;void 0===F&&(l.options.projectId||at("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rt("Using default host for project ",l.options.projectId),F=l.options.projectId+"-default-rtdb.firebaseio.com");var Ee,Z=Jn(F,N),ce=Z.repoInfo,be=void 0;"undefined"!=typeof process&&(be=process.env.FIREBASE_DATABASE_EMULATOR_HOST),be?(Ee=!0,ce=(Z=Jn(F="http://"+be+"?ns="+ce.namespace,N)).repoInfo):Ee=!Z.repoInfo.secure;var lt=N&&Ee?new L:new m(l,d);return Nr("Invalid Firebase Database URL",1,Z),Z.path.isEmpty()||at("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(ce,l,lt).database},v.prototype.deleteRepo=function(l){var d=J.safeGet(this.repos_,l.app.name);(!d||J.safeGet(d,l.repoInfo_.toURLString())!==l)&&at("Database "+l.app.name+"("+l.repoInfo_+") has already been deleted."),l.interrupt(),delete d[l.repoInfo_.toURLString()]},v.prototype.createRepo=function(l,d,_){var N=J.safeGet(this.repos_,d.name);N||(this.repos_[d.name]=N={});var F=J.safeGet(N,l.toURLString());return F&&at("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),F=new Hr(l,this.useRestClient_,d,_),N[l.toURLString()]=F,F},v.prototype.forceRestClient=function(l){this.useRestClient_=l},v}(),Et=function(){function v(l){this.repo_=l,l instanceof Hr||at("Don't call new Database() directly - please use firebase.database()."),this.root_=new ro(l,qe.Empty),this.INTERNAL=new fn(this)}return Object.defineProperty(v.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),v.prototype.ref=function(l){return this.checkDeleted_("ref"),J.validateArgCount("database.ref",0,1,arguments.length),l instanceof ro?this.refFromURL(l.toString()):void 0!==l?this.root_.child(l):this.root_},v.prototype.refFromURL=function(l){var d="database.refFromURL";this.checkDeleted_(d),J.validateArgCount(d,1,1,arguments.length);var _=Jn(l,this.repo_.repoInfo_.nodeAdmin);Nr(d,1,_);var N=_.repoInfo;return N.host!==this.repo_.repoInfo_.host&&at(d+": Host name does not match the current database: (found "+N.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(_.path.toString())},v.prototype.checkDeleted_=function(l){null===this.repo_&&at("Cannot call "+l+" on a deleted database.")},v.prototype.goOffline=function(){J.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},v.prototype.goOnline=function(){J.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},v.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(l){return{".sv":{increment:l}}}},v}(),fn=function(){function v(l){this.database=l}return v.prototype.delete=function(){return A.__awaiter(this,void 0,void 0,function(){return A.__generator(this,function(l){return this.database.checkDeleted_("delete"),$e.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},v}(),mi=Object.freeze({__proto__:null,forceLongPolling:function(){Di.forceDisallow(),Bi.forceAllow()},forceWebSockets:function(){Bi.forceDisallow()},isWebSocketsAvailable:function(){return Di.isAvailable()},setSecurityDebugCallback:function(v,l){v.repo.persistentConnection_.securityDebugCallback_=l},stats:function(v,l){v.repo.stats(l)},statsIncrementCounter:function(v,l){v.repo.statsIncrementCounter(l)},dataUpdateCount:function(v){return v.repo.dataUpdateCount},interceptServerData:function(v,l){return v.repo.interceptServerData_(l)}}),ps=Kr;Kr.prototype.simpleListen=function(v,l){this.sendRequest("q",{p:v},l)},Kr.prototype.echo=function(v,l){this.sendRequest("echo",{d:v},l)};var Ds=Object.freeze({__proto__:null,DataConnection:ps,RealTimeConnection:$o,hijackHash:function(v){var l=Kr.prototype.put;return Kr.prototype.put=function(d,_,N,F){void 0!==F&&(F=v()),l.call(this,d,_,N,F)},function(){Kr.prototype.put=l}},ConnectionTarget:Rr,queryIdentifier:function(v){return v.queryIdentifier()},forceRestClient:function(v){$e.getInstance().forceRestClient(v)}}),ga=Et.ServerValue;function As(v){!function(v){Xr=v}(v.SDK_VERSION);var l=v.INTERNAL.registerComponent(new Le.Component("database",function(d,_){var N=d.getProvider("app").getImmediate(),F=d.getProvider("auth-internal");return $e.getInstance().databaseFromApp(N,F,_)},"PUBLIC").setServiceProps({Reference:ro,Query:Mi,Database:Et,DataSnapshot:Pi,enableLogging:ze,INTERNAL:mi,ServerValue:ga,TEST_ACCESS:Ds}).setMultipleInstances(!0));v.registerVersion("@firebase/database","0.6.13"),J.isNodeSdk()&&(On.exports=l)}As(tt.default),We.DataSnapshot=Pi,We.Database=Et,We.OnDisconnect=Qn,We.Query=Mi,We.Reference=ro,We.ServerValue=ga,We.enableLogging=ze,We.registerDatabase=As},5910:(On,We,ge)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});var a,M=ge(5704),A=ge(6279),J=ge(300),mt=ge(1704),Le=ge(2870),st=ge(1100),ft=(a=A)&&"object"==typeof a&&"default"in a?a:{default:a},oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=function(a){function i(s,f){var p=this;return(p=a.call(this,f)||this).code=s,p.message=f,p.name="FirebaseError",p.toString=function(){return p.name+": [code="+p.code+"]: "+p.message},p}return M.__extends(i,a),i}(Error),Ie=new J.Logger("@firebase/firestore");function xe(){return Ie.logLevel}function we(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if(Ie.logLevel<=J.LogLevel.DEBUG){var f=i.map(Me);Ie.debug.apply(Ie,M.__spreadArrays(["Firestore (7.24.0): "+a],f))}}function ke(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if(Ie.logLevel<=J.LogLevel.ERROR){var f=i.map(Me);Ie.error.apply(Ie,M.__spreadArrays(["Firestore (7.24.0): "+a],f))}}function gt(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if(Ie.logLevel<=J.LogLevel.WARN){var f=i.map(Me);Ie.warn.apply(Ie,M.__spreadArrays(["Firestore (7.24.0): "+a],f))}}function Me(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch(s){return a}}function Pe(a){void 0===a&&(a="Unexpected state");var i="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+a;throw ke(i),new Error(i)}function ut(a,i){a||Pe()}function ze(a,i){return a}function rt(a){var i=0;for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&i++;return i}function Ut(a,i){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&i(s,a[s])}function Nt(a){for(var i in a)if(Object.prototype.hasOwnProperty.call(a,i))return!1;return!0}var at=function(){function a(i,s,f){void 0===s?s=0:s>i.length&&Pe(),void 0===f?f=i.length-s:f>i.length-s&&Pe(),this.segments=i,this.offset=s,this.t=f}return Object.defineProperty(a.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){return 0===a.i(this,i)},a.prototype.child=function(i){var s=this.segments.slice(this.offset,this.limit());return i instanceof a?i.forEach(function(f){s.push(f)}):s.push(i),this.o(s)},a.prototype.limit=function(){return this.offset+this.length},a.prototype.u=function(i){return this.o(this.segments,this.offset+(i=void 0===i?1:i),this.length-i)},a.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},a.prototype.l=function(){return this.segments[this.offset]},a.prototype._=function(){return this.get(this.length-1)},a.prototype.get=function(i){return this.segments[this.offset+i]},a.prototype.m=function(){return 0===this.length},a.prototype.T=function(i){if(i.length<this.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==i.get(s))return!1;return!0},a.prototype.I=function(i){if(this.length+1!==i.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==i.get(s))return!1;return!0},a.prototype.forEach=function(i){for(var s=this.offset,f=this.limit();s<f;s++)i(this.segments[s])},a.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},a.i=function(i,s){for(var f=Math.min(i.length,s.length),p=0;p<f;p++){var b=i.get(p),D=s.get(p);if(b<D)return-1;if(b>D)return 1}return i.length<s.length?-1:i.length>s.length?1:0},a}(),Ot=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return M.__extends(i,a),i.prototype.o=function(s,f,p){return new i(s,f,p)},i.prototype.R=function(){return this.A().join("/")},i.prototype.toString=function(){return this.R()},i.g=function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];for(var p=[],b=0,D=s;b<D.length;b++){var U=D[b];if(U.indexOf("//")>=0)throw new z(oe.INVALID_ARGUMENT,"Invalid segment ("+U+"). Paths must not contain // in them.");p.push.apply(p,U.split("/").filter(function(Y){return Y.length>0}))}return new i(p)},i.P=function(){return new i([])},i}(at),R=/^[_a-zA-Z][_a-zA-Z0-9]*$/,x=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return M.__extends(i,a),i.prototype.o=function(s,f,p){return new i(s,f,p)},i.V=function(s){return R.test(s)},i.prototype.R=function(){return this.A().map(function(s){return s=s.replace("\\","\\\\").replace("`","\\`"),i.V(s)||(s="`"+s+"`"),s}).join(".")},i.prototype.toString=function(){return this.R()},i.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},i.v=function(){return new i(["__name__"])},i.S=function(s){for(var f=[],p="",b=0,D=function(){if(0===p.length)throw new z(oe.INVALID_ARGUMENT,"Invalid field path ("+s+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");f.push(p),p=""},U=!1;b<s.length;){var Y=s[b];if("\\"===Y){if(b+1===s.length)throw new z(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+s);var de=s[b+1];if("\\"!==de&&"."!==de&&"`"!==de)throw new z(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+s);p+=de,b+=2}else"`"===Y?(U=!U,b++):"."!==Y||U?(p+=Y,b++):(D(),b++)}if(D(),U)throw new z(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+s);return new i(f)},i.P=function(){return new i([])},i}(at),C=function(){function a(i){this.path=i}return a.D=function(i){return new a(Ot.g(i))},a.C=function(i){return new a(Ot.g(i).u(5))},a.prototype.N=function(i){return this.path.length>=2&&this.path.get(this.path.length-2)===i},a.prototype.isEqual=function(i){return null!==i&&0===Ot.i(this.path,i.path)},a.prototype.toString=function(){return this.path.toString()},a.i=function(i,s){return Ot.i(i.path,s.path)},a.F=function(i){return i.length%2==0},a.$=function(i){return new a(new Ot(i.slice()))},a}();function B(a,i){if(0!==i.length)throw new z(oe.INVALID_ARGUMENT,"Function "+a+"() does not support arguments, but was called with "+pt(i.length,"argument")+".")}function K(a,i,s){if(i.length!==s)throw new z(oe.INVALID_ARGUMENT,"Function "+a+"() requires "+pt(s,"argument")+", but was called with "+pt(i.length,"argument")+".")}function k(a,i,s){if(i.length<s)throw new z(oe.INVALID_ARGUMENT,"Function "+a+"() requires at least "+pt(s,"argument")+", but was called with "+pt(i.length,"argument")+".")}function ae(a,i,s,f){if(i.length<s||i.length>f)throw new z(oe.INVALID_ARGUMENT,"Function "+a+"() requires between "+s+" and "+f+" arguments, but was called with "+pt(i.length,"argument")+".")}function ue(a,i,s,f){et(a,i,qe(s)+" argument",f)}function Gt(a,i,s,f){void 0!==f&&ue(a,i,s,f)}function ve(a,i,s,f){et(a,i,s+" option",f)}function ot(a,i,s,f){void 0!==f&&ve(a,i,s,f)}function Vt(a,i,s,f,p){void 0!==f&&function(b,D,U,Y,de){for(var Te=[],Ge=0,Xe=de;Ge<Xe.length;Ge++){var yt=Xe[Ge];if(yt===Y)return;Te.push(It(yt))}var Ft=It(Y);throw new z(oe.INVALID_ARGUMENT,"Invalid value "+Ft+" provided to function "+b+'() for option "'+U+'". Acceptable values: '+Te.join(", "))}(a,0,s,f,p)}function Ze(a,i,s,f){if(!i.some(function(p){return p===f}))throw new z(oe.INVALID_ARGUMENT,"Invalid value "+It(f)+" provided to function "+a+"() for its "+qe(s)+" argument. Acceptable values: "+i.join(", "));return f}function et(a,i,s,f){if(!("object"===i?vt(f):"non-empty string"===i?"string"==typeof f&&""!==f:typeof f===i)){var p=It(f);throw new z(oe.INVALID_ARGUMENT,"Function "+a+"() requires its "+s+" to be of type "+i+", but it was: "+p)}}function vt(a){return"object"==typeof a&&null!==a&&(Object.getPrototypeOf(a)===Object.prototype||null===Object.getPrototypeOf(a))}function It(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=a.substring(0,20)+"..."),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";var i=function(s){if(s.constructor){var f=/function\s+([^\s(]+)\s*\(/.exec(s.constructor.toString());if(f&&f.length>1)return f[1]}return null}(a);return i?"a custom "+i+" object":"an object"}return"function"==typeof a?"a function":Pe()}function Ct(a,i,s){if(void 0===s)throw new z(oe.INVALID_ARGUMENT,"Function "+a+"() requires a valid "+qe(i)+" argument, but it was undefined.")}function _t(a,i,s){Ut(i,function(f,p){if(s.indexOf(f)<0)throw new z(oe.INVALID_ARGUMENT,"Unknown option '"+f+"' passed to function "+a+"(). Available options: "+s.join(", "))})}function xt(a,i,s,f){var p=It(f);return new z(oe.INVALID_ARGUMENT,"Function "+a+"() requires its "+qe(s)+" argument to be a "+i+", but it was: "+p)}function an(a,i,s){if(s<=0)throw new z(oe.INVALID_ARGUMENT,"Function "+a+"() requires its "+qe(i)+" argument to be a positive number, but it was: "+s+".")}function qe(a){switch(a){case 1:return"first";case 2:return"second";case 3:return"third";default:return a+"th"}}function pt(a,i){return a+" "+i+(1===a?"":"s")}function Kt(a){var i="undefined"!=typeof self&&(self.crypto||self.msCrypto),s=new Uint8Array(a);if(i&&"function"==typeof i.getRandomValues)i.getRandomValues(s);else for(var f=0;f<a;f++)s[f]=Math.floor(256*Math.random());return s}var Ht=function(){function a(){}return a.k=function(){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/i.length)*i.length,f="";f.length<20;)for(var p=Kt(40),b=0;b<p.length;++b)f.length<20&&p[b]<s&&(f+=i.charAt(p[b]%i.length));return f},a}();function Wt(a,i){return a<i?-1:a>i?1:0}function on(a,i,s){return a.length===i.length&&a.every(function(f,p){return s(f,i[p])})}function An(a){return a+"\0"}var sn=function(){function a(i){this.M=i}return a.fromBase64String=function(i){return new a(atob(i))},a.fromUint8Array=function(i){return new a(function(s){for(var f="",p=0;p<s.length;++p)f+=String.fromCharCode(s[p]);return f}(i))},a.prototype.toBase64=function(){return btoa(this.M)},a.prototype.toUint8Array=function(){return function(i){for(var s=new Uint8Array(i.length),f=0;f<i.length;f++)s[f]=i.charCodeAt(f);return s}(this.M)},a.prototype.O=function(){return 2*this.M.length},a.prototype.L=function(i){return Wt(this.M,i.M)},a.prototype.isEqual=function(i){return this.M===i.M},a}();sn.B=new sn("");var Vn=function(){function a(i){this.q=i}return a.fromBase64String=function(i){try{return new a(sn.fromBase64String(i))}catch(s){throw new z(oe.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+s)}},a.fromUint8Array=function(i){return new a(sn.fromUint8Array(i))},a.prototype.toBase64=function(){return this.q.toBase64()},a.prototype.toUint8Array=function(){return this.q.toUint8Array()},a.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},a.prototype.isEqual=function(i){return this.q.isEqual(i.q)},a}();function sr(){if("undefined"==typeof Uint8Array)throw new z(oe.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function zn(){if("undefined"==typeof atob)throw new z(oe.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ur=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return M.__extends(i,a),i.fromBase64String=function(s){K("Blob.fromBase64String",arguments,1),ue("Blob.fromBase64String","string",1,s),zn();try{return new i(sn.fromBase64String(s))}catch(f){throw new z(oe.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+f)}},i.fromUint8Array=function(s){if(K("Blob.fromUint8Array",arguments,1),sr(),!(s instanceof Uint8Array))throw xt("Blob.fromUint8Array","Uint8Array",1,s);return new i(sn.fromUint8Array(s))},i.prototype.toBase64=function(){return K("Blob.toBase64",arguments,0),zn(),a.prototype.toBase64.call(this)},i.prototype.toUint8Array=function(){return K("Blob.toUint8Array",arguments,0),sr(),a.prototype.toUint8Array.call(this)},i.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},i}(Vn),Rr=function(a,i,s,f,p,b){this.U=a,this.persistenceKey=i,this.host=s,this.ssl=f,this.forceLongPolling=p,this.W=b},Vr=function(){function a(i,s){this.projectId=i,this.database=s||"(default)"}return Object.defineProperty(a.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){return i instanceof a&&i.projectId===this.projectId&&i.database===this.database},a.prototype.L=function(i){return Wt(this.projectId,i.projectId)||Wt(this.database,i.database)},a}(),yr=function(){function a(i,s){this.K=i,this.G=s,this.H={}}return a.prototype.get=function(i){var s=this.K(i),f=this.H[s];if(void 0!==f)for(var p=0,b=f;p<b.length;p++){var D=b[p],Y=D[1];if(this.G(D[0],i))return Y}},a.prototype.has=function(i){return void 0!==this.get(i)},a.prototype.set=function(i,s){var f=this.K(i),p=this.H[f];if(void 0!==p){for(var b=0;b<p.length;b++)if(this.G(p[b][0],i))return void(p[b]=[i,s]);p.push([i,s])}else this.H[f]=[[i,s]]},a.prototype.delete=function(i){var s=this.K(i),f=this.H[s];if(void 0===f)return!1;for(var p=0;p<f.length;p++)if(this.G(f[p][0],i))return 1===f.length?delete this.H[s]:f.splice(p,1),!0;return!1},a.prototype.forEach=function(i){Ut(this.H,function(s,f){for(var p=0,b=f;p<b.length;p++){var D=b[p];i(D[0],D[1])}})},a.prototype.m=function(){return Nt(this.H)},a}(),Jn=function(){function a(i,s){if(this.seconds=i,this.nanoseconds=s,s<0)throw new z(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new z(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(i<-62135596800)throw new z(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i);if(i>=253402300800)throw new z(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i)}return a.now=function(){return a.fromMillis(Date.now())},a.fromDate=function(i){return a.fromMillis(i.getTime())},a.fromMillis=function(i){var s=Math.floor(i/1e3);return new a(s,1e6*(i-1e3*s))},a.prototype.toDate=function(){return new Date(this.toMillis())},a.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},a.prototype.Y=function(i){return this.seconds===i.seconds?Wt(this.nanoseconds,i.nanoseconds):Wt(this.seconds,i.seconds)},a.prototype.isEqual=function(i){return i.seconds===this.seconds&&i.nanoseconds===this.nanoseconds},a.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},a.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},a.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},a}(),Hn=function(){function a(i){this.timestamp=i}return a.J=function(i){return new a(i)},a.min=function(){return new a(new Jn(0,0))},a.prototype.L=function(i){return this.timestamp.Y(i.timestamp)},a.prototype.isEqual=function(i){return this.timestamp.isEqual(i.timestamp)},a.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},a.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},a.prototype.Z=function(){return this.timestamp},a}();function Rn(a){return null==a}function nt(a){return 0===a&&1/a==-1/0}function ye(a){return"number"==typeof a&&Number.isInteger(a)&&!nt(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}var Ve=function(a,i,s,f,p,b,D){void 0===i&&(i=null),void 0===s&&(s=[]),void 0===f&&(f=[]),void 0===p&&(p=null),void 0===b&&(b=null),void 0===D&&(D=null),this.path=a,this.collectionGroup=i,this.orderBy=s,this.filters=f,this.limit=p,this.startAt=b,this.endAt=D,this.tt=null};function wt(a,i,s,f,p,b,D){return void 0===i&&(i=null),void 0===s&&(s=[]),void 0===f&&(f=[]),void 0===p&&(p=null),void 0===b&&(b=null),void 0===D&&(D=null),new Ve(a,i,s,f,p,b,D)}function ct(a){var i=ze(a);if(null===i.tt){var s=i.path.R();null!==i.collectionGroup&&(s+="|cg:"+i.collectionGroup),s+="|f:",s+=i.filters.map(function(f){return(p=f).field.R()+p.op.toString()+kn(p.value);var p}).join(","),s+="|ob:",s+=i.orderBy.map(function(f){return(p=f).field.R()+p.dir;var p}).join(","),Rn(i.limit)||(s+="|l:",s+=i.limit),i.startAt&&(s+="|lb:",s+=bo(i.startAt)),i.endAt&&(s+="|ub:",s+=bo(i.endAt)),i.tt=s}return i.tt}function nn(a,i){if(a.limit!==i.limit||a.orderBy.length!==i.orderBy.length)return!1;for(var s=0;s<a.orderBy.length;s++)if(!Us(a.orderBy[s],i.orderBy[s]))return!1;if(a.filters.length!==i.filters.length)return!1;for(var f=0;f<a.filters.length;f++)if((p=a.filters[f]).op!==(b=i.filters[f]).op||!p.field.isEqual(b.field)||!Fe(p.value,b.value))return!1;var p,b;return a.collectionGroup===i.collectionGroup&&!!a.path.isEqual(i.path)&&!!Fi(a.startAt,i.startAt)&&Fi(a.endAt,i.endAt)}function tn(a){return C.F(a.path)&&null===a.collectionGroup&&0===a.filters.length}var En,Cn,pn=function(){function a(i,s,f,p,b,D,U){void 0===b&&(b=Hn.min()),void 0===D&&(D=Hn.min()),void 0===U&&(U=sn.B),this.target=i,this.targetId=s,this.et=f,this.sequenceNumber=p,this.nt=b,this.lastLimboFreeSnapshotVersion=D,this.resumeToken=U}return a.prototype.st=function(i){return new a(this.target,this.targetId,this.et,i,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},a.prototype.it=function(i,s){return new a(this.target,this.targetId,this.et,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,i)},a.prototype.rt=function(i){return new a(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,i,this.resumeToken)},a}(),_r=function(a){this.count=a};function Nn(a){switch(a){case oe.OK:return Pe();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Pe()}}function Ir(a){if(void 0===a)return ke("GRPC error has no .code"),oe.UNKNOWN;switch(a){case En.OK:return oe.OK;case En.CANCELLED:return oe.CANCELLED;case En.UNKNOWN:return oe.UNKNOWN;case En.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case En.INTERNAL:return oe.INTERNAL;case En.UNAVAILABLE:return oe.UNAVAILABLE;case En.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case En.NOT_FOUND:return oe.NOT_FOUND;case En.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case En.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case En.ABORTED:return oe.ABORTED;case En.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case En.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case En.DATA_LOSS:return oe.DATA_LOSS;default:return Pe()}}(Cn=En||(En={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";var Yn=function(){function a(i,s){this.i=i,this.root=s||ar.EMPTY}return a.prototype.ot=function(i,s){return new a(this.i,this.root.ot(i,s,this.i).copy(null,null,ar.at,null,null))},a.prototype.remove=function(i){return new a(this.i,this.root.remove(i,this.i).copy(null,null,ar.at,null,null))},a.prototype.get=function(i){for(var s=this.root;!s.m();){var f=this.i(i,s.key);if(0===f)return s.value;f<0?s=s.left:f>0&&(s=s.right)}return null},a.prototype.indexOf=function(i){for(var s=0,f=this.root;!f.m();){var p=this.i(i,f.key);if(0===p)return s+f.left.size;p<0?f=f.left:(s+=f.left.size+1,f=f.right)}return-1},a.prototype.m=function(){return this.root.m()},Object.defineProperty(a.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),a.prototype.ct=function(){return this.root.ct()},a.prototype.ut=function(){return this.root.ut()},a.prototype.ht=function(i){return this.root.ht(i)},a.prototype.forEach=function(i){this.ht(function(s,f){return i(s,f),!1})},a.prototype.toString=function(){var i=[];return this.ht(function(s,f){return i.push(s+":"+f),!1}),"{"+i.join(", ")+"}"},a.prototype.lt=function(i){return this.root.lt(i)},a.prototype._t=function(){return new ir(this.root,null,this.i,!1)},a.prototype.ft=function(i){return new ir(this.root,i,this.i,!1)},a.prototype.dt=function(){return new ir(this.root,null,this.i,!0)},a.prototype.wt=function(i){return new ir(this.root,i,this.i,!0)},a}(),ir=function(){function a(i,s,f,p){this.Tt=p,this.Et=[];for(var b=1;!i.m();)if(b=s?f(i.key,s):1,p&&(b*=-1),b<0)i=this.Tt?i.left:i.right;else{if(0===b){this.Et.push(i);break}this.Et.push(i),i=this.Tt?i.right:i.left}}return a.prototype.It=function(){var i=this.Et.pop(),s={key:i.key,value:i.value};if(this.Tt)for(i=i.left;!i.m();)this.Et.push(i),i=i.right;else for(i=i.right;!i.m();)this.Et.push(i),i=i.left;return s},a.prototype.At=function(){return this.Et.length>0},a.prototype.Rt=function(){if(0===this.Et.length)return null;var i=this.Et[this.Et.length-1];return{key:i.key,value:i.value}},a}(),ar=function(){function a(i,s,f,p,b){this.key=i,this.value=s,this.color=null!=f?f:a.RED,this.left=null!=p?p:a.EMPTY,this.right=null!=b?b:a.EMPTY,this.size=this.left.size+1+this.right.size}return a.prototype.copy=function(i,s,f,p,b){return new a(null!=i?i:this.key,null!=s?s:this.value,null!=f?f:this.color,null!=p?p:this.left,null!=b?b:this.right)},a.prototype.m=function(){return!1},a.prototype.ht=function(i){return this.left.ht(i)||i(this.key,this.value)||this.right.ht(i)},a.prototype.lt=function(i){return this.right.lt(i)||i(this.key,this.value)||this.left.lt(i)},a.prototype.min=function(){return this.left.m()?this:this.left.min()},a.prototype.ct=function(){return this.min().key},a.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},a.prototype.ot=function(i,s,f){var p=this,b=f(i,p.key);return(p=b<0?p.copy(null,null,null,p.left.ot(i,s,f),null):0===b?p.copy(null,s,null,null,null):p.copy(null,null,null,null,p.right.ot(i,s,f))).gt()},a.prototype.Pt=function(){if(this.left.m())return a.EMPTY;var i=this;return i.left.yt()||i.left.left.yt()||(i=i.Vt()),(i=i.copy(null,null,null,i.left.Pt(),null)).gt()},a.prototype.remove=function(i,s){var f,p=this;if(s(i,p.key)<0)p.left.m()||p.left.yt()||p.left.left.yt()||(p=p.Vt()),p=p.copy(null,null,null,p.left.remove(i,s),null);else{if(p.left.yt()&&(p=p.bt()),p.right.m()||p.right.yt()||p.right.left.yt()||(p=p.vt()),0===s(i,p.key)){if(p.right.m())return a.EMPTY;f=p.right.min(),p=p.copy(f.key,f.value,null,null,p.right.Pt())}p=p.copy(null,null,null,null,p.right.remove(i,s))}return p.gt()},a.prototype.yt=function(){return this.color},a.prototype.gt=function(){var i=this;return i.right.yt()&&!i.left.yt()&&(i=i.St()),i.left.yt()&&i.left.left.yt()&&(i=i.bt()),i.left.yt()&&i.right.yt()&&(i=i.Dt()),i},a.prototype.Vt=function(){var i=this.Dt();return i.right.left.yt()&&(i=(i=(i=i.copy(null,null,null,null,i.right.bt())).St()).Dt()),i},a.prototype.vt=function(){var i=this.Dt();return i.left.left.yt()&&(i=(i=i.bt()).Dt()),i},a.prototype.St=function(){var i=this.copy(null,null,a.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)},a.prototype.bt=function(){var i=this.copy(null,null,a.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)},a.prototype.Dt=function(){var i=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,s)},a.prototype.Ct=function(){var i=this.Nt();return Math.pow(2,i)<=this.size+1},a.prototype.Nt=function(){if(this.yt()&&this.left.yt()||this.right.yt())throw Pe();var i=this.left.Nt();if(i!==this.right.Nt())throw Pe();return i+(this.yt()?0:1)},a}();ar.EMPTY=null,ar.RED=!0,ar.at=!1,ar.EMPTY=new(function(){function a(){this.size=0}return Object.defineProperty(a.prototype,"key",{get:function(){throw Pe()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"value",{get:function(){throw Pe()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){throw Pe()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"left",{get:function(){throw Pe()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){throw Pe()},enumerable:!1,configurable:!0}),a.prototype.copy=function(i,s,f,p,b){return this},a.prototype.ot=function(i,s,f){return new ar(i,s)},a.prototype.remove=function(i,s){return this},a.prototype.m=function(){return!0},a.prototype.ht=function(i){return!1},a.prototype.lt=function(i){return!1},a.prototype.ct=function(){return null},a.prototype.ut=function(){return null},a.prototype.yt=function(){return!1},a.prototype.Ct=function(){return!0},a.prototype.Nt=function(){return 0},a}());var Nr=function(){function a(i){this.i=i,this.data=new Yn(this.i)}return a.prototype.has=function(i){return null!==this.data.get(i)},a.prototype.first=function(){return this.data.ct()},a.prototype.last=function(){return this.data.ut()},Object.defineProperty(a.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),a.prototype.indexOf=function(i){return this.data.indexOf(i)},a.prototype.forEach=function(i){this.data.ht(function(s,f){return i(s),!1})},a.prototype.Ft=function(i,s){for(var f=this.data.ft(i[0]);f.At();){var p=f.It();if(this.i(p.key,i[1])>=0)return;s(p.key)}},a.prototype.xt=function(i,s){var f;for(f=void 0!==s?this.data.ft(s):this.data._t();f.At();)if(!i(f.It().key))return},a.prototype.$t=function(i){var s=this.data.ft(i);return s.At()?s.It().key:null},a.prototype._t=function(){return new _i(this.data._t())},a.prototype.ft=function(i){return new _i(this.data.ft(i))},a.prototype.add=function(i){return this.copy(this.data.remove(i).ot(i,!0))},a.prototype.delete=function(i){return this.has(i)?this.copy(this.data.remove(i)):this},a.prototype.m=function(){return this.data.m()},a.prototype.kt=function(i){var s=this;return s.size<i.size&&(s=i,i=this),i.forEach(function(f){s=s.add(f)}),s},a.prototype.isEqual=function(i){if(!(i instanceof a)||this.size!==i.size)return!1;for(var s=this.data._t(),f=i.data._t();s.At();){var p=s.It().key,b=f.It().key;if(0!==this.i(p,b))return!1}return!0},a.prototype.A=function(){var i=[];return this.forEach(function(s){i.push(s)}),i},a.prototype.toString=function(){var i=[];return this.forEach(function(s){return i.push(s)}),"SortedSet("+i.toString()+")"},a.prototype.copy=function(i){var s=new a(this.i);return s.data=i,s},a}(),_i=function(){function a(i){this.Mt=i}return a.prototype.It=function(){return this.Mt.It().key},a.prototype.At=function(){return this.Mt.At()},a}(),Qn=new Yn(C.i);function ei(){return Qn}function bi(){return ei()}var Re=new Yn(C.i);function ht(){return Re}var bt=new Yn(C.i),Mt=new Nr(C.i);function Tt(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];for(var s=Mt,f=0,p=a;f<p.length;f++){var b=p[f];s=s.add(b)}return s}var Lt=new Nr(Wt);function rn(){return Lt}var mn=function(){function a(i){this.i=i?function(s,f){return i(s,f)||C.i(s.key,f.key)}:function(s,f){return C.i(s.key,f.key)},this.Ot=ht(),this.Lt=new Yn(this.i)}return a.Bt=function(i){return new a(i.i)},a.prototype.has=function(i){return null!=this.Ot.get(i)},a.prototype.get=function(i){return this.Ot.get(i)},a.prototype.first=function(){return this.Lt.ct()},a.prototype.last=function(){return this.Lt.ut()},a.prototype.m=function(){return this.Lt.m()},a.prototype.indexOf=function(i){var s=this.Ot.get(i);return s?this.Lt.indexOf(s):-1},Object.defineProperty(a.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),a.prototype.forEach=function(i){this.Lt.ht(function(s,f){return i(s),!1})},a.prototype.add=function(i){var s=this.delete(i.key);return s.copy(s.Ot.ot(i.key,i),s.Lt.ot(i,null))},a.prototype.delete=function(i){var s=this.get(i);return s?this.copy(this.Ot.remove(i),this.Lt.remove(s)):this},a.prototype.isEqual=function(i){if(!(i instanceof a)||this.size!==i.size)return!1;for(var s=this.Lt._t(),f=i.Lt._t();s.At();){var p=s.It().key,b=f.It().key;if(!p.isEqual(b))return!1}return!0},a.prototype.toString=function(){var i=[];return this.forEach(function(s){i.push(s.toString())}),0===i.length?"DocumentSet ()":"DocumentSet (\n  "+i.join("  \n")+"\n)"},a.prototype.copy=function(i,s){var f=new a;return f.i=this.i,f.Ot=i,f.Lt=s,f},a}(),Mn=function(){function a(){this.qt=new Yn(C.i)}return a.prototype.track=function(i){var s=i.doc.key,f=this.qt.get(s);f?0!==i.type&&3===f.type?this.qt=this.qt.ot(s,i):3===i.type&&1!==f.type?this.qt=this.qt.ot(s,{type:f.type,doc:i.doc}):2===i.type&&2===f.type?this.qt=this.qt.ot(s,{type:2,doc:i.doc}):2===i.type&&0===f.type?this.qt=this.qt.ot(s,{type:0,doc:i.doc}):1===i.type&&0===f.type?this.qt=this.qt.remove(s):1===i.type&&2===f.type?this.qt=this.qt.ot(s,{type:1,doc:f.doc}):0===i.type&&1===f.type?this.qt=this.qt.ot(s,{type:2,doc:i.doc}):Pe():this.qt=this.qt.ot(s,i)},a.prototype.Ut=function(){var i=[];return this.qt.ht(function(s,f){i.push(f)}),i},a}(),Qt=function(){function a(i,s,f,p,b,D,U,Y){this.query=i,this.docs=s,this.Qt=f,this.docChanges=p,this.Wt=b,this.fromCache=D,this.jt=U,this.Kt=Y}return a.Gt=function(i,s,f,p){var b=[];return s.forEach(function(D){b.push({type:0,doc:D})}),new a(i,s,mn.Bt(s),b,f,p,!0,!1)},Object.defineProperty(a.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){if(!(this.fromCache===i.fromCache&&this.jt===i.jt&&this.Wt.isEqual(i.Wt)&&Zt(this.query,i.query)&&this.docs.isEqual(i.docs)&&this.Qt.isEqual(i.Qt)))return!1;var s=this.docChanges,f=i.docChanges;if(s.length!==f.length)return!1;for(var p=0;p<s.length;p++)if(s[p].type!==f[p].type||!s[p].doc.isEqual(f[p].doc))return!1;return!0},a}(),Tn=function(){function a(i,s,f,p,b){this.nt=i,this.zt=s,this.Ht=f,this.Yt=p,this.Jt=b}return a.Xt=function(i,s){var f=new Map;return f.set(i,fr.Zt(i,s)),new a(Hn.min(),f,rn(),ei(),Tt())},a}(),fr=function(){function a(i,s,f,p,b){this.resumeToken=i,this.te=s,this.ee=f,this.ne=p,this.se=b}return a.Zt=function(i,s){return new a(sn.B,s,Tt(),Tt(),Tt())},a}(),nr=function(a,i,s,f){this.ie=a,this.removedTargetIds=i,this.key=s,this.re=f},or=function(a,i){this.targetId=a,this.oe=i},ai=function(a,i,s,f){void 0===s&&(s=sn.B),void 0===f&&(f=null),this.state=a,this.targetIds=i,this.resumeToken=s,this.cause=f},Oe=function(){function a(){this.ae=0,this.ce=Je(),this.ue=sn.B,this.he=!1,this.le=!0}return Object.defineProperty(a.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),a.prototype.de=function(i){i.O()>0&&(this.le=!0,this.ue=i)},a.prototype.we=function(){var i=Tt(),s=Tt(),f=Tt();return this.ce.forEach(function(p,b){switch(b){case 0:i=i.add(p);break;case 2:s=s.add(p);break;case 1:f=f.add(p);break;default:Pe()}}),new fr(this.ue,this.he,i,s,f)},a.prototype.me=function(){this.le=!1,this.ce=Je()},a.prototype.Te=function(i,s){this.le=!0,this.ce=this.ce.ot(i,s)},a.prototype.Ee=function(i){this.le=!0,this.ce=this.ce.remove(i)},a.prototype.Ie=function(){this.ae+=1},a.prototype.Ae=function(){this.ae-=1},a.prototype.Re=function(){this.le=!0,this.he=!0},a}(),Ce=function(){function a(i){this.ge=i,this.Pe=new Map,this.ye=ei(),this.Ve=Ue(),this.pe=new Nr(Wt)}return a.prototype.be=function(i){for(var s=0,f=i.ie;s<f.length;s++){var p=f[s];i.re instanceof dr?this.ve(p,i.re):i.re instanceof Or&&this.Se(p,i.key,i.re)}for(var b=0,D=i.removedTargetIds;b<D.length;b++)this.Se(D[b],i.key,i.re)},a.prototype.De=function(i){var s=this;this.Ce(i,function(f){var p=s.Ne(f);switch(i.state){case 0:s.Fe(f)&&p.de(i.resumeToken);break;case 1:p.Ae(),p._e||p.me(),p.de(i.resumeToken);break;case 2:p.Ae(),p._e||s.removeTarget(f);break;case 3:s.Fe(f)&&(p.Re(),p.de(i.resumeToken));break;case 4:s.Fe(f)&&(s.xe(f),p.de(i.resumeToken));break;default:Pe()}})},a.prototype.Ce=function(i,s){var f=this;i.targetIds.length>0?i.targetIds.forEach(s):this.Pe.forEach(function(p,b){f.Fe(b)&&s(b)})},a.prototype.$e=function(i){var s=i.targetId,f=i.oe.count,p=this.ke(s);if(p){var b=p.target;if(tn(b))if(0===f){var D=new C(b.path);this.Se(s,D,new Or(D,Hn.min()))}else ut(1===f);else this.Me(s)!==f&&(this.xe(s),this.pe=this.pe.add(s))}},a.prototype.Oe=function(i){var s=this,f=new Map;this.Pe.forEach(function(D,U){var Y=s.ke(U);if(Y){if(D.te&&tn(Y.target)){var de=new C(Y.target.path);null!==s.ye.get(de)||s.Le(U,de)||s.Se(U,de,new Or(de,i))}D.fe&&(f.set(U,D.we()),D.me())}});var p=Tt();this.Ve.forEach(function(D,U){var Y=!0;U.xt(function(de){var Te=s.ke(de);return!Te||2===Te.et||(Y=!1,!1)}),Y&&(p=p.add(D))});var b=new Tn(i,f,this.pe,this.ye,p);return this.ye=ei(),this.Ve=Ue(),this.pe=new Nr(Wt),b},a.prototype.ve=function(i,s){if(this.Fe(i)){var f=this.Le(i,s.key)?2:0;this.Ne(i).Te(s.key,f),this.ye=this.ye.ot(s.key,s),this.Ve=this.Ve.ot(s.key,this.Be(s.key).add(i))}},a.prototype.Se=function(i,s,f){if(this.Fe(i)){var p=this.Ne(i);this.Le(i,s)?p.Te(s,1):p.Ee(s),this.Ve=this.Ve.ot(s,this.Be(s).delete(i)),f&&(this.ye=this.ye.ot(s,f))}},a.prototype.removeTarget=function(i){this.Pe.delete(i)},a.prototype.Me=function(i){var s=this.Ne(i).we();return this.ge.qe(i).size+s.ee.size-s.se.size},a.prototype.Ie=function(i){this.Ne(i).Ie()},a.prototype.Ne=function(i){var s=this.Pe.get(i);return s||(s=new Oe,this.Pe.set(i,s)),s},a.prototype.Be=function(i){var s=this.Ve.get(i);return s||(s=new Nr(Wt),this.Ve=this.Ve.ot(i,s)),s},a.prototype.Fe=function(i){var s=null!==this.ke(i);return s||we("WatchChangeAggregator","Detected inactive target",i),s},a.prototype.ke=function(i){var s=this.Pe.get(i);return s&&s._e?null:this.ge.Ue(i)},a.prototype.xe=function(i){var s=this;this.Pe.set(i,new Oe),this.ge.qe(i).forEach(function(f){s.Se(i,f,null)})},a.prototype.Le=function(i,s){return this.ge.qe(i).has(s)},a}();function Ue(){return new Yn(C.i)}function Je(){return new Yn(C.i)}function le(a){var i,s;return"server_timestamp"===(null===(s=((null===(i=null==a?void 0:a.mapValue)||void 0===i?void 0:i.fields)||{}).__type__)||void 0===s?void 0:s.stringValue)}function V(a){var i=a.mapValue.fields.__previous_value__;return le(i)?V(i):i}function ie(a){var i=gn(a.mapValue.fields.__local_write_time__.timestampValue);return new Jn(i.seconds,i.nanos)}var se=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ne(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?le(a)?4:10:Pe()}function Fe(a,i){var p,s=Ne(a);if(s!==Ne(i))return!1;switch(s){case 0:return!0;case 1:return a.booleanValue===i.booleanValue;case 4:return ie(a).isEqual(ie(i));case 3:return function(f,p){if("string"==typeof f.timestampValue&&"string"==typeof p.timestampValue&&f.timestampValue.length===p.timestampValue.length)return f.timestampValue===p.timestampValue;var b=gn(f.timestampValue),D=gn(p.timestampValue);return b.seconds===D.seconds&&b.nanos===D.nanos}(a,i);case 5:return a.stringValue===i.stringValue;case 6:return p=i,vn(a.bytesValue).isEqual(vn(p.bytesValue));case 7:return a.referenceValue===i.referenceValue;case 8:return function(f,p){return hr(f.geoPointValue.latitude)===hr(p.geoPointValue.latitude)&&hr(f.geoPointValue.longitude)===hr(p.geoPointValue.longitude)}(a,i);case 2:return function(f,p){if("integerValue"in f&&"integerValue"in p)return hr(f.integerValue)===hr(p.integerValue);if("doubleValue"in f&&"doubleValue"in p){var b=hr(f.doubleValue),D=hr(p.doubleValue);return b===D?nt(b)===nt(D):isNaN(b)&&isNaN(D)}return!1}(a,i);case 9:return on(a.arrayValue.values||[],i.arrayValue.values||[],Fe);case 10:return function(f,p){var b=f.mapValue.fields||{},D=p.mapValue.fields||{};if(rt(b)!==rt(D))return!1;for(var U in b)if(b.hasOwnProperty(U)&&(void 0===D[U]||!Fe(b[U],D[U])))return!1;return!0}(a,i);default:return Pe()}}function Ye(a,i){return void 0!==(a.values||[]).find(function(s){return Fe(s,i)})}function St(a,i){var p,b,D,U,s=Ne(a),f=Ne(i);if(s!==f)return Wt(s,f);switch(s){case 0:return 0;case 1:return Wt(a.booleanValue,i.booleanValue);case 2:return b=i,(D=hr((p=a).integerValue||p.doubleValue))<(U=hr(b.integerValue||b.doubleValue))?-1:D>U?1:D===U?0:isNaN(D)?isNaN(U)?0:-1:1;case 3:return Yt(a.timestampValue,i.timestampValue);case 4:return Yt(ie(a),ie(i));case 5:return Wt(a.stringValue,i.stringValue);case 6:return function(p,b){var D=vn(p),U=vn(b);return D.L(U)}(a.bytesValue,i.bytesValue);case 7:return function(p,b){for(var D=p.split("/"),U=b.split("/"),Y=0;Y<D.length&&Y<U.length;Y++){var de=Wt(D[Y],U[Y]);if(0!==de)return de}return Wt(D.length,U.length)}(a.referenceValue,i.referenceValue);case 8:return function(p,b){var D=Wt(hr(p.latitude),hr(b.latitude));return 0!==D?D:Wt(hr(p.longitude),hr(b.longitude))}(a.geoPointValue,i.geoPointValue);case 9:return function(p,b){for(var D=p.values||[],U=b.values||[],Y=0;Y<D.length&&Y<U.length;++Y){var de=St(D[Y],U[Y]);if(de)return de}return Wt(D.length,U.length)}(a.arrayValue,i.arrayValue);case 10:return function(p,b){var D=p.fields||{},U=Object.keys(D),Y=b.fields||{},de=Object.keys(Y);U.sort(),de.sort();for(var Te=0;Te<U.length&&Te<de.length;++Te){var Ge=Wt(U[Te],de[Te]);if(0!==Ge)return Ge;var Xe=St(D[U[Te]],Y[de[Te]]);if(0!==Xe)return Xe}return Wt(U.length,de.length)}(a.mapValue,i.mapValue);default:throw Pe()}}function Yt(a,i){if("string"==typeof a&&"string"==typeof i&&a.length===i.length)return Wt(a,i);var s=gn(a),f=gn(i),p=Wt(s.seconds,f.seconds);return 0!==p?p:Wt(s.nanos,f.nanos)}function kn(a){return cn(a)}function cn(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?"time("+(p=gn(a.timestampValue)).seconds+","+p.nanos+")":"stringValue"in a?a.stringValue:"bytesValue"in a?vn(a.bytesValue).toBase64():"referenceValue"in a?C.C(a.referenceValue).toString():"geoPointValue"in a?"geo("+(i=a.geoPointValue).latitude+","+i.longitude+")":"arrayValue"in a?function(f){for(var p="[",b=!0,D=0,U=f.values||[];D<U.length;D++)b?b=!1:p+=",",p+=cn(U[D]);return p+"]"}(a.arrayValue):"mapValue"in a?function(f){for(var p="{",b=!0,D=0,U=Object.keys(f.fields||{}).sort();D<U.length;D++){var Y=U[D];b?b=!1:p+=",",p+=Y+":"+cn(f.fields[Y])}return p+"}"}(a.mapValue):Pe();var p,i}function gn(a){if(ut(!!a),"string"==typeof a){var i=0,s=se.exec(a);if(ut(!!s),s[1]){var f=s[1];f=(f+"000000000").substr(0,9),i=Number(f)}var p=new Date(a);return{seconds:Math.floor(p.getTime()/1e3),nanos:i}}return{seconds:hr(a.seconds),nanos:hr(a.nanos)}}function hr(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function vn(a){return"string"==typeof a?sn.fromBase64String(a):sn.fromUint8Array(a)}function wi(a,i){return{referenceValue:"projects/"+a.projectId+"/databases/"+a.database+"/documents/"+i.path.R()}}function qn(a){return!!a&&"integerValue"in a}function ko(a){return!!a&&"arrayValue"in a}function ri(a){return!!a&&"nullValue"in a}function pi(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Pi(a){return!!a&&"mapValue"in a}var uo={asc:"ASCENDING",desc:"DESCENDING"},xi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fr=function(a,i){this.U=a,this.Qe=i};function mo(a){return{integerValue:""+a}}function Go(a,i){if(a.Qe){if(isNaN(i))return{doubleValue:"NaN"};if(i===1/0)return{doubleValue:"Infinity"};if(i===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nt(i)?"-0":i}}function Mi(a,i){return ye(i)?mo(i):Go(a,i)}function yo(a,i){return a.Qe?new Date(1e3*i.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+i.nanoseconds).slice(-9)+"Z":{seconds:""+i.seconds,nanos:i.nanoseconds}}function Zi(a,i){return a.Qe?i.toBase64():i.toUint8Array()}function Ki(a,i){return yo(a,i.Z())}function ii(a){return ut(!!a),Hn.J((s=gn(a),new Jn(s.seconds,s.nanos)));var s}function Pr(a,i){return(s=a,new Ot(["projects",s.projectId,"databases",s.database])).child("documents").child(i).R();var s}function ui(a){var i=Ot.g(a);return ut(Ys(i)),i}function Zn(a,i){return Pr(a.U,i.path)}function Un(a,i){var s=ui(i);return ut(s.get(1)===a.U.projectId),ut(!s.get(3)&&!a.U.database||s.get(3)===a.U.database),new C(gi(s))}function Si(a,i){return Pr(a.U,i)}function Qi(a){var i=ui(a);return 4===i.length?Ot.P():gi(i)}function Cr(a){return new Ot(["projects",a.U.projectId,"databases",a.U.database]).R()}function gi(a){return ut(a.length>4&&"documents"===a.get(4)),a.u(5)}function Wo(a,i,s){return{name:Zn(a,i),fields:s.proto.mapValue.fields}}function Ji(a,i){var s,p;if(i instanceof bn)s={update:Wo(a,i.key,i.value)};else if(i instanceof Sn)s={delete:Zn(a,i.key)};else if(i instanceof yn)s={update:Wo(a,i.key,i.data),updateMask:fs(i.We)};else if(i instanceof lr)s={transform:{document:Zn(a,i.key),fieldTransforms:i.fieldTransforms.map(function(f){return function(p,b){var D=b.transform;if(D instanceof Xi)return{fieldPath:b.field.R(),setToServerValue:"REQUEST_TIME"};if(D instanceof Q)return{fieldPath:b.field.R(),appendMissingElements:{values:D.elements}};if(D instanceof he)return{fieldPath:b.field.R(),removeAllFromArray:{values:D.elements}};if(D instanceof He)return{fieldPath:b.field.R(),increment:D.je};throw Pe()}(0,f)})}};else{if(!(i instanceof Ei))return Pe();s={verify:Zn(a,i.key)}}return i.Ge.Ke||(s.currentDocument=void 0!==(p=i.Ge).updateTime?{updateTime:Ki(a,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:Pe()),s}function Ln(a,i){var Te,s=i.currentDocument?void 0!==(Te=i.currentDocument).updateTime?wn.updateTime(ii(Te.updateTime)):void 0!==Te.exists?wn.exists(Te.exists):wn.ze():wn.ze();if(i.update){var f=Un(a,i.update.name),p=new Ii({mapValue:{fields:i.update.fields}});if(i.updateMask){var b=function(Te){return new qt((Te.fieldPaths||[]).map(function(Xe){return x.S(Xe)}))}(i.updateMask);return new yn(f,p,b,s)}return new bn(f,p,s)}if(i.delete){var D=Un(a,i.delete);return new Sn(D,s)}if(i.transform){var U=Un(a,i.transform.document),Y=i.transform.fieldTransforms.map(function(Te){return function(Ge,Xe){var yt=null;"setToServerValue"in Xe?(ut("REQUEST_TIME"===Xe.setToServerValue),yt=new Xi):"appendMissingElements"in Xe?yt=new Q(Xe.appendMissingElements.values||[]):"removeAllFromArray"in Xe?yt=new he(Xe.removeAllFromArray.values||[]):"increment"in Xe?yt=new He(Ge,Xe.increment):Pe();var Fn=x.S(Xe.fieldPath);return new $t(Fn,yt)}(a,Te)});return ut(!0===s.exists),new lr(U,Y)}if(i.verify){var de=Un(a,i.verify);return new Ei(de,s)}return Pe()}function Xn(a,i){return{documents:[Si(a,i.path)]}}function Xo(a,i){var s={structuredQuery:{}},f=i.path;null!==i.collectionGroup?(s.parent=Si(a,f),s.structuredQuery.from=[{collectionId:i.collectionGroup,allDescendants:!0}]):(s.parent=Si(a,f.h()),s.structuredQuery.from=[{collectionId:f._()}]);var p=function(U){if(0!==U.length){var Y=U.map(function(de){return function(Te){if("=="===Te.op){if(pi(Te.value))return{unaryFilter:{field:to(Te.field),op:"IS_NAN"}};if(ri(Te.value))return{unaryFilter:{field:to(Te.field),op:"IS_NULL"}}}else if("!="===Te.op){if(pi(Te.value))return{unaryFilter:{field:to(Te.field),op:"IS_NOT_NAN"}};if(ri(Te.value))return{unaryFilter:{field:to(Te.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:to(Te.field),op:Wi(Te.op),value:Te.value}}}(de)});return 1===Y.length?Y[0]:{compositeFilter:{op:"AND",filters:Y}}}}(i.filters);p&&(s.structuredQuery.where=p);var b=function(U){if(0!==U.length)return U.map(function(Y){return{field:to((de=Y).field),direction:rr(de.dir)};var de})}(i.orderBy);b&&(s.structuredQuery.orderBy=b);var Y,D=(Y=i.limit,a.Qe||Rn(Y)?Y:{value:Y});return null!==D&&(s.structuredQuery.limit=D),i.startAt&&(s.structuredQuery.startAt=eo(i.startAt)),i.endAt&&(s.structuredQuery.endAt=eo(i.endAt)),s}function Gi(a){var i=Qi(a.parent),s=a.structuredQuery,f=s.from?s.from.length:0,p=null;if(f>0){ut(1===f);var b=s.from[0];b.allDescendants?p=b.collectionId:i=i.child(b.collectionId)}var D=[];s.where&&(D=Do(s.where));var U=[];s.orderBy&&(U=s.orderBy.map(function(Ge){return new zo(Yi((Xe=Ge).field),function(yt){switch(yt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Xe.direction));var Xe}));var Ge,Xe,Y=null;s.limit&&(Y=Rn(Xe="object"==typeof(Ge=s.limit)?Ge.value:Ge)?null:Xe);var de=null;s.startAt&&(de=oi(s.startAt));var Te=null;return s.endAt&&(Te=oi(s.endAt)),Di(ha(i,p,U,D,Y,"F",de,Te))}function Do(a){return a?void 0!==a.unaryFilter?[Lo(a)]:void 0!==a.fieldFilter?[Fo(a)]:void 0!==a.compositeFilter?a.compositeFilter.filters.map(function(i){return Do(i)}).reduce(function(i,s){return i.concat(s)}):Pe():[]}function eo(a){return{before:a.before,values:a.position}}function oi(a){return new ki(a.values||[],!!a.before)}function rr(a){return uo[a]}function Wi(a){return xi[a]}function to(a){return{fieldPath:a.R()}}function Yi(a){return x.S(a.fieldPath)}function Fo(a){return jr.create(Yi(a.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Pe()}}(a.fieldFilter.op),a.fieldFilter.value)}function Lo(a){switch(a.unaryFilter.op){case"IS_NAN":var i=Yi(a.unaryFilter.field);return jr.create(i,"==",{doubleValue:NaN});case"IS_NULL":var s=Yi(a.unaryFilter.field);return jr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var f=Yi(a.unaryFilter.field);return jr.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var p=Yi(a.unaryFilter.field);return jr.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Pe()}}function fs(a){var i=[];return a.fields.forEach(function(s){return i.push(s.R())}),{fieldPaths:i}}function Ys(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}var $r=function(){this.He=void 0};function qo(a,i,s){return a instanceof Xi?(b={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(f=s).seconds,nanos:f.nanoseconds}}}},(p=i)&&(b.fields.__previous_value__=p),{mapValue:b}):a instanceof Q?G(a,i):a instanceof he?Ae(a,i):function(f,p){var b=Zo(f,p),D=it(b)+it(f.je);return qn(b)&&qn(f.je)?mo(D):Go(f.serializer,D)}(a,i);var f,p,b}function co(a,i,s){return a instanceof Q?G(a,i):a instanceof he?Ae(a,i):s}function Zo(a,i){return a instanceof He?qn(s=i)||(f=s)&&"doubleValue"in f?i:{integerValue:0}:null;var f,s}var Xi=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return M.__extends(i,a),i}($r),Q=function(a){function i(s){var f=this;return(f=a.call(this)||this).elements=s,f}return M.__extends(i,a),i}($r);function G(a,i){for(var s=Pt(i),f=function(D){s.some(function(U){return Fe(U,D)})||s.push(D)},p=0,b=a.elements;p<b.length;p++)f(b[p]);return{arrayValue:{values:s}}}var he=function(a){function i(s){var f=this;return(f=a.call(this)||this).elements=s,f}return M.__extends(i,a),i}($r);function Ae(a,i){for(var s=Pt(i),f=function(D){s=s.filter(function(U){return!Fe(U,D)})},p=0,b=a.elements;p<b.length;p++)f(b[p]);return{arrayValue:{values:s}}}var He=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).serializer=s,p.je=f,p}return M.__extends(i,a),i}($r);function it(a){return hr(a.integerValue||a.doubleValue)}function Pt(a){return ko(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}var qt=function(){function a(i){this.fields=i,i.sort(x.i)}return a.prototype.Ye=function(i){for(var s=0,f=this.fields;s<f.length;s++)if(f[s].T(i))return!0;return!1},a.prototype.isEqual=function(i){return on(this.fields,i.fields,function(s,f){return s.isEqual(f)})},a}(),$t=function(a,i){this.field=a,this.transform=i},ln=function(a,i){this.version=a,this.transformResults=i},wn=function(){function a(i,s){this.updateTime=i,this.exists=s}return a.ze=function(){return new a},a.exists=function(i){return new a(void 0,i)},a.updateTime=function(i){return new a(i)},Object.defineProperty(a.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){return this.exists===i.exists&&(this.updateTime?!!i.updateTime&&this.updateTime.isEqual(i.updateTime):!i.updateTime)},a}();function q(a,i){return void 0!==a.updateTime?i instanceof dr&&i.version.isEqual(a.updateTime):void 0===a.exists||a.exists===i instanceof dr}var te=function(){};function $(a,i,s){return a instanceof bn?new dr((f=a).key,s.version,f.value,{hasCommittedMutations:!0}):a instanceof yn?function(f,p,b){if(!q(f.Ge,p))return new zr(f.key,b.version);var D=wr(f,p);return new dr(f.key,b.version,D,{hasCommittedMutations:!0})}(a,i,s):a instanceof lr?function(f,p,b){if(ut(null!=b.transformResults),!q(f.Ge,p))return new zr(f.key,b.version);var D=cr(0,p),U=function(Te,Ge,Xe){var yt=[];ut(Te.length===Xe.length);for(var Ft=0;Ft<Xe.length;Ft++){var Jt=Te[Ft],Fn=Jt.transform,jn=null;Ge instanceof dr&&(jn=Ge.field(Jt.field)),yt.push(co(Fn,jn,Xe[Ft]))}return yt}(f.fieldTransforms,p,b.transformResults),Y=b.version,de=Gn(f,D.data(),U);return new dr(f.key,Y,de,{hasCommittedMutations:!0})}(a,i,s):function(f,p,b){return new Or(f.key,b.version,{hasCommittedMutations:!0})}(a,0,s);var f}function fe(a,i,s,f){return a instanceof bn?function(p,b){if(!q(p.Ge,b))return b;var D=Xt(b);return new dr(p.key,D,p.value,{Je:!0})}(a,i):a instanceof yn?function(p,b){if(!q(p.Ge,b))return b;var D=Xt(b),U=wr(p,b);return new dr(p.key,D,U,{Je:!0})}(a,i):a instanceof lr?function(p,b,D,U){if(!q(p.Ge,b))return b;var Y=cr(0,b),de=function(Ge,Xe,yt,Ft){for(var Jt=[],Fn=0,jn=Ge;Fn<jn.length;Fn++){var er=jn[Fn],Tr=er.transform,Qr=null;yt instanceof dr&&(Qr=yt.field(er.field)),null===Qr&&Ft instanceof dr&&(Qr=Ft.field(er.field)),Jt.push(qo(Tr,Qr,Xe))}return Jt}(p.fieldTransforms,D,b,U),Te=Gn(p,Y.data(),de);return new dr(p.key,Y.version,Te,{Je:!0})}(a,i,f,s):q((p=a).Ge,b=i)?new Or(p.key,Hn.min()):b;var p,b}function je(a,i){return a instanceof lr?function(s,f){for(var p=null,b=0,D=s.fieldTransforms;b<D.length;b++){var U=D[b],Y=f instanceof dr?f.field(U.field):void 0,de=Zo(U.transform,Y||null);null!=de&&(p=null==p?(new ti).set(U.field,de):p.set(U.field,de))}return p?p.Xe():null}(a,i):null}function Dt(a,i){return a.type===i.type&&!!a.key.isEqual(i.key)&&!!a.Ge.isEqual(i.Ge)&&(0===a.type?a.value.isEqual(i.value):1===a.type?a.data.isEqual(i.data)&&a.We.isEqual(i.We):2!==a.type||on(a.fieldTransforms,a.fieldTransforms,function(s,f){return(p=s).field.isEqual((b=f).field)&&(U=b.transform,(D=p.transform)instanceof Q&&U instanceof Q||D instanceof he&&U instanceof he?on(D.elements,U.elements,Fe):D instanceof He&&U instanceof He?Fe(D.je,U.je):D instanceof Xi&&U instanceof Xi);var p,b,D,U}))}function Xt(a){return a instanceof dr?a.version:Hn.min()}var bn=function(a){function i(s,f,p){var b=this;return(b=a.call(this)||this).key=s,b.value=f,b.Ge=p,b.type=0,b}return M.__extends(i,a),i}(te),yn=function(a){function i(s,f,p,b){var D=this;return(D=a.call(this)||this).key=s,D.data=f,D.We=p,D.Ge=b,D.type=1,D}return M.__extends(i,a),i}(te);function wr(a,i){return s=a,f=i instanceof dr?i.data():Ii.empty(),p=new ti(f),s.We.fields.forEach(function(b){if(!b.m()){var D=s.data.field(b);null!==D?p.set(b,D):p.delete(b)}}),p.Xe();var s,f,p}var lr=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).key=s,p.fieldTransforms=f,p.type=2,p.Ge=wn.exists(!0),p}return M.__extends(i,a),i}(te);function cr(a,i){return i}function Gn(a,i,s){for(var f=new ti(i),p=0;p<a.fieldTransforms.length;p++)f.set(a.fieldTransforms[p].field,s[p]);return f.Xe()}var Sn=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).key=s,p.Ge=f,p.type=3,p}return M.__extends(i,a),i}(te),Ei=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).key=s,p.Ge=f,p.type=4,p}return M.__extends(i,a),i}(te),Ii=function(){function a(i){this.proto=i}return a.empty=function(){return new a({mapValue:{}})},a.prototype.field=function(i){if(i.m())return this.proto;for(var s=this.proto,f=0;f<i.length-1;++f)if(!s.mapValue.fields||!Pi(s=s.mapValue.fields[i.get(f)]))return null;return(s=(s.mapValue.fields||{})[i._()])||null},a.prototype.isEqual=function(i){return Fe(this.proto,i.proto)},a}(),ti=function(){function a(i){void 0===i&&(i=Ii.empty()),this.Ze=i,this.tn=new Map}return a.prototype.set=function(i,s){return this.en(i,s),this},a.prototype.delete=function(i){return this.en(i,null),this},a.prototype.en=function(i,s){for(var f=this.tn,p=0;p<i.length-1;++p){var b=i.get(p),D=f.get(b);D instanceof Map?f=D:D&&10===Ne(D)?(D=new Map(Object.entries(D.mapValue.fields||{})),f.set(b,D),f=D):(D=new Map,f.set(b,D),f=D)}f.set(i._(),s)},a.prototype.Xe=function(){var i=this.nn(x.P(),this.tn);return null!=i?new Ii(i):this.Ze},a.prototype.nn=function(i,s){var f=this,p=!1,b=this.Ze.field(i),D=Pi(b)?Object.assign({},b.mapValue.fields):{};return s.forEach(function(U,Y){if(U instanceof Map){var de=f.nn(i.child(Y),U);null!=de&&(D[Y]=de,p=!0)}else null!==U?(D[Y]=U,p=!0):D.hasOwnProperty(Y)&&(delete D[Y],p=!0)}),p?{mapValue:{fields:D}}:null},a}();function hs(a){var i=[];return Ut(a.fields||{},function(s,f){var p=new x([s]);if(Pi(f)){var b=hs(f.mapValue).fields;if(0===b.length)i.push(p);else for(var D=0,U=b;D<U.length;D++)i.push(p.child(U[D]))}else i.push(p)}),new qt(i)}var Br=function(a,i){this.key=a,this.version=i},dr=function(a){function i(s,f,p,b){var D=this;return(D=a.call(this,s,f)||this).sn=p,D.Je=!!b.Je,D.hasCommittedMutations=!!b.hasCommittedMutations,D}return M.__extends(i,a),i.prototype.field=function(s){return this.sn.field(s)},i.prototype.data=function(){return this.sn},i.prototype.rn=function(){return this.sn.proto},i.prototype.isEqual=function(s){return s instanceof i&&this.key.isEqual(s.key)&&this.version.isEqual(s.version)&&this.Je===s.Je&&this.hasCommittedMutations===s.hasCommittedMutations&&this.sn.isEqual(s.sn)},i.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),i}(Br),Or=function(a){function i(s,f,p){var b=this;return(b=a.call(this,s,f)||this).hasCommittedMutations=!(!p||!p.hasCommittedMutations),b}return M.__extends(i,a),i.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(s){return s instanceof i&&s.hasCommittedMutations===this.hasCommittedMutations&&s.version.isEqual(this.version)&&s.key.isEqual(this.key)},i}(Br),zr=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return M.__extends(i,a),i.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(s){return s instanceof i&&s.version.isEqual(this.version)&&s.key.isEqual(this.key)},i}(Br),Ao=function(a,i,s,f,p,b,D,U){void 0===i&&(i=null),void 0===s&&(s=[]),void 0===f&&(f=[]),void 0===p&&(p=null),void 0===b&&(b="F"),void 0===D&&(D=null),void 0===U&&(U=null),this.path=a,this.collectionGroup=i,this.on=s,this.filters=f,this.limit=p,this.an=b,this.startAt=D,this.endAt=U,this.cn=null,this.un=null};function ha(a,i,s,f,p,b,D,U){return new Ao(a,i,s,f,p,b,D,U)}function Bi(a){return new Ao(a)}function Ls(a){return!Rn(a.limit)&&"F"===a.an}function Xr(a){return!Rn(a.limit)&&"L"===a.an}function Bn(a){return a.on.length>0?a.on[0].field:null}function Pa(a){for(var i=0,s=a.filters;i<s.length;i++){var f=s[i];if(f.hn())return f.field}return null}function Jo(a){return null!==a.collectionGroup}function no(a){var i=ze(a);if(null===i.cn){i.cn=[];var s=Pa(i),f=Bn(i);if(null!==s&&null===f)s.p()||i.cn.push(new zo(s)),i.cn.push(new zo(x.v(),"asc"));else{for(var p=!1,b=0,D=i.on;b<D.length;b++){var U=D[b];i.cn.push(U),U.field.p()&&(p=!0)}if(!p){var Y=i.on.length>0?i.on[i.on.length-1].dir:"asc";i.cn.push(new zo(x.v(),Y))}}}return i.cn}function Di(a){var i=ze(a);if(!i.un)if("F"===i.an)i.un=wt(i.path,i.collectionGroup,no(i),i.filters,i.limit,i.startAt,i.endAt);else{for(var s=[],f=0,p=no(i);f<p.length;f++){var b=p[f];s.push(new zo(b.field,"desc"===b.dir?"asc":"desc"))}var U=i.endAt?new ki(i.endAt.position,!i.endAt.before):null,Y=i.startAt?new ki(i.startAt.position,!i.startAt.before):null;i.un=wt(i.path,i.collectionGroup,s,i.filters,i.limit,U,Y)}return i.un}function Ro(a,i,s){return new Ao(a.path,a.collectionGroup,a.on.slice(),a.filters.slice(),i,s,a.startAt,a.endAt)}function da(a,i){return new Ao(a.path,a.collectionGroup,a.on.slice(),a.filters.slice(),a.limit,a.an,i,a.endAt)}function xa(a,i){return new Ao(a.path,a.collectionGroup,a.on.slice(),a.filters.slice(),a.limit,a.an,a.startAt,i)}function Zt(a,i){return nn(Di(a),Di(i))&&a.an===i.an}function br(a){return ct(Di(a))+"|lt:"+a.an}function _o(a){return"Query(target="+(s=(i=Di(a)).path.R(),null!==i.collectionGroup&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=", filters: ["+i.filters.map(function(f){return(p=f).field.R()+" "+p.op+" "+kn(p.value);var p}).join(", ")+"]"),Rn(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=", orderBy: ["+i.orderBy.map(function(f){return(p=f).field.R()+" ("+p.dir+")";var p}).join(", ")+"]"),i.startAt&&(s+=", startAt: "+bo(i.startAt)),i.endAt&&(s+=", endAt: "+bo(i.endAt)),"Target("+s+"); limitType=")+a.an+")";var i,s}function Lr(a,i){return p=(f=i).key.path,(null!==(s=a).collectionGroup?f.key.N(s.collectionGroup)&&s.path.T(p):C.F(s.path)?s.path.isEqual(p):s.path.I(p))&&function(s,f){for(var p=0,b=s.on;p<b.length;p++){var D=b[p];if(!D.field.p()&&null===f.field(D.field))return!1}return!0}(a,i)&&function(s,f){for(var p=0,b=s.filters;p<b.length;p++)if(!b[p].matches(f))return!1;return!0}(a,i)&&function(s,f){return!(s.startAt&&!lo(s.startAt,no(s),f)||s.endAt&&lo(s.endAt,no(s),f))}(a,i);var s,f,p}function $n(a){return function(i,s){for(var f=!1,p=0,b=no(a);p<b.length;p++){var D=b[p],U=No(D,i,s);if(0!==U)return U;f=f||D.field.p()}return 0}}var jr=function(a){function i(s,f,p){var b=this;return(b=a.call(this)||this).field=s,b.op=f,b.value=p,b}return M.__extends(i,a),i.create=function(s,f,p){if(s.p())return"in"===f||"not-in"===f?this.ln(s,f,p):new vi(s,f,p);if(ri(p)){if("=="!==f&&"!="!==f)throw new z(oe.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new i(s,f,p)}if(pi(p)){if("=="!==f&&"!="!==f)throw new z(oe.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new i(s,f,p)}return"array-contains"===f?new pa(s,p):"in"===f?new Xs(s,p):"not-in"===f?new $o(s,p):"array-contains-any"===f?new Ai(s,p):new i(s,f,p)},i.ln=function(s,f,p){return"in"===f?new wo(s,p):new ds(s,p)},i.prototype.matches=function(s){var f=s.field(this.field);return"!="===this.op?null!==f&&this._n(St(f,this.value)):null!==f&&Ne(this.value)===Ne(f)&&this._n(St(f,this.value))},i.prototype._n=function(s){switch(this.op){case"<":return s<0;case"<=":return s<=0;case"==":return 0===s;case"!=":return 0!==s;case">":return s>0;case">=":return s>=0;default:return Pe()}},i.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},i}(function(){}),vi=function(a){function i(s,f,p){var b=this;return(b=a.call(this,s,f,p)||this).key=C.C(p.referenceValue),b}return M.__extends(i,a),i.prototype.matches=function(s){var f=C.i(s.key,this.key);return this._n(f)},i}(jr),wo=function(a){function i(s,f){var p=this;return(p=a.call(this,s,"in",f)||this).keys=es(0,f),p}return M.__extends(i,a),i.prototype.matches=function(s){return this.keys.some(function(f){return f.isEqual(s.key)})},i}(jr),ds=function(a){function i(s,f){var p=this;return(p=a.call(this,s,"not-in",f)||this).keys=es(0,f),p}return M.__extends(i,a),i.prototype.matches=function(s){return!this.keys.some(function(f){return f.isEqual(s.key)})},i}(jr);function es(a,i){var s;return((null===(s=i.arrayValue)||void 0===s?void 0:s.values)||[]).map(function(f){return C.C(f.referenceValue)})}var pa=function(a){function i(s,f){return a.call(this,s,"array-contains",f)||this}return M.__extends(i,a),i.prototype.matches=function(s){var f=s.field(this.field);return ko(f)&&Ye(f.arrayValue,this.value)},i}(jr),Xs=function(a){function i(s,f){return a.call(this,s,"in",f)||this}return M.__extends(i,a),i.prototype.matches=function(s){var f=s.field(this.field);return null!==f&&Ye(this.value.arrayValue,f)},i}(jr),$o=function(a){function i(s,f){return a.call(this,s,"not-in",f)||this}return M.__extends(i,a),i.prototype.matches=function(s){if(Ye(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var f=s.field(this.field);return null!==f&&!Ye(this.value.arrayValue,f)},i}(jr),Ai=function(a){function i(s,f){return a.call(this,s,"array-contains-any",f)||this}return M.__extends(i,a),i.prototype.matches=function(s){var f=this,p=s.field(this.field);return!(!ko(p)||!p.arrayValue.values)&&p.arrayValue.values.some(function(b){return Ye(f.value.arrayValue,b)})},i}(jr),ki=function(a,i){this.position=a,this.before=i};function bo(a){return(a.before?"b":"a")+":"+a.position.map(function(i){return kn(i)}).join(",")}function lo(a,i,s){for(var f=0,p=0;p<a.position.length;p++){var b=i[p],D=a.position[p];if(f=b.field.p()?C.i(C.C(D.referenceValue),s.key):St(D,s.field(b.field)),"desc"===b.dir&&(f*=-1),0!==f)break}return a.before?f<=0:f<0}function Fi(a,i){if(null===a)return null===i;if(null===i||a.before!==i.before||a.position.length!==i.position.length)return!1;for(var s=0;s<a.position.length;s++)if(!Fe(a.position[s],i.position[s]))return!1;return!0}var zo=function(a,i){void 0===i&&(i="asc"),this.field=a,this.dir=i};function No(a,i,s){var p,D,U,Y,f=a.field.p()?C.i(i.key,s.key):(D=s,U=i.field(p=a.field),Y=D.field(p),null!==U&&null!==Y?St(U,Y):Pe());switch(a.dir){case"asc":return f;case"desc":return-1*f;default:return Pe()}}function Us(a,i){return a.dir===i.dir&&a.field.isEqual(i.field)}var Kr=function(){var a=this;this.promise=new Promise(function(i,s){a.resolve=i,a.reject=s})},js=function(){function a(i,s,f,p,b){void 0===f&&(f=1e3),void 0===p&&(p=1.5),void 0===b&&(b=6e4),this.fn=i,this.dn=s,this.wn=f,this.mn=p,this.Tn=b,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return a.prototype.reset=function(){this.En=0},a.prototype.Rn=function(){this.En=this.Tn},a.prototype.gn=function(i){var s=this;this.cancel();var f=Math.floor(this.En+this.Pn()),p=Math.max(0,Date.now()-this.An),b=Math.max(0,f-p);b>0&&we("ExponentialBackoff","Backing off for "+b+" ms (base delay: "+this.En+" ms, delay with jitter: "+f+" ms, last attempt: "+p+" ms ago)"),this.In=this.fn.yn(this.dn,b,function(){return s.An=Date.now(),i()}),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},a.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},a.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},a.prototype.Pn=function(){return(Math.random()-.5)*this.En},a}(),dn=function(){function a(i){var s=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,i(function(f){s.Sn=!0,s.result=f,s.bn&&s.bn(f)},function(f){s.Sn=!0,s.error=f,s.vn&&s.vn(f)})}return a.prototype.catch=function(i){return this.next(void 0,i)},a.prototype.next=function(i,s){var f=this;return this.Dn&&Pe(),this.Dn=!0,this.Sn?this.error?this.Cn(s,this.error):this.Nn(i,this.result):new a(function(p,b){f.bn=function(D){f.Nn(i,D).next(p,b)},f.vn=function(D){f.Cn(s,D).next(p,b)}})},a.prototype.Fn=function(){var i=this;return new Promise(function(s,f){i.next(s,f)})},a.prototype.xn=function(i){try{var s=i();return s instanceof a?s:a.resolve(s)}catch(f){return a.reject(f)}},a.prototype.Nn=function(i,s){return i?this.xn(function(){return i(s)}):a.resolve(s)},a.prototype.Cn=function(i,s){return i?this.xn(function(){return i(s)}):a.reject(s)},a.resolve=function(i){return new a(function(s,f){s(i)})},a.reject=function(i){return new a(function(s,f){f(i)})},a.$n=function(i){return new a(function(s,f){var p=0,b=0,D=!1;i.forEach(function(U){++p,U.next(function(){++b,D&&b===p&&s()},function(Y){return f(Y)})}),D=!0,b===p&&s()})},a.kn=function(i){for(var s=a.resolve(!1),f=function(D){s=s.next(function(U){return U?a.resolve(U):D()})},p=0,b=i;p<b.length;p++)f(b[p]);return s},a.forEach=function(i,s){var f=this,p=[];return i.forEach(function(b,D){p.push(s.call(f,b,D))}),this.$n(p)},a}(),Hr=function(){function a(i,s,f){this.name=i,this.version=s,this.Mn=f,12.2===a.On(mt.getUA())&&ke("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return a.delete=function(i){return we("SimpleDb","Removing database:",i),ts(window.indexedDB.deleteDatabase(i)).Fn()},a.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(a.Bn())return!0;var i=mt.getUA(),s=a.On(i),f=0<s&&s<10,p=a.qn(i),b=0<p&&p<4.5;return!(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0||i.indexOf("Edge/")>0||f||b)},a.Bn=function(){var i;return"undefined"!=typeof process&&"YES"===(null===(i=process.env)||void 0===i?void 0:i.Un)},a.Qn=function(i,s){return i.store(s)},a.On=function(i){var s=i.match(/i(?:phone|pad|pod) os ([\d_]+)/i),f=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(f)},a.qn=function(i){var s=i.match(/Android ([\d.]+)/i),f=s?s[1].split(".").slice(0,2).join("."):"-1";return Number(f)},a.prototype.Wn=function(i){return M.__awaiter(this,void 0,void 0,function(){var s,f=this;return M.__generator(this,function(p){switch(p.label){case 0:return this.db?[3,2]:(we("SimpleDb","Opening database:",this.name),s=this,[4,new Promise(function(b,D){var U=indexedDB.open(f.name,f.version);U.onsuccess=function(Y){b(Y.target.result)},U.onblocked=function(){D(new Js(i,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},U.onerror=function(Y){var de=Y.target.error;D("VersionError"===de.name?new z(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Js(i,de))},U.onupgradeneeded=function(Y){we("SimpleDb",'Database "'+f.name+'" requires upgrade from version:',Y.oldVersion),f.Mn.createOrUpgrade(Y.target.result,U.transaction,Y.oldVersion,f.version).next(function(){we("SimpleDb","Database upgrade to version "+f.version+" complete")})}})]);case 1:s.db=p.sent(),p.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(b){return f.jn(b)}),this.db)]}})})},a.prototype.Kn=function(i){this.jn=i,this.db&&(this.db.onversionchange=function(s){return i(s)})},a.prototype.runTransaction=function(i,s,f,p){return M.__awaiter(this,void 0,void 0,function(){var b,D,U,Y,de;return M.__generator(this,function(Te){switch(Te.label){case 0:b="readonly"===s,D=0,U=function(){var Ge,Xe,yt,Ft,Jt;return M.__generator(this,function(Fn){switch(Fn.label){case 0:++D,Fn.label=1;case 1:return Fn.trys.push([1,4,,5]),[4,Y.Wn(i)];case 2:return Y.db=Fn.sent(),Ge=ro.open(Y.db,i,b?"readonly":"readwrite",f),Xe=p(Ge).catch(function(jn){return Ge.abort(jn),dn.reject(jn)}).Fn(),yt={},Xe.catch(function(){}),[4,Ge.Gn];case 3:return[2,(yt.value=(Fn.sent(),Xe),yt)];case 4:return we("SimpleDb","Transaction failed with error:",(Ft=Fn.sent()).message,"Retrying:",Jt="FirebaseError"!==Ft.name&&D<3),Y.close(),Jt?[3,5]:[2,{value:Promise.reject(Ft)}];case 5:return[2]}})},Y=this,Te.label=1;case 1:return[5,U()];case 2:if("object"==typeof(de=Te.sent()))return[2,de.value];Te.label=3;case 3:return[3,1];case 4:return[2]}})})},a.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},a}(),Zs=function(){function a(i){this.zn=i,this.Hn=!1,this.Yn=null}return Object.defineProperty(a.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"cursor",{set:function(i){this.zn=i},enumerable:!1,configurable:!0}),a.prototype.done=function(){this.Hn=!0},a.prototype.Xn=function(i){this.Yn=i},a.prototype.delete=function(){return ts(this.zn.delete())},a}(),Js=function(a){function i(s,f){var p=this;return(p=a.call(this,oe.UNAVAILABLE,"IndexedDB transaction '"+s+"' failed: "+f)||this).name="IndexedDbTransactionError",p}return M.__extends(i,a),i}(z);function Ko(a){return"IndexedDbTransactionError"===a.name}var ro=function(){function a(i,s){var f=this;this.action=i,this.transaction=s,this.aborted=!1,this.Zn=new Kr,this.transaction.oncomplete=function(){f.Zn.resolve()},this.transaction.onabort=function(){s.error?f.Zn.reject(new Js(i,s.error)):f.Zn.resolve()},this.transaction.onerror=function(p){var b=m(p.target.error);f.Zn.reject(new Js(i,b))}}return a.open=function(i,s,f,p){try{return new a(s,i.transaction(p,f))}catch(b){throw new Js(s,b)}},Object.defineProperty(a.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),a.prototype.abort=function(i){i&&this.Zn.reject(i),this.aborted||(we("SimpleDb","Aborting transaction:",i?i.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},a.prototype.store=function(i){var s=this.transaction.objectStore(i);return new Ma(s)},a}(),Ma=function(){function a(i){this.store=i}return a.prototype.put=function(i,s){var f;return void 0!==s?(we("SimpleDb","PUT",this.store.name,i,s),f=this.store.put(s,i)):(we("SimpleDb","PUT",this.store.name,"<auto-key>",i),f=this.store.put(i)),ts(f)},a.prototype.add=function(i){return we("SimpleDb","ADD",this.store.name,i,i),ts(this.store.add(i))},a.prototype.get=function(i){var s=this;return ts(this.store.get(i)).next(function(f){return void 0===f&&(f=null),we("SimpleDb","GET",s.store.name,i,f),f})},a.prototype.delete=function(i){return we("SimpleDb","DELETE",this.store.name,i),ts(this.store.delete(i))},a.prototype.count=function(){return we("SimpleDb","COUNT",this.store.name),ts(this.store.count())},a.prototype.ts=function(i,s){var f=this.cursor(this.options(i,s)),p=[];return this.es(f,function(b,D){p.push(D)}).next(function(){return p})},a.prototype.ns=function(i,s){we("SimpleDb","DELETE ALL",this.store.name);var f=this.options(i,s);f.ss=!1;var p=this.cursor(f);return this.es(p,function(b,D,U){return U.delete()})},a.prototype.rs=function(i,s){var f;s?f=i:(f={},s=i);var p=this.cursor(f);return this.es(p,s)},a.prototype.os=function(i){var s=this.cursor({});return new dn(function(f,p){s.onerror=function(b){var D=m(b.target.error);p(D)},s.onsuccess=function(b){var D=b.target.result;D?i(D.primaryKey,D.value).next(function(U){U?D.continue():f()}):f()}})},a.prototype.es=function(i,s){var f=[];return new dn(function(p,b){i.onerror=function(D){b(D.target.error)},i.onsuccess=function(D){var U=D.target.result;if(U){var Y=new Zs(U),de=s(U.primaryKey,U.value,Y);if(de instanceof dn){var Te=de.catch(function(Ge){return Y.done(),dn.reject(Ge)});f.push(Te)}Y.Sn?p():null===Y.Jn?U.continue():U.continue(Y.Jn)}else p()}}).next(function(){return dn.$n(f)})},a.prototype.options=function(i,s){var f=void 0;return void 0!==i&&("string"==typeof i?f=i:s=i),{index:f,range:s}},a.prototype.cursor=function(i){var s="next";if(i.reverse&&(s="prev"),i.index){var f=this.store.index(i.index);return i.ss?f.openKeyCursor(i.range,s):f.openCursor(i.range,s)}return this.store.openCursor(i.range,s)},a}();function ts(a){return new dn(function(i,s){a.onsuccess=function(f){i(f.target.result)},a.onerror=function(f){var p=m(f.target.error);s(p)}})}var ci=!1;function m(a){var i=Hr.On(mt.getUA());if(i>=12.2&&i<13){var s="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(s)>=0){var f=new z("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+s+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ci||(ci=!0,setTimeout(function(){throw f},0)),f}}return a}function L(){return"undefined"!=typeof window?window:null}function X(){return"undefined"!=typeof document?document:null}var _e=function(){function a(i,s,f,p,b){this.cs=i,this.dn=s,this.us=f,this.op=p,this.hs=b,this.ls=new Kr,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch(function(D){})}return a._s=function(i,s,f,p,b){var D=new a(i,s,Date.now()+f,p,b);return D.start(f),D},a.prototype.start=function(i){var s=this;this.fs=setTimeout(function(){return s.ds()},i)},a.prototype.pn=function(){return this.ds()},a.prototype.cancel=function(i){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new z(oe.CANCELLED,"Operation cancelled"+(i?": "+i:""))))},a.prototype.ds=function(){var i=this;this.cs.ws(function(){return null!==i.fs?(i.clearTimeout(),i.op().then(function(s){return i.ls.resolve(s)})):Promise.resolve()})},a.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},a}(),$e=function(){function a(){var i=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new js(this,"async_queue_retry"),this.Vs=function(){var f=X();f&&we("AsyncQueue","Visibility state changed to  ",f.visibilityState),i.ys.Vn()};var s=X();s&&"function"==typeof s.addEventListener&&s.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(a.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),a.prototype.ws=function(i){this.enqueue(i)},a.prototype.bs=function(i){this.vs(),this.Ss(i)},a.prototype.Ds=function(){if(!this.Is){this.Is=!0;var i=X();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Vs)}},a.prototype.enqueue=function(i){return this.vs(),this.Is?new Promise(function(s){}):this.Ss(i)},a.prototype.Cs=function(i){var s=this;this.ws(function(){return s.Es.push(i),s.Ns()})},a.prototype.Ns=function(){return M.__awaiter(this,void 0,void 0,function(){var i,s=this;return M.__generator(this,function(f){switch(f.label){case 0:if(0===this.Es.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return f.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!Ko(i=f.sent()))throw i;return we("AsyncQueue","Operation failed with retryable error: "+i),[3,4];case 4:this.Es.length>0&&this.ys.gn(function(){return s.Ns()}),f.label=5;case 5:return[2]}})})},a.prototype.Ss=function(i){var s=this,f=this.Ts.then(function(){return s.gs=!0,i().catch(function(p){throw s.Rs=p,s.gs=!1,ke("INTERNAL UNHANDLED ERROR: ",(D=(b=p).message||"",b.stack&&(D=b.stack.includes(b.message)?b.stack:b.message+"\n"+b.stack),D)),p;var b,D}).then(function(p){return s.gs=!1,p})});return this.Ts=f,f},a.prototype.yn=function(i,s,f){var p=this;this.vs(),this.Ps.indexOf(i)>-1&&(s=0);var b=_e._s(this,i,s,f,function(D){return p.Fs(D)});return this.As.push(b),b},a.prototype.vs=function(){this.Rs&&Pe()},a.prototype.xs=function(){},a.prototype.$s=function(){return M.__awaiter(this,void 0,void 0,function(){var i;return M.__generator(this,function(s){switch(s.label){case 0:return[4,i=this.Ts];case 1:s.sent(),s.label=2;case 2:if(i!==this.Ts)return[3,0];s.label=3;case 3:return[2]}})})},a.prototype.ks=function(i){for(var s=0,f=this.As;s<f.length;s++)if(f[s].dn===i)return!0;return!1},a.prototype.Ms=function(i){var s=this;return this.$s().then(function(){s.As.sort(function(D,U){return D.us-U.us});for(var f=0,p=s.As;f<p.length;f++){var b=p[f];if(b.pn(),"all"!==i&&b.dn===i)break}return s.$s()})},a.prototype.Os=function(i){this.Ps.push(i)},a.prototype.Fs=function(i){var s=this.As.indexOf(i);this.As.splice(s,1)},a}();function Et(a,i){if(ke("AsyncQueue",i+": "+a),Ko(a))return new z(oe.UNAVAILABLE,i+": "+a);throw a}var fn=function(){this.Ls=void 0,this.listeners=[]},xr=function(){this.Bs=new yr(function(a){return br(a)},Zt),this.onlineState="Unknown",this.qs=new Set};function Ar(a,i){return M.__awaiter(this,void 0,void 0,function(){var s,f,p,b,D,U,Y;return M.__generator(this,function(de){switch(de.label){case 0:if(s=ze(a),p=!1,(b=s.Bs.get(f=i.query))||(p=!0,b=new fn),!p)return[3,4];de.label=1;case 1:return de.trys.push([1,3,,4]),D=b,[4,s.Us(f)];case 2:return D.Ls=de.sent(),[3,4];case 3:return U=de.sent(),Y=Et(U,"Initialization of query '"+_o(i.query)+"' failed"),[2,void i.onError(Y)];case 4:return s.Bs.set(f,b),b.listeners.push(i),i.Qs(s.onlineState),b.Ls&&i.Ws(b.Ls)&&Ts(s),[2]}})})}function Ri(a,i){return M.__awaiter(this,void 0,void 0,function(){var s,f,p,b,D;return M.__generator(this,function(U){return s=ze(a),p=!1,(b=s.Bs.get(f=i.query))&&(D=b.listeners.indexOf(i))>=0&&(b.listeners.splice(D,1),p=0===b.listeners.length),p?[2,(s.Bs.delete(f),s.js(f))]:[2]})})}function fo(a,i){for(var s=ze(a),f=!1,p=0,b=i;p<b.length;p++){var D=b[p],Y=s.Bs.get(D.query);if(Y){for(var de=0,Te=Y.listeners;de<Te.length;de++)Te[de].Ws(D)&&(f=!0);Y.Ls=D}}f&&Ts(s)}function Eo(a,i,s){var f=ze(a),p=f.Bs.get(i);if(p)for(var b=0,D=p.listeners;b<D.length;b++)D[b].onError(s);f.Bs.delete(i)}function Ts(a){a.qs.forEach(function(i){i.next()})}var Oo=function(){function a(i,s,f){this.query=i,this.Ks=s,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=f||{}}return a.prototype.Ws=function(i){if(!this.options.includeMetadataChanges){for(var s=[],f=0,p=i.docChanges;f<p.length;f++){var b=p[f];3!==b.type&&s.push(b)}i=new Qt(i.query,i.docs,i.Qt,s,i.Wt,i.fromCache,i.jt,!0)}var D=!1;return this.Gs?this.Hs(i)&&(this.Ks.next(i),D=!0):this.Ys(i,this.onlineState)&&(this.Js(i),D=!0),this.zs=i,D},a.prototype.onError=function(i){this.Ks.error(i)},a.prototype.Qs=function(i){this.onlineState=i;var s=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,i)&&(this.Js(this.zs),s=!0),s},a.prototype.Ys=function(i,s){return!i.fromCache||!(this.options.Xs&&"Offline"!==s||i.docs.m()&&"Offline"!==s)},a.prototype.Hs=function(i){return i.docChanges.length>0||!!(i.jt||this.zs&&this.zs.hasPendingWrites!==i.hasPendingWrites)&&!0===this.options.includeMetadataChanges},a.prototype.Js=function(i){i=Qt.Gt(i.query,i.docs,i.Wt,i.fromCache),this.Gs=!0,this.Ks.next(i)},a}(),Zr=function(){function a(i){this.uid=i}return a.prototype.Zs=function(){return null!=this.uid},a.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},a.prototype.isEqual=function(i){return i.uid===this.uid},a}();Zr.UNAUTHENTICATED=new Zr(null),Zr.ei=new Zr("google-credentials-uid"),Zr.ni=new Zr("first-party-uid");var mi=function(){function a(i,s){var f=this;this.previousValue=i,s&&(s.si=function(p){return f.ii(p)},this.ri=function(p){return s.oi(p)})}return a.prototype.ii=function(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue},a.prototype.next=function(){var i=++this.previousValue;return this.ri&&this.ri(i),i},a}();function ps(a,i){return"firestore_clients_"+a+"_"+i}function wu(a,i,s){var f="firestore_mutations_"+a+"_"+s;return i.Zs()&&(f+="_"+i.uid),f}function eu(a,i){return"firestore_targets_"+a+"_"+i}mi.ai=-1;var Ss=function(){function a(i,s,f,p){this.user=i,this.batchId=s,this.state=f,this.error=p}return a.ci=function(i,s,f){var p=JSON.parse(f),b="object"==typeof p&&-1!==["pending","acknowledged","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error),D=void 0;return b&&p.error&&(b="string"==typeof p.error.message&&"string"==typeof p.error.code)&&(D=new z(p.error.code,p.error.message)),b?new a(i,s,p.state,D):(ke("SharedClientState","Failed to parse mutation state for ID '"+s+"': "+f),null)},a.prototype.ui=function(){var i={state:this.state,updateTimeMs:Date.now()};return this.error&&(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)},a}(),ns=function(){function a(i,s,f){this.targetId=i,this.state=s,this.error=f}return a.ci=function(i,s){var f=JSON.parse(s),p="object"==typeof f&&-1!==["not-current","current","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error),b=void 0;return p&&f.error&&(p="string"==typeof f.error.message&&"string"==typeof f.error.code)&&(b=new z(f.error.code,f.error.message)),p?new a(i,f.state,b):(ke("SharedClientState","Failed to parse target state for ID '"+i+"': "+s),null)},a.prototype.ui=function(){var i={state:this.state,updateTimeMs:Date.now()};return this.error&&(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)},a}(),ka=function(){function a(i,s){this.clientId=i,this.activeTargetIds=s}return a.ci=function(i,s){for(var f=JSON.parse(s),p="object"==typeof f&&f.activeTargetIds instanceof Array,b=rn(),D=0;p&&D<f.activeTargetIds.length;++D)p=ye(f.activeTargetIds[D]),b=b.add(f.activeTargetIds[D]);return p?new a(i,b):(ke("SharedClientState","Failed to parse client data for instance '"+i+"': "+s),null)},a}(),Ds=function(){function a(i,s){this.clientId=i,this.onlineState=s}return a.ci=function(i){var s=JSON.parse(i);return"object"==typeof s&&-1!==["Unknown","Online","Offline"].indexOf(s.onlineState)&&"string"==typeof s.clientId?new a(s.clientId,s.onlineState):(ke("SharedClientState","Failed to parse online state: "+i),null)},a}(),Ci=function(){function a(){this.activeTargetIds=rn()}return a.prototype.hi=function(i){this.activeTargetIds=this.activeTargetIds.add(i)},a.prototype.li=function(i){this.activeTargetIds=this.activeTargetIds.delete(i)},a.prototype.ui=function(){var i={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(i)},a}(),li=function(){function a(i,s,f,p,b){this.window=i,this.fn=s,this.persistenceKey=f,this._i=p,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new Yn(Wt),this.Ei=!1,this.Ii=[];var D=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=b,this.Ai=ps(this.persistenceKey,this._i),this.Ri="firestore_sequence_number_"+this.persistenceKey,this.Ti=this.Ti.ot(this._i,new Ci),this.gi=new RegExp("^firestore_clients_"+D+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+D+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+D+"_(\\d+)$"),this.Vi="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.wi)}return a.Ln=function(i){return!(!i||!i.localStorage)},a.prototype.start=function(){return M.__awaiter(this,void 0,void 0,function(){var i,s,f,p,b,D,U,Y,de,Te,Xe=this;return M.__generator(this,function(yt){switch(yt.label){case 0:return[4,this.fi.pi()];case 1:for(i=yt.sent(),s=0,f=i;s<f.length;s++)(p=f[s])!==this._i&&(b=this.getItem(ps(this.persistenceKey,p)))&&(D=ka.ci(p,b))&&(this.Ti=this.Ti.ot(D.clientId,D));for(this.bi(),(U=this.storage.getItem(this.Vi))&&(Y=this.vi(U))&&this.Si(Y),de=0,Te=this.Ii;de<Te.length;de++)this.mi(Te[de]);return this.Ii=[],this.window.addEventListener("unload",function(){return Xe.Di()}),this.Ei=!0,[2]}})})},a.prototype.oi=function(i){this.setItem(this.Ri,JSON.stringify(i))},a.prototype.Ci=function(){return this.Ni(this.Ti)},a.prototype.Fi=function(i){var s=!1;return this.Ti.forEach(function(f,p){p.activeTargetIds.has(i)&&(s=!0)}),s},a.prototype.xi=function(i){this.$i(i,"pending")},a.prototype.ki=function(i,s,f){this.$i(i,s,f),this.Mi(i)},a.prototype.Oi=function(i){var s="not-current";if(this.Fi(i)){var f=this.storage.getItem(eu(this.persistenceKey,i));if(f){var p=ns.ci(i,f);p&&(s=p.state)}}return this.Li.hi(i),this.bi(),s},a.prototype.Bi=function(i){this.Li.li(i),this.bi()},a.prototype.qi=function(i){return this.Li.activeTargetIds.has(i)},a.prototype.Ui=function(i){this.removeItem(eu(this.persistenceKey,i))},a.prototype.Qi=function(i,s,f){this.Wi(i,s,f)},a.prototype.ji=function(i,s,f){var p=this;s.forEach(function(b){p.Mi(b)}),this.currentUser=i,f.forEach(function(b){p.xi(b)})},a.prototype.Ki=function(i){this.Gi(i)},a.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},a.prototype.getItem=function(i){var s=this.storage.getItem(i);return we("SharedClientState","READ",i,s),s},a.prototype.setItem=function(i,s){we("SharedClientState","SET",i,s),this.storage.setItem(i,s)},a.prototype.removeItem=function(i){we("SharedClientState","REMOVE",i),this.storage.removeItem(i)},a.prototype.mi=function(i){var s=this,f=i;if(f.storageArea===this.storage){if(we("SharedClientState","EVENT",f.key,f.newValue),f.key===this.Ai)return void ke("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs(function(){return M.__awaiter(s,void 0,void 0,function(){var p,b,D,U,Y,de;return M.__generator(this,function(Te){if(this.Ei){if(null!==f.key)if(this.gi.test(f.key)){if(null==f.newValue)return p=this.zi(f.key),[2,this.Hi(p,null)];if(b=this.Yi(f.key,f.newValue))return[2,this.Hi(b.clientId,b)]}else if(this.Pi.test(f.key)){if(null!==f.newValue&&(D=this.Ji(f.key,f.newValue)))return[2,this.Xi(D)]}else if(this.yi.test(f.key)){if(null!==f.newValue&&(U=this.Zi(f.key,f.newValue)))return[2,this.tr(U)]}else if(f.key===this.Vi){if(null!==f.newValue&&(Y=this.vi(f.newValue)))return[2,this.Si(Y)]}else f.key===this.Ri&&(de=function(Ge){var Xe=mi.ai;if(null!=Ge)try{var yt=JSON.parse(Ge);ut("number"==typeof yt),Xe=yt}catch(Ft){ke("SharedClientState","Failed to read sequence number from WebStorage",Ft)}return Xe}(f.newValue))!==mi.ai&&this.si(de)}else this.Ii.push(f);return[2]})})})}},Object.defineProperty(a.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),a.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},a.prototype.$i=function(i,s,f){var p=new Ss(this.currentUser,i,s,f),b=wu(this.persistenceKey,this.currentUser,i);this.setItem(b,p.ui())},a.prototype.Mi=function(i){var s=wu(this.persistenceKey,this.currentUser,i);this.removeItem(s)},a.prototype.Gi=function(i){this.storage.setItem(this.Vi,JSON.stringify({clientId:this._i,onlineState:i}))},a.prototype.Wi=function(i,s,f){var p=eu(this.persistenceKey,i),b=new ns(i,s,f);this.setItem(p,b.ui())},a.prototype.zi=function(i){var s=this.gi.exec(i);return s?s[1]:null},a.prototype.Yi=function(i,s){var f=this.zi(i);return ka.ci(f,s)},a.prototype.Ji=function(i,s){var f=this.Pi.exec(i),p=Number(f[1]);return Ss.ci(new Zr(void 0!==f[2]?f[2]:null),p,s)},a.prototype.Zi=function(i,s){var f=this.yi.exec(i),p=Number(f[1]);return ns.ci(p,s)},a.prototype.vi=function(i){return Ds.ci(i)},a.prototype.Xi=function(i){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(s){return i.user.uid===this.currentUser.uid?[2,this.fi.er(i.batchId,i.state,i.error)]:(we("SharedClientState","Ignoring mutation for non-active user "+i.user.uid),[2])})})},a.prototype.tr=function(i){return this.fi.nr(i.targetId,i.state,i.error)},a.prototype.Hi=function(i,s){var f=this,p=s?this.Ti.ot(i,s):this.Ti.remove(i),b=this.Ni(this.Ti),D=this.Ni(p),U=[],Y=[];return D.forEach(function(de){b.has(de)||U.push(de)}),b.forEach(function(de){D.has(de)||Y.push(de)}),this.fi.sr(U,Y).then(function(){f.Ti=p})},a.prototype.Si=function(i){this.Ti.get(i.clientId)&&this.di(i.onlineState)},a.prototype.Ni=function(i){var s=rn();return i.forEach(function(f,p){s=s.kt(p.activeTargetIds)}),s},a}(),ga=function(){function a(){this.ir=new Ci,this.rr={},this.di=null,this.si=null}return a.prototype.xi=function(i){},a.prototype.ki=function(i,s,f){},a.prototype.Oi=function(i){return this.ir.hi(i),this.rr[i]||"not-current"},a.prototype.Qi=function(i,s,f){this.rr[i]=s},a.prototype.Bi=function(i){this.ir.li(i)},a.prototype.qi=function(i){return this.ir.activeTargetIds.has(i)},a.prototype.Ui=function(i){delete this.rr[i]},a.prototype.Ci=function(){return this.ir.activeTargetIds},a.prototype.Fi=function(i){return this.ir.activeTargetIds.has(i)},a.prototype.start=function(){return this.ir=new Ci,Promise.resolve()},a.prototype.ji=function(i,s,f){},a.prototype.Ki=function(i){},a.prototype.Di=function(){},a.prototype.oi=function(i){},a}(),As=function(){function a(i,s,f,p){this.batchId=i,this.ar=s,this.baseMutations=f,this.mutations=p}return a.prototype.cr=function(i,s,f){for(var p=f.ur,b=0;b<this.mutations.length;b++){var D=this.mutations[b];D.key.isEqual(i)&&(s=$(D,s,p[b]))}return s},a.prototype.hr=function(i,s){for(var f=0,p=this.baseMutations;f<p.length;f++){var b=p[f];b.key.isEqual(i)&&(s=fe(b,s,s,this.ar))}for(var D=s,U=0,Y=this.mutations;U<Y.length;U++){var de=Y[U];de.key.isEqual(i)&&(s=fe(de,s,D,this.ar))}return s},a.prototype.lr=function(i){var s=this,f=i;return this.mutations.forEach(function(p){var b=s.hr(p.key,i.get(p.key));b&&(f=f.ot(p.key,b))}),f},a.prototype.keys=function(){return this.mutations.reduce(function(i,s){return i.add(s.key)},Tt())},a.prototype.isEqual=function(i){return this.batchId===i.batchId&&on(this.mutations,i.mutations,function(s,f){return Dt(s,f)})&&on(this.baseMutations,i.baseMutations,function(s,f){return Dt(s,f)})},a}(),v=function(){function a(i,s,f,p){this.batch=i,this._r=s,this.ur=f,this.dr=p}return a.from=function(i,s,f){ut(i.mutations.length===f.length);for(var p=bt,b=i.mutations,D=0;D<b.length;D++)p=p.ot(b[D].key,f[D].version);return new a(i,s,f,p)},a}(),l=function(){function a(){this.wr=new yr(function(i){return i.toString()},function(i,s){return i.isEqual(s)}),this.mr=!1}return Object.defineProperty(a.prototype,"readTime",{get:function(){return this.Tr},set:function(i){this.Tr=i},enumerable:!1,configurable:!0}),a.prototype.Er=function(i,s){this.Ir(),this.readTime=s,this.wr.set(i.key,i)},a.prototype.Ar=function(i,s){this.Ir(),s&&(this.readTime=s),this.wr.set(i,null)},a.prototype.Rr=function(i,s){this.Ir();var f=this.wr.get(s);return void 0!==f?dn.resolve(f):this.gr(i,s)},a.prototype.getEntries=function(i,s){return this.Pr(i,s)},a.prototype.apply=function(i){return this.Ir(),this.mr=!0,this.yr(i)},a.prototype.Ir=function(){},a}(),d="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_=function(){function a(){this.Vr=[]}return a.prototype.pr=function(i){this.Vr.push(i)},a.prototype.br=function(){this.Vr.forEach(function(i){return i()})},a}(),N=function(){function a(i,s,f){this.vr=i,this.Sr=s,this.Dr=f}return a.prototype.Cr=function(i,s){var f=this;return this.Sr.Nr(i,s).next(function(p){return f.Fr(i,s,p)})},a.prototype.Fr=function(i,s,f){return this.vr.Rr(i,s).next(function(p){for(var b=0,D=f;b<D.length;b++)p=D[b].hr(s,p);return p})},a.prototype.$r=function(i,s,f){var p=bi();return s.forEach(function(b,D){for(var U=0,Y=f;U<Y.length;U++)D=Y[U].hr(b,D);p=p.ot(b,D)}),p},a.prototype.kr=function(i,s){var f=this;return this.vr.getEntries(i,s).next(function(p){return f.Mr(i,p)})},a.prototype.Mr=function(i,s){var f=this;return this.Sr.Or(i,s).next(function(p){var b=f.$r(i,s,p),D=ei();return b.forEach(function(U,Y){Y||(Y=new Or(U,Hn.min())),D=D.ot(U,Y)}),D})},a.prototype.Lr=function(i,s,f){return C.F((p=s).path)&&null===p.collectionGroup&&0===p.filters.length?this.Br(i,s.path):Jo(s)?this.qr(i,s,f):this.Ur(i,s,f);var p},a.prototype.Br=function(i,s){return this.Cr(i,new C(s)).next(function(f){var p=ht();return f instanceof dr&&(p=p.ot(f.key,f)),p})},a.prototype.qr=function(i,s,f){var p=this,b=s.collectionGroup,D=ht();return this.Dr.Qr(i,b).next(function(U){return dn.forEach(U,function(Y){var Te,Ge,de=(Te=s,Ge=Y.child(b),new Ao(Ge,null,Te.on.slice(),Te.filters.slice(),Te.limit,Te.an,Te.startAt,Te.endAt));return p.Ur(i,de,f).next(function(Te){Te.forEach(function(Ge,Xe){D=D.ot(Ge,Xe)})})}).next(function(){return D})})},a.prototype.Ur=function(i,s,f){var p,b,D=this;return this.vr.Lr(i,s,f).next(function(U){return p=U,D.Sr.Wr(i,s)}).next(function(U){return D.jr(i,b=U,p).next(function(Y){p=Y;for(var de=0,Te=b;de<Te.length;de++)for(var Ge=Te[de],Xe=0,yt=Ge.mutations;Xe<yt.length;Xe++){var Ft=yt[Xe],Jt=Ft.key,Fn=p.get(Jt),jn=fe(Ft,Fn,Fn,Ge.ar);p=jn instanceof dr?p.ot(Jt,jn):p.remove(Jt)}})}).next(function(){return p.forEach(function(U,Y){Lr(s,Y)||(p=p.remove(U))}),p})},a.prototype.jr=function(i,s,f){for(var p=Tt(),b=0,D=s;b<D.length;b++)for(var U=0,Y=D[b].mutations;U<Y.length;U++){var de=Y[U];de instanceof yn&&null===f.get(de.key)&&(p=p.add(de.key))}var Te=f;return this.vr.getEntries(i,p).next(function(Ge){return Ge.forEach(function(Xe,yt){null!==yt&&yt instanceof dr&&(Te=Te.ot(Xe,yt))}),Te})},a}(),F=function(){function a(i,s,f,p){this.targetId=i,this.fromCache=s,this.Kr=f,this.Gr=p}return a.zr=function(i,s){for(var f=Tt(),p=Tt(),b=0,D=s.docChanges;b<D.length;b++){var U=D[b];switch(U.type){case 0:f=f.add(U.doc.key);break;case 1:p=p.add(U.doc.key)}}return new a(i,s.fromCache,f,p)},a}();function Z(a,i){var f=a[1],b=i[1],D=Wt(a[0],i[0]);return 0===D?Wt(f,b):D}var ce=function(){function a(i){this.Hr=i,this.buffer=new Nr(Z),this.Yr=0}return a.prototype.Jr=function(){return++this.Yr},a.prototype.Xr=function(i){var s=[i,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(s);else{var f=this.buffer.last();Z(s,f)<0&&(this.buffer=this.buffer.delete(f).add(s))}},Object.defineProperty(a.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),a}(),Ee={Zr:!1,eo:0,no:0,so:0},be=function(){function a(i,s,f){this.io=i,this.ro=s,this.oo=f}return a.ao=function(i){return new a(i,a.co,a.uo)},a}();be.ho=-1,be.lo=1048576,be._o=41943040,be.co=10,be.uo=1e3,be.fo=new be(be._o,be.co,be.uo),be.do=new be(be.ho,0,0);var lt=function(){function a(i,s){this.wo=i,this.cs=s,this.mo=!1,this.To=null}return a.prototype.start=function(i){this.wo.params.io!==be.ho&&this.Eo(i)},a.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(a.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),a.prototype.Eo=function(i){var s=this,f=this.mo?3e5:6e4;we("LruGarbageCollector","Garbage collection scheduled in "+f+"ms"),this.To=this.cs.yn("lru_garbage_collection",f,function(){return M.__awaiter(s,void 0,void 0,function(){var p;return M.__generator(this,function(b){switch(b.label){case 0:this.To=null,this.mo=!0,b.label=1;case 1:return b.trys.push([1,3,,7]),[4,i.Io(this.wo)];case 2:return b.sent(),[3,7];case 3:return Ko(p=b.sent())?(we("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",p),[3,6]):[3,4];case 4:return[4,ya(p)];case 5:b.sent(),b.label=6;case 6:return[3,7];case 7:return[4,this.Eo(i)];case 8:return b.sent(),[2]}})})})},a}(),Rt=function(){function a(i,s){this.Ao=i,this.params=s}return a.prototype.Ro=function(i,s){return this.Ao.Po(i).next(function(f){return Math.floor(s/100*f)})},a.prototype.yo=function(i,s){var f=this;if(0===s)return dn.resolve(mi.ai);var p=new ce(s);return this.Ao.Ce(i,function(b){return p.Xr(b.sequenceNumber)}).next(function(){return f.Ao.Vo(i,function(b){return p.Xr(b)})}).next(function(){return p.maxValue})},a.prototype.po=function(i,s,f){return this.Ao.po(i,s,f)},a.prototype.bo=function(i,s){return this.Ao.bo(i,s)},a.prototype.vo=function(i,s){var f=this;return this.params.io===be.ho?(we("LruGarbageCollector","Garbage collection skipped; disabled"),dn.resolve(Ee)):this.So(i).next(function(p){return p<f.params.io?(we("LruGarbageCollector","Garbage collection skipped; Cache size "+p+" is lower than threshold "+f.params.io),Ee):f.Do(i,s)})},a.prototype.So=function(i){return this.Ao.So(i)},a.prototype.Do=function(i,s){var f,p,b,D,U,Y,de,Te=this,Ge=Date.now();return this.Ro(i,this.params.ro).next(function(Xe){return Xe>Te.params.oo?(we("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+Te.params.oo+" from "+Xe),p=Te.params.oo):p=Xe,D=Date.now(),Te.yo(i,p)}).next(function(Xe){return f=Xe,U=Date.now(),Te.po(i,f,s)}).next(function(Xe){return b=Xe,Y=Date.now(),Te.bo(i,f)}).next(function(Xe){return de=Date.now(),xe()<=J.LogLevel.DEBUG&&we("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(D-Ge)+"ms\n\tDetermined least recently used "+p+" in "+(U-D)+"ms\n\tRemoved "+b+" targets in "+(Y-U)+"ms\n\tRemoved "+Xe+" documents in "+(de-Y)+"ms\nTotal Duration: "+(de-Ge)+"ms"),dn.resolve({Zr:!0,eo:p,no:b,so:Xe})})},a}();function jt(a){for(var i="",s=0;s<a.length;s++)i.length>0&&(i=In(i)),i=un(a.get(s),i);return In(i)}function un(a,i){for(var s=i,f=a.length,p=0;p<f;p++){var b=a.charAt(p);switch(b){case"\0":s+="\x01\x10";break;case"\x01":s+="\x01\x11";break;default:s+=b}}return s}function In(a){return a+"\x01\x01"}function Dn(a){var i=a.length;if(ut(i>=2),2===i)return ut("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Ot.P();for(var s=i-2,f=[],p="",b=0;b<i;){var D=a.indexOf("\x01",b);switch((D<0||D>s)&&Pe(),a.charAt(D+1)){case"\x01":var U=a.substring(b,D),Y=void 0;0===p.length?Y=U:(Y=p+=U,p=""),f.push(Y);break;case"\x10":p+=a.substring(b,D),p+="\0";break;case"\x11":p+=a.substring(b,D+1);break;default:Pe()}b=D+2}return new Ot(f)}var pr=function(a){this.Co=a};function Mr(a,i){if(i.document)return Y=!!i.hasCommittedMutations,de=Un(a.Co,(U=i.document).name),Te=ii(U.updateTime),Ge=new Ii({mapValue:{fields:U.fields}}),new dr(de,Te,Ge,{hasCommittedMutations:!!Y});var U,Y,de,Te,Ge;if(i.noDocument){var s=C.$(i.noDocument.path),f=Ni(i.noDocument.readTime);return new Or(s,f,{hasCommittedMutations:!!i.hasCommittedMutations})}if(i.unknownDocument){var p=C.$(i.unknownDocument.path),b=Ni(i.unknownDocument.version);return new zr(p,b)}return Pe()}function yi(a,i,s){var Xe,yt,f=io(s),p=i.key.path.h().A();if(i instanceof dr){var b={name:Zn(Xe=a.Co,(yt=i).key),fields:yt.rn().mapValue.fields,updateTime:yo(Xe,yt.version.Z())};return new Hi(null,null,b,i.hasCommittedMutations,f,p)}if(i instanceof Or){var U=i.key.path.A(),Y=Pn(i.version),de=i.hasCommittedMutations;return new Hi(null,new Vf(U,Y),null,de,f,p)}if(i instanceof zr){var Te=i.key.path.A(),Ge=Pn(i.version);return new Hi(new rf(Te,Ge),null,null,!0,f,p)}return Pe()}function io(a){var i=a.Z();return[i.seconds,i.nanoseconds]}function rs(a){var i=new Jn(a[0],a[1]);return Hn.J(i)}function Pn(a){var i=a.Z();return new ru(i.seconds,i.nanoseconds)}function Ni(a){var i=new Jn(a.seconds,a.nanoseconds);return Hn.J(i)}function ho(a,i){var s=(i.baseMutations||[]).map(function(b){return Ln(a.Co,b)}),f=i.mutations.map(function(b){return Ln(a.Co,b)}),p=Jn.fromMillis(i.localWriteTimeMs);return new As(i.batchId,p,s,f)}function ea(a){var i,s,f=Ni(a.readTime),p=void 0!==a.lastLimboFreeSnapshotVersion?Ni(a.lastLimboFreeSnapshotVersion):Hn.min();return void 0!==a.query.documents?(ut(1===(s=a.query).documents.length),i=Di(Bi(Qi(s.documents[0])))):i=Gi(a.query),new pn(i,a.targetId,0,a.lastListenSequenceNumber,f,p,sn.fromBase64String(a.resumeToken))}function Ec(a,i){var s,f=Pn(i.nt),p=Pn(i.lastLimboFreeSnapshotVersion);s=tn(i.target)?Xn(a.Co,i.target):Xo(a.Co,i.target);var b=i.resumeToken.toBase64();return new Gr(i.targetId,ct(i.target),f,b,i.sequenceNumber,p,s)}var Yu=function(){function a(i,s,f,p){this.userId=i,this.serializer=s,this.Dr=f,this.No=p,this.Fo={}}return a.xo=function(i,s,f,p){return ut(""!==i.uid),new a(i.Zs()?i.uid:"",s,f,p)},a.prototype.$o=function(i){var s=!0,f=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vs(i).rs({index:Jr.userMutationsIndex,range:f},function(p,b,D){s=!1,D.done()}).next(function(){return s})},a.prototype.ko=function(i,s,f,p){var b=this,D=qi(i),U=Vs(i);return U.add({}).next(function(Y){ut("number"==typeof Y);for(var de=new As(Y,s,f,p),Te=function(jn,er,Tr){var Qr=Tr.baseMutations.map(function(Ui){return Ji(jn.Co,Ui)}),hi=Tr.mutations.map(function(Ui){return Ji(jn.Co,Ui)});return new Jr(er,Tr.batchId,Tr.ar.toMillis(),Qr,hi)}(b.serializer,b.userId,de),Ge=[],Xe=new Nr(function(jn,er){return Wt(jn.R(),er.R())}),yt=0,Ft=p;yt<Ft.length;yt++){var Jt=Ft[yt],Fn=Po.key(b.userId,Jt.key.path,Y);Xe=Xe.add(Jt.key.path.h()),Ge.push(U.put(Te)),Ge.push(D.put(Fn,Po.PLACEHOLDER))}return Xe.forEach(function(jn){Ge.push(b.Dr.Mo(i,jn))}),i.pr(function(){b.Fo[Y]=de.keys()}),dn.$n(Ge).next(function(){return de})})},a.prototype.Oo=function(i,s){var f=this;return Vs(i).get(s).next(function(p){return p?(ut(p.userId===f.userId),ho(f.serializer,p)):null})},a.prototype.Lo=function(i,s){var f=this;return this.Fo[s]?dn.resolve(this.Fo[s]):this.Oo(i,s).next(function(p){if(p){var b=p.keys();return f.Fo[s]=b,b}return null})},a.prototype.Bo=function(i,s){var f=this,p=s+1,b=IDBKeyRange.lowerBound([this.userId,p]),D=null;return Vs(i).rs({index:Jr.userMutationsIndex,range:b},function(U,Y,de){Y.userId===f.userId&&(ut(Y.batchId>=p),D=ho(f.serializer,Y)),de.done()}).next(function(){return D})},a.prototype.qo=function(i){var s=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),f=-1;return Vs(i).rs({index:Jr.userMutationsIndex,range:s,reverse:!0},function(p,b,D){f=b.batchId,D.done()}).next(function(){return f})},a.prototype.Uo=function(i){var s=this,f=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vs(i).ts(Jr.userMutationsIndex,f).next(function(p){return p.map(function(b){return ho(s.serializer,b)})})},a.prototype.Nr=function(i,s){var f=this,p=Po.prefixForPath(this.userId,s.path),b=IDBKeyRange.lowerBound(p),D=[];return qi(i).rs({range:b},function(U,Y,de){var Te=U[0],Xe=U[2],yt=Dn(U[1]);if(Te===f.userId&&s.path.isEqual(yt))return Vs(i).get(Xe).next(function(Ft){if(!Ft)throw Pe();ut(Ft.userId===f.userId),D.push(ho(f.serializer,Ft))});de.done()}).next(function(){return D})},a.prototype.Or=function(i,s){var f=this,p=new Nr(Wt),b=[];return s.forEach(function(D){var U=Po.prefixForPath(f.userId,D.path),Y=IDBKeyRange.lowerBound(U),de=qi(i).rs({range:Y},function(Te,Ge,Xe){var yt=Te[0],Jt=Te[2],Fn=Dn(Te[1]);yt===f.userId&&D.path.isEqual(Fn)?p=p.add(Jt):Xe.done()});b.push(de)}),dn.$n(b).next(function(){return f.Qo(i,p)})},a.prototype.Wr=function(i,s){var f=this,p=s.path,b=p.length+1,D=Po.prefixForPath(this.userId,p),U=IDBKeyRange.lowerBound(D),Y=new Nr(Wt);return qi(i).rs({range:U},function(de,Te,Ge){var Xe=de[0],Ft=de[2],Jt=Dn(de[1]);Xe===f.userId&&p.T(Jt)?Jt.length===b&&(Y=Y.add(Ft)):Ge.done()}).next(function(){return f.Qo(i,Y)})},a.prototype.Qo=function(i,s){var f=this,p=[],b=[];return s.forEach(function(D){b.push(Vs(i).get(D).next(function(U){if(null===U)throw Pe();ut(U.userId===f.userId),p.push(ho(f.serializer,U))}))}),dn.$n(b).next(function(){return p})},a.prototype.Wo=function(i,s){var f=this;return Ic(i.jo,this.userId,s).next(function(p){return i.pr(function(){f.Ko(s.batchId)}),dn.forEach(p,function(b){return f.No.Go(i,b)})})},a.prototype.Ko=function(i){delete this.Fo[i]},a.prototype.zo=function(i){var s=this;return this.$o(i).next(function(f){if(!f)return dn.resolve();var p=IDBKeyRange.lowerBound(Po.prefixForUser(s.userId)),b=[];return qi(i).rs({range:p},function(D,U,Y){if(D[0]===s.userId){var de=Dn(D[1]);b.push(de)}else Y.done()}).next(function(){ut(0===b.length)})})},a.prototype.Ho=function(i,s){return Xu(i,this.userId,s)},a.prototype.Yo=function(i){var s=this;return va(i).get(this.userId).next(function(f){return f||new Rs(s.userId,-1,"")})},a}();function Xu(a,i,s){var f=Po.prefixForPath(i,s.path),p=f[1],b=IDBKeyRange.lowerBound(f),D=!1;return qi(a).rs({range:b,ss:!0},function(U,Y,de){U[0]===i&&U[1]===p&&(D=!0),de.done()}).next(function(){return D})}function Ic(a,i,s){var f=a.store(Jr.store),p=a.store(Po.store),b=[],D=IDBKeyRange.only(s.batchId),U=0,Y=f.rs({range:D},function(Ft,Jt,Fn){return U++,Fn.delete()});b.push(Y.next(function(){ut(1===U)}));for(var de=[],Te=0,Ge=s.mutations;Te<Ge.length;Te++){var Xe=Ge[Te],yt=Po.key(i,Xe.key.path,s.batchId);b.push(p.delete(yt)),de.push(Xe.key)}return dn.$n(b).next(function(){return de})}function Vs(a){return Uo.Qn(a,Jr.store)}function qi(a){return Uo.Qn(a,Po.store)}function va(a){return Uo.Qn(a,Rs.store)}var Cc=function(){function a(i,s){this.serializer=i,this.Dr=s}return a.prototype.Er=function(i,s,f){return Qo(i).put(tu(s),f)},a.prototype.Ar=function(i,s){var f=Qo(i),p=tu(s);return f.delete(p)},a.prototype.updateMetadata=function(i,s){var f=this;return this.getMetadata(i).next(function(p){return p.byteSize+=s,f.Jo(i,p)})},a.prototype.Rr=function(i,s){var f=this;return Qo(i).get(tu(s)).next(function(p){return f.Xo(p)})},a.prototype.Zo=function(i,s){var f=this;return Qo(i).get(tu(s)).next(function(p){var b=f.Xo(p);return b?{ta:b,size:ta(p)}:null})},a.prototype.getEntries=function(i,s){var f=this,p=bi();return this.ea(i,s,function(b,D){var U=f.Xo(D);p=p.ot(b,U)}).next(function(){return p})},a.prototype.na=function(i,s){var f=this,p=bi(),b=new Yn(C.i);return this.ea(i,s,function(D,U){var Y=f.Xo(U);Y?(p=p.ot(D,Y),b=b.ot(D,ta(U))):(p=p.ot(D,null),b=b.ot(D,0))}).next(function(){return{sa:p,ia:b}})},a.prototype.ea=function(i,s,f){if(s.m())return dn.resolve();var p=IDBKeyRange.bound(s.first().path.A(),s.last().path.A()),b=s._t(),D=b.It();return Qo(i).rs({range:p},function(U,Y,de){for(var Te=C.$(U);D&&C.i(D,Te)<0;)f(D,null),D=b.It();D&&D.isEqual(Te)&&(f(D,Y),D=b.At()?b.It():null),D?de.Xn(D.path.A()):de.done()}).next(function(){for(;D;)f(D,null),D=b.At()?b.It():null})},a.prototype.Lr=function(i,s,f){var p=this,b=ht(),D=s.path.length+1,U={};if(f.isEqual(Hn.min())){var Y=s.path.A();U.range=IDBKeyRange.lowerBound(Y)}else{var de=s.path.A(),Te=io(f);U.range=IDBKeyRange.lowerBound([de,Te],!0),U.index=Hi.collectionReadTimeIndex}return Qo(i).rs(U,function(Ge,Xe,yt){if(Ge.length===D){var Ft=Mr(p.serializer,Xe);s.path.T(Ft.key.path)?Ft instanceof dr&&Lr(s,Ft)&&(b=b.ot(Ft.key,Ft)):yt.done()}}).next(function(){return b})},a.prototype.ra=function(i){return new ma(this,!!i&&i.oa)},a.prototype.aa=function(i){return this.getMetadata(i).next(function(s){return s.byteSize})},a.prototype.getMetadata=function(i){return bu(i).get(Hs.key).next(function(s){return ut(!!s),s})},a.prototype.Jo=function(i,s){return bu(i).put(Hs.key,s)},a.prototype.Xo=function(i){if(i){var s=Mr(this.serializer,i);return s instanceof Or&&s.version.isEqual(Hn.min())?null:s}return null},a}(),ma=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).ca=s,p.oa=f,p.ua=new yr(function(b){return b.toString()},function(b,D){return b.isEqual(D)}),p}return M.__extends(i,a),i.prototype.yr=function(s){var f=this,p=[],b=0,D=new Nr(function(U,Y){return Wt(U.R(),Y.R())});return this.wr.forEach(function(U,Y){var de=f.ua.get(U);if(Y){var Te=yi(f.ca.serializer,Y,f.readTime);D=D.add(U.path.h());var Ge=ta(Te);b+=Ge-de,p.push(f.ca.Er(s,U,Te))}else if(b-=de,f.oa){var Xe=yi(f.ca.serializer,new Or(U,Hn.min()),f.readTime);p.push(f.ca.Er(s,U,Xe))}else p.push(f.ca.Ar(s,U))}),D.forEach(function(U){p.push(f.ca.Dr.Mo(s,U))}),p.push(this.ca.updateMetadata(s,b)),dn.$n(p)},i.prototype.gr=function(s,f){var p=this;return this.ca.Zo(s,f).next(function(b){return null===b?(p.ua.set(f,0),null):(p.ua.set(f,b.size),b.ta)})},i.prototype.Pr=function(s,f){var p=this;return this.ca.na(s,f).next(function(b){var D=b.sa;return b.ia.forEach(function(U,Y){p.ua.set(U,Y)}),D})},i}(l);function bu(a){return Uo.Qn(a,Hs.store)}function Qo(a){return Uo.Qn(a,Hi.store)}function tu(a){return a.path.A()}function ta(a){var i;if(a.document)i=a.document;else if(a.unknownDocument)i=a.unknownDocument;else{if(!a.noDocument)throw Pe();i=a.noDocument}return JSON.stringify(i).length}var Kc=function(){function a(){this.ha=new Bs}return a.prototype.Mo=function(i,s){return this.ha.add(s),dn.resolve()},a.prototype.Qr=function(i,s){return dn.resolve(this.ha.getEntries(s))},a}(),Bs=function(){function a(){this.index={}}return a.prototype.add=function(i){var s=i._(),f=i.h(),p=this.index[s]||new Nr(Ot.i),b=!p.has(f);return this.index[s]=p.add(f),b},a.prototype.has=function(i){var s=i._(),f=i.h(),p=this.index[s];return p&&p.has(f)},a.prototype.getEntries=function(i){return(this.index[i]||new Nr(Ot.i)).A()},a}(),nu=function(){function a(i){this.serializer=i}return a.prototype.createOrUpgrade=function(i,s,f,p){var b=this;ut(f<p&&f>=0&&p<=10);var Y,D=new ro("createOrUpgrade",s);f<1&&p>=1&&(i.createObjectStore($i.store),(Y=i).createObjectStore(Rs.store,{keyPath:Rs.keyPath}),Y.createObjectStore(Jr.store,{keyPath:Jr.keyPath,autoIncrement:!0}).createIndex(Jr.userMutationsIndex,Jr.userMutationsKeyPath,{unique:!0}),Y.createObjectStore(Po.store),Tc(i),function(Y){Y.createObjectStore(Hi.store)}(i));var U=dn.resolve();return f<3&&p>=3&&(0!==f&&(function(Y){Y.deleteObjectStore(po.store),Y.deleteObjectStore(Gr.store),Y.deleteObjectStore(is.store)}(i),Tc(i)),U=U.next(function(){return function(Y){var de=Y.store(is.store),Te=new is(0,0,Hn.min().Z(),0);return de.put(is.key,Te)}(D)})),f<4&&p>=4&&(0!==f&&(U=U.next(function(){return function(Y,de){return de.store(Jr.store).ts().next(function(Te){Y.deleteObjectStore(Jr.store),Y.createObjectStore(Jr.store,{keyPath:Jr.keyPath,autoIncrement:!0}).createIndex(Jr.userMutationsIndex,Jr.userMutationsKeyPath,{unique:!0});var Ge=de.store(Jr.store),Xe=Te.map(function(yt){return Ge.put(yt)});return dn.$n(Xe)})}(i,D)})),U=U.next(function(){!function(Y){Y.createObjectStore(La.store,{keyPath:La.keyPath})}(i)})),f<5&&p>=5&&(U=U.next(function(){return b.removeAcknowledgedMutations(D)})),f<6&&p>=6&&(U=U.next(function(){return function(Y){Y.createObjectStore(Hs.store)}(i),b.addDocumentGlobal(D)})),f<7&&p>=7&&(U=U.next(function(){return b.ensureSequenceNumbers(D)})),f<8&&p>=8&&(U=U.next(function(){return b.createCollectionParentIndex(i,D)})),f<9&&p>=9&&(U=U.next(function(){(function(Y){Y.objectStoreNames.contains("remoteDocumentChanges")&&Y.deleteObjectStore("remoteDocumentChanges")})(i),function(Y){var de=Y.objectStore(Hi.store);de.createIndex(Hi.readTimeIndex,Hi.readTimeIndexPath,{unique:!1}),de.createIndex(Hi.collectionReadTimeIndex,Hi.collectionReadTimeIndexPath,{unique:!1})}(s)})),f<10&&p>=10&&(U=U.next(function(){return b.rewriteCanonicalIds(D)})),U},a.prototype.addDocumentGlobal=function(i){var s=0;return i.store(Hi.store).rs(function(f,p){s+=ta(p)}).next(function(){var f=new Hs(s);return i.store(Hs.store).put(Hs.key,f)})},a.prototype.removeAcknowledgedMutations=function(i){var s=this,f=i.store(Rs.store),p=i.store(Jr.store);return f.ts().next(function(b){return dn.forEach(b,function(D){var U=IDBKeyRange.bound([D.userId,-1],[D.userId,D.lastAcknowledgedBatchId]);return p.ts(Jr.userMutationsIndex,U).next(function(Y){return dn.forEach(Y,function(de){ut(de.userId===D.userId);var Te=ho(s.serializer,de);return Ic(i,D.userId,Te).next(function(){})})})})})},a.prototype.ensureSequenceNumbers=function(i){var s=i.store(po.store),f=i.store(Hi.store);return i.store(is.store).get(is.key).next(function(p){var b=[];return f.rs(function(D,U){var Y=new Ot(D),de=[0,jt(Y)];b.push(s.get(de).next(function(Te){return Te?dn.resolve():s.put(new po(0,jt(Y),p.highestListenSequenceNumber))}))}).next(function(){return dn.$n(b)})})},a.prototype.createCollectionParentIndex=function(i,s){i.createObjectStore(Fa.store,{keyPath:Fa.keyPath});var f=s.store(Fa.store),p=new Bs,b=function(D){if(p.add(D)){var U=D._(),Y=D.h();return f.put({collectionId:U,parent:jt(Y)})}};return s.store(Hi.store).rs({ss:!0},function(D,U){var Y=new Ot(D);return b(Y.h())}).next(function(){return s.store(Po.store).rs({ss:!0},function(D,U){var de=Dn(D[1]);return b(de.h())})})},a.prototype.rewriteCanonicalIds=function(i){var s=this,f=i.store(Gr.store);return f.rs(function(p,b){var D=ea(b),U=Ec(s.serializer,D);return f.put(U)})},a}(),ru=function(a,i){this.seconds=a,this.nanoseconds=i},$i=function(a,i,s){this.ownerId=a,this.allowTabSynchronization=i,this.leaseTimestampMs=s};$i.store="owner",$i.key="owner";var Rs=function(a,i,s){this.userId=a,this.lastAcknowledgedBatchId=i,this.lastStreamToken=s};Rs.store="mutationQueues",Rs.keyPath="userId";var Jr=function(a,i,s,f,p){this.userId=a,this.batchId=i,this.localWriteTimeMs=s,this.baseMutations=f,this.mutations=p};Jr.store="mutations",Jr.keyPath="batchId",Jr.userMutationsIndex="userMutationsIndex",Jr.userMutationsKeyPath=["userId","batchId"];var Po=function(){function a(){}return a.prefixForUser=function(i){return[i]},a.prefixForPath=function(i,s){return[i,jt(s)]},a.key=function(i,s,f){return[i,jt(s),f]},a}();Po.store="documentMutations",Po.PLACEHOLDER=new Po;var Vf=function(a,i){this.path=a,this.readTime=i},rf=function(a,i){this.path=a,this.version=i},Hi=function(a,i,s,f,p,b){this.unknownDocument=a,this.noDocument=i,this.document=s,this.hasCommittedMutations=f,this.readTime=p,this.parentPath=b};Hi.store="remoteDocuments",Hi.readTimeIndex="readTimeIndex",Hi.readTimeIndexPath="readTime",Hi.collectionReadTimeIndex="collectionReadTimeIndex",Hi.collectionReadTimeIndexPath=["parentPath","readTime"];var Hs=function(a){this.byteSize=a};Hs.store="remoteDocumentGlobal",Hs.key="remoteDocumentGlobalKey";var Gr=function(a,i,s,f,p,b,D){this.targetId=a,this.canonicalId=i,this.readTime=s,this.resumeToken=f,this.lastListenSequenceNumber=p,this.lastLimboFreeSnapshotVersion=b,this.query=D};Gr.store="targets",Gr.keyPath="targetId",Gr.queryTargetsIndexName="queryTargetsIndex",Gr.queryTargetsKeyPath=["canonicalId","targetId"];var po=function(a,i,s){this.targetId=a,this.path=i,this.sequenceNumber=s};po.store="targetDocuments",po.keyPath=["targetId","path"],po.documentTargetsIndex="documentTargetsIndex",po.documentTargetsKeyPath=["path","targetId"];var is=function(a,i,s,f){this.highestTargetId=a,this.highestListenSequenceNumber=i,this.lastRemoteSnapshotVersion=s,this.targetCount=f};is.key="targetGlobalKey",is.store="targetGlobal";var Fa=function(a,i){this.collectionId=a,this.parent=i};function Tc(a){a.createObjectStore(po.store,{keyPath:po.keyPath}).createIndex(po.documentTargetsIndex,po.documentTargetsKeyPath,{unique:!0}),a.createObjectStore(Gr.store,{keyPath:Gr.keyPath}).createIndex(Gr.queryTargetsIndexName,Gr.queryTargetsKeyPath,{unique:!0}),a.createObjectStore(is.store)}Fa.store="collectionParents",Fa.keyPath=["collectionId","parent"];var La=function(a,i,s,f){this.clientId=a,this.updateTimeMs=i,this.networkEnabled=s,this.inForeground=f};La.store="clientMetadata",La.keyPath="clientId";var of=M.__spreadArrays(M.__spreadArrays(M.__spreadArrays([Rs.store,Jr.store,Po.store,Hi.store,Gr.store,$i.store,is.store,po.store],[La.store]),[Hs.store]),[Fa.store]),Eu=function(){function a(){this.la=new Bs}return a.prototype.Mo=function(i,s){var f=this;if(!this.la.has(s)){var p=s._(),b=s.h();i.pr(function(){f.la.add(s)});var D={collectionId:p,parent:jt(b)};return ml(i).put(D)}return dn.resolve()},a.prototype.Qr=function(i,s){var f=[],p=IDBKeyRange.bound([s,""],[An(s),""],!1,!0);return ml(i).ts(p).next(function(b){for(var D=0,U=b;D<U.length;D++){var Y=U[D];if(Y.collectionId!==s)break;f.push(Dn(Y.parent))}return f})},a}();function ml(a){return Uo.Qn(a,Fa.store)}var Ua=function(){function a(i){this._a=i}return a.prototype.next=function(){return this._a+=2,this._a},a.fa=function(){return new a(0)},a.da=function(){return new a(-1)},a}(),yl=function(){function a(i,s){this.No=i,this.serializer=s}return a.prototype.wa=function(i){var s=this;return this.ma(i).next(function(f){var p=new Ua(f.highestTargetId);return f.highestTargetId=p.next(),s.Ta(i,f).next(function(){return f.highestTargetId})})},a.prototype.Ea=function(i){return this.ma(i).next(function(s){return Hn.J(new Jn(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds))})},a.prototype.Ia=function(i){return this.ma(i).next(function(s){return s.highestListenSequenceNumber})},a.prototype.Aa=function(i,s,f){var p=this;return this.ma(i).next(function(b){return b.highestListenSequenceNumber=s,f&&(b.lastRemoteSnapshotVersion=f.Z()),s>b.highestListenSequenceNumber&&(b.highestListenSequenceNumber=s),p.Ta(i,b)})},a.prototype.Ra=function(i,s){var f=this;return this.ga(i,s).next(function(){return f.ma(i).next(function(p){return p.targetCount+=1,f.Pa(s,p),f.Ta(i,p)})})},a.prototype.ya=function(i,s){return this.ga(i,s)},a.prototype.Va=function(i,s){var f=this;return this.pa(i,s.targetId).next(function(){return Iu(i).delete(s.targetId)}).next(function(){return f.ma(i)}).next(function(p){return ut(p.targetCount>0),p.targetCount-=1,f.Ta(i,p)})},a.prototype.po=function(i,s,f){var p=this,b=0,D=[];return Iu(i).rs(function(U,Y){var de=ea(Y);de.sequenceNumber<=s&&null===f.get(de.targetId)&&(b++,D.push(p.Va(i,de)))}).next(function(){return dn.$n(D)}).next(function(){return b})},a.prototype.Ce=function(i,s){return Iu(i).rs(function(f,p){var b=ea(p);s(b)})},a.prototype.ma=function(i){return na(i).get(is.key).next(function(s){return ut(null!==s),s})},a.prototype.Ta=function(i,s){return na(i).put(is.key,s)},a.prototype.ga=function(i,s){return Iu(i).put(Ec(this.serializer,s))},a.prototype.Pa=function(i,s){var f=!1;return i.targetId>s.highestTargetId&&(s.highestTargetId=i.targetId,f=!0),i.sequenceNumber>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=i.sequenceNumber,f=!0),f},a.prototype.ba=function(i){return this.ma(i).next(function(s){return s.targetCount})},a.prototype.va=function(i,s){var f=ct(s),p=IDBKeyRange.bound([f,Number.NEGATIVE_INFINITY],[f,Number.POSITIVE_INFINITY]),b=null;return Iu(i).rs({range:p,index:Gr.queryTargetsIndexName},function(D,U,Y){var de=ea(U);nn(s,de.target)&&(b=de,Y.done())}).next(function(){return b})},a.prototype.Sa=function(i,s,f){var p=this,b=[],D=ja(i);return s.forEach(function(U){var Y=jt(U.path);b.push(D.put(new po(f,Y))),b.push(p.No.Da(i,f,U))}),dn.$n(b)},a.prototype.Ca=function(i,s,f){var p=this,b=ja(i);return dn.forEach(s,function(D){var U=jt(D.path);return dn.$n([b.delete([f,U]),p.No.Na(i,f,D)])})},a.prototype.pa=function(i,s){var f=ja(i),p=IDBKeyRange.bound([s],[s+1],!1,!0);return f.delete(p)},a.prototype.Fa=function(i,s){var f=IDBKeyRange.bound([s],[s+1],!1,!0),p=ja(i),b=Tt();return p.rs({range:f,ss:!0},function(D,U,Y){var de=Dn(D[1]),Te=new C(de);b=b.add(Te)}).next(function(){return b})},a.prototype.Ho=function(i,s){var f=jt(s.path),p=IDBKeyRange.bound([f],[An(f)],!1,!0),b=0;return ja(i).rs({index:po.documentTargetsIndex,ss:!0,range:p},function(D,U,Y){0!==D[0]&&(b++,Y.done())}).next(function(){return b>0})},a.prototype.Ue=function(i,s){return Iu(i).get(s).next(function(f){return f?ea(f):null})},a}();function Iu(a){return Uo.Qn(a,Gr.store)}function na(a){return Uo.Qn(a,is.store)}function ja(a){return Uo.Qn(a,po.store)}var zi="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",iu=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).jo=s,p.xa=f,p}return M.__extends(i,a),i}(_),Uo=function(){function a(i,s,f,p,b,D,U,Y,de,Te){if(this.allowTabSynchronization=i,this.persistenceKey=s,this.clientId=f,this.fn=b,this.window=D,this.document=U,this.$a=de,this.ka=Te,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(Ge){return Promise.resolve()},!a.Ln())throw new z(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new jo(this,p),this.Wa=s+"main",this.serializer=new pr(Y),this.ja=new Hr(this.Wa,10,new nu(this.serializer)),this.Ka=new yl(this.No,this.serializer),this.Dr=new Eu,this.vr=new Cc(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===Te&&ke("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return a.Qn=function(i,s){if(i instanceof iu)return Hr.Qn(i.jo,s);throw Pe()},a.prototype.start=function(){var i=this;return this.za().then(function(){if(!i.isPrimary&&!i.allowTabSynchronization)throw new z(oe.FAILED_PRECONDITION,zi);return i.Ha(),i.Ya(),i.Ja(),i.runTransaction("getHighestListenSequenceNumber","readonly",function(s){return i.Ka.Ia(s)})}).then(function(s){i.Ma=new mi(s,i.$a)}).then(function(){i.Oa=!0}).catch(function(s){return i.ja&&i.ja.close(),Promise.reject(s)})},a.prototype.Xa=function(i){var s=this;return this.Qa=function(f){return M.__awaiter(s,void 0,void 0,function(){return M.__generator(this,function(p){return this.Ei?[2,i(f)]:[2]})})},i(this.isPrimary)},a.prototype.Za=function(i){var s=this;this.ja.Kn(function(f){return M.__awaiter(s,void 0,void 0,function(){return M.__generator(this,function(p){switch(p.label){case 0:return null===f.newVersion?[4,i()]:[3,2];case 1:p.sent(),p.label=2;case 2:return[2]}})})})},a.prototype.tc=function(i){var s=this;this.networkEnabled!==i&&(this.networkEnabled=i,this.fn.ws(function(){return M.__awaiter(s,void 0,void 0,function(){return M.__generator(this,function(f){switch(f.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:f.sent(),f.label=2;case 2:return[2]}})})}))},a.prototype.za=function(){var i=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(s){return Sc(s).put(new La(i.clientId,Date.now(),i.networkEnabled,i.inForeground)).next(function(){if(i.isPrimary)return i.ec(s).next(function(f){f||(i.isPrimary=!1,i.fn.Cs(function(){return i.Qa(!1)}))})}).next(function(){return i.nc(s)}).next(function(f){return i.isPrimary&&!f?i.sc(s).next(function(){return!1}):!!f&&i.ic(s).next(function(){return!0})})}).catch(function(s){if(Ko(s))return we("IndexedDbPersistence","Failed to extend owner lease: ",s),i.isPrimary;if(!i.allowTabSynchronization)throw s;return we("IndexedDbPersistence","Releasing owner lease after error during lease refresh",s),!1}).then(function(s){i.isPrimary!==s&&i.fn.Cs(function(){return i.Qa(s)}),i.isPrimary=s})},a.prototype.ec=function(i){var s=this;return ou(i).get($i.key).next(function(f){return dn.resolve(s.rc(f))})},a.prototype.oc=function(i){return Sc(i).delete(this.clientId)},a.prototype.ac=function(){return M.__awaiter(this,void 0,void 0,function(){var i,s,f,b=this;return M.__generator(this,function(D){switch(D.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(U){var Y=a.Qn(U,La.store);return Y.ts().next(function(de){var Te=b.uc(de,18e5),Ge=de.filter(function(Xe){return-1===Te.indexOf(Xe)});return dn.forEach(Ge,function(Xe){return Y.delete(Xe.clientId)}).next(function(){return Ge})})}).catch(function(){return[]})]);case 1:if(i=D.sent(),this.Ga)for(s=0,f=i;s<f.length;s++)this.Ga.removeItem(this.hc(f[s].clientId));D.label=2;case 2:return[2]}})})},a.prototype.Ja=function(){var i=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,function(){return i.za().then(function(){return i.ac()}).then(function(){return i.Ja()})})},a.prototype.rc=function(i){return!!i&&i.ownerId===this.clientId},a.prototype.nc=function(i){var s=this;return this.ka?dn.resolve(!0):ou(i).get($i.key).next(function(f){if(null!==f&&s.cc(f.leaseTimestampMs,5e3)&&!s.lc(f.ownerId)){if(s.rc(f)&&s.networkEnabled)return!0;if(!s.rc(f)){if(!f.allowTabSynchronization)throw new z(oe.FAILED_PRECONDITION,zi);return!1}}return!(!s.networkEnabled||!s.inForeground)||Sc(i).ts().next(function(p){return void 0===s.uc(p,5e3).find(function(b){return!(s.clientId===b.clientId||!(!s.networkEnabled&&b.networkEnabled||!s.inForeground&&b.inForeground&&s.networkEnabled===b.networkEnabled))})})}).next(function(f){return s.isPrimary!==f&&we("IndexedDbPersistence","Client "+(f?"is":"is not")+" eligible for a primary lease."),f})},a.prototype.Di=function(){return M.__awaiter(this,void 0,void 0,function(){var i=this;return M.__generator(this,function(s){switch(s.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[$i.store,La.store],function(f){var p=new iu(f,mi.ai);return i.sc(p).next(function(){return i.oc(p)})})];case 1:return s.sent(),this.ja.close(),this.wc(),[2]}})})},a.prototype.uc=function(i,s){var f=this;return i.filter(function(p){return f.cc(p.updateTimeMs,s)&&!f.lc(p.clientId)})},a.prototype.pi=function(){var i=this;return this.runTransaction("getActiveClients","readonly",function(s){return Sc(s).ts().next(function(f){return i.uc(f,18e5).map(function(p){return p.clientId})})})},Object.defineProperty(a.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),a.prototype.mc=function(i){return Yu.xo(i,this.serializer,this.Dr,this.No)},a.prototype.Tc=function(){return this.Ka},a.prototype.Ec=function(){return this.vr},a.prototype.Ic=function(){return this.Dr},a.prototype.runTransaction=function(i,s,f){var b,p=this;return we("IndexedDbPersistence","Starting transaction:",i),this.ja.runTransaction(i,"readonly"===s?"readonly":"readwrite",of,function(U){return b=new iu(U,p.Ma?p.Ma.next():mi.ai),"readwrite-primary"===s?p.ec(b).next(function(Y){return!!Y||p.nc(b)}).next(function(Y){if(!Y)throw ke("Failed to obtain primary lease for action '"+i+"'."),p.isPrimary=!1,p.fn.Cs(function(){return p.Qa(!1)}),new z(oe.FAILED_PRECONDITION,d);return f(b)}).next(function(Y){return p.ic(b).next(function(){return Y})}):p.Ac(b).next(function(){return f(b)})}).then(function(U){return b.br(),U})},a.prototype.Ac=function(i){var s=this;return ou(i).get($i.key).next(function(f){if(null!==f&&s.cc(f.leaseTimestampMs,5e3)&&!s.lc(f.ownerId)&&!s.rc(f)&&!(s.ka||s.allowTabSynchronization&&f.allowTabSynchronization))throw new z(oe.FAILED_PRECONDITION,zi)})},a.prototype.ic=function(i){var s=new $i(this.clientId,this.allowTabSynchronization,Date.now());return ou(i).put($i.key,s)},a.Ln=function(){return Hr.Ln()},a.prototype.sc=function(i){var s=this,f=ou(i);return f.get($i.key).next(function(p){return s.rc(p)?(we("IndexedDbPersistence","Releasing primary lease."),f.delete($i.key)):dn.resolve()})},a.prototype.cc=function(i,s){var f=Date.now();return!(i<f-s||i>f&&(ke("Detected an update time that is in the future: "+i+" > "+f),1))},a.prototype.Ha=function(){var i=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){i.fn.ws(function(){return i.inForeground="visible"===i.document.visibilityState,i.za()})},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},a.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},a.prototype.Ya=function(){var i,s=this;"function"==typeof(null===(i=this.window)||void 0===i?void 0:i.addEventListener)&&(this.La=function(){s._c(),s.fn.ws(function(){return s.Di()})},this.window.addEventListener("unload",this.La))},a.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},a.prototype.lc=function(i){var s;try{var f=null!==(null===(s=this.Ga)||void 0===s?void 0:s.getItem(this.hc(i)));return we("IndexedDbPersistence","Client '"+i+"' "+(f?"is":"is not")+" zombied in LocalStorage"),f}catch(p){return ke("IndexedDbPersistence","Failed to get zombied client id.",p),!1}},a.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(i){ke("Failed to set zombie client id.",i)}},a.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(i){}},a.prototype.hc=function(i){return"firestore_zombie_"+this.persistenceKey+"_"+i},a}();function ou(a){return Uo.Qn(a,$i.store)}function Sc(a){return Uo.Qn(a,La.store)}var jo=function(){function a(i,s){this.db=i,this.wo=new Rt(this,s)}return a.prototype.Po=function(i){var s=this.Rc(i);return this.db.Tc().ba(i).next(function(f){return s.next(function(p){return f+p})})},a.prototype.Rc=function(i){var s=0;return this.Vo(i,function(f){s++}).next(function(){return s})},a.prototype.Ce=function(i,s){return this.db.Tc().Ce(i,s)},a.prototype.Vo=function(i,s){return this.gc(i,function(f,p){return s(p)})},a.prototype.Da=function(i,s,f){return gs(i,f)},a.prototype.Na=function(i,s,f){return gs(i,f)},a.prototype.po=function(i,s,f){return this.db.Tc().po(i,s,f)},a.prototype.Go=function(i,s){return gs(i,s)},a.prototype.Pc=function(i,s){return p=s,b=!1,va(f=i).os(function(D){return Xu(f,D,p).next(function(U){return U&&(b=!0),dn.resolve(!U)})}).next(function(){return b});var f,p,b},a.prototype.bo=function(i,s){var f=this,p=this.db.Ec().ra(),b=[],D=0;return this.gc(i,function(U,Y){if(Y<=s){var de=f.Pc(i,U).next(function(Te){if(!Te)return D++,p.Rr(i,U).next(function(){return p.Ar(U),ja(i).delete([0,jt(U.path)])})});b.push(de)}}).next(function(){return dn.$n(b)}).next(function(){return p.apply(i)}).next(function(){return D})},a.prototype.removeTarget=function(i,s){var f=s.st(i.xa);return this.db.Tc().ya(i,f)},a.prototype.yc=function(i,s){return gs(i,s)},a.prototype.gc=function(i,s){var f,p=ja(i),b=mi.ai;return p.rs({index:po.documentTargetsIndex},function(D,U){var de=U.path,Te=U.sequenceNumber;0===D[0]?(b!==mi.ai&&s(new C(Dn(f)),b),b=Te,f=de):b=mi.ai}).next(function(){b!==mi.ai&&s(new C(Dn(f)),b)})},a.prototype.So=function(i){return this.db.Ec().aa(i)},a}();function gs(a,i){return ja(a).put((f=a.xa,new po(0,jt(i.path),f)));var f}function Cu(a,i){var s=a.projectId;return a.j||(s+="."+a.database),"firestore/"+i+"/"+s+"/"}var Va=function(){function a(i,s,f){this.persistence=i,this.Vc=s,this.bc=new Yn(Wt),this.vc=new yr(function(p){return ct(p)},nn),this.Sc=Hn.min(),this.Sr=i.mc(f),this.Dc=i.Ec(),this.Ka=i.Tc(),this.Cc=new N(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return a.prototype.Io=function(i){var s=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(f){return i.vo(f,s.bc)})},a}();function Gs(a,i){var s=ze(a);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(f){var D,U,Y,de,Te,Ge,Xe,p=i.batch.keys(),b=s.Dc.ra({oa:!0});return(D=s,U=f,Y=i,de=b,Te=Y.batch,Ge=Te.keys(),Xe=dn.resolve(),Ge.forEach(function(yt){Xe=Xe.next(function(){return de.Rr(U,yt)}).next(function(Ft){var Jt=Ft,Fn=Y.dr.get(yt);ut(null!==Fn),(!Jt||Jt.version.L(Fn)<0)&&(Jt=Te.cr(yt,Jt,Y))&&de.Er(Jt,Y._r)})}),Xe.next(function(){return D.Sr.Wo(U,Te)})).next(function(){return b.apply(f)}).next(function(){return s.Sr.zo(f)}).next(function(){return s.Cc.kr(f,p)})})}function Tu(a){var i=ze(a);return i.persistence.runTransaction("Get last remote snapshot version","readonly",function(s){return i.Ka.Ea(s)})}function _l(a,i){var s=ze(a),f=i.nt,p=s.bc;return s.persistence.runTransaction("Apply remote event","readwrite-primary",function(b){var D=s.Dc.ra({oa:!0});p=s.bc;var U=[];i.zt.forEach(function(Ge,Xe){var Fn,jn,er,yt=p.get(Xe);if(yt){U.push(s.Ka.Ca(b,Ge.se,Xe).next(function(){return s.Ka.Sa(b,Ge.ee,Xe)}));var Ft=Ge.resumeToken;if(Ft.O()>0){var Jt=yt.it(Ft,f).st(b.xa);p=p.ot(Xe,Jt),Fn=yt,er=Ge,ut((jn=Jt).resumeToken.O()>0),(0===Fn.resumeToken.O()||jn.nt.X()-Fn.nt.X()>=3e8||er.ee.size+er.ne.size+er.se.size>0)&&U.push(s.Ka.ya(b,Jt))}}});var Y=ei(),de=Tt();if(i.Yt.forEach(function(Ge,Xe){de=de.add(Ge)}),U.push(D.getEntries(b,de).next(function(Ge){i.Yt.forEach(function(Xe,yt){var Ft=Ge.get(Xe);yt instanceof Or&&yt.version.isEqual(Hn.min())?(D.Ar(Xe,f),Y=Y.ot(Xe,yt)):null==Ft||yt.version.L(Ft.version)>0||0===yt.version.L(Ft.version)&&Ft.hasPendingWrites?(D.Er(yt,f),Y=Y.ot(Xe,yt)):we("LocalStore","Ignoring outdated watch update for ",Xe,". Current version:",Ft.version," Watch version:",yt.version),i.Jt.has(Xe)&&U.push(s.persistence.No.yc(b,Xe))})})),!f.isEqual(Hn.min())){var Te=s.Ka.Ea(b).next(function(Ge){return s.Ka.Aa(b,b.xa,f)});U.push(Te)}return dn.$n(U).next(function(){return D.apply(b)}).next(function(){return s.Cc.Mr(b,Y)})}).then(function(b){return s.bc=p,b})}function wl(a,i){var s=ze(a);return s.persistence.runTransaction("Get next mutation batch","readonly",function(f){return void 0===i&&(i=-1),s.Sr.Bo(f,i)})}function Su(a,i){var s=ze(a);return s.persistence.runTransaction("Allocate target","readwrite",function(f){var p;return s.Ka.va(f,i).next(function(b){return b?dn.resolve(p=b):s.Ka.wa(f).next(function(D){return p=new pn(i,D,0,f.xa),s.Ka.Ra(f,p).next(function(){return p})})})}).then(function(f){var p=s.bc.get(f.targetId);return(null===p||f.nt.L(p.nt)>0)&&(s.bc=s.bc.ot(f.targetId,f),s.vc.set(i,f.targetId)),f})}function Ba(a,i,s){return M.__awaiter(this,void 0,void 0,function(){var f,p,b,D;return M.__generator(this,function(U){switch(U.label){case 0:f=ze(a),p=f.bc.get(i),b=s?"readwrite":"readwrite-primary",U.label=1;case 1:return U.trys.push([1,4,,5]),s?[3,3]:[4,f.persistence.runTransaction("Release target",b,function(Y){return f.persistence.No.removeTarget(Y,p)})];case 2:U.sent(),U.label=3;case 3:return[3,5];case 4:if(!Ko(D=U.sent()))throw D;return we("LocalStore","Failed to update sequence numbers for target "+i+": "+D),[3,5];case 5:return f.bc=f.bc.remove(i),f.vc.delete(p.target),[2]}})})}function Du(a,i,s){var f=ze(a),p=Hn.min(),b=Tt();return f.persistence.runTransaction("Execute query","readonly",function(D){return(U=f,Y=D,de=Di(i),Te=ze(U),Ge=Te.vc.get(de),void 0!==Ge?dn.resolve(Te.bc.get(Ge)):Te.Ka.va(Y,de)).next(function(U){if(U)return p=U.lastLimboFreeSnapshotVersion,f.Ka.Fa(D,U.targetId).next(function(Y){b=Y})}).next(function(){return f.Vc.Lr(D,i,s?p:Hn.min(),s?b:Tt())}).next(function(U){return{documents:U,Fc:b}});var U,Y,de,Te,Ge})}function Vo(a,i){var s=ze(a),f=ze(s.Ka),p=s.bc.get(i);return p?Promise.resolve(p.target):s.persistence.runTransaction("Get target data","readonly",function(b){return f.Ue(b,i).next(function(D){return D?D.target:null})})}function Au(a){var i=ze(a);return i.persistence.runTransaction("Get new document changes","readonly",function(s){return p=s,b=i.Sc,D=ze(i.Dc),U=ei(),Y=io(b),de=Qo(p),Te=IDBKeyRange.lowerBound(Y,!0),de.rs({index:Hi.readTimeIndex,range:Te},function(Ge,Xe){var yt=Mr(D.serializer,Xe);U=U.ot(yt.key,yt),Y=Xe.readTime}).next(function(){return{xc:U,readTime:rs(Y)}});var p,b,D,U,Y,de,Te}).then(function(s){var f=s.xc;return i.Sc=s.readTime,f})}function Ha(a){return M.__awaiter(this,void 0,void 0,function(){var i;return M.__generator(this,function(s){return[2,(i=ze(a)).persistence.runTransaction("Synchronize last document change read time","readonly",function(f){return b=Qo(f),D=Hn.min(),b.rs({index:Hi.readTimeIndex,reverse:!0},function(U,Y,de){Y.readTime&&(D=rs(Y.readTime)),de.done()}).next(function(){return D});var b,D}).then(function(f){i.Sc=f})]})})}function ya(a){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(i){if(a.code!==oe.FAILED_PRECONDITION||a.message!==d)throw a;return we("LocalStore","Unexpectedly lost primary lease"),[2]})})}var vs=function(){function a(){this.$c=new Nr(go.kc),this.Mc=new Nr(go.Oc)}return a.prototype.m=function(){return this.$c.m()},a.prototype.Da=function(i,s){var f=new go(i,s);this.$c=this.$c.add(f),this.Mc=this.Mc.add(f)},a.prototype.Lc=function(i,s){var f=this;i.forEach(function(p){return f.Da(p,s)})},a.prototype.Na=function(i,s){this.Bc(new go(i,s))},a.prototype.qc=function(i,s){var f=this;i.forEach(function(p){return f.Na(p,s)})},a.prototype.Uc=function(i){var s=this,f=new C(new Ot([])),p=new go(f,i),b=new go(f,i+1),D=[];return this.Mc.Ft([p,b],function(U){s.Bc(U),D.push(U.key)}),D},a.prototype.Qc=function(){var i=this;this.$c.forEach(function(s){return i.Bc(s)})},a.prototype.Bc=function(i){this.$c=this.$c.delete(i),this.Mc=this.Mc.delete(i)},a.prototype.Wc=function(i){var s=new C(new Ot([])),f=new go(s,i),p=new go(s,i+1),b=Tt();return this.Mc.Ft([f,p],function(D){b=b.add(D.key)}),b},a.prototype.Ho=function(i){var s=new go(i,0),f=this.$c.$t(s);return null!==f&&i.isEqual(f.key)},a}(),go=function(){function a(i,s){this.key=i,this.jc=s}return a.kc=function(i,s){return C.i(i.key,s.key)||Wt(i.jc,s.jc)},a.Oc=function(i,s){return Wt(i.jc,s.jc)||C.i(i.key,s.key)},a}(),bl=function(a,i){this.user=i,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+a},Qc=function(){function a(){this.Gc=null}return a.prototype.getToken=function(){return Promise.resolve(null)},a.prototype.zc=function(){},a.prototype.Hc=function(i){this.Gc=i,i(Zr.UNAUTHENTICATED)},a.prototype.Yc=function(){this.Gc=null},a}(),El=function(){function a(i){var s=this;this.Jc=null,this.currentUser=Zr.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){s.Zc++,s.currentUser=s.tu(),s.Xc=!0,s.Gc&&s.Gc(s.currentUser)},this.Zc=0,this.auth=i.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),i.get().then(function(f){s.auth=f,s.Jc&&s.auth.addAuthTokenListener(s.Jc)},function(){}))}return a.prototype.getToken=function(){var i=this,s=this.Zc,f=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(f).then(function(p){return i.Zc!==s?(we("FirebaseCredentialsProvider","getToken aborted due to token change."),i.getToken()):p?(ut("string"==typeof p.accessToken),new bl(p.accessToken,i.currentUser)):null}):Promise.resolve(null)},a.prototype.zc=function(){this.forceRefresh=!0},a.prototype.Hc=function(i){this.Gc=i,this.Xc&&i(this.currentUser)},a.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},a.prototype.tu=function(){var i=this.auth&&this.auth.getUid();return ut(null===i||"string"==typeof i),new Zr(i)},a}(),Dc=function(){function a(i,s){this.eu=i,this.nu=s,this.type="FirstParty",this.user=Zr.ni}return Object.defineProperty(a.prototype,"Kc",{get:function(){var i={"X-Goog-AuthUser":this.nu},s=this.eu.auth.getAuthHeaderValueForFirstParty([]);return s&&(i.Authorization=s),i},enumerable:!1,configurable:!0}),a}(),Ga=function(){function a(i,s){this.eu=i,this.nu=s}return a.prototype.getToken=function(){return Promise.resolve(new Dc(this.eu,this.nu))},a.prototype.Hc=function(i){i(Zr.ni)},a.prototype.Yc=function(){},a.prototype.zc=function(){},a}(),Wa=function(){function a(i,s,f,p,b,D){this.fn=i,this.su=f,this.iu=p,this.ru=b,this.listener=D,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new js(i,s)}return a.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},a.prototype.uu=function(){return 2===this.state},a.prototype.start=function(){3!==this.state?this.auth():this.hu()},a.prototype.stop=function(){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(i){switch(i.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},a.prototype.lu=function(){this.state=0,this.ys.reset()},a.prototype._u=function(){var i=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,function(){return i.fu()}))},a.prototype.du=function(i){this.wu(),this.stream.send(i)},a.prototype.fu=function(){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(i){return this.uu()?[2,this.close(0)]:[2]})})},a.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},a.prototype.close=function(i,s){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(f){switch(f.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==i?this.ys.reset():s&&s.code===oe.RESOURCE_EXHAUSTED?(ke(s.toString()),ke("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):s&&s.code===oe.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=i,[4,this.listener.Tu(s)];case 1:return f.sent(),[2]}})})},a.prototype.mu=function(){},a.prototype.auth=function(){var i=this;this.state=1;var s=this.Eu(this.ou),f=this.ou;this.ru.getToken().then(function(p){i.ou===f&&i.Iu(p)},function(p){s(function(){var b=new z(oe.UNKNOWN,"Fetching auth token failed: "+p.message);return i.Au(b)})})},a.prototype.Iu=function(i){var s=this,f=this.Eu(this.ou);this.stream=this.Ru(i),this.stream.gu(function(){f(function(){return s.state=2,s.listener.gu()})}),this.stream.Tu(function(p){f(function(){return s.Au(p)})}),this.stream.onMessage(function(p){f(function(){return s.onMessage(p)})})},a.prototype.hu=function(){var i=this;this.state=4,this.ys.gn(function(){return M.__awaiter(i,void 0,void 0,function(){return M.__generator(this,function(s){return this.state=0,this.start(),[2]})})})},a.prototype.Au=function(i){return we("PersistentStream","close with error: "+i),this.stream=null,this.close(3,i)},a.prototype.Eu=function(i){var s=this;return function(f){s.fn.ws(function(){return s.ou===i?f():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},a}(),su=function(a){function i(s,f,p,b,D){var U=this;return(U=a.call(this,s,"listen_stream_connection_backoff","listen_stream_idle",f,p,D)||this).serializer=b,U}return M.__extends(i,a),i.prototype.Ru=function(s){return this.iu.Pu("Listen",s)},i.prototype.onMessage=function(s){this.ys.reset();var f=function(b,D){var U,Ks;if("targetChange"in D){var Y="NO_CHANGE"===(Ks=D.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Ks?1:"REMOVE"===Ks?2:"CURRENT"===Ks?3:"RESET"===Ks?4:Pe(),de=D.targetChange.targetIds||[],Te=function(Ks,Vu){return Ks.Qe?(ut(void 0===Vu||"string"==typeof Vu),sn.fromBase64String(Vu||"")):(ut(void 0===Vu||Vu instanceof Uint8Array),sn.fromUint8Array(Vu||new Uint8Array))}(b,D.targetChange.resumeToken),Ge=D.targetChange.cause,Xe=Ge&&function(Ks){var Vu=void 0===Ks.code?oe.UNKNOWN:Ir(Ks.code);return new z(Vu,Ks.message||"")}(Ge);U=new ai(Y,de,Te,Xe||null)}else if("documentChange"in D){var yt=D.documentChange,Ft=Un(b,yt.document.name),Jt=ii(yt.document.updateTime),Fn=new Ii({mapValue:{fields:yt.document.fields}}),jn=new dr(Ft,Jt,Fn,{});U=new nr(yt.targetIds||[],yt.removedTargetIds||[],jn.key,jn)}else if("documentDelete"in D){var Qr=D.documentDelete,hi=Un(b,Qr.document),Ui=Qr.readTime?ii(Qr.readTime):Hn.min(),Ca=new Or(hi,Ui);U=new nr([],Qr.removedTargetIds||[],Ca.key,Ca)}else if("documentRemove"in D){var pu=D.documentRemove,fc=Un(b,pu.document);U=new nr([],pu.removedTargetIds||[],fc,null)}else{if(!("filter"in D))return Pe();var Ta=D.filter,Fl=new _r(Ta.count||0);U=new or(Ta.targetId,Fl)}return U}(this.serializer,s),p=function(b){if(!("targetChange"in b))return Hn.min();var D=b.targetChange;return D.targetIds&&D.targetIds.length?Hn.min():D.readTime?ii(D.readTime):Hn.min()}(s);return this.listener.yu(f,p)},i.prototype.Vu=function(s){var b,D,U,Y,f={};f.database=Cr(this.serializer),f.addTarget=(b=this.serializer,(U=tn(Y=(D=s).target)?{documents:Xn(b,Y)}:{query:Xo(b,Y)}).targetId=D.targetId,D.resumeToken.O()>0&&(U.resumeToken=Zi(b,D.resumeToken)),U);var p=function(b,D){var U=function(Y,de){switch(de){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Pe()}}(0,D.et);return null==U?null:{"goog-listen-tags":U}}(0,s);p&&(f.labels=p),this.du(f)},i.prototype.pu=function(s){var f={};f.database=Cr(this.serializer),f.removeTarget=s,this.du(f)},i}(Wa),au=function(a){function i(s,f,p,b,D){var U=this;return(U=a.call(this,s,"write_stream_connection_backoff","write_stream_idle",f,p,D)||this).serializer=b,U.bu=!1,U}return M.__extends(i,a),Object.defineProperty(i.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,a.prototype.start.call(this)},i.prototype.mu=function(){this.bu&&this.Su([])},i.prototype.Ru=function(s){return this.iu.Pu("Write",s)},i.prototype.onMessage=function(s){if(ut(!!s.streamToken),this.lastStreamToken=s.streamToken,this.bu){this.ys.reset();var f=(D=s.commitTime,(b=s.writeResults)&&b.length>0?(ut(void 0!==D),b.map(function(U){return function(Y,de){var Te=ii(Y.updateTime?Y.updateTime:de);Te.isEqual(Hn.min())&&(Te=ii(de));var Ge=null;return Y.transformResults&&Y.transformResults.length>0&&(Ge=Y.transformResults),new ln(Te,Ge)}(U,D)})):[]),p=ii(s.commitTime);return this.listener.Du(p,f)}var b,D;return ut(!s.writeResults||0===s.writeResults.length),this.bu=!0,this.listener.Cu()},i.prototype.Nu=function(){var s={};s.database=Cr(this.serializer),this.du(s)},i.prototype.Su=function(s){var f=this,p={streamToken:this.lastStreamToken,writes:s.map(function(b){return Ji(f.serializer,b)})};this.du(p)},i}(Wa),Ws=function(a){function i(s,f,p){var b=this;return(b=a.call(this)||this).credentials=s,b.iu=f,b.serializer=p,b.Fu=!1,b}return M.__extends(i,a),i.prototype.xu=function(){if(this.Fu)throw new z(oe.FAILED_PRECONDITION,"The client has already been terminated.")},i.prototype.$u=function(s,f,p){var b=this;return this.xu(),this.credentials.getToken().then(function(D){return b.iu.$u(s,f,p,D)}).catch(function(D){throw D.code===oe.UNAUTHENTICATED&&b.credentials.zc(),D})},i.prototype.ku=function(s,f,p){var b=this;return this.xu(),this.credentials.getToken().then(function(D){return b.iu.ku(s,f,p,D)}).catch(function(D){throw D.code===oe.UNAUTHENTICATED&&b.credentials.zc(),D})},i.prototype.terminate=function(){this.Fu=!1},i}(function(){}),_a=function(){function a(i,s){this.cs=i,this.di=s,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}return a.prototype.Bu=function(){var i=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,function(){return i.Ou=null,i.Uu("Backend didn't respond within 10 seconds."),i.qu("Offline"),Promise.resolve()}))},a.prototype.Qu=function(i){"Online"===this.state?this.qu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+i.toString()),this.qu("Offline")))},a.prototype.set=function(i){this.Wu(),this.Mu=0,"Online"===i&&(this.Lu=!1),this.qu(i)},a.prototype.qu=function(i){i!==this.state&&(this.state=i,this.di(i))},a.prototype.Uu=function(i){var s="Could not reach Cloud Firestore backend. "+i+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(ke(s),this.Lu=!1):we("OnlineStateTracker",s)},a.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},a}(),ms=function(a,i,s,f,p){var b=this;this.ju=a,this.Ku=i,this.cs=s,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=p,this.Xu.Zu(function(D){s.ws(function(){return M.__awaiter(b,void 0,void 0,function(){return M.__generator(this,function(U){switch(U.label){case 0:return Wr(this)?(we("RemoteStore","Restarting streams for network reachability change."),[4,function(Y){return M.__awaiter(this,void 0,void 0,function(){var de;return M.__generator(this,function(Te){switch(Te.label){case 0:return(de=ze(Y)).Yu.add(4),[4,os(de)];case 1:return Te.sent(),de.th.set("Unknown"),de.Yu.delete(4),[4,Zu(de)];case 2:return Te.sent(),[2]}})})}(this)]):[3,2];case 1:U.sent(),U.label=2;case 2:return[2]}})})})}),this.th=new _a(s,f)};function Zu(a){return M.__awaiter(this,void 0,void 0,function(){var i,s;return M.__generator(this,function(f){switch(f.label){case 0:if(!Wr(a))return[3,4];i=0,s=a.Ju,f.label=1;case 1:return i<s.length?[4,(0,s[i])(!0)]:[3,4];case 2:f.sent(),f.label=3;case 3:return i++,[3,1];case 4:return[2]}})})}function os(a){return M.__awaiter(this,void 0,void 0,function(){var i,s;return M.__generator(this,function(f){switch(f.label){case 0:i=0,s=a.Ju,f.label=1;case 1:return i<s.length?[4,(0,s[i])(!1)]:[3,4];case 2:f.sent(),f.label=3;case 3:return i++,[3,1];case 4:return[2]}})})}function Ac(a){return M.__awaiter(this,void 0,void 0,function(){var i;return M.__generator(this,function(s){switch(s.label){case 0:return i=ze(a),we("RemoteStore","RemoteStore shutting down."),i.Yu.add(5),[4,os(i)];case 1:return s.sent(),i.Xu.Di(),i.th.set("Unknown"),[2]}})})}function Ru(a,i){var s=ze(a);s.Hu.has(i.targetId)||(s.Hu.set(i.targetId,i),Rc(s)?Ti(s):ia(s).uu()&&Nu(s,i))}function qs(a,i){var s=ze(a),f=ia(s);s.Hu.delete(i),f.uu()&&Io(s,i),0===s.Hu.size&&(f.uu()?f._u():Wr(s)&&s.th.set("Unknown"))}function Nu(a,i){a.eh.Ie(i.targetId),ia(a).Vu(i)}function Io(a,i){a.eh.Ie(i),ia(a).pu(i)}function Ti(a){a.eh=new Ce({qe:function(i){return a.Gu.qe(i)},Ue:function(i){return a.Hu.get(i)||null}}),ia(a).start(),a.th.Bu()}function Rc(a){return Wr(a)&&!ia(a).cu()&&a.Hu.size>0}function Wr(a){return 0===ze(a).Yu.size}function Ou(a){a.eh=void 0}function wa(a){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(i){return a.Hu.forEach(function(s,f){Nu(a,s)}),[2]})})}function ys(a,i){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(s){return Ou(a),Rc(a)?(a.th.Qu(i),Ti(a)):a.th.set("Unknown"),[2]})})}function $s(a,i,s){return M.__awaiter(this,void 0,void 0,function(){var f,p,b;return M.__generator(this,function(D){switch(D.label){case 0:if(a.th.set("Online"),!(i instanceof ai&&2===i.state&&i.cause))return[3,6];D.label=1;case 1:return D.trys.push([1,3,,5]),[4,function(U,Y){return M.__awaiter(this,void 0,void 0,function(){var de,Te,Ge,Xe;return M.__generator(this,function(yt){switch(yt.label){case 0:de=Y.cause,Te=0,Ge=Y.targetIds,yt.label=1;case 1:return Te<Ge.length?U.Hu.has(Xe=Ge[Te])?[4,U.Gu.nh(Xe,de)]:[3,3]:[3,5];case 2:yt.sent(),U.Hu.delete(Xe),U.eh.removeTarget(Xe),yt.label=3;case 3:yt.label=4;case 4:return Te++,[3,1];case 5:return[2]}})})}(a,i)];case 2:return D.sent(),[3,5];case 3:return f=D.sent(),we("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),f),[4,Ju(a,f)];case 4:return D.sent(),[3,5];case 5:return[3,13];case 6:if(i instanceof nr?a.eh.be(i):i instanceof or?a.eh.$e(i):a.eh.De(i),s.isEqual(Hn.min()))return[3,13];D.label=7;case 7:return D.trys.push([7,11,,13]),[4,Tu(a.ju)];case 8:return p=D.sent(),s.L(p)>=0?[4,(U=a,Y=s,de=U.eh.Oe(Y),de.zt.forEach(function(Te,Ge){if(Te.resumeToken.O()>0){var Xe=U.Hu.get(Ge);Xe&&U.Hu.set(Ge,Xe.it(Te.resumeToken,Y))}}),de.Ht.forEach(function(Te){var Ge=U.Hu.get(Te);if(Ge){U.Hu.set(Te,Ge.it(sn.B,Ge.nt)),Io(U,Te);var Xe=new pn(Ge.target,Te,1,Ge.sequenceNumber);Nu(U,Xe)}}),U.Gu.sh(de))]:[3,10];case 9:D.sent(),D.label=10;case 10:return[3,13];case 11:return we("RemoteStore","Failed to raise snapshot:",b=D.sent()),[4,Ju(a,b)];case 12:return D.sent(),[3,13];case 13:return[2]}var U,Y,de})})}function Ju(a,i,s){return M.__awaiter(this,void 0,void 0,function(){var f=this;return M.__generator(this,function(p){switch(p.label){case 0:if(!Ko(i))throw i;return a.Yu.add(1),[4,os(a)];case 1:return p.sent(),a.th.set("Offline"),s||(s=function(){return Tu(a.ju)}),a.cs.Cs(function(){return M.__awaiter(f,void 0,void 0,function(){return M.__generator(this,function(b){switch(b.label){case 0:return we("RemoteStore","Retrying IndexedDB access"),[4,s()];case 1:return b.sent(),a.Yu.delete(1),[4,Zu(a)];case 2:return b.sent(),[2]}})})}),[2]}})})}function Ns(a,i){return i().catch(function(s){return Ju(a,s,i)})}function uu(a){return M.__awaiter(this,void 0,void 0,function(){var i,s,f,p,b;return M.__generator(this,function(D){switch(D.label){case 0:i=ze(a),s=ws(i),f=i.zu.length>0?i.zu[i.zu.length-1].batchId:-1,D.label=1;case 1:if(!(Wr(U=i)&&U.zu.length<10))return[3,7];D.label=2;case 2:return D.trys.push([2,4,,6]),[4,wl(i.ju,f)];case 3:return null===(p=D.sent())?(0===i.zu.length&&s._u(),[3,7]):(f=p.batchId,function(U,Y){U.zu.push(Y);var de=ws(U);de.uu()&&de.vu&&de.Su(Y.mutations)}(i,p),[3,6]);case 4:return b=D.sent(),[4,Ju(i,b)];case 5:return D.sent(),[3,6];case 6:return[3,1];case 7:return _s(i)&&qa(i),[2]}var U})})}function _s(a){return Wr(a)&&!ws(a).cu()&&a.zu.length>0}function qa(a){ws(a).start()}function Os(a){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(i){return ws(a).Nu(),[2]})})}function Ps(a){return M.__awaiter(this,void 0,void 0,function(){var i,s,f;return M.__generator(this,function(b){for(i=ws(a),s=0,f=a.zu;s<f.length;s++)i.Su(f[s].mutations);return[2]})})}function ra(a,i,s){return M.__awaiter(this,void 0,void 0,function(){var f,p;return M.__generator(this,function(b){switch(b.label){case 0:return f=a.zu.shift(),p=v.from(f,i,s),[4,Ns(a,function(){return a.Gu.ih(p)})];case 1:return b.sent(),[4,uu(a)];case 2:return b.sent(),[2]}})})}function Nc(a,i){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(s){switch(s.label){case 0:return i&&ws(a).vu?[4,function(f,p){return M.__awaiter(this,void 0,void 0,function(){var b,D;return M.__generator(this,function(U){switch(U.label){case 0:return Nn(D=p.code)&&D!==oe.ABORTED?(b=f.zu.shift(),ws(f).lu(),[4,Ns(f,function(){return f.Gu.rh(b.batchId,p)})]):[3,3];case 1:return U.sent(),[4,uu(f)];case 2:U.sent(),U.label=3;case 3:return[2]}})})}(a,i)]:[3,2];case 1:s.sent(),s.label=2;case 2:return _s(a)&&qa(a),[2]}})})}function Co(a,i){return M.__awaiter(this,void 0,void 0,function(){var s;return M.__generator(this,function(p){switch(p.label){case 0:return s=ze(a),i?(s.Yu.delete(2),[4,Zu(s)]):[3,2];case 1:return p.sent(),[3,5];case 2:return i?[3,4]:(s.Yu.add(2),[4,os(s)]);case 3:p.sent(),s.th.set("Unknown"),p.label=4;case 4:p.label=5;case 5:return[2]}})})}function ia(a){var s,f,p,b,i=this;return a.oh||(a.oh=(s=a.Ku,f=a.cs,p={gu:wa.bind(null,a),Tu:ys.bind(null,a),yu:$s.bind(null,a)},(b=ze(s)).xu(),new su(f,b.iu,b.credentials,b.serializer,p)),a.Ju.push(function(s){return M.__awaiter(i,void 0,void 0,function(){return M.__generator(this,function(f){switch(f.label){case 0:return s?(a.oh.lu(),Rc(a)?Ti(a):a.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,a.oh.stop()];case 2:f.sent(),Ou(a),f.label=3;case 3:return[2]}})})})),a.oh}function ws(a){var s,f,p,b,i=this;return a.ah||(a.ah=(s=a.Ku,f=a.cs,p={gu:Os.bind(null,a),Tu:Nc.bind(null,a),Cu:Ps.bind(null,a),Du:ra.bind(null,a)},(b=ze(s)).xu(),new au(f,b.iu,b.credentials,b.serializer,p)),a.Ju.push(function(s){return M.__awaiter(i,void 0,void 0,function(){return M.__generator(this,function(f){switch(f.label){case 0:return s?(a.ah.lu(),[4,uu(a)]):[3,2];case 1:return f.sent(),[3,4];case 2:return[4,a.ah.stop()];case 3:f.sent(),a.zu.length>0&&(we("RemoteStore","Stopping write stream with "+a.zu.length+" pending writes"),a.zu=[]),f.label=4;case 4:return[2]}})})})),a.ah}var ec=function(a){this.key=a},xs=function(a){this.key=a},Yc=function(){function a(i,s){this.query=i,this.uh=s,this.hh=null,this.te=!1,this.lh=Tt(),this.Wt=Tt(),this._h=$n(i),this.fh=new mn(this._h)}return Object.defineProperty(a.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),a.prototype.wh=function(i,s){var f=this,p=s?s.mh:new Mn,b=s?s.fh:this.fh,D=s?s.Wt:this.Wt,U=b,Y=!1,de=Ls(this.query)&&b.size===this.query.limit?b.last():null,Te=Xr(this.query)&&b.size===this.query.limit?b.first():null;if(i.ht(function(Xe,yt){var Ft=b.get(Xe),Jt=yt instanceof dr?yt:null;Jt&&(Jt=Lr(f.query,Jt)?Jt:null);var Fn=!!Ft&&f.Wt.has(Ft.key),jn=!!Jt&&(Jt.Je||f.Wt.has(Jt.key)&&Jt.hasCommittedMutations),er=!1;Ft&&Jt?Ft.data().isEqual(Jt.data())?Fn!==jn&&(p.track({type:3,doc:Jt}),er=!0):f.Th(Ft,Jt)||(p.track({type:2,doc:Jt}),er=!0,(de&&f._h(Jt,de)>0||Te&&f._h(Jt,Te)<0)&&(Y=!0)):!Ft&&Jt?(p.track({type:0,doc:Jt}),er=!0):Ft&&!Jt&&(p.track({type:1,doc:Ft}),er=!0,(de||Te)&&(Y=!0)),er&&(Jt?(U=U.add(Jt),D=jn?D.add(Xe):D.delete(Xe)):(U=U.delete(Xe),D=D.delete(Xe)))}),Ls(this.query)||Xr(this.query))for(;U.size>this.query.limit;){var Ge=Ls(this.query)?U.last():U.first();U=U.delete(Ge.key),D=D.delete(Ge.key),p.track({type:1,doc:Ge})}return{fh:U,mh:p,Eh:Y,Wt:D}},a.prototype.Th=function(i,s){return i.Je&&s.hasCommittedMutations&&!s.Je},a.prototype.yr=function(i,s,f){var p=this,b=this.fh;this.fh=i.fh,this.Wt=i.Wt;var D=i.mh.Ut();D.sort(function(Te,Ge){return yt=Ge.type,(Ft=function(Jt){switch(Jt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}})(Te.type)-Ft(yt)||p._h(Te.doc,Ge.doc);var yt,Ft}),this.Ih(f);var U=s?this.Ah():[],Y=0===this.lh.size&&this.te?1:0,de=Y!==this.hh;return this.hh=Y,0!==D.length||de?{snapshot:new Qt(this.query,i.fh,b,D,i.Wt,0===Y,de,!1),Rh:U}:{Rh:U}},a.prototype.Qs=function(i){return this.te&&"Offline"===i?(this.te=!1,this.yr({fh:this.fh,mh:new Mn,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},a.prototype.gh=function(i){return!this.uh.has(i)&&!!this.fh.has(i)&&!this.fh.get(i).Je},a.prototype.Ih=function(i){var s=this;i&&(i.ee.forEach(function(f){return s.uh=s.uh.add(f)}),i.ne.forEach(function(f){}),i.se.forEach(function(f){return s.uh=s.uh.delete(f)}),this.te=i.te)},a.prototype.Ah=function(){var i=this;if(!this.te)return[];var s=this.lh;this.lh=Tt(),this.fh.forEach(function(p){i.gh(p.key)&&(i.lh=i.lh.add(p.key))});var f=[];return s.forEach(function(p){i.lh.has(p)||f.push(new xs(p))}),this.lh.forEach(function(p){s.has(p)||f.push(new ec(p))}),f},a.prototype.Ph=function(i){this.uh=i.Fc,this.lh=Tt();var s=this.wh(i.documents);return this.yr(s,!0)},a.prototype.yh=function(){return Qt.Gt(this.query,this.fh,this.Wt,0===this.hh)},a}(),Pu=function(a,i,s){this.query=a,this.targetId=i,this.view=s},cu=function(a){this.key=a,this.Vh=!1},sf=function(){function a(i,s,f,p,b,D){this.ju=i,this.ph=s,this.bh=f,this.Sh=p,this.currentUser=b,this.Dh=D,this.Ch={},this.Nh=new yr(function(U){return br(U)},Zt),this.Fh=new Map,this.xh=[],this.$h=new Yn(C.i),this.kh=new Map,this.Mh=new vs,this.Oh={},this.Lh=new Map,this.Bh=Ua.da(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(a.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),a}();function Xc(a,i){return M.__awaiter(this,void 0,void 0,function(){var s,p,b,D,U;return M.__generator(this,function(Y){switch(Y.label){case 0:return s=Fu(a),(b=s.Nh.get(i))?(s.Sh.Oi(b.targetId),p=b.view.yh(),[3,4]):[3,1];case 1:return[4,Su(s.ju,Di(i))];case 2:return D=Y.sent(),U=s.Sh.Oi(D.targetId),[4,$a(s,i,D.targetId,"current"===U)];case 3:p=Y.sent(),s.Uh&&Ru(s.ph,D),Y.label=4;case 4:return[2,p]}})})}function $a(a,i,s,f){return M.__awaiter(this,void 0,void 0,function(){var p,b,D,U,Y,de;return M.__generator(this,function(Te){switch(Te.label){case 0:return a.Qh=function(Ge,Xe,yt){return function(Ft,Jt,Fn,jn){return M.__awaiter(this,void 0,void 0,function(){var er,Tr,Qr;return M.__generator(this,function(hi){switch(hi.label){case 0:return(er=Jt.view.wh(Fn)).Eh?[4,Du(Ft.ju,Jt.query,!1).then(function(Ui){return Jt.view.wh(Ui.documents,er)})]:[3,2];case 1:er=hi.sent(),hi.label=2;case 2:return Tr=jn&&jn.zt.get(Jt.targetId),Qr=Jt.view.yr(er,Ft.Uh,Tr),[2,(Il(Ft,Jt.targetId,Qr.Rh),Qr.snapshot)]}})})}(a,Ge,Xe,yt)},[4,Du(a.ju,i,!0)];case 1:return p=Te.sent(),b=new Yc(i,p.Fc),D=b.wh(p.documents),U=fr.Zt(s,f&&"Offline"!==a.onlineState),Y=b.yr(D,a.Uh,U),Il(a,s,Y.Rh),de=new Pu(i,s,b),[2,(a.Nh.set(i,de),a.Fh.has(s)?a.Fh.get(s).push(i):a.Fh.set(s,[i]),Y.snapshot)]}})})}function Oc(a,i){return M.__awaiter(this,void 0,void 0,function(){var s,f,p;return M.__generator(this,function(b){switch(b.label){case 0:return s=ze(a),f=s.Nh.get(i),(p=s.Fh.get(f.targetId)).length>1?[2,(s.Fh.set(f.targetId,p.filter(function(D){return!Zt(D,i)})),void s.Nh.delete(i))]:s.Uh?(s.Sh.Bi(f.targetId),s.Sh.Fi(f.targetId)?[3,2]:[4,Ba(s.ju,f.targetId,!1).then(function(){s.Sh.Ui(f.targetId),qs(s.ph,f.targetId),Qa(s,f.targetId)}).catch(ya)]):[3,3];case 1:b.sent(),b.label=2;case 2:return[3,5];case 3:return Qa(s,f.targetId),[4,Ba(s.ju,f.targetId,!0)];case 4:b.sent(),b.label=5;case 5:return[2]}})})}function tc(a,i){return M.__awaiter(this,void 0,void 0,function(){var s,f;return M.__generator(this,function(p){switch(p.label){case 0:s=ze(a),p.label=1;case 1:return p.trys.push([1,4,,6]),[4,_l(s.ju,i)];case 2:return f=p.sent(),i.zt.forEach(function(b,D){var U=s.kh.get(D);U&&(ut(b.ee.size+b.ne.size+b.se.size<=1),b.ee.size>0?U.Vh=!0:b.ne.size>0?ut(U.Vh):b.se.size>0&&(ut(U.Vh),U.Vh=!1))}),[4,ba(s,f,i)];case 3:return p.sent(),[3,6];case 4:return[4,ya(p.sent())];case 5:return p.sent(),[3,6];case 6:return[2]}})})}function nc(a,i,s){var f=ze(a);if(f.Uh&&0===s||!f.Uh&&1===s){var p=[];f.Nh.forEach(function(b,D){var U=D.view.Qs(i);U.snapshot&&p.push(U.snapshot)}),function(b,D){var U=ze(b);U.onlineState=D;var Y=!1;U.Bs.forEach(function(de,Te){for(var Ge=0,Xe=Te.listeners;Ge<Xe.length;Ge++)Xe[Ge].Qs(D)&&(Y=!0)}),Y&&Ts(U)}(f.bh,i),p.length&&f.Ch.yu(p),f.onlineState=i,f.Uh&&f.Sh.Ki(i)}}function Zc(a,i,s){return M.__awaiter(this,void 0,void 0,function(){var f,p,b,D,U,Y;return M.__generator(this,function(de){switch(de.label){case 0:return(f=ze(a)).Sh.Qi(i,"rejected",s),p=f.kh.get(i),(b=p&&p.key)?(D=(D=new Yn(C.i)).ot(b,new Or(b,Hn.min())),U=Tt().add(b),Y=new Tn(Hn.min(),new Map,new Nr(Wt),D,U),[4,tc(f,Y)]):[3,2];case 1:return de.sent(),f.$h=f.$h.remove(b),f.kh.delete(i),oa(f),[3,4];case 2:return[4,Ba(f.ju,i,!1).then(function(){return Qa(f,i,s)}).catch(ya)];case 3:de.sent(),de.label=4;case 4:return[2]}})})}function Pc(a,i){return M.__awaiter(this,void 0,void 0,function(){var s,f,p;return M.__generator(this,function(b){switch(b.label){case 0:s=ze(a),f=i.batch.batchId,b.label=1;case 1:return b.trys.push([1,4,,6]),[4,Gs(s.ju,i)];case 2:return p=b.sent(),Ka(s,f,null),za(s,f),s.Sh.ki(f,"acknowledged"),[4,ba(s,p)];case 3:return b.sent(),[3,6];case 4:return[4,ya(b.sent())];case 5:return b.sent(),[3,6];case 6:return[2]}})})}function xu(a,i,s){return M.__awaiter(this,void 0,void 0,function(){var f,p;return M.__generator(this,function(b){switch(b.label){case 0:f=ze(a),b.label=1;case 1:return b.trys.push([1,4,,6]),[4,(D=f.ju,U=i,Y=ze(D),Y.persistence.runTransaction("Reject batch","readwrite-primary",function(de){var Te;return Y.Sr.Oo(de,U).next(function(Ge){return ut(null!==Ge),Te=Ge.keys(),Y.Sr.Wo(de,Ge)}).next(function(){return Y.Sr.zo(de)}).next(function(){return Y.Cc.kr(de,Te)})}))];case 2:return p=b.sent(),Ka(f,i,s),za(f,i),f.Sh.ki(i,"rejected",s),[4,ba(f,p)];case 3:return b.sent(),[3,6];case 4:return[4,ya(b.sent())];case 5:return b.sent(),[3,6];case 6:return[2]}var D,U,Y})})}function za(a,i){(a.Lh.get(i)||[]).forEach(function(s){s.resolve()}),a.Lh.delete(i)}function Ka(a,i,s){var f=ze(a),p=f.Oh[f.currentUser.ti()];if(p){var b=p.get(i);b&&(s?b.reject(s):b.resolve(),p=p.remove(i)),f.Oh[f.currentUser.ti()]=p}}function Qa(a,i,s){void 0===s&&(s=null),a.Sh.Bi(i);for(var f=0,p=a.Fh.get(i);f<p.length;f++){var b=p[f];a.Nh.delete(b),s&&a.Ch.Wh(b,s)}a.Fh.delete(i),a.Uh&&a.Mh.Uc(i).forEach(function(D){a.Mh.Ho(D)||Mu(a,D)})}function Mu(a,i){var s=a.$h.get(i);null!==s&&(qs(a.ph,s),a.$h=a.$h.remove(i),a.kh.delete(s),oa(a))}function Il(a,i,s){for(var f=0,p=s;f<p.length;f++){var b=p[f];b instanceof ec?(a.Mh.Da(b.key,i),ku(a,b)):b instanceof xs?(we("SyncEngine","Document no longer in limbo: "+b.key),a.Mh.Na(b.key,i),a.Mh.Ho(b.key)||Mu(a,b.key)):Pe()}}function ku(a,i){var s=i.key;a.$h.get(s)||(we("SyncEngine","New document in limbo: "+s),a.xh.push(s),oa(a))}function oa(a){for(;a.xh.length>0&&a.$h.size<a.Dh;){var i=a.xh.shift(),s=a.Bh.next();a.kh.set(s,new cu(i)),a.$h=a.$h.ot(i,s),Ru(a.ph,new pn(Di(Bi(i.path)),s,2,mi.ai))}}function ba(a,i,s){return M.__awaiter(this,void 0,void 0,function(){var f,p,b,D;return M.__generator(this,function(U){switch(U.label){case 0:return f=ze(a),p=[],b=[],D=[],f.Nh.m()?[3,3]:(f.Nh.forEach(function(Y,de){D.push(f.Qh(de,i,s).then(function(Te){if(Te){f.Uh&&f.Sh.Qi(de.targetId,Te.fromCache?"not-current":"current"),p.push(Te);var Ge=F.zr(de.targetId,Te);b.push(Ge)}}))}),[4,Promise.all(D)]);case 1:return U.sent(),f.Ch.yu(p),[4,function(Y,de){return M.__awaiter(this,void 0,void 0,function(){var Te,Ge,Xe,yt,Ft,Jt,Fn,er;return M.__generator(this,function(Tr){switch(Tr.label){case 0:Te=ze(Y),Tr.label=1;case 1:return Tr.trys.push([1,3,,4]),[4,Te.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Qr){return dn.forEach(de,function(hi){return dn.forEach(hi.Kr,function(Ui){return Te.persistence.No.Da(Qr,hi.targetId,Ui)}).next(function(){return dn.forEach(hi.Gr,function(Ui){return Te.persistence.No.Na(Qr,hi.targetId,Ui)})})})})];case 2:return Tr.sent(),[3,4];case 3:if(!Ko(Ge=Tr.sent()))throw Ge;return we("LocalStore","Failed to update sequence numbers: "+Ge),[3,4];case 4:for(Xe=0,yt=de;Xe<yt.length;Xe++)Jt=(Ft=yt[Xe]).targetId,Ft.fromCache||(Fn=Te.bc.get(Jt),er=Fn.rt(Fn.nt),Te.bc=Te.bc.ot(Jt,er));return[2]}})})}(f.ju,b)];case 2:U.sent(),U.label=3;case 3:return[2]}})})}function rc(a,i){return M.__awaiter(this,void 0,void 0,function(){var s,f;return M.__generator(this,function(p){switch(p.label){case 0:return(s=ze(a)).currentUser.isEqual(i)?[3,3]:(we("SyncEngine","User change. New user:",i.ti()),[4,function(b,D){return M.__awaiter(this,void 0,void 0,function(){var U,Y,de,Te;return M.__generator(this,function(Ge){switch(Ge.label){case 0:return U=ze(b),Y=U.Sr,de=U.Cc,[4,U.persistence.runTransaction("Handle user change","readonly",function(Xe){var yt;return U.Sr.Uo(Xe).next(function(Ft){return yt=Ft,Y=U.persistence.mc(D),de=new N(U.Dc,Y,U.persistence.Ic()),Y.Uo(Xe)}).next(function(Ft){for(var Jt=[],Fn=[],jn=Tt(),er=0,Tr=yt;er<Tr.length;er++){var Qr=Tr[er];Jt.push(Qr.batchId);for(var hi=0,Ui=Qr.mutations;hi<Ui.length;hi++)jn=jn.add(Ui[hi].key)}for(var Er=0,pu=Ft;Er<pu.length;Er++){var fc=pu[Er];Fn.push(fc.batchId);for(var kl=0,Ta=fc.mutations;kl<Ta.length;kl++)jn=jn.add(Ta[kl].key)}return de.kr(Xe,jn).next(function(Fl){return{jh:Fl,Kh:Jt,Gh:Fn}})})})];case 1:return Te=Ge.sent(),[2,(U.Sr=Y,U.Cc=de,U.Vc.Nc(U.Cc),Te)]}})})}(s.ju,i)]);case 1:return f=p.sent(),s.currentUser=i,(b=s).Lh.forEach(function(U){U.forEach(function(Y){Y.reject(new z(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),b.Lh.clear(),s.Sh.ji(i,f.Kh,f.Gh),[4,ba(s,f.jh)];case 2:p.sent(),p.label=3;case 3:return[2]}var b})})}function Jc(a,i){var s=ze(a),f=s.kh.get(i);if(f&&f.Vh)return Tt().add(f.key);var p=Tt(),b=s.Fh.get(i);if(!b)return p;for(var D=0,U=b;D<U.length;D++){var de=s.Nh.get(U[D]);p=p.kt(de.view.dh)}return p}function lu(a,i){return M.__awaiter(this,void 0,void 0,function(){var s,f,p;return M.__generator(this,function(b){switch(b.label){case 0:return[4,Du((s=ze(a)).ju,i.query,!0)];case 1:return f=b.sent(),p=i.view.Ph(f),[2,(s.Uh&&Il(s,i.targetId,p.Rh),p)]}})})}function Cl(a,i,s,f){return M.__awaiter(this,void 0,void 0,function(){var p,b;return M.__generator(this,function(D){switch(D.label){case 0:return[4,(U=(p=ze(a)).ju,Y=i,de=ze(U),Te=ze(de.Sr),de.persistence.runTransaction("Lookup mutation documents","readonly",function(Ge){return Te.Lo(Ge,Y).next(function(Xe){return Xe?de.Cc.kr(Ge,Xe):dn.resolve(null)})}))];case 1:return null===(b=D.sent())?[3,6]:"pending"!==s?[3,3]:[4,uu(p.ph)];case 2:return D.sent(),[3,4];case 3:"acknowledged"===s||"rejected"===s?(Ka(p,i,f||null),za(p,i),function(U,Y){ze(ze(U).Sr).Ko(Y)}(p.ju,i)):Pe(),D.label=4;case 4:return[4,ba(p,b)];case 5:return D.sent(),[3,7];case 6:we("SyncEngine","Cannot apply mutation batch with id: "+i),D.label=7;case 7:return[2]}var U,Y,de,Te})})}function el(a,i){return M.__awaiter(this,void 0,void 0,function(){var s,f,p,b,D,Y,de;return M.__generator(this,function(Te){switch(Te.label){case 0:return Fu(s=ze(a)),oc(s),!0!==i||!0===s.qh?[3,3]:(f=s.Sh.Ci(),[4,ic(s,f.A())]);case 1:return p=Te.sent(),s.qh=!0,[4,Co(s.ph,!0)];case 2:for(Te.sent(),b=0,D=p;b<D.length;b++)Ru(s.ph,D[b]);return[3,7];case 3:return!1!==i||!1===s.qh?[3,7]:(Y=[],de=Promise.resolve(),s.Fh.forEach(function(Ge,Xe){s.Sh.qi(Xe)?Y.push(Xe):de=de.then(function(){return Qa(s,Xe),Ba(s.ju,Xe,!0)}),qs(s.ph,Xe)}),[4,de]);case 4:return Te.sent(),[4,ic(s,Y)];case 5:return Te.sent(),(Xe=ze(s)).kh.forEach(function(yt,Ft){qs(Xe.ph,Ft)}),Xe.Mh.Qc(),Xe.kh=new Map,Xe.$h=new Yn(C.i),s.qh=!1,[4,Co(s.ph,!1)];case 6:Te.sent(),Te.label=7;case 7:return[2]}var Xe})})}function ic(a,i,s){return M.__awaiter(this,void 0,void 0,function(){var f,p,b,D,U,Y,de,Te,Ge,Xe,Ft,Jt,Fn;return M.__generator(this,function(jn){switch(jn.label){case 0:f=ze(a),p=[],b=[],D=0,U=i,jn.label=1;case 1:return D<U.length?(de=void 0,(Te=f.Fh.get(Y=U[D]))&&0!==Te.length?[4,Su(f.ju,Di(Te[0]))]:[3,7]):[3,13];case 2:de=jn.sent(),Ge=0,Xe=Te,jn.label=3;case 3:return Ge<Xe.length?(Ft=f.Nh.get(Xe[Ge]),[4,lu(f,Ft)]):[3,6];case 4:(Jt=jn.sent()).snapshot&&b.push(Jt.snapshot),jn.label=5;case 5:return Ge++,[3,3];case 6:return[3,11];case 7:return[4,Vo(f.ju,Y)];case 8:return Fn=jn.sent(),[4,Su(f.ju,Fn)];case 9:return de=jn.sent(),[4,$a(f,xc(Fn),Y,!1)];case 10:jn.sent(),jn.label=11;case 11:p.push(de),jn.label=12;case 12:return D++,[3,1];case 13:return[2,(f.Ch.yu(b),p)]}})})}function xc(a){return ha(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Ms(a){var i=ze(a);return ze(ze(i.ju).persistence).pi()}function zs(a,i,s,f){return M.__awaiter(this,void 0,void 0,function(){var p,b,D;return M.__generator(this,function(U){switch(U.label){case 0:return(p=ze(a)).qh?(we("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!p.Fh.has(i))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Au(p.ju)];case 3:return b=U.sent(),D=Tn.Xt(i,"current"===s),[4,ba(p,b,D)];case 4:return U.sent(),[3,8];case 5:return[4,Ba(p.ju,i,!0)];case 6:return U.sent(),Qa(p,i,f),[3,8];case 7:Pe(),U.label=8;case 8:return[2]}})})}function Ya(a,i,s){return M.__awaiter(this,void 0,void 0,function(){var f,p,b,D,U,Y,de,Te,Ge;return M.__generator(this,function(yt){switch(yt.label){case 0:if(!(f=Fu(a)).qh)return[3,10];p=0,b=i,yt.label=1;case 1:return p<b.length?f.Fh.has(D=b[p])?(we("SyncEngine","Adding an already active target "+D),[3,5]):[4,Vo(f.ju,D)]:[3,6];case 2:return U=yt.sent(),[4,Su(f.ju,U)];case 3:return Y=yt.sent(),[4,$a(f,xc(U),Y.targetId,!1)];case 4:yt.sent(),Ru(f.ph,Y),yt.label=5;case 5:return p++,[3,1];case 6:de=function(Ft){return M.__generator(this,function(Jt){switch(Jt.label){case 0:return f.Fh.has(Ft)?[4,Ba(f.ju,Ft,!1).then(function(){qs(f.ph,Ft),Qa(f,Ft)}).catch(ya)]:[3,2];case 1:Jt.sent(),Jt.label=2;case 2:return[2]}})},Te=0,Ge=s,yt.label=7;case 7:return Te<Ge.length?[5,de(Ge[Te])]:[3,10];case 8:yt.sent(),yt.label=9;case 9:return Te++,[3,7];case 10:return[2]}})})}function Fu(a){var i=ze(a);return i.ph.Gu.sh=tc.bind(null,i),i.ph.Gu.qe=Jc.bind(null,i),i.ph.Gu.nh=Zc.bind(null,i),i.Ch.yu=fo.bind(null,i.bh),i.Ch.Wh=Eo.bind(null,i.bh),i}function oc(a){var i=ze(a);return i.ph.Gu.ih=Pc.bind(null,i),i.ph.Gu.rh=xu.bind(null,i),i}var sc=function(){function a(){}return a.prototype.Nc=function(i){this.zh=i},a.prototype.Lr=function(i,s,f,p){var D,b=this;return 0===(D=s).filters.length&&null===D.limit&&null==D.startAt&&null==D.endAt&&(0===D.on.length||1===D.on.length&&D.on[0].field.p())||f.isEqual(Hn.min())?this.Hh(i,s):this.zh.kr(i,p).next(function(D){var U=b.Yh(s,D);return(Ls(s)||Xr(s))&&b.Eh(s.an,U,p,f)?b.Hh(i,s):(xe()<=J.LogLevel.DEBUG&&we("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),_o(s)),b.zh.Lr(i,s,f).next(function(Y){return U.forEach(function(de){Y=Y.ot(de.key,de)}),Y}))})},a.prototype.Yh=function(i,s){var f=new Nr($n(i));return s.forEach(function(p,b){b instanceof dr&&Lr(i,b)&&(f=f.add(b))}),f},a.prototype.Eh=function(i,s,f,p){if(f.size!==s.size)return!0;var b="F"===i?s.last():s.first();return!!b&&(b.hasPendingWrites||b.version.L(p)>0)},a.prototype.Hh=function(i,s){return xe()<=J.LogLevel.DEBUG&&we("IndexFreeQueryEngine","Using full collection scan to execute query:",_o(s)),this.zh.Lr(i,s,Hn.min())},a}(),ac=function(){function a(i,s){this.Dr=i,this.No=s,this.Sr=[],this.Jh=1,this.Xh=new Nr(go.kc)}return a.prototype.$o=function(i){return dn.resolve(0===this.Sr.length)},a.prototype.ko=function(i,s,f,p){var b=this.Jh;this.Jh++;var D=new As(b,s,f,p);this.Sr.push(D);for(var U=0,Y=p;U<Y.length;U++){var de=Y[U];this.Xh=this.Xh.add(new go(de.key,b)),this.Dr.Mo(i,de.key.path.h())}return dn.resolve(D)},a.prototype.Oo=function(i,s){return dn.resolve(this.Zh(s))},a.prototype.Bo=function(i,s){var p=this.tl(s+1),b=p<0?0:p;return dn.resolve(this.Sr.length>b?this.Sr[b]:null)},a.prototype.qo=function(){return dn.resolve(0===this.Sr.length?-1:this.Jh-1)},a.prototype.Uo=function(i){return dn.resolve(this.Sr.slice())},a.prototype.Nr=function(i,s){var f=this,p=new go(s,0),b=new go(s,Number.POSITIVE_INFINITY),D=[];return this.Xh.Ft([p,b],function(U){var Y=f.Zh(U.jc);D.push(Y)}),dn.resolve(D)},a.prototype.Or=function(i,s){var f=this,p=new Nr(Wt);return s.forEach(function(b){var D=new go(b,0),U=new go(b,Number.POSITIVE_INFINITY);f.Xh.Ft([D,U],function(Y){p=p.add(Y.jc)})}),dn.resolve(this.el(p))},a.prototype.Wr=function(i,s){var f=s.path,p=f.length+1,b=f;C.F(b)||(b=b.child(""));var D=new go(new C(b),0),U=new Nr(Wt);return this.Xh.xt(function(Y){var de=Y.key.path;return!!f.T(de)&&(de.length===p&&(U=U.add(Y.jc)),!0)},D),dn.resolve(this.el(U))},a.prototype.el=function(i){var s=this,f=[];return i.forEach(function(p){var b=s.Zh(p);null!==b&&f.push(b)}),f},a.prototype.Wo=function(i,s){var f=this;ut(0===this.nl(s.batchId,"removed")),this.Sr.shift();var p=this.Xh;return dn.forEach(s.mutations,function(b){var D=new go(b.key,s.batchId);return p=p.delete(D),f.No.Go(i,b.key)}).next(function(){f.Xh=p})},a.prototype.Ko=function(i){},a.prototype.Ho=function(i,s){var f=new go(s,0),p=this.Xh.$t(f);return dn.resolve(s.isEqual(p&&p.key))},a.prototype.zo=function(i){return dn.resolve()},a.prototype.nl=function(i,s){return this.tl(i)},a.prototype.tl=function(i){return 0===this.Sr.length?0:i-this.Sr[0].batchId},a.prototype.Zh=function(i){var s=this.tl(i);return s<0||s>=this.Sr.length?null:this.Sr[s]},a}(),uc=function(){function a(i,s){this.Dr=i,this.sl=s,this.docs=new Yn(C.i),this.size=0}return a.prototype.Er=function(i,s,f){var p=s.key,b=this.docs.get(p),D=b?b.size:0,U=this.sl(s);return this.docs=this.docs.ot(p,{ta:s,size:U,readTime:f}),this.size+=U-D,this.Dr.Mo(i,p.path.h())},a.prototype.Ar=function(i){var s=this.docs.get(i);s&&(this.docs=this.docs.remove(i),this.size-=s.size)},a.prototype.Rr=function(i,s){var f=this.docs.get(s);return dn.resolve(f?f.ta:null)},a.prototype.getEntries=function(i,s){var f=this,p=bi();return s.forEach(function(b){var D=f.docs.get(b);p=p.ot(b,D?D.ta:null)}),dn.resolve(p)},a.prototype.Lr=function(i,s,f){for(var p=ht(),b=new C(s.path.child("")),D=this.docs.ft(b);D.At();){var U=D.It(),de=U.value,Te=de.ta,Ge=de.readTime;if(!s.path.T(U.key.path))break;Ge.L(f)<=0||Te instanceof dr&&Lr(s,Te)&&(p=p.ot(Te.key,Te))}return dn.resolve(p)},a.prototype.il=function(i,s){return dn.forEach(this.docs,function(f){return s(f)})},a.prototype.ra=function(i){return new T(this)},a.prototype.aa=function(i){return dn.resolve(this.size)},a}(),T=function(a){function i(s){var f=this;return(f=a.call(this)||this).ca=s,f}return M.__extends(i,a),i.prototype.yr=function(s){var f=this,p=[];return this.wr.forEach(function(b,D){D?p.push(f.ca.Er(s,D,f.readTime)):f.ca.Ar(b)}),dn.$n(p)},i.prototype.gr=function(s,f){return this.ca.Rr(s,f)},i.prototype.Pr=function(s,f){return this.ca.getEntries(s,f)},i}(l),E=function(){function a(i){this.persistence=i,this.rl=new yr(function(s){return ct(s)},nn),this.lastRemoteSnapshotVersion=Hn.min(),this.highestTargetId=0,this.ol=0,this.al=new vs,this.targetCount=0,this.cl=Ua.fa()}return a.prototype.Ce=function(i,s){return this.rl.forEach(function(f,p){return s(p)}),dn.resolve()},a.prototype.Ea=function(i){return dn.resolve(this.lastRemoteSnapshotVersion)},a.prototype.Ia=function(i){return dn.resolve(this.ol)},a.prototype.wa=function(i){return this.highestTargetId=this.cl.next(),dn.resolve(this.highestTargetId)},a.prototype.Aa=function(i,s,f){return f&&(this.lastRemoteSnapshotVersion=f),s>this.ol&&(this.ol=s),dn.resolve()},a.prototype.ga=function(i){this.rl.set(i.target,i);var s=i.targetId;s>this.highestTargetId&&(this.cl=new Ua(s),this.highestTargetId=s),i.sequenceNumber>this.ol&&(this.ol=i.sequenceNumber)},a.prototype.Ra=function(i,s){return this.ga(s),this.targetCount+=1,dn.resolve()},a.prototype.ya=function(i,s){return this.ga(s),dn.resolve()},a.prototype.Va=function(i,s){return this.rl.delete(s.target),this.al.Uc(s.targetId),this.targetCount-=1,dn.resolve()},a.prototype.po=function(i,s,f){var p=this,b=0,D=[];return this.rl.forEach(function(U,Y){Y.sequenceNumber<=s&&null===f.get(Y.targetId)&&(p.rl.delete(U),D.push(p.pa(i,Y.targetId)),b++)}),dn.$n(D).next(function(){return b})},a.prototype.ba=function(i){return dn.resolve(this.targetCount)},a.prototype.va=function(i,s){var f=this.rl.get(s)||null;return dn.resolve(f)},a.prototype.Sa=function(i,s,f){return this.al.Lc(s,f),dn.resolve()},a.prototype.Ca=function(i,s,f){this.al.qc(s,f);var p=this.persistence.No,b=[];return p&&s.forEach(function(D){b.push(p.Go(i,D))}),dn.$n(b)},a.prototype.pa=function(i,s){return this.al.Uc(s),dn.resolve()},a.prototype.Fa=function(i,s){var f=this.al.Wc(s);return dn.resolve(f)},a.prototype.Ho=function(i,s){return dn.resolve(this.al.Ho(s))},a}(),y=function(){function a(i){var s=this;this.ul={},this.Ma=new mi(0),this.Oa=!1,this.Oa=!0,this.No=i(this),this.Ka=new E(this),this.Dr=new Kc,this.vr=new uc(this.Dr,function(b){return s.No.hl(b)})}return a.prototype.start=function(){return Promise.resolve()},a.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(a.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),a.prototype.Za=function(){},a.prototype.tc=function(){},a.prototype.Ic=function(){return this.Dr},a.prototype.mc=function(i){var s=this.ul[i.ti()];return s||(s=new ac(this.Dr,this.No),this.ul[i.ti()]=s),s},a.prototype.Tc=function(){return this.Ka},a.prototype.Ec=function(){return this.vr},a.prototype.runTransaction=function(i,s,f){var p=this;we("MemoryPersistence","Starting transaction:",i);var b=new O(this.Ma.next());return this.No.ll(),f(b).next(function(D){return p.No._l(b).next(function(){return D})}).Fn().then(function(D){return b.br(),D})},a.prototype.fl=function(i,s){return dn.kn(Object.values(this.ul).map(function(f){return function(){return f.Ho(i,s)}}))},a}(),O=function(a){function i(s){var f=this;return(f=a.call(this)||this).xa=s,f}return M.__extends(i,a),i}(_),H=function(){function a(i){this.persistence=i,this.dl=new vs,this.wl=null}return a.ml=function(i){return new a(i)},Object.defineProperty(a.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw Pe()},enumerable:!1,configurable:!0}),a.prototype.Da=function(i,s,f){return this.dl.Da(f,s),this.Tl.delete(f.toString()),dn.resolve()},a.prototype.Na=function(i,s,f){return this.dl.Na(f,s),this.Tl.add(f.toString()),dn.resolve()},a.prototype.Go=function(i,s){return this.Tl.add(s.toString()),dn.resolve()},a.prototype.removeTarget=function(i,s){var f=this;this.dl.Uc(s.targetId).forEach(function(b){return f.Tl.add(b.toString())});var p=this.persistence.Tc();return p.Fa(i,s.targetId).next(function(b){b.forEach(function(D){return f.Tl.add(D.toString())})}).next(function(){return p.Va(i,s)})},a.prototype.ll=function(){this.wl=new Set},a.prototype._l=function(i){var s=this,f=this.persistence.Ec().ra();return dn.forEach(this.Tl,function(p){var b=C.D(p);return s.El(i,b).next(function(D){D||f.Ar(b)})}).next(function(){return s.wl=null,f.apply(i)})},a.prototype.yc=function(i,s){var f=this;return this.El(i,s).next(function(p){p?f.Tl.delete(s.toString()):f.Tl.add(s.toString())})},a.prototype.hl=function(i){return 0},a.prototype.El=function(i,s){var f=this;return dn.kn([function(){return dn.resolve(f.dl.Ho(s))},function(){return f.persistence.Tc().Ho(i,s)},function(){return f.persistence.fl(i,s)}])},a}(),ne=function(){function a(i){this.Il=i.Il,this.Al=i.Al}return a.prototype.gu=function(i){this.Rl=i},a.prototype.Tu=function(i){this.gl=i},a.prototype.onMessage=function(i){this.Pl=i},a.prototype.close=function(){this.Al()},a.prototype.send=function(i){this.Il(i)},a.prototype.yl=function(){this.Rl()},a.prototype.Vl=function(i){this.gl(i)},a.prototype.pl=function(i){this.Pl(i)},a}(),De={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Be=function(a){function i(s){var f=this;return(f=a.call(this,s)||this).forceLongPolling=s.forceLongPolling,f.W=s.W,f}return M.__extends(i,a),i.prototype.Nl=function(s,f,p,b){return new Promise(function(D,U){var Y=new Le.XhrIo;Y.listenOnce(Le.EventType.COMPLETE,function(){try{switch(Y.getLastErrorCode()){case Le.ErrorCode.NO_ERROR:var Te=Y.getResponseJson();we("Connection","XHR received:",JSON.stringify(Te)),D(Te);break;case Le.ErrorCode.TIMEOUT:we("Connection",'RPC "'+s+'" timed out'),U(new z(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Le.ErrorCode.HTTP_ERROR:var Ge=Y.getStatus();if(we("Connection",'RPC "'+s+'" failed with status:',Ge,"response text:",Y.getResponseText()),Ge>0){var Xe=Y.getResponseJson().error;if(Xe&&Xe.status&&Xe.message){var yt=(Jt=Xe.status.toLowerCase().replace("_","-"),Object.values(oe).indexOf(Jt)>=0?Jt:oe.UNKNOWN);U(new z(yt,Xe.message))}else U(new z(oe.UNKNOWN,"Server responded with status "+Y.getStatus()))}else U(new z(oe.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{we("Connection",'RPC "'+s+'" completed.')}var Jt});var de=JSON.stringify(b);Y.send(f,"POST",de,p,15)})},i.prototype.Pu=function(s,f){var p=[this.vl,"/","google.firestore.v1.Firestore","/",s,"/channel"],b=Le.createWebChannelTransport(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(D.initMessageHeaders,f),mt.isMobileCordova()||mt.isReactNative()||mt.isElectron()||mt.isIE()||mt.isUWP()||mt.isBrowserExtension()||(D.httpHeadersOverwriteParam="$httpHeaders");var U=p.join("");we("Connection","Creating WebChannel: "+U,D);var Y=b.createWebChannel(U,D),de=!1,Te=!1,Ge=new ne({Il:function(yt){Te?we("Connection","Not sending because WebChannel is closed:",yt):(de||(we("Connection","Opening WebChannel transport."),Y.open(),de=!0),we("Connection","WebChannel sending:",yt),Y.send(yt))},Al:function(){return Y.close()}}),Xe=function(yt,Ft){Y.listen(yt,function(Jt){try{Ft(Jt)}catch(Fn){setTimeout(function(){throw Fn},0)}})};return Xe(Le.WebChannel.EventType.OPEN,function(){Te||we("Connection","WebChannel transport opened.")}),Xe(Le.WebChannel.EventType.CLOSE,function(){Te||(Te=!0,we("Connection","WebChannel transport closed"),Ge.Vl())}),Xe(Le.WebChannel.EventType.ERROR,function(yt){Te||(Te=!0,gt("Connection","WebChannel transport errored:",yt),Ge.Vl(new z(oe.UNAVAILABLE,"The operation could not be completed")))}),Xe(Le.WebChannel.EventType.MESSAGE,function(yt){var Ft;if(!Te){var Jt=yt.data[0];ut(!!Jt);var jn=Jt.error||(null===(Ft=Jt[0])||void 0===Ft?void 0:Ft.error);if(jn){we("Connection","WebChannel received error:",jn);var er=jn.status,Tr=function(hi){var Ui=En[hi];if(void 0!==Ui)return Ir(Ui)}(er),Qr=jn.message;void 0===Tr&&(Tr=oe.INTERNAL,Qr="Unknown error status: "+er+" with message "+jn.message),Te=!0,Ge.Vl(new z(Tr,Qr)),Y.close()}else we("Connection","WebChannel received:",Jt),Ge.pl(Jt)}}),setTimeout(function(){Ge.yl()},0),Ge},i}(function(){function a(i){this.bl=i,this.U=i.U,this.vl=(i.ssl?"https":"http")+"://"+i.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return a.prototype.$u=function(i,s,f,p){var b=this.Dl(i,s);we("RestConnection","Sending: ",b,f);var D={};return this.Cl(D,p),this.Nl(i,b,D,f).then(function(U){return we("RestConnection","Received: ",U),U},function(U){throw gt("RestConnection",i+" failed with error: ",U,"url: ",b,"request:",f),U})},a.prototype.ku=function(i,s,f,p){return this.$u(i,s,f,p)},a.prototype.Cl=function(i,s){if(i["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",i["Content-Type"]="text/plain",s)for(var f in s.Kc)s.Kc.hasOwnProperty(f)&&(i[f]=s.Kc[f])},a.prototype.Dl=function(i,s){return this.vl+"/v1/"+s+":"+De[i]},a}()),kt=function(){function a(){var i=this;this.Fl=function(){return i.xl()},this.$l=function(){return i.kl()},this.Ml=[],this.Ol()}return a.prototype.Zu=function(i){this.Ml.push(i)},a.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},a.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},a.prototype.xl=function(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var i=0,s=this.Ml;i<s.length;i++)(0,s[i])(0)},a.prototype.kl=function(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var i=0,s=this.Ml;i<s.length;i++)(0,s[i])(1)},a.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},a}(),xn=function(){function a(){}return a.prototype.Zu=function(i){},a.prototype.Di=function(){},a}();function Wn(a){return new Fr(a,!0)}var gr="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",fi=function(){function a(){}return a.prototype.initialize=function(i){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(s){switch(s.label){case 0:return this.Sh=this.Ll(i),this.persistence=this.Bl(i),[4,this.persistence.start()];case 1:return s.sent(),this.ql=this.Ul(i),this.ju=this.Ql(i),[2]}})})},a.prototype.Ul=function(i){return null},a.prototype.Ql=function(i){return s=this.persistence,f=new sc,new Va(s,f,i.Wl);var s,f},a.prototype.Bl=function(i){if(i.persistenceSettings.jl)throw new z(oe.FAILED_PRECONDITION,gr);return new y(H.ml)},a.prototype.Ll=function(i){return new ga},a.prototype.terminate=function(){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(i){switch(i.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return i.sent(),[4,this.persistence.Di()];case 2:return i.sent(),[2]}})})},a.prototype.clearPersistence=function(i,s){throw new z(oe.FAILED_PRECONDITION,gr)},a}(),ni=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return M.__extends(i,a),i.prototype.initialize=function(s){return M.__awaiter(this,void 0,void 0,function(){var f,p=this;return M.__generator(this,function(b){switch(b.label){case 0:return[4,a.prototype.initialize.call(this,s)];case 1:return b.sent(),f=this.Kl.fi,this.Sh instanceof li?(this.Sh.fi={er:Cl.bind(null,f),nr:zs.bind(null,f),sr:Ya.bind(null,f),pi:Ms.bind(null,f)},[4,this.Sh.start()]):[3,3];case 2:b.sent(),b.label=3;case 3:return[4,this.persistence.Xa(function(D){return M.__awaiter(p,void 0,void 0,function(){return M.__generator(this,function(U){switch(U.label){case 0:return[4,el(this.Kl.fi,D)];case 1:return U.sent(),this.ql&&(D&&!this.ql.Ei?this.ql.start(this.ju):D||this.ql.stop()),[2]}})})})];case 4:return b.sent(),[2]}})})},i.prototype.Ll=function(s){if(s.persistenceSettings.jl&&s.persistenceSettings.synchronizeTabs){var f=L();if(!li.Ln(f))throw new z(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var p=Cu(s.bl.U,s.bl.persistenceKey);return new li(f,s.cs,p,s.clientId,s.Wl)}return new ga},i}(function(a){function i(s){var f=this;return(f=a.call(this)||this).Kl=s,f}return M.__extends(i,a),i.prototype.initialize=function(s){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(f){switch(f.label){case 0:return[4,a.prototype.initialize.call(this,s)];case 1:return f.sent(),[4,Ha(this.ju)];case 2:return f.sent(),[4,this.Kl.initialize(this,s)];case 3:return f.sent(),[4,oc(this.Kl.fi)];case 4:return f.sent(),[4,uu(this.Kl.ph)];case 5:return f.sent(),[2]}})})},i.prototype.Ul=function(s){return new lt(this.persistence.No.wo,s.cs)},i.prototype.Bl=function(s){var f=Cu(s.bl.U,s.bl.persistenceKey),p=Wn(s.bl.U);return new Uo(s.persistenceSettings.synchronizeTabs,f,s.clientId,be.ao(s.persistenceSettings.cacheSizeBytes),s.cs,L(),X(),p,this.Sh,s.persistenceSettings.ka)},i.prototype.Ll=function(s){return new ga},i.prototype.clearPersistence=function(s,f){return function(p){return M.__awaiter(this,void 0,void 0,function(){return M.__generator(this,function(D){switch(D.label){case 0:return Hr.Ln()?[4,Hr.delete(p+"main")]:[2,Promise.resolve()];case 1:return D.sent(),[2]}})})}(Cu(s,f))},i}(fi)),oo=function(){function a(){}return a.prototype.initialize=function(i,s){return M.__awaiter(this,void 0,void 0,function(){var f=this;return M.__generator(this,function(p){switch(p.label){case 0:return this.ju?[3,2]:(this.ju=i.ju,this.Sh=i.Sh,this.Ku=this.Gl(s),this.ph=this.zl(s),this.bh=this.Hl(s),this.fi=this.Yl(s),this.Sh.di=function(b){return nc(f.fi,b,1)},this.ph.Gu.Jl=rc.bind(null,this.fi),[4,Co(this.ph,this.fi.Uh)]);case 1:p.sent(),p.label=2;case 2:return[2]}})})},a.prototype.Hl=function(i){return new xr},a.prototype.Gl=function(i){var f=Wn(i.bl.U),p=new Be(i.bl);return new Ws(i.credentials,p,f)},a.prototype.zl=function(i){var s,f,p,b,D,U=this;return s=this.ju,f=this.Ku,p=i.cs,b=function(Y){return nc(U.fi,Y,0)},D=kt.Ln()?new kt:new xn,new ms(s,f,p,b,D)},a.prototype.Yl=function(i){return Y=!i.persistenceSettings.jl||!i.persistenceSettings.synchronizeTabs,de=new sf(this.ju,this.ph,this.bh,this.Sh,i.Wl,i.Dh),Y&&(de.qh=!0),de;var Y,de},a.prototype.terminate=function(){return Ac(this.ph)},a}(),xo=function(){function a(i){this.observer=i,this.muted=!1}return a.prototype.next=function(i){this.observer.next&&this.Xl(this.observer.next,i)},a.prototype.error=function(i){this.observer.error?this.Xl(this.observer.error,i):console.error("Uncaught Error in snapshot listener:",i)},a.prototype.Zl=function(){this.muted=!0},a.prototype.Xl=function(i,s){var f=this;this.muted||setTimeout(function(){f.muted||i(s)},0)},a}(),Yo=function(a){!function(s,f,p,b){if(!(f instanceof Array)||f.length<1)throw new z(oe.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+pt(1,"element")+".")}(0,a);for(var i=0;i<a.length;++i)if(ue("FieldPath","string",i,a[i]),0===a[i].length)throw new z(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new x(a)},bs=function(a){function i(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];return a.call(this,s)||this}return M.__extends(i,a),i.documentId=function(){return new i(x.v().R())},i.prototype.isEqual=function(s){if(!(s instanceof i))throw xt("isEqual","FieldPath",1,s);return this.t_.isEqual(s.t_)},i}(Yo),Xa=new RegExp("[~\\*/\\[\\]]"),To=function(a){this.e_=a},sa=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return M.__extends(i,a),i.prototype.n_=function(s){if(2!==s.s_)throw s.i_(1===s.s_?this.e_+"() can only appear at the top level of your update data":this.e_+"() cannot be used with set() unless you pass {merge:true}");return s.We.push(s.path),null},i.prototype.isEqual=function(s){return s instanceof i},i}(To);function Bf(a,i,s){return new Li({s_:3,r_:i.settings.r_,methodName:a.e_,o_:s},i.U,i.serializer,i.ignoreUndefinedProperties)}var af=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return M.__extends(i,a),i.prototype.n_=function(s){return new $t(s.path,new Xi)},i.prototype.isEqual=function(s){return s instanceof i},i}(To),Mc=function(a){function i(s,f){var p=this;return(p=a.call(this,s)||this).a_=f,p}return M.__extends(i,a),i.prototype.n_=function(s){var f=Bf(this,s,!0),p=this.a_.map(function(D){return cc(D,f)}),b=new Q(p);return new $t(s.path,b)},i.prototype.isEqual=function(s){return this===s},i}(To),Hf=function(a){function i(s,f){var p=this;return(p=a.call(this,s)||this).a_=f,p}return M.__extends(i,a),i.prototype.n_=function(s){var f=Bf(this,s,!0),p=this.a_.map(function(D){return cc(D,f)}),b=new he(p);return new $t(s.path,b)},i.prototype.isEqual=function(s){return this===s},i}(To),Tl=function(a){function i(s,f){var p=this;return(p=a.call(this,s)||this).c_=f,p}return M.__extends(i,a),i.prototype.n_=function(s){var f=new He(s.serializer,Mi(s.serializer,this.c_));return new $t(s.path,f)},i.prototype.isEqual=function(s){return this===s},i}(To),kc=function(){function a(i,s){if(K("GeoPoint",arguments,2),ue("GeoPoint","number",1,i),ue("GeoPoint","number",2,s),!isFinite(i)||i<-90||i>90)throw new z(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+i);if(!isFinite(s)||s<-180||s>180)throw new z(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this.u_=i,this.h_=s}return Object.defineProperty(a.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){return this.u_===i.u_&&this.h_===i.h_},a.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},a.prototype.Y=function(i){return Wt(this.u_,i.u_)||Wt(this.h_,i.h_)},a}(),Sl=function(a){this.l_=a},Gf=/^__.*__$/,Ea=function(a,i,s){this.__=a,this.f_=i,this.d_=s},Wf=function(){function a(i,s,f){this.data=i,this.We=s,this.fieldTransforms=f}return a.prototype.w_=function(i,s){var f=[];return f.push(null!==this.We?new yn(i,this.data,this.We,s):new bn(i,this.data,s)),this.fieldTransforms.length>0&&f.push(new lr(i,this.fieldTransforms)),f},a}(),Dl=function(){function a(i,s,f){this.data=i,this.We=s,this.fieldTransforms=f}return a.prototype.w_=function(i,s){var f=[new yn(i,this.data,this.We,s)];return this.fieldTransforms.length>0&&f.push(new lr(i,this.fieldTransforms)),f},a}();function Al(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}var Li=function(){function a(i,s,f,p,b,D){this.settings=i,this.U=s,this.serializer=f,this.ignoreUndefinedProperties=p,void 0===b&&this.m_(),this.fieldTransforms=b||[],this.We=D||[]}return Object.defineProperty(a.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),a.prototype.T_=function(i){return new a(Object.assign(Object.assign({},this.settings),i),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},a.prototype.E_=function(i){var s,f=null===(s=this.path)||void 0===s?void 0:s.child(i),p=this.T_({path:f,o_:!1});return p.I_(i),p},a.prototype.A_=function(i){var s,f=null===(s=this.path)||void 0===s?void 0:s.child(i),p=this.T_({path:f,o_:!1});return p.m_(),p},a.prototype.R_=function(i){return this.T_({path:void 0,o_:!0})},a.prototype.i_=function(i){return Uu(i,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},a.prototype.contains=function(i){return void 0!==this.We.find(function(s){return i.T(s)})||void 0!==this.fieldTransforms.find(function(s){return i.T(s.field)})},a.prototype.m_=function(){if(this.path)for(var i=0;i<this.path.length;i++)this.I_(this.path.get(i))},a.prototype.I_=function(i){if(0===i.length)throw this.i_("Document fields must not be empty");if(Al(this.s_)&&Gf.test(i))throw this.i_('Document fields cannot begin and end with "__"')},a}(),Ia=function(){function a(i,s,f){this.U=i,this.ignoreUndefinedProperties=s,this.serializer=f||Wn(i)}return a.prototype.P_=function(i,s,f,p){return void 0===p&&(p=!1),new Li({s_:i,methodName:s,r_:f,path:x.P(),o_:!1,g_:p},this.U,this.serializer,this.ignoreUndefinedProperties)},a}();function tl(a,i,s,f,p,b){void 0===b&&(b={});var D=a.P_(b.merge||b.mergeFields?2:0,i,s,p);Lu("Data must be an object, but it was:",D,f);var U,Y,de=$f(f,D);if(b.merge)U=new qt(D.We),Y=D.fieldTransforms;else if(b.mergeFields){for(var Te=[],Ge=0,Xe=b.mergeFields;Ge<Xe.length;Ge++){var yt=Xe[Ge],Ft=void 0;if(yt instanceof Yo)Ft=yt.t_;else{if("string"!=typeof yt)throw Pe();Ft=cf(i,yt,s)}if(!D.contains(Ft))throw new z(oe.INVALID_ARGUMENT,"Field '"+Ft+"' is specified in your field mask but missing from your input data.");ss(Te,Ft)||Te.push(Ft)}U=new qt(Te),Y=D.fieldTransforms.filter(function(Jt){return U.Ye(Jt.field)})}else U=null,Y=D.fieldTransforms;return new Wf(new Ii(de),U,Y)}function Es(a,i,s,f){var p=a.P_(1,i,s);Lu("Data must be an object, but it was:",p,f);var b=[],D=new ti;Ut(f,function(Y,de){var Te=cf(i,Y,s),Ge=p.A_(Te);if(de instanceof sa||de instanceof Sl&&de.l_ instanceof sa)b.push(Te);else{var Xe=cc(de,Ge);null!=Xe&&(b.push(Te),D.set(Te,Xe))}});var U=new qt(b);return new Dl(D.Xe(),U,p.fieldTransforms)}function Rl(a,i,s,f,p,b){var D=a.P_(1,i,s),U=[Fc(i,f,s)],Y=[p];if(b.length%2!=0)throw new z(oe.INVALID_ARGUMENT,"Function "+i+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var de=0;de<b.length;de+=2)U.push(Fc(i,b[de])),Y.push(b[de+1]);for(var Te=[],Ge=new ti,Xe=U.length-1;Xe>=0;--Xe)if(!ss(Te,U[Xe])){var yt=U[Xe],Ft=Y[Xe],Jt=D.A_(yt);if(Ft instanceof sa||Ft instanceof Sl&&Ft.l_ instanceof sa)Te.push(yt);else{var Fn=cc(Ft,Jt);null!=Fn&&(Te.push(yt),Ge.set(yt,Fn))}}var jn=new qt(Te);return new Dl(Ge.Xe(),jn,D.fieldTransforms)}function qf(a,i,s,f){return void 0===f&&(f=!1),cc(s,a.P_(f?4:3,i))}function cc(a,i){if(a instanceof Sl&&(a=a.l_),uf(a))return Lu("Unsupported field value:",i,a),$f(a,i);if(a instanceof To)return function(s,f){if(!Al(f.s_))throw f.i_(s.e_+"() can only be used with update() and set()");if(!f.path)throw f.i_(s.e_+"() is not currently supported inside arrays");var p=s.n_(f);p&&f.fieldTransforms.push(p)}(a,i),null;if(i.path&&i.We.push(i.path),a instanceof Array){if(i.settings.o_&&4!==i.s_)throw i.i_("Nested arrays are not supported");return function(s,f){for(var p=[],b=0,D=0,U=s;D<U.length;D++){var Y=cc(U[D],f.R_(b));null==Y&&(Y={nullValue:"NULL_VALUE"}),p.push(Y),b++}return{arrayValue:{values:p}}}(a,i)}return function(s,f){if(null===s)return{nullValue:"NULL_VALUE"};if("number"==typeof s)return Mi(f.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){var p=Jn.fromDate(s);return{timestampValue:yo(f.serializer,p)}}if(s instanceof Jn){var b=new Jn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:yo(f.serializer,b)}}if(s instanceof kc)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Vn)return{bytesValue:Zi(f.serializer,s.q)};if(s instanceof Ea){var D=f.U,U=s.__;if(!U.isEqual(D))throw f.i_("Document reference is for database "+U.projectId+"/"+U.database+" but should be for database "+D.projectId+"/"+D.database);return{referenceValue:Pr(s.__||f.U,s.f_.path)}}if(void 0===s&&f.ignoreUndefinedProperties)return null;throw f.i_("Unsupported field value: "+It(s))}(a,i)}function $f(a,i){var s={};return Nt(a)?i.path&&i.path.length>0&&i.We.push(i.path):Ut(a,function(f,p){var b=cc(p,i.E_(f));null!=b&&(s[f]=b)}),{mapValue:{fields:s}}}function uf(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof Jn||a instanceof kc||a instanceof Vn||a instanceof Ea||a instanceof To)}function Lu(a,i,s){if(!uf(s)||!vt(s)){var f=It(s);throw i.i_("an object"===f?a+" a custom object":a+" "+f)}}function Fc(a,i,s){if(i instanceof Yo)return i.t_;if("string"==typeof i)return cf(a,i);throw Uu("Field path arguments must be of type string or FieldPath.",a,!1,void 0,s)}function cf(a,i,s){try{return function(p){if(p.search(Xa)>=0)throw new z(oe.INVALID_ARGUMENT,"Invalid field path ("+p+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(bs.bind.apply(bs,M.__spreadArrays([void 0],p.split("."))))}catch(b){throw new z(oe.INVALID_ARGUMENT,"Invalid field path ("+p+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(i).t_}catch(p){throw Uu((f=p)instanceof Error?f.message:f.toString(),a,!1,void 0,s)}var f}function Uu(a,i,s,f,p){var b=f&&!f.m(),D=void 0!==p,U="Function "+i+"() called with invalid data";s&&(U+=" (via `toFirestore()`)");var Y="";return(b||D)&&(Y+=" (found",b&&(Y+=" in field "+f),D&&(Y+=" in document "+p),Y+=")"),new z(oe.INVALID_ARGUMENT,(U+=". ")+a+Y)}function ss(a,i){return a.some(function(s){return s.isEqual(i)})}var Nl=function(){function a(i){this.Ku=i,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return a.prototype.v_=function(i){return M.__awaiter(this,void 0,void 0,function(){var s,f=this;return M.__generator(this,function(p){switch(p.label){case 0:if(this.S_(),this.mutations.length>0)throw new z(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(b,D){return M.__awaiter(this,void 0,void 0,function(){var U,Y,de,Te,Ge,Xe;return M.__generator(this,function(yt){switch(yt.label){case 0:return U=ze(b),Y=Cr(U.serializer)+"/documents",de={documents:D.map(function(Ft){return Zn(U.serializer,Ft)})},[4,U.ku("BatchGetDocuments",Y,de)];case 1:return Te=yt.sent(),Ge=new Map,Te.forEach(function(Ft){var Fn,jn,Jt=(Fn=U.serializer,"found"in(jn=Ft)?function(er,Tr){ut(!!Tr.found);var Qr=Un(er,Tr.found.name),hi=ii(Tr.found.updateTime),Ui=new Ii({mapValue:{fields:Tr.found.fields}});return new dr(Qr,hi,Ui,{})}(Fn,jn):"missing"in jn?function(er,Tr){ut(!!Tr.missing),ut(!!Tr.readTime);var Qr=Un(er,Tr.missing),hi=ii(Tr.readTime);return new Or(Qr,hi)}(Fn,jn):Pe());Ge.set(Jt.key.toString(),Jt)}),Xe=[],[2,(D.forEach(function(Ft){var Jt=Ge.get(Ft.toString());ut(!!Jt),Xe.push(Jt)}),Xe)]}})})}(this.Ku,i)];case 1:return[2,((s=p.sent()).forEach(function(b){b instanceof Or||b instanceof dr?f.D_(b):Pe()}),s)]}})})},a.prototype.set=function(i,s){this.write(s.w_(i,this.Ge(i))),this.b_.add(i.toString())},a.prototype.update=function(i,s){try{this.write(s.w_(i,this.C_(i)))}catch(f){this.p_=f}this.b_.add(i.toString())},a.prototype.delete=function(i){this.write([new Sn(i,this.Ge(i))]),this.b_.add(i.toString())},a.prototype.commit=function(){return M.__awaiter(this,void 0,void 0,function(){var i,s=this;return M.__generator(this,function(f){switch(f.label){case 0:if(this.S_(),this.p_)throw this.p_;return i=this.y_,this.mutations.forEach(function(p){i.delete(p.key.toString())}),i.forEach(function(p,b){var D=C.D(b);s.mutations.push(new Ei(D,s.Ge(D)))}),[4,function(p,b){return M.__awaiter(this,void 0,void 0,function(){var D,U,Y;return M.__generator(this,function(de){switch(de.label){case 0:return D=ze(p),U=Cr(D.serializer)+"/documents",Y={writes:b.map(function(Te){return Ji(D.serializer,Te)})},[4,D.$u("Commit",U,Y)];case 1:return de.sent(),[2]}})})}(this.Ku,this.mutations)];case 1:return f.sent(),this.V_=!0,[2]}})})},a.prototype.D_=function(i){var s;if(i instanceof dr)s=i.version;else{if(!(i instanceof Or))throw Pe();s=Hn.min()}var f=this.y_.get(i.key.toString());if(f){if(!s.isEqual(f))throw new z(oe.ABORTED,"Document version changed between two reads.")}else this.y_.set(i.key.toString(),s)},a.prototype.Ge=function(i){var s=this.y_.get(i.toString());return!this.b_.has(i.toString())&&s?wn.updateTime(s):wn.ze()},a.prototype.C_=function(i){var s=this.y_.get(i.toString());if(!this.b_.has(i.toString())&&s){if(s.isEqual(Hn.min()))throw new z(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wn.updateTime(s)}return wn.exists(!0)},a.prototype.write=function(i){this.S_(),this.mutations=this.mutations.concat(i)},a.prototype.S_=function(){},a}(),zf=function(){function a(i,s,f,p){this.cs=i,this.Ku=s,this.updateFunction=f,this.ls=p,this.N_=5,this.ys=new js(this.cs,"transaction_retry")}return a.prototype.run=function(){this.F_()},a.prototype.F_=function(){var i=this;this.ys.gn(function(){return M.__awaiter(i,void 0,void 0,function(){var s,f,p=this;return M.__generator(this,function(b){return s=new Nl(this.Ku),(f=this.x_(s))&&f.then(function(D){p.cs.ws(function(){return s.commit().then(function(){p.ls.resolve(D)}).catch(function(U){p.k_(U)})})}).catch(function(D){p.k_(D)}),[2]})})})},a.prototype.x_=function(i){try{var s=this.updateFunction(i);return!Rn(s)&&s.catch&&s.then?s:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(f){return this.ls.reject(f),null}},a.prototype.k_=function(i){var s=this;this.N_>0&&this.M_(i)?(this.N_-=1,this.cs.ws(function(){return s.F_(),Promise.resolve()})):this.ls.reject(i)},a.prototype.M_=function(i){if("FirebaseError"===i.name){var s=i.code;return"aborted"===s||"failed-precondition"===s||!Nn(s)}return!1},a}(),Kf=function(){function a(i,s){this.credentials=i,this.cs=s,this.clientId=Ht.k(),this.O_=new Kr}return a.prototype.start=function(i,s,f,p){var b=this;this.L_(),this.bl=i;var D=new Kr,U=!1;return this.credentials.Hc(function(Y){if(!U)return U=!0,we("FirestoreClient","Initializing. user=",Y.uid),b.B_(s,f,p,Y,D).then(b.O_.resolve,b.O_.reject);b.cs.Cs(function(){return function(de,Te){return M.__awaiter(this,void 0,void 0,function(){var Ge,Xe;return M.__generator(this,function(yt){switch(yt.label){case 0:return(Ge=ze(de)).cs.xs(),we("RemoteStore","RemoteStore received new credentials"),Xe=Wr(Ge),Ge.Yu.add(3),[4,os(Ge)];case 1:return yt.sent(),Xe&&Ge.th.set("Unknown"),[4,Ge.Gu.Jl(Te)];case 2:return yt.sent(),Ge.Yu.delete(3),[4,Zu(Ge)];case 3:return yt.sent(),[2]}})})}(b.ph,Y)})}),this.cs.ws(function(){return b.O_.promise}),D.promise},a.prototype.enableNetwork=function(){var i=this;return this.L_(),this.cs.enqueue(function(){return i.persistence.tc(!0),(f=ze(i.ph)).Yu.delete(0),Zu(f);var f})},a.prototype.B_=function(i,s,f,p,b){return M.__awaiter(this,void 0,void 0,function(){var D,U,Y=this;return M.__generator(this,function(de){switch(de.label){case 0:return de.trys.push([0,3,,4]),[4,i.initialize(D={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:p,Dh:100,persistenceSettings:f})];case 1:return de.sent(),[4,s.initialize(i,D)];case 2:return de.sent(),this.persistence=i.persistence,this.Sh=i.Sh,this.ju=i.ju,this.ql=i.ql,this.Ku=s.Ku,this.ph=s.ph,this.fi=s.fi,this.q_=s.bh,this.q_.Us=Xc.bind(null,this.fi),this.q_.js=Oc.bind(null,this.fi),this.persistence.Za(function(){return M.__awaiter(Y,void 0,void 0,function(){return M.__generator(this,function(Te){switch(Te.label){case 0:return[4,this.terminate()];case 1:return Te.sent(),[2]}})})}),b.resolve(),[3,4];case 3:if(U=de.sent(),b.reject(U),!this.U_(U))throw U;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+U),this.B_(new fi,new oo,{jl:!1},p,b))];case 4:return[2]}})})},a.prototype.U_=function(i){return"FirebaseError"===i.name?i.code===oe.FAILED_PRECONDITION||i.code===oe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code},a.prototype.L_=function(){if(this.cs.ps)throw new z(oe.FAILED_PRECONDITION,"The client has already been terminated.")},a.prototype.disableNetwork=function(){var i=this;return this.L_(),this.cs.enqueue(function(){return i.persistence.tc(!1),function(s){return M.__awaiter(this,void 0,void 0,function(){var f;return M.__generator(this,function(p){switch(p.label){case 0:return(f=ze(s)).Yu.add(0),[4,os(f)];case 1:return p.sent(),f.th.set("Offline"),[2]}})})}(i.ph)})},a.prototype.terminate=function(){var i=this;this.cs.Ds();var s=new Kr;return this.cs.bs(function(){return M.__awaiter(i,void 0,void 0,function(){var f,p;return M.__generator(this,function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,Ac(this.ph)];case 1:return b.sent(),[4,this.Sh.Di()];case 2:return b.sent(),[4,this.persistence.Di()];case 3:return b.sent(),this.credentials.Yc(),s.resolve(),[3,5];case 4:return f=b.sent(),p=Et(f,"Failed to shutdown persistence"),s.reject(p),[3,5];case 5:return[2]}})})}),s.promise},a.prototype.waitForPendingWrites=function(){var i=this;this.L_();var s=new Kr;return this.cs.ws(function(){return function(f,p){return M.__awaiter(this,void 0,void 0,function(){var b,D,U,Y,de;return M.__generator(this,function(Te){switch(Te.label){case 0:Wr((b=ze(f)).ph)||we("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),Te.label=1;case 1:return Te.trys.push([1,3,,4]),[4,(Ge=b.ju,Xe=ze(Ge),Xe.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(yt){return Xe.Sr.qo(yt)}))];case 2:return-1===(D=Te.sent())?[2,void p.resolve()]:((U=b.Lh.get(D)||[]).push(p),b.Lh.set(D,U),[3,4]);case 3:return Y=Te.sent(),de=Et(Y,"Initialization of waitForPendingWrites() operation failed"),p.reject(de),[3,4];case 4:return[2]}var Ge,Xe})})}(i.fi,s)}),s.promise},a.prototype.listen=function(i,s,f){var p=this;this.L_();var b=new xo(f),D=new Oo(i,b,s);return this.cs.ws(function(){return Ar(p.q_,D)}),function(){b.Zl(),p.cs.ws(function(){return Ri(p.q_,D)})}},a.prototype.Q_=function(i){return M.__awaiter(this,void 0,void 0,function(){var s,f=this;return M.__generator(this,function(p){switch(p.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return p.sent(),s=new Kr,[2,(this.cs.ws(function(){return function(b,D,U){return M.__awaiter(this,void 0,void 0,function(){var Y,de,Te;return M.__generator(this,function(Ge){switch(Ge.label){case 0:return Ge.trys.push([0,2,,3]),[4,(Xe=b,yt=D,Ft=ze(Xe),Ft.persistence.runTransaction("read document","readonly",function(Jt){return Ft.Cc.Cr(Jt,yt)}))];case 1:return(Y=Ge.sent())instanceof dr?U.resolve(Y):Y instanceof Or?U.resolve(null):U.reject(new z(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return de=Ge.sent(),Te=Et(de,"Failed to get document '"+D+" from cache"),U.reject(Te),[3,3];case 3:return[2]}var Xe,yt,Ft})})}(f.ju,i,s)}),s.promise)]}})})},a.prototype.W_=function(i,s){return void 0===s&&(s={}),M.__awaiter(this,void 0,void 0,function(){var f,p=this;return M.__generator(this,function(b){switch(b.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return b.sent(),f=new Kr,[2,(this.cs.ws(function(){return D=p.q_,U=p.cs,Y=i,de=s,Te=f,Ge=new xo({next:function(yt){U.ws(function(){return Ri(D,Xe)});var Ft=yt.docs.has(Y);!Ft&&yt.fromCache?Te.reject(new z(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):Ft&&yt.fromCache&&de&&"server"===de.source?Te.reject(new z(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Te.resolve(yt)},error:function(yt){return Te.reject(yt)}}),Xe=new Oo(Bi(Y.path),Ge,{includeMetadataChanges:!0,Xs:!0}),Ar(D,Xe);var D,U,Y,de,Te,Ge,Xe}),f.promise)]}})})},a.prototype.j_=function(i){return M.__awaiter(this,void 0,void 0,function(){var s,f=this;return M.__generator(this,function(p){switch(p.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return p.sent(),s=new Kr,[2,(this.cs.ws(function(){return function(b,D,U){return M.__awaiter(this,void 0,void 0,function(){var Y,de,Te,Ge,Xe,yt;return M.__generator(this,function(Ft){switch(Ft.label){case 0:return Ft.trys.push([0,2,,3]),[4,Du(b,D,!0)];case 1:return Y=Ft.sent(),de=new Yc(D,Y.Fc),Te=de.wh(Y.documents),Ge=de.yr(Te,!1),U.resolve(Ge.snapshot),[3,3];case 2:return Xe=Ft.sent(),yt=Et(Xe,"Failed to execute query '"+D+" against cache"),U.reject(yt),[3,3];case 3:return[2]}})})}(f.ju,i,s)}),s.promise)]}})})},a.prototype.K_=function(i,s){return void 0===s&&(s={}),M.__awaiter(this,void 0,void 0,function(){var f,p=this;return M.__generator(this,function(b){switch(b.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return b.sent(),f=new Kr,[2,(this.cs.ws(function(){return D=p.q_,U=p.cs,Y=i,de=s,Te=f,Ge=new xo({next:function(yt){U.ws(function(){return Ri(D,Xe)}),yt.fromCache&&"server"===de.source?Te.reject(new z(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Te.resolve(yt)},error:function(yt){return Te.reject(yt)}}),Xe=new Oo(Y,Ge,{includeMetadataChanges:!0,Xs:!0}),Ar(D,Xe);var D,U,Y,de,Te,Ge,Xe}),f.promise)]}})})},a.prototype.write=function(i){var s=this;this.L_();var f=new Kr;return this.cs.ws(function(){return function(p,b,D){return M.__awaiter(this,void 0,void 0,function(){var U,Y,de,Te;return M.__generator(this,function(Ge){switch(Ge.label){case 0:U=oc(p),Ge.label=1;case 1:return Ge.trys.push([1,5,,6]),[4,(Xe=U.ju,yt=b,Jt=ze(Xe),Fn=Jn.now(),jn=yt.reduce(function(er,Tr){return er.add(Tr.key)},Tt()),Jt.persistence.runTransaction("Locally write mutations","readwrite",function(er){return Jt.Cc.kr(er,jn).next(function(Tr){Ft=Tr;for(var Qr=[],hi=0,Ui=yt;hi<Ui.length;hi++){var Ca=Ui[hi],Er=je(Ca,Ft.get(Ca.key));null!=Er&&Qr.push(new yn(Ca.key,Er,hs(Er.proto.mapValue),wn.exists(!0)))}return Jt.Sr.ko(er,Fn,Qr,yt)})}).then(function(er){var Tr=er.lr(Ft);return{batchId:er.batchId,wr:Tr}}))];case 2:return Y=Ge.sent(),U.Sh.xi(Y.batchId),function(Xe,yt,Ft){var Jt=Xe.Oh[Xe.currentUser.ti()];Jt||(Jt=new Yn(Wt)),Jt=Jt.ot(yt,Ft),Xe.Oh[Xe.currentUser.ti()]=Jt}(U,Y.batchId,D),[4,ba(U,Y.wr)];case 3:return Ge.sent(),[4,uu(U.ph)];case 4:return Ge.sent(),[3,6];case 5:return de=Ge.sent(),Te=Et(de,"Failed to persist write"),D.reject(Te),[3,6];case 6:return[2]}var Xe,yt,Ft,Jt,Fn,jn})})}(s.fi,i,f)}),f.promise},a.prototype.U=function(){return this.bl.U},a.prototype.G_=function(i){var s=this;this.L_();var f=new xo(i);return this.cs.ws(function(){return M.__awaiter(s,void 0,void 0,function(){return M.__generator(this,function(p){return[2,(b=this.q_,D=f,ze(b).qs.add(D),void D.next())];var b,D})})}),function(){f.Zl(),s.cs.ws(function(){return M.__awaiter(s,void 0,void 0,function(){return M.__generator(this,function(p){return[2,(b=this.q_,D=f,void ze(b).qs.delete(D))];var b,D})})})}},Object.defineProperty(a.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),a.prototype.transaction=function(i){var s=this;this.L_();var f=new Kr;return this.cs.ws(function(){return new zf(s.cs,s.Ku,i,f).run(),Promise.resolve()}),f.promise},a}();function vo(a){return function(i,s){if("object"!=typeof i||null===i)return!1;for(var f=i,p=0,b=["next","error","complete"];p<b.length;p++){var D=b[p];if(D in f&&"function"==typeof f[D])return!0}return!1}(a)}var aa=function(){function a(i,s,f,p,b){this.U=i,this.timestampsInSnapshots=s,this.H_=f,this.Y_=p,this.J_=b}return a.prototype.X_=function(i){switch(Ne(i)){case 0:return null;case 1:return i.booleanValue;case 2:return hr(i.integerValue||i.doubleValue);case 3:return this.Z_(i.timestampValue);case 4:return this.tf(i);case 5:return i.stringValue;case 6:return this.J_(vn(i.bytesValue));case 7:return this.ef(i.referenceValue);case 8:return this.nf(i.geoPointValue);case 9:return this.sf(i.arrayValue);case 10:return this.if(i.mapValue);default:throw Pe()}},a.prototype.if=function(i){var s=this,f={};return Ut(i.fields||{},function(p,b){f[p]=s.X_(b)}),f},a.prototype.nf=function(i){return new kc(hr(i.latitude),hr(i.longitude))},a.prototype.sf=function(i){var s=this;return(i.values||[]).map(function(f){return s.X_(f)})},a.prototype.tf=function(i){switch(this.H_){case"previous":var s=V(i);return null==s?null:this.X_(s);case"estimate":return this.Z_(ie(i));default:return null}},a.prototype.Z_=function(i){var s=gn(i),f=new Jn(s.seconds,s.nanos);return this.timestampsInSnapshots?f:f.toDate()},a.prototype.ef=function(i){var s=Ot.g(i);ut(Ys(s));var f=new Vr(s.get(1),s.get(3)),p=new C(s.u(5));return f.isEqual(this.U)||ke("Document "+p+" contains a document reference within a different database ("+f.projectId+"/"+f.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(p)},a}(),nl=be.ho,Qf=function(){function a(i){var s,f,p,b,D;if(void 0===i.host){if(void 0!==i.ssl)throw new z(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else ve("settings","non-empty string","host",i.host),this.host=i.host,ot("settings","boolean","ssl",i.ssl),this.ssl=null===(s=i.ssl)||void 0===s||s;if(_t("settings",i,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),ot("settings","object","credentials",i.credentials),this.credentials=i.credentials,ot("settings","boolean","timestampsInSnapshots",i.timestampsInSnapshots),ot("settings","boolean","ignoreUndefinedProperties",i.ignoreUndefinedProperties),!0===i.timestampsInSnapshots?ke("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===i.timestampsInSnapshots&&ke("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(f=i.timestampsInSnapshots)||void 0===f||f,this.ignoreUndefinedProperties=null!==(p=i.ignoreUndefinedProperties)&&void 0!==p&&p,ot("settings","number","cacheSizeBytes",i.cacheSizeBytes),void 0===i.cacheSizeBytes)this.cacheSizeBytes=be._o;else{if(i.cacheSizeBytes!==nl&&i.cacheSizeBytes<be.lo)throw new z(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+be.lo);this.cacheSizeBytes=i.cacheSizeBytes}ot("settings","boolean","experimentalForceLongPolling",i.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(b=i.experimentalForceLongPolling)&&void 0!==b&&b,ot("settings","boolean","experimentalAutoDetectLongPolling",i.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(D=i.experimentalAutoDetectLongPolling)&&void 0!==D&&D,function(U,Y,de,Te){if(!0===Y&&!0===Te)throw new z(oe.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,i.experimentalForceLongPolling,0,i.experimentalAutoDetectLongPolling)}return a.prototype.isEqual=function(i){return this.host===i.host&&this.ssl===i.ssl&&this.timestampsInSnapshots===i.timestampsInSnapshots&&this.credentials===i.credentials&&this.cacheSizeBytes===i.cacheSizeBytes&&this.experimentalForceLongPolling===i.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===i.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===i.ignoreUndefinedProperties},a}(),lf=function(){function a(i,s,f,p){var b=this;if(void 0===f&&(f=new fi),void 0===p&&(p=new oo),this.rf=f,this.af=p,this.cf=null,this.uf=new $e,this.INTERNAL={delete:function(){return M.__awaiter(b,void 0,void 0,function(){return M.__generator(this,function(Y){switch(Y.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return Y.sent(),[2]}})})}},"object"==typeof i.options){var D=i;this.cf=D,this.__=a._f(D),this.ff=D.name,this.df=new El(s)}else{var U=i;if(!U.projectId)throw new z(oe.INVALID_ARGUMENT,"Must provide projectId");this.__=new Vr(U.projectId,U.database),this.ff="[DEFAULT]",this.df=new Qc}this.wf=new Qf({})}return Object.defineProperty(a.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new Ia(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),a.prototype.settings=function(i){K("Firestore.settings",arguments,1),ue("Firestore.settings","object",1,i),i.merge&&delete(i=Object.assign(Object.assign({},this.wf),i)).merge;var s=new Qf(i);if(this.lf&&!this.wf.isEqual(s))throw new z(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.wf=s,void 0!==s.credentials&&(this.df=function(f){if(!f)return new Qc;switch(f.type){case"gapi":var p=f.client;return ut(!("object"!=typeof p||null===p||!p.auth||!p.auth.getAuthHeaderValueForFirstParty)),new Ga(p,f.sessionIndex||"0");case"provider":return f.client;default:throw new z(oe.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(s.credentials))},a.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},a.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},a.prototype.enablePersistence=function(i){var s,f;if(this.lf)throw new z(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var p=!1,b=!1;if(i&&(void 0!==i.experimentalTabSynchronization&&ke("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),p=null!==(f=null!==(s=i.synchronizeTabs)&&void 0!==s?s:i.experimentalTabSynchronization)&&void 0!==f&&f,b=!!i.experimentalForceOwningTab&&i.experimentalForceOwningTab,p&&b))throw new z(oe.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:p,ka:b})},a.prototype.clearPersistence=function(){return M.__awaiter(this,void 0,void 0,function(){var i,s=this;return M.__generator(this,function(f){if(void 0!==this.lf&&!this.lf.z_)throw new z(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return i=new Kr,[2,(this.uf.bs(function(){return M.__awaiter(s,void 0,void 0,function(){var p;return M.__generator(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return b.sent(),i.resolve(),[3,3];case 2:return p=b.sent(),i.reject(p),[3,3];case 3:return[2]}})})}),i.promise)]})})},a.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(a.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),a.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},a.prototype.onSnapshotsInSync=function(i){return this.hf(),vo(i)?this.lf.G_(i):(ue("Firestore.onSnapshotsInSync","function",1,i),this.lf.G_({next:i}))},a.prototype.hf=function(){return this.lf||this.Ef(new fi,new oo,{jl:!1}),this.lf},a.prototype.Af=function(){return new Rr(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},a.prototype.Ef=function(i,s,f){var p=this.Af();return this.lf=new Kf(this.df,this.uf),this.lf.start(p,i,s,f)},a._f=function(i){if(!Object.prototype.hasOwnProperty.call(i.options,"projectId"))throw new z(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var f=i.options.projectId;if(!f||"string"!=typeof f)throw new z(oe.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Vr(f)},Object.defineProperty(a.prototype,"app",{get:function(){if(!this.cf)throw new z(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),a.prototype.collection=function(i){return K("Firestore.collection",arguments,1),ue("Firestore.collection","non-empty string",1,i),this.hf(),new hu(Ot.g(i),this,null)},a.prototype.doc=function(i){return K("Firestore.doc",arguments,1),ue("Firestore.doc","non-empty string",1,i),this.hf(),fu.Rf(Ot.g(i),this,null)},a.prototype.collectionGroup=function(i){if(K("Firestore.collectionGroup",arguments,1),ue("Firestore.collectionGroup","non-empty string",1,i),i.indexOf("/")>=0)throw new z(oe.INVALID_ARGUMENT,"Invalid collection ID '"+i+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new il((s=i,new Ao(Ot.P(),s)),this,null);var s},a.prototype.runTransaction=function(i){var s=this;return K("Firestore.runTransaction",arguments,1),ue("Firestore.runTransaction","function",1,i),this.hf().transaction(function(f){return i(new as(s,f))})},a.prototype.batch=function(){return this.hf(),new Ol(this)},Object.defineProperty(a,"logLevel",{get:function(){switch(xe()){case J.LogLevel.DEBUG:return"debug";case J.LogLevel.ERROR:return"error";case J.LogLevel.SILENT:return"silent";case J.LogLevel.WARN:return"warn";case J.LogLevel.INFO:return"info";case J.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),a.setLogLevel=function(i){K("Firestore.setLogLevel",arguments,1),Ze("setLogLevel",["debug","error","silent","warn","info","verbose"],1,i),Ie.setLogLevel(i)},a.prototype.gf=function(){return this.wf.timestampsInSnapshots},a.prototype.Pf=function(){return this.wf},a}(),as=function(){function a(i,s){this.yf=i,this.Vf=s}return a.prototype.get=function(i){var s=this;K("Transaction.get",arguments,1);var f=du("Transaction.get",i,this.yf);return this.Vf.v_([f.f_]).then(function(p){if(!p||1!==p.length)return Pe();var b=p[0];if(b instanceof Or)return new ju(s.yf,f.f_,null,!1,!1,f.d_);if(b instanceof dr)return new ju(s.yf,f.f_,b,!1,!1,f.d_);throw Pe()})},a.prototype.set=function(i,s,f){ae("Transaction.set",arguments,2,3);var p=du("Transaction.set",i,this.yf);f=ff("Transaction.set",f);var b=hf(p.d_,s,f),D=tl(this.yf.mf,"Transaction.set",p.f_,b,null!==p.d_,f);return this.Vf.set(p.f_,D),this},a.prototype.update=function(i,s,f){for(var p,b,D=[],U=3;U<arguments.length;U++)D[U-3]=arguments[U];return"string"==typeof s||s instanceof bs?(k("Transaction.update",arguments,3),p=du("Transaction.update",i,this.yf),b=Rl(this.yf.mf,"Transaction.update",p.f_,s,f,D)):(K("Transaction.update",arguments,2),p=du("Transaction.update",i,this.yf),b=Es(this.yf.mf,"Transaction.update",p.f_,s)),this.Vf.update(p.f_,b),this},a.prototype.delete=function(i){K("Transaction.delete",arguments,1);var s=du("Transaction.delete",i,this.yf);return this.Vf.delete(s.f_),this},a}(),Ol=function(){function a(i){this.yf=i,this.pf=[],this.bf=!1}return a.prototype.set=function(i,s,f){ae("WriteBatch.set",arguments,2,3),this.vf();var p=du("WriteBatch.set",i,this.yf);f=ff("WriteBatch.set",f);var b=hf(p.d_,s,f),D=tl(this.yf.mf,"WriteBatch.set",p.f_,b,null!==p.d_,f);return this.pf=this.pf.concat(D.w_(p.f_,wn.ze())),this},a.prototype.update=function(i,s,f){for(var p,b,D=[],U=3;U<arguments.length;U++)D[U-3]=arguments[U];return this.vf(),"string"==typeof s||s instanceof bs?(k("WriteBatch.update",arguments,3),p=du("WriteBatch.update",i,this.yf),b=Rl(this.yf.mf,"WriteBatch.update",p.f_,s,f,D)):(K("WriteBatch.update",arguments,2),p=du("WriteBatch.update",i,this.yf),b=Es(this.yf.mf,"WriteBatch.update",p.f_,s)),this.pf=this.pf.concat(b.w_(p.f_,wn.exists(!0))),this},a.prototype.delete=function(i){K("WriteBatch.delete",arguments,1),this.vf();var s=du("WriteBatch.delete",i,this.yf);return this.pf=this.pf.concat(new Sn(s.f_,wn.ze())),this},a.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):Promise.resolve()},a.prototype.vf=function(){if(this.bf)throw new z(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},a}(),fu=function(a){function i(s,f,p){var b=this;return(b=a.call(this,f.__,s,p)||this).f_=s,b.firestore=f,b.d_=p,b.lf=b.firestore.hf(),b}return M.__extends(i,a),i.Rf=function(s,f,p){if(s.length%2!=0)throw new z(oe.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+s.R()+" has "+s.length);return new i(new C(s),f,p)},Object.defineProperty(i.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new hu(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),i.prototype.collection=function(s){if(K("DocumentReference.collection",arguments,1),ue("DocumentReference.collection","non-empty string",1,s),!s)throw new z(oe.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var f=Ot.g(s);return new hu(this.f_.path.child(f),this.firestore,null)},i.prototype.isEqual=function(s){if(!(s instanceof i))throw xt("isEqual","DocumentReference",1,s);return this.firestore===s.firestore&&this.f_.isEqual(s.f_)&&this.d_===s.d_},i.prototype.set=function(s,f){ae("DocumentReference.set",arguments,1,2),f=ff("DocumentReference.set",f);var p=hf(this.d_,s,f),b=tl(this.firestore.mf,"DocumentReference.set",this.f_,p,null!==this.d_,f);return this.lf.write(b.w_(this.f_,wn.ze()))},i.prototype.update=function(s,f){for(var p,b=[],D=2;D<arguments.length;D++)b[D-2]=arguments[D];return"string"==typeof s||s instanceof bs?(k("DocumentReference.update",arguments,2),p=Rl(this.firestore.mf,"DocumentReference.update",this.f_,s,f,b)):(K("DocumentReference.update",arguments,1),p=Es(this.firestore.mf,"DocumentReference.update",this.f_,s)),this.lf.write(p.w_(this.f_,wn.exists(!0)))},i.prototype.delete=function(){return K("DocumentReference.delete",arguments,0),this.lf.write([new Sn(this.f_,wn.ze())])},i.prototype.onSnapshot=function(){for(var s,f,p,b=this,D=[],U=0;U<arguments.length;U++)D[U]=arguments[U];ae("DocumentReference.onSnapshot",arguments,1,4);var Y={includeMetadataChanges:!1},de=0;"object"!=typeof D[de]||vo(D[de])||(_t("DocumentReference.onSnapshot",Y=D[de],["includeMetadataChanges"]),ot("DocumentReference.onSnapshot","boolean","includeMetadataChanges",Y.includeMetadataChanges),de++);var Te={includeMetadataChanges:Y.includeMetadataChanges};if(vo(D[de])){var Ge=D[de];D[de]=null===(s=Ge.next)||void 0===s?void 0:s.bind(Ge),D[de+1]=null===(f=Ge.error)||void 0===f?void 0:f.bind(Ge),D[de+2]=null===(p=Ge.complete)||void 0===p?void 0:p.bind(Ge)}else ue("DocumentReference.onSnapshot","function",de,D[de]),Gt("DocumentReference.onSnapshot","function",de+1,D[de+1]),Gt("DocumentReference.onSnapshot","function",de+2,D[de+2]);var Xe={next:function(yt){D[de]&&D[de](b.Sf(yt))},error:D[de+1],complete:D[de+2]};return this.lf.listen(Bi(this.f_.path),Te,Xe)},i.prototype.get=function(s){var f=this;ae("DocumentReference.get",arguments,0,1),lc("DocumentReference.get",s);var p=this.firestore.hf();return s&&"cache"===s.source?p.Q_(this.f_).then(function(b){return new ju(f.firestore,f.f_,b,!0,b instanceof dr&&b.Je,f.d_)}):p.W_(this.f_,s).then(function(b){return f.Sf(b)})},i.prototype.withConverter=function(s){return new i(this.f_,this.firestore,s)},i.prototype.Sf=function(s){var f=s.docs.get(this.f_);return new ju(this.firestore,this.f_,f,s.fromCache,s.hasPendingWrites,this.d_)},i}(Ea),Yf=function(){function a(i,s){this.hasPendingWrites=i,this.fromCache=s}return a.prototype.isEqual=function(i){return this.hasPendingWrites===i.hasPendingWrites&&this.fromCache===i.fromCache},a}(),ju=function(){function a(i,s,f,p,b,D){this.yf=i,this.f_=s,this.Df=f,this.Cf=p,this.Nf=b,this.d_=D}return a.prototype.data=function(i){var s=this;if(ae("DocumentSnapshot.data",arguments,0,1),i=Xf("DocumentSnapshot.data",i),this.Df){if(this.d_){var f=new Pl(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(f,i)}return new aa(this.yf.__,this.yf.gf(),i.serverTimestamps||"none",function(p){return new fu(p,s.yf,null)},function(p){return new ur(p)}).X_(this.Df.rn())}},a.prototype.get=function(i,s){var f=this;if(ae("DocumentSnapshot.get",arguments,1,2),s=Xf("DocumentSnapshot.get",s),this.Df){var p=this.Df.data().field(Fc("DocumentSnapshot.get",i,this.f_));if(null!==p)return new aa(this.yf.__,this.yf.gf(),s.serverTimestamps||"none",function(b){return new fu(b,f.yf,f.d_)},function(b){return new ur(b)}).X_(p)}},Object.defineProperty(a.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ref",{get:function(){return new fu(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"metadata",{get:function(){return new Yf(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){if(!(i instanceof a))throw xt("isEqual","DocumentSnapshot",1,i);return this.yf===i.yf&&this.Cf===i.Cf&&this.f_.isEqual(i.f_)&&(null===this.Df?null===i.Df:this.Df.isEqual(i.Df))&&this.d_===i.d_},a}(),Pl=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return M.__extends(i,a),i.prototype.data=function(s){return a.prototype.data.call(this,s)},i}(ju);function dd(a,i,s,f,p,b,D){var U;if(p.p()){if("array-contains"===b||"array-contains-any"===b)throw new z(oe.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+b+"' queries on FieldPath.documentId().");if("in"===b||"not-in"===b){Lc(D,b);for(var Y=[],de=0,Te=D;de<Te.length;de++)Y.push(rl(f,a,Te[de]));U={arrayValue:{values:Y}}}else U=rl(f,a,D)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Lc(D,b),U=qf(s,i,D,"in"===b||"not-in"===b);var Xe=jr.create(p,b,U);return function(yt,Ft){if(Ft.hn()){var Jt=Pa(yt);if(null!==Jt&&!Jt.isEqual(Ft.field))throw new z(oe.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+Jt.toString()+"' and '"+Ft.field.toString()+"'");var Fn=Bn(yt);null!==Fn&&xl(0,Ft.field,Fn)}var jn=function(er,Tr){for(var Qr=0,hi=er.filters;Qr<hi.length;Qr++){var Ui=hi[Qr];if(Tr.indexOf(Ui.op)>=0)return Ui.op}return null}(yt,function(er){switch(er){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ft.op));if(null!==jn)throw new z(oe.INVALID_ARGUMENT,jn===Ft.op?"Invalid query. You cannot use more than one '"+Ft.op.toString()+"' filter.":"Invalid query. You cannot use '"+Ft.op.toString()+"' filters with '"+jn.toString()+"' filters.")}(a,Xe),Xe}function pd(a,i,s){if(null!==a.startAt)throw new z(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new z(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var f=new zo(i,s);return function(p,b){if(null===Bn(p)){var D=Pa(p);null!==D&&xl(0,D,b.field)}}(a,f),f}function rl(a,i,s){if("string"==typeof s){if(""===s)throw new z(oe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jo(i)&&-1!==s.indexOf("/"))throw new z(oe.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+s+"' contains a '/' character.");var f=i.path.child(Ot.g(s));if(!C.F(f))throw new z(oe.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+f+"' is not because it has an odd number of segments ("+f.length+").");return wi(a,new C(f))}if(s instanceof Ea)return wi(a,s.f_);throw new z(oe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+It(s)+".")}function Lc(a,i){if(!Array.isArray(a)||0===a.length)throw new z(oe.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+i.toString()+"' filters.");if(a.length>10)throw new z(oe.INVALID_ARGUMENT,"Invalid Query. '"+i.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===i||"array-contains-any"===i){if(a.indexOf(null)>=0)throw new z(oe.INVALID_ARGUMENT,"Invalid Query. '"+i.toString()+"' filters cannot contain 'null' in the value array.");if(a.filter(function(s){return Number.isNaN(s)}).length>0)throw new z(oe.INVALID_ARGUMENT,"Invalid Query. '"+i.toString()+"' filters cannot contain 'NaN' in the value array.")}}function xl(a,i,s){if(!s.isEqual(i))throw new z(oe.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+i.toString()+"' and so you must also use '"+i.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+s.toString()+"' instead.")}function Ml(a){if(Xr(a)&&0===a.on.length)throw new z(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var il=function(){function a(i,s,f){this.Ff=i,this.firestore=s,this.d_=f}return a.prototype.where=function(i,s,f){K("Query.where",arguments,3),Ct("Query.where",3,f);var U,de,p=Ze("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,s),b=Fc("Query.where",i),D=dd(this.Ff,"Query.where",this.firestore.mf,this.firestore.__,b,p,f);return new a((de=(U=this.Ff).filters.concat([D]),new Ao(U.path,U.collectionGroup,U.on.slice(),de,U.limit,U.an,U.startAt,U.endAt)),this.firestore,this.d_)},a.prototype.orderBy=function(i,s){var f;if(ae("Query.orderBy",arguments,1,2),Gt("Query.orderBy","non-empty string",2,s),void 0===s||"asc"===s)f="asc";else{if("desc"!==s)throw new z(oe.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+s+"', expected 'asc' or 'desc'.");f="desc"}var D,Y,p=Fc("Query.orderBy",i),b=pd(this.Ff,p,f);return new a((Y=(D=this.Ff).on.concat([b]),new Ao(D.path,D.collectionGroup,Y,D.filters.slice(),D.limit,D.an,D.startAt,D.endAt)),this.firestore,this.d_)},a.prototype.limit=function(i){return K("Query.limit",arguments,1),ue("Query.limit","number",1,i),an("Query.limit",1,i),new a(Ro(this.Ff,i,"F"),this.firestore,this.d_)},a.prototype.limitToLast=function(i){return K("Query.limitToLast",arguments,1),ue("Query.limitToLast","number",1,i),an("Query.limitToLast",1,i),new a(Ro(this.Ff,i,"L"),this.firestore,this.d_)},a.prototype.startAt=function(i){for(var s=[],f=1;f<arguments.length;f++)s[f-1]=arguments[f];k("Query.startAt",arguments,1);var p=this.xf("Query.startAt",i,s,!0);return new a(da(this.Ff,p),this.firestore,this.d_)},a.prototype.startAfter=function(i){for(var s=[],f=1;f<arguments.length;f++)s[f-1]=arguments[f];k("Query.startAfter",arguments,1);var p=this.xf("Query.startAfter",i,s,!1);return new a(da(this.Ff,p),this.firestore,this.d_)},a.prototype.endBefore=function(i){for(var s=[],f=1;f<arguments.length;f++)s[f-1]=arguments[f];k("Query.endBefore",arguments,1);var p=this.xf("Query.endBefore",i,s,!0);return new a(xa(this.Ff,p),this.firestore,this.d_)},a.prototype.endAt=function(i){for(var s=[],f=1;f<arguments.length;f++)s[f-1]=arguments[f];k("Query.endAt",arguments,1);var p=this.xf("Query.endAt",i,s,!1);return new a(xa(this.Ff,p),this.firestore,this.d_)},a.prototype.isEqual=function(i){if(!(i instanceof a))throw xt("isEqual","Query",1,i);return this.firestore===i.firestore&&Zt(this.Ff,i.Ff)&&this.d_===i.d_},a.prototype.withConverter=function(i){return new a(this.Ff,this.firestore,i)},a.prototype.xf=function(i,s,f,p){if(Ct(i,1,s),s instanceof ju)return K(i,M.__spreadArrays([s],f),1),function(D,U,Y,de,Te){if(!de)throw new z(oe.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+Y+"().");for(var Ge=[],Xe=0,yt=no(D);Xe<yt.length;Xe++){var Ft=yt[Xe];if(Ft.field.p())Ge.push(wi(U,de.key));else{var Jt=de.field(Ft.field);if(le(Jt))throw new z(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ft.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Jt){var Fn=Ft.field.R();throw new z(oe.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+Fn+"' (used as the orderBy) does not exist.")}Ge.push(Jt)}}return new ki(Ge,Te)}(this.Ff,this.firestore.__,i,s.Df,p);var b=[s].concat(f);return function(D,U,Y,de,Te,Ge){var Xe=D.on;if(Te.length>Xe.length)throw new z(oe.INVALID_ARGUMENT,"Too many arguments provided to "+de+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var yt=[],Ft=0;Ft<Te.length;Ft++){var Jt=Te[Ft];if(Xe[Ft].field.p()){if("string"!=typeof Jt)throw new z(oe.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+de+"(), but got a "+typeof Jt);if(!Jo(D)&&-1!==Jt.indexOf("/"))throw new z(oe.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+de+"() must be a plain document ID, but '"+Jt+"' contains a slash.");var Fn=D.path.child(Ot.g(Jt));if(!C.F(Fn))throw new z(oe.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+de+"() must result in a valid document path, but '"+Fn+"' is not because it contains an odd number of segments.");var jn=new C(Fn);yt.push(wi(U,jn))}else{var er=qf(Y,de,Jt);yt.push(er)}}return new ki(yt,Ge)}(this.Ff,this.firestore.__,this.firestore.mf,i,b,p)},a.prototype.onSnapshot=function(){for(var i,s,f,p=this,b=[],D=0;D<arguments.length;D++)b[D]=arguments[D];ae("Query.onSnapshot",arguments,1,4);var U={},Y=0;if("object"!=typeof b[Y]||vo(b[Y])||(_t("Query.onSnapshot",U=b[Y],["includeMetadataChanges"]),ot("Query.onSnapshot","boolean","includeMetadataChanges",U.includeMetadataChanges),Y++),vo(b[Y])){var de=b[Y];b[Y]=null===(i=de.next)||void 0===i?void 0:i.bind(de),b[Y+1]=null===(s=de.error)||void 0===s?void 0:s.bind(de),b[Y+2]=null===(f=de.complete)||void 0===f?void 0:f.bind(de)}else ue("Query.onSnapshot","function",Y,b[Y]),Gt("Query.onSnapshot","function",Y+1,b[Y+1]),Gt("Query.onSnapshot","function",Y+2,b[Y+2]);var Te={next:function(Ge){b[Y]&&b[Y](new Uc(p.firestore,p.Ff,Ge,p.d_))},error:b[Y+1],complete:b[Y+2]};return Ml(this.Ff),this.firestore.hf().listen(this.Ff,U,Te)},a.prototype.get=function(i){var s=this;ae("Query.get",arguments,0,1),lc("Query.get",i),Ml(this.Ff);var f=this.firestore.hf();return(i&&"cache"===i.source?f.j_(this.Ff):f.K_(this.Ff,i)).then(function(p){return new Uc(s.firestore,s.Ff,p,s.d_)})},a}(),Uc=function(){function a(i,s,f,p){this.yf=i,this.$f=s,this.kf=f,this.d_=p,this.Mf=null,this.Of=null,this.metadata=new Yf(f.hasPendingWrites,f.fromCache)}return Object.defineProperty(a.prototype,"docs",{get:function(){var i=[];return this.forEach(function(s){return i.push(s)}),i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),a.prototype.forEach=function(i,s){var f=this;ae("QuerySnapshot.forEach",arguments,1,2),ue("QuerySnapshot.forEach","function",1,i),this.kf.docs.forEach(function(p){i.call(s,f.Lf(p,f.metadata.fromCache,f.kf.Wt.has(p.key)))})},Object.defineProperty(a.prototype,"query",{get:function(){return new il(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),a.prototype.docChanges=function(i){i&&(_t("QuerySnapshot.docChanges",i,["includeMetadataChanges"]),ot("QuerySnapshot.docChanges","boolean","includeMetadataChanges",i.includeMetadataChanges));var s=!(!i||!i.includeMetadataChanges);if(s&&this.kf.Kt)throw new z(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===s||(this.Mf=function(f,p,b){if(f.Qt.m()){var D=0;return f.docChanges.map(function(Y){return{type:"added",doc:b(Y.doc,f.fromCache,f.Wt.has(Y.doc.key)),oldIndex:-1,newIndex:D++}})}var U=f.Qt;return f.docChanges.filter(function(Y){return p||3!==Y.type}).map(function(Y){var de=b(Y.doc,f.fromCache,f.Wt.has(Y.doc.key)),Te=-1,Ge=-1;return 0!==Y.type&&(Te=U.indexOf(Y.doc.key),U=U.delete(Y.doc.key)),1!==Y.type&&(Ge=(U=U.add(Y.doc)).indexOf(Y.doc.key)),{type:gd(Y.type),doc:de,oldIndex:Te,newIndex:Ge}})}(this.kf,s,this.Lf.bind(this)),this.Of=s),this.Mf},a.prototype.isEqual=function(i){if(!(i instanceof a))throw xt("isEqual","QuerySnapshot",1,i);return this.yf===i.yf&&Zt(this.$f,i.$f)&&this.kf.isEqual(i.kf)&&this.d_===i.d_},a.prototype.Lf=function(i,s,f){return new Pl(this.yf,i.key,i,s,f,this.d_)},a}(),hu=function(a){function i(s,f,p){var b=this;if((b=a.call(this,Bi(s),f,p)||this).Bf=s,s.length%2!=1)throw new z(oe.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+s.R()+" has "+s.length);return b}return M.__extends(i,a),Object.defineProperty(i.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){var s=this.Ff.path.h();return s.m()?null:new fu(new C(s),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),i.prototype.doc=function(s){ae("CollectionReference.doc",arguments,0,1),0===arguments.length&&(s=Ht.k()),ue("CollectionReference.doc","non-empty string",1,s);var f=Ot.g(s);return fu.Rf(this.Ff.path.child(f),this.firestore,this.d_)},i.prototype.add=function(s){K("CollectionReference.add",arguments,1);var f=this.d_?this.d_.toFirestore(s):s;ue("CollectionReference.add","object",1,f);var p=this.doc();return new fu(p.f_,this.firestore,null).set(f).then(function(){return p})},i.prototype.withConverter=function(s){return new i(this.Bf,this.firestore,s)},i}(il);function ff(a,i){if(void 0===i)return{merge:!1};if(_t(a,i,["merge","mergeFields"]),ot(a,"boolean","merge",i.merge),void 0!==(b=i.mergeFields)&&function(U,Y,de,Te,Ge){if(!(Te instanceof Array))throw new z(oe.INVALID_ARGUMENT,"Function "+U+"() requires its "+Y+" option to be an array, but it was: "+It(Te));for(var Xe=0;Xe<Te.length;++Xe)if(!Ge(Te[Xe]))throw new z(oe.INVALID_ARGUMENT,"Function "+U+"() requires all "+Y+" elements to be a string or a FieldPath, but the value at index "+Xe+" was: "+It(Te[Xe]))}(a,"mergeFields",0,b,function(s){return"string"==typeof s||s instanceof bs}),void 0!==i.mergeFields&&void 0!==i.merge)throw new z(oe.INVALID_ARGUMENT,"Invalid options passed to function "+a+'(): You cannot specify both "merge" and "mergeFields".');var b;return i}function Xf(a,i){return void 0===i?{}:(_t(a,i,["serverTimestamps"]),Vt(a,0,"serverTimestamps",i.serverTimestamps,["estimate","previous","none"]),i)}function lc(a,i){Gt(a,"object",1,i),i&&(_t(a,i,["source"]),Vt(a,0,"source",i.source,["default","server","cache"]))}function du(a,i,s){if(i instanceof Ea){if(i.firestore!==s)throw new z(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}throw xt(a,"DocumentReference",1,i)}function gd(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}function hf(a,i,s){return a?s&&(s.merge||s.mergeFields)?a.toFirestore(i,s):a.toFirestore(i):i}var vd=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return M.__extends(i,a),i.serverTimestamp=function(){B("FieldValue.serverTimestamp",arguments);var s=new af("serverTimestamp");return s.e_="FieldValue.serverTimestamp",new i(s)},i.delete=function(){B("FieldValue.delete",arguments);var s=new sa("deleteField");return s.e_="FieldValue.delete",new i(s)},i.arrayUnion=function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];k("FieldValue.arrayUnion",arguments,1);var p=function(){for(var b=[],D=0;D<arguments.length;D++)b[D]=arguments[D];return k("arrayUnion()",arguments,1),new Mc("arrayUnion",b)}.apply(void 0,s);return p.e_="FieldValue.arrayUnion",new i(p)},i.arrayRemove=function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];k("FieldValue.arrayRemove",arguments,1);var p=function(){for(var b=[],D=0;D<arguments.length;D++)b[D]=arguments[D];return k("arrayRemove()",arguments,1),new Hf("arrayRemove",b)}.apply(void 0,s);return p.e_="FieldValue.arrayRemove",new i(p)},i.increment=function(s){ue("FieldValue.increment","number",1,s),K("FieldValue.increment",arguments,1);var f=new Tl("increment",s);return f.e_="FieldValue.increment",new i(f)},i.prototype.isEqual=function(s){return this.l_.isEqual(s.l_)},i}(Sl),md={Firestore:lf,GeoPoint:kc,Timestamp:Jn,Blob:ur,Transaction:as,WriteBatch:Ol,DocumentReference:fu,DocumentSnapshot:ju,Query:il,QueryDocumentSnapshot:Pl,QuerySnapshot:Uc,CollectionReference:hu,FieldPath:bs,FieldValue:vd,setLogLevel:lf.setLogLevel,CACHE_SIZE_UNLIMITED:nl};function ol(a){a.INTERNAL.registerComponent(new st.Component("firestore",function(f){return p=f.getProvider("app").getImmediate(),b=f.getProvider("auth-internal"),D=new oo,U=new ni(D),new lf(p,b,U,D);var p,b,D,U},"PUBLIC").setServiceProps(Object.assign({},md))),a.registerVersion("@firebase/firestore","1.18.0")}ol(ft.default),We.__PRIVATE_registerFirestore=ol},9800:(On,We,ge)=>{"use strict";var M=ge(6279),A=ge(2483),J=ge(1100);function mt(Nt){return Nt&&"object"==typeof Nt&&"default"in Nt?Nt:{default:Nt}}var Le=mt(M),st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},tt=function(Nt){function at(Ot,R,x){var C=Nt.call(this,R)||this;return Object.setPrototypeOf(C,at.prototype),C.code=Ot,C.details=x,C}return A.__extends(at,Nt),at}(Error),z=function(){function Nt(at,Ot){var R=this;this.auth=null,this.messaging=null,this.auth=at.getImmediate({optional:!0}),this.messaging=Ot.getImmediate({optional:!0}),this.auth||at.get().then(function(x){return R.auth=x},function(){}),this.messaging||Ot.get().then(function(x){return R.messaging=x},function(){})}return Nt.prototype.getAuthToken=function(){return A.__awaiter(this,void 0,void 0,function(){var at;return A.__generator(this,function(R){switch(R.label){case 0:if(!this.auth)return[2,void 0];R.label=1;case 1:return R.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(at=R.sent())?[2,at.accessToken]:[2,void 0];case 3:return R.sent(),[2,void 0];case 4:return[2]}})})},Nt.prototype.getInstanceIdToken=function(){return A.__awaiter(this,void 0,void 0,function(){return A.__generator(this,function(at){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(Ot){return[2,void 0]}return[2]})})},Nt.prototype.getContext=function(){return A.__awaiter(this,void 0,void 0,function(){var at,Ot;return A.__generator(this,function(R){switch(R.label){case 0:return[4,this.getAuthToken()];case 1:return at=R.sent(),[4,this.getInstanceIdToken()];case 2:return Ot=R.sent(),[2,{authToken:at,instanceIdToken:Ot}]}})})},Nt}();function we(Nt,at){var Ot={};for(var R in Nt)Nt.hasOwnProperty(R)&&(Ot[R]=at(Nt[R]));return Ot}var Nt,at,Ot,ke=function(){function Nt(){}return Nt.prototype.encode=function(at){var Ot=this;if(null==at)return null;if(at instanceof Number&&(at=at.valueOf()),"number"==typeof at&&isFinite(at)||!0===at||!1===at||"[object String]"===Object.prototype.toString.call(at))return at;if(Array.isArray(at))return at.map(function(R){return Ot.encode(R)});if("function"==typeof at||"object"==typeof at)return we(at,function(R){return Ot.encode(R)});throw new Error("Data cannot be encoded in JSON: "+at)},Nt.prototype.decode=function(at){var Ot=this;if(null==at)return at;if(at["@type"])switch(at["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var R=Number(at.value);if(isNaN(R))throw new Error("Data cannot be decoded from JSON: "+at);return R;default:throw new Error("Data cannot be decoded from JSON: "+at)}return Array.isArray(at)?at.map(function(x){return Ot.decode(x)}):"function"==typeof at||"object"==typeof at?we(at,function(x){return Ot.decode(x)}):at},Nt}(),Me=function(){function Nt(at,Ot,R,x,C){var B=this;void 0===x&&(x="us-central1"),this.app_=at,this.fetchImpl=C,this.serializer=new ke,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(B.deleteService())}},this.contextProvider=new z(Ot,R),this.cancelAllRequests=new Promise(function(k){B.deleteService=function(){return k()}});try{var K=new URL(x);this.customDomain=K.origin,this.region="us-central1"}catch(k){this.customDomain=null,this.region=x}}return Object.defineProperty(Nt.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Nt.prototype._url=function(at){var Ot=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+Ot+"/"+this.region+"/"+at:null!==this.customDomain?this.customDomain+"/"+at:"https://"+this.region+"-"+Ot+".cloudfunctions.net/"+at},Nt.prototype.useFunctionsEmulator=function(at){this.emulatorOrigin=at},Nt.prototype.httpsCallable=function(at,Ot){var R=this;return function(x){return R.call(at,x,Ot||{})}},Nt.prototype.postJSON=function(at,Ot,R){return A.__awaiter(this,void 0,void 0,function(){var x,B;return A.__generator(this,function(k){switch(k.label){case 0:R["Content-Type"]="application/json",k.label=1;case 1:return k.trys.push([1,3,,4]),[4,this.fetchImpl(at,{method:"POST",body:JSON.stringify(Ot),headers:R})];case 2:return x=k.sent(),[3,4];case 3:return k.sent(),[2,{status:0,json:null}];case 4:B=null,k.label=5;case 5:return k.trys.push([5,7,,8]),[4,x.json()];case 6:return B=k.sent(),[3,8];case 7:return k.sent(),[3,8];case 8:return[2,{status:x.status,json:B}]}})})},Nt.prototype.call=function(at,Ot,R){return A.__awaiter(this,void 0,void 0,function(){var x,C,B,K,ae,ue,Gt,ve,ot,Vt;return A.__generator(this,function(et){switch(et.label){case 0:return x=this._url(at),Ot=this.serializer.encode(Ot),C={data:Ot},B={},[4,this.contextProvider.getContext()];case 1:return(K=et.sent()).authToken&&(B.Authorization="Bearer "+K.authToken),K.instanceIdToken&&(B["Firebase-Instance-ID-Token"]=K.instanceIdToken),ae=function(Nt){var at,Ot=new Promise(function(R,x){at=setTimeout(function(){x(new tt("deadline-exceeded","deadline-exceeded"))},Nt)});return{timer:at,promise:Ot}}(R.timeout||7e4),ue=ae.timer,Gt=ae.promise,[4,Promise.race([Pe(ue,this.postJSON(x,C,B)),Gt,Pe(ue,this.cancelAllRequests)])];case 2:if(!(ve=et.sent()))throw new tt("cancelled","Firebase Functions instance was deleted.");if(ot=function(Nt,at,Ot){var R=function(Nt){if(Nt>=200&&Nt<300)return"ok";switch(Nt){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(Nt),x=R,C=void 0;try{var B=at&&at.error;if(B){var K=B.status;if("string"==typeof K){if(!st[K])return new tt("internal","internal");R=st[K],x=K}var k=B.message;"string"==typeof k&&(x=k),void 0!==(C=B.details)&&(C=Ot.decode(C))}}catch(ae){}return"ok"===R?null:new tt(R,x,C)}(ve.status,ve.json,this.serializer))throw ot;if(!ve.json)throw new tt("internal","Response is not valid JSON object.");if(void 0===(Vt=ve.json.data)&&(Vt=ve.json.result),void 0===Vt)throw new tt("internal","Response is missing data field.");return[2,{data:this.serializer.decode(Vt)}]}})})},Nt}();function Pe(Nt,at){return A.__awaiter(this,void 0,void 0,function(){var Ot;return A.__generator(this,function(R){switch(R.label){case 0:return[4,at];case 1:return Ot=R.sent(),clearTimeout(Nt),[2,Ot]}})})}Nt=Le.default,at=fetch.bind(self),Ot={Functions:Me},Nt.INTERNAL.registerComponent(new J.Component("functions",function(x,C){var B=x.getProvider("app").getImmediate(),K=x.getProvider("auth-internal"),k=x.getProvider("messaging");return new Me(B,K,k,C,at)},"PUBLIC").setServiceProps(Ot).setMultipleInstances(!0)),Le.default.registerVersion("@firebase/functions","0.5.1")},7918:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{registerInstallations:()=>le});var M=ge(6279),A=ge(1100),Le=function(){return(Le=Object.assign||function(ie){for(var se,Ne=1,Fe=arguments.length;Ne<Fe;Ne++)for(var Ye in se=arguments[Ne])Object.prototype.hasOwnProperty.call(se,Ye)&&(ie[Ye]=se[Ye]);return ie}).apply(this,arguments)};function z(V,ie,se,Ne){return new(se||(se=Promise))(function(Ye,St){function Yt(gn){try{cn(Ne.next(gn))}catch(hr){St(hr)}}function kn(gn){try{cn(Ne.throw(gn))}catch(hr){St(hr)}}function cn(gn){gn.done?Ye(gn.value):function(Ye){return Ye instanceof se?Ye:new se(function(St){St(Ye)})}(gn.value).then(Yt,kn)}cn((Ne=Ne.apply(V,ie||[])).next())})}function Ie(V,ie){var Ne,Fe,Ye,St,se={label:0,sent:function(){if(1&Ye[0])throw Ye[1];return Ye[1]},trys:[],ops:[]};return St={next:Yt(0),throw:Yt(1),return:Yt(2)},"function"==typeof Symbol&&(St[Symbol.iterator]=function(){return this}),St;function Yt(cn){return function(gn){return function(cn){if(Ne)throw new TypeError("Generator is already executing.");for(;se;)try{if(Ne=1,Fe&&(Ye=2&cn[0]?Fe.return:cn[0]?Fe.throw||((Ye=Fe.return)&&Ye.call(Fe),0):Fe.next)&&!(Ye=Ye.call(Fe,cn[1])).done)return Ye;switch(Fe=0,Ye&&(cn=[2&cn[0],Ye.value]),cn[0]){case 0:case 1:Ye=cn;break;case 4:return se.label++,{value:cn[1],done:!1};case 5:se.label++,Fe=cn[1],cn=[0];continue;case 7:cn=se.ops.pop(),se.trys.pop();continue;default:if(!(Ye=(Ye=se.trys).length>0&&Ye[Ye.length-1])&&(6===cn[0]||2===cn[0])){se=0;continue}if(3===cn[0]&&(!Ye||cn[1]>Ye[0]&&cn[1]<Ye[3])){se.label=cn[1];break}if(6===cn[0]&&se.label<Ye[1]){se.label=Ye[1],Ye=cn;break}if(Ye&&se.label<Ye[2]){se.label=Ye[2],se.ops.push(cn);break}Ye[2]&&se.ops.pop(),se.trys.pop();continue}cn=ie.call(V,se)}catch(gn){cn=[6,gn],Fe=0}finally{Ne=Ye=0}if(5&cn[0])throw cn[1];return{value:cn[0]?cn[1]:void 0,done:!0}}([cn,gn])}}}function ke(V){var ie="function"==typeof Symbol&&Symbol.iterator,se=ie&&V[ie],Ne=0;if(se)return se.call(V);if(V&&"number"==typeof V.length)return{next:function(){return V&&Ne>=V.length&&(V=void 0),{value:V&&V[Ne++],done:!V}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(V,ie){var se="function"==typeof Symbol&&V[Symbol.iterator];if(!se)return V;var Fe,St,Ne=se.call(V),Ye=[];try{for(;(void 0===ie||ie-- >0)&&!(Fe=Ne.next()).done;)Ye.push(Fe.value)}catch(Yt){St={error:Yt}}finally{try{Fe&&!Fe.done&&(se=Ne.return)&&se.call(Ne)}finally{if(St)throw St.error}}return Ye}var et,C=ge(1704),B=ge(6676),k="0.4.17",ue="w:"+k,vt=((et={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',et["not-registered"]="Firebase Installation is not registered.",et["installation-not-found"]="Firebase Installation not found.",et["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',et["app-offline"]="Could not process request. Application offline.",et["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",et),It=new C.ErrorFactory("installations","Installations",vt);function Ct(V){return V instanceof C.FirebaseError&&V.code.includes("request-failed")}function _t(V){return"https://firebaseinstallations.googleapis.com/v1/projects/"+V.projectId+"/installations"}function xt(V){return{token:V.token,requestStatus:2,expiresIn:Ht(V.expiresIn),creationTime:Date.now()}}function an(V,ie){return z(this,void 0,void 0,function(){var se,Ne;return Ie(this,function(Fe){switch(Fe.label){case 0:return[4,ie.json()];case 1:return se=Fe.sent(),[2,It.create("request-failed",{requestName:V,serverCode:(Ne=se.error).code,serverMessage:Ne.message,serverStatus:Ne.status})]}})})}function qe(V){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V.apiKey})}function pt(V,ie){var se=ie.refreshToken,Ne=qe(V);return Ne.append("Authorization",function(V){return"FIS_v2 "+V}(se)),Ne}function Kt(V){return z(this,void 0,void 0,function(){var ie;return Ie(this,function(se){switch(se.label){case 0:return[4,V()];case 1:return(ie=se.sent()).status>=500&&ie.status<600?[2,V()]:[2,ie]}})})}function Ht(V){return Number(V.replace("s","000"))}function on(V,ie){var se=ie.fid;return z(this,void 0,void 0,function(){var Ne,Fe,St,Yt,kn;return Ie(this,function(gn){switch(gn.label){case 0:return Ne=_t(V),Fe=qe(V),St={method:"POST",headers:Fe,body:JSON.stringify({fid:se,authVersion:"FIS_v2",appId:V.appId,sdkVersion:ue})},[4,Kt(function(){return fetch(Ne,St)})];case 1:return(Yt=gn.sent()).ok?[4,Yt.json()]:[3,3];case 2:return[2,{fid:(kn=gn.sent()).fid||se,registrationStatus:2,refreshToken:kn.refreshToken,authToken:xt(kn.authToken)}];case 3:return[4,an("Create Installation",Yt)];case 4:throw gn.sent()}})})}function An(V){return new Promise(function(ie){setTimeout(ie,V)})}var Vn=/^[cdef][\w-]{21}$/;function zn(){try{var V=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(V),V[0]=112+V[0]%16;var se=function(V){return function(V){return btoa(String.fromCharCode.apply(String,function(){for(var V=[],ie=0;ie<arguments.length;ie++)V=V.concat(gt(arguments[ie]));return V}(V))).replace(/\+/g,"-").replace(/\//g,"_")}(V).substr(0,22)}(V);return Vn.test(se)?se:""}catch(Ne){return""}}function Rr(V){return V.appName+"!"+V.appId}var Vr=new Map;function yr(V,ie){var se=Rr(V);Rn(se,ie),function(V,ie){var se=Ve();se&&se.postMessage({key:V,fid:ie}),wt()}(se,ie)}function Rn(V,ie){var se,Ne,Fe=Vr.get(V);if(Fe)try{for(var Ye=ke(Fe),St=Ye.next();!St.done;St=Ye.next())(0,St.value)(ie)}catch(kn){se={error:kn}}finally{try{St&&!St.done&&(Ne=Ye.return)&&Ne.call(Ye)}finally{if(se)throw se.error}}}var ye=null;function Ve(){return!ye&&"BroadcastChannel"in self&&((ye=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(V){Rn(V.data.key,V.data.fid)}),ye}function wt(){0===Vr.size&&ye&&(ye.close(),ye=null)}var tn="firebase-installations-store",En=null;function Cn(){return En||(En=(0,B.openDb)("firebase-installations-database",1,function(V){switch(V.oldVersion){case 0:V.createObjectStore(tn)}})),En}function pn(V,ie){return z(this,void 0,void 0,function(){var se,Ne,Fe,Ye,St;return Ie(this,function(Yt){switch(Yt.label){case 0:return se=Rr(V),[4,Cn()];case 1:return Ne=Yt.sent(),Fe=Ne.transaction(tn,"readwrite"),[4,(Ye=Fe.objectStore(tn)).get(se)];case 2:return St=Yt.sent(),[4,Ye.put(ie,se)];case 3:return Yt.sent(),[4,Fe.complete];case 4:return Yt.sent(),(!St||St.fid!==ie.fid)&&yr(V,ie.fid),[2,ie]}})})}function _r(V){return z(this,void 0,void 0,function(){var ie,se,Ne;return Ie(this,function(Fe){switch(Fe.label){case 0:return ie=Rr(V),[4,Cn()];case 1:return se=Fe.sent(),[4,(Ne=se.transaction(tn,"readwrite")).objectStore(tn).delete(ie)];case 2:return Fe.sent(),[4,Ne.complete];case 3:return Fe.sent(),[2]}})})}function Nn(V,ie){return z(this,void 0,void 0,function(){var se,Ne,Fe,Ye,St,Yt;return Ie(this,function(kn){switch(kn.label){case 0:return se=Rr(V),[4,Cn()];case 1:return Ne=kn.sent(),Fe=Ne.transaction(tn,"readwrite"),[4,(Ye=Fe.objectStore(tn)).get(se)];case 2:return St=kn.sent(),void 0!==(Yt=ie(St))?[3,4]:[4,Ye.delete(se)];case 3:return kn.sent(),[3,6];case 4:return[4,Ye.put(Yt,se)];case 5:kn.sent(),kn.label=6;case 6:return[4,Fe.complete];case 7:return kn.sent(),Yt&&(!St||St.fid!==Yt.fid)&&yr(V,Yt.fid),[2,Yt]}})})}function Ir(V){return z(this,void 0,void 0,function(){var ie,se,Ne;return Ie(this,function(Fe){switch(Fe.label){case 0:return[4,Nn(V,function(Ye){var St=function(V){return Qn(V||{fid:zn(),registrationStatus:0})}(Ye),Yt=function(V,ie){if(0===ie.registrationStatus){if(!navigator.onLine)return{installationEntry:ie,registrationPromise:Promise.reject(It.create("app-offline"))};var Ne={fid:ie.fid,registrationStatus:1,registrationTime:Date.now()},Fe=function(V,ie){return z(this,void 0,void 0,function(){var se,Ne;return Ie(this,function(Fe){switch(Fe.label){case 0:return Fe.trys.push([0,2,,7]),[4,on(V,ie)];case 1:return se=Fe.sent(),[2,pn(V,se)];case 2:return Ct(Ne=Fe.sent())&&409===Ne.serverCode?[4,_r(V)]:[3,4];case 3:return Fe.sent(),[3,6];case 4:return[4,pn(V,{fid:ie.fid,registrationStatus:0})];case 5:Fe.sent(),Fe.label=6;case 6:throw Ne;case 7:return[2]}})})}(V,Ne);return{installationEntry:Ne,registrationPromise:Fe}}return 1===ie.registrationStatus?{installationEntry:ie,registrationPromise:Nr(V)}:{installationEntry:ie}}(V,St);return ie=Yt.registrationPromise,Yt.installationEntry})];case 1:return""!==(se=Fe.sent()).fid?[3,3]:(Ne={},[4,ie]);case 2:return[2,(Ne.installationEntry=Fe.sent(),Ne)];case 3:return[2,{installationEntry:se,registrationPromise:ie}]}})})}function Nr(V){return z(this,void 0,void 0,function(){var ie,se,Ne,Fe;return Ie(this,function(Ye){switch(Ye.label){case 0:return[4,_i(V)];case 1:ie=Ye.sent(),Ye.label=2;case 2:return 1!==ie.registrationStatus?[3,5]:[4,An(100)];case 3:return Ye.sent(),[4,_i(V)];case 4:return ie=Ye.sent(),[3,2];case 5:return 0!==ie.registrationStatus?[3,7]:[4,Ir(V)];case 6:return se=Ye.sent(),Ne=se.installationEntry,(Fe=se.registrationPromise)?[2,Fe]:[2,Ne];case 7:return[2,ie]}})})}function _i(V){return Nn(V,function(ie){if(!ie)throw It.create("installation-not-found");return Qn(ie)})}function Qn(V){return function(V){return 1===V.registrationStatus&&V.registrationTime+1e4<Date.now()}(V)?{fid:V.fid,registrationStatus:0}:V}function bi(V,ie){var se=V.appConfig,Ne=V.platformLoggerProvider;return z(this,void 0,void 0,function(){var Fe,Ye,St,kn,cn;return Ie(this,function(vn){switch(vn.label){case 0:return Fe=function(V,ie){var se=ie.fid;return _t(V)+"/"+se+"/authTokens:generate"}(se,ie),Ye=pt(se,ie),(St=Ne.getImmediate({optional:!0}))&&Ye.append("x-firebase-client",St.getPlatformInfoString()),kn={method:"POST",headers:Ye,body:JSON.stringify({installation:{sdkVersion:ue}})},[4,Kt(function(){return fetch(Fe,kn)})];case 1:return(cn=vn.sent()).ok?[4,cn.json()]:[3,3];case 2:return[2,xt(vn.sent())];case 3:return[4,an("Generate Auth Token",cn)];case 4:throw vn.sent()}})})}function ht(V,ie){return void 0===ie&&(ie=!1),z(this,void 0,void 0,function(){var se,Ne,Ye;return Ie(this,function(St){switch(St.label){case 0:return[4,Nn(V.appConfig,function(Yt){if(!Lt(Yt))throw It.create("not-registered");var kn=Yt.authToken;if(!ie&&function(V){return 2===V.requestStatus&&!function(V){var ie=Date.now();return ie<V.creationTime||V.creationTime+V.expiresIn<ie+36e5}(V)}(kn))return Yt;if(1===kn.requestStatus)return se=function(V,ie){return z(this,void 0,void 0,function(){var se,Ne;return Ie(this,function(Fe){switch(Fe.label){case 0:return[4,Mt(V.appConfig)];case 1:se=Fe.sent(),Fe.label=2;case 2:return 1!==se.authToken.requestStatus?[3,5]:[4,An(100)];case 3:return Fe.sent(),[4,Mt(V.appConfig)];case 4:return se=Fe.sent(),[3,2];case 5:return 0===(Ne=se.authToken).requestStatus?[2,ht(V,ie)]:[2,Ne]}})})}(V,ie),Yt;if(!navigator.onLine)throw It.create("app-offline");var cn=function(V){var ie={requestStatus:1,requestTime:Date.now()};return Le(Le({},V),{authToken:ie})}(Yt);return se=function(V,ie){return z(this,void 0,void 0,function(){var se,Fe,Ne;return Ie(this,function(Ye){switch(Ye.label){case 0:return Ye.trys.push([0,3,,8]),[4,bi(V,ie)];case 1:return se=Ye.sent(),Ne=Le(Le({},ie),{authToken:se}),[4,pn(V.appConfig,Ne)];case 2:return Ye.sent(),[2,se];case 3:return!Ct(Fe=Ye.sent())||401!==Fe.serverCode&&404!==Fe.serverCode?[3,5]:[4,_r(V.appConfig)];case 4:return Ye.sent(),[3,7];case 5:return Ne=Le(Le({},ie),{authToken:{requestStatus:0}}),[4,pn(V.appConfig,Ne)];case 6:Ye.sent(),Ye.label=7;case 7:throw Fe;case 8:return[2]}})})}(V,cn),cn})];case 1:return Ne=St.sent(),se?[4,se]:[3,3];case 2:return Ye=St.sent(),[3,4];case 3:Ye=Ne.authToken,St.label=4;case 4:return[2,Ye]}})})}function Mt(V){return Nn(V,function(ie){if(!Lt(ie))throw It.create("not-registered");return function(V){return 1===V.requestStatus&&V.requestTime+1e4<Date.now()}(ie.authToken)?Le(Le({},ie),{authToken:{requestStatus:0}}):ie})}function Lt(V){return void 0!==V&&2===V.registrationStatus}function nr(V){return z(this,void 0,void 0,function(){var ie;return Ie(this,function(se){switch(se.label){case 0:return[4,Ir(V)];case 1:return(ie=se.sent().registrationPromise)?[4,ie]:[3,3];case 2:se.sent(),se.label=3;case 3:return[2]}})})}function or(V,ie){return z(this,void 0,void 0,function(){var se,Ne,Fe,Ye;return Ie(this,function(St){switch(St.label){case 0:return se=function(V,ie){var se=ie.fid;return _t(V)+"/"+se}(V,ie),Ne=pt(V,ie),Fe={method:"DELETE",headers:Ne},[4,Kt(function(){return fetch(se,Fe)})];case 1:return(Ye=St.sent()).ok?[3,3]:[4,an("Delete Installation",Ye)];case 2:throw St.sent();case 3:return[2]}})})}function Je(V){return It.create("missing-app-config-values",{valueName:V})}function le(V){V.INTERNAL.registerComponent(new A.Component("installations",function(se){var Ne=se.getProvider("app").getImmediate(),St={appConfig:function(V){var ie,se;if(!V||!V.options)throw Je("App Configuration");if(!V.name)throw Je("App Name");try{for(var Fe=ke(["projectId","apiKey","appId"]),Ye=Fe.next();!Ye.done;Ye=Fe.next()){var St=Ye.value;if(!V.options[St])throw Je(St)}}catch(Yt){ie={error:Yt}}finally{try{Ye&&!Ye.done&&(se=Fe.return)&&se.call(Fe)}finally{if(ie)throw ie.error}}return{appName:V.name,projectId:V.options.projectId,apiKey:V.options.apiKey,appId:V.options.appId}}(Ne),platformLoggerProvider:se.getProvider("platform-logger")};return{app:Ne,getId:function(){return function(V){return z(this,void 0,void 0,function(){var ie,se,Ne;return Ie(this,function(Fe){switch(Fe.label){case 0:return[4,Ir(V.appConfig)];case 1:return ie=Fe.sent(),se=ie.installationEntry,(Ne=ie.registrationPromise)?Ne.catch(console.error):ht(V).catch(console.error),[2,se.fid]}})})}(St)},getToken:function(kn){return function(V,ie){return void 0===ie&&(ie=!1),z(this,void 0,void 0,function(){return Ie(this,function(Ne){switch(Ne.label){case 0:return[4,nr(V.appConfig)];case 1:return Ne.sent(),[4,ht(V,ie)];case 2:return[2,Ne.sent().token]}})})}(St,kn)},delete:function(){return function(V){return z(this,void 0,void 0,function(){var ie,se;return Ie(this,function(Ne){switch(Ne.label){case 0:return[4,Nn(ie=V.appConfig,function(Fe){if(!Fe||0!==Fe.registrationStatus)return Fe})];case 1:if(!(se=Ne.sent()))return[3,6];if(1!==se.registrationStatus)return[3,2];throw It.create("delete-pending-registration");case 2:if(2!==se.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw It.create("app-offline");case 3:return[4,or(ie,se)];case 4:return Ne.sent(),[4,_r(ie)];case 5:Ne.sent(),Ne.label=6;case 6:return[2]}})})}(St)},onIdChange:function(kn){return function(V,ie){var se=V.appConfig;return function(V,ie){Ve();var se=Rr(V),Ne=Vr.get(se);Ne||(Ne=new Set,Vr.set(se,Ne)),Ne.add(ie)}(se,ie),function(){!function(V,ie){var se=Rr(V),Ne=Vr.get(se);!Ne||(Ne.delete(ie),0===Ne.size&&Vr.delete(se),wt())}(se,ie)}}(St,kn)}}},"PUBLIC")),V.registerVersion("@firebase/installations",k)}le(M.default)},300:(On,We,ge)=>{"use strict";function M(){for(var xe=0,we=0,ke=arguments.length;we<ke;we++)xe+=arguments[we].length;var gt=Array(xe),Me=0;for(we=0;we<ke;we++)for(var Pe=arguments[we],ut=0,ze=Pe.length;ut<ze;ut++,Me++)gt[Me]=Pe[ut];return gt}ge.r(We),ge.d(We,{LogLevel:()=>mt,Logger:()=>oe,setLogLevel:()=>z,setUserLogHandler:()=>Ie});var A,J=[],mt=(()=>{return(xe=mt||(mt={}))[xe.DEBUG=0]="DEBUG",xe[xe.VERBOSE=1]="VERBOSE",xe[xe.INFO=2]="INFO",xe[xe.WARN=3]="WARN",xe[xe.ERROR=4]="ERROR",xe[xe.SILENT=5]="SILENT",mt;var xe})(),Le={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},st=mt.INFO,tt=((A={})[mt.DEBUG]="log",A[mt.VERBOSE]="log",A[mt.INFO]="info",A[mt.WARN]="warn",A[mt.ERROR]="error",A),ft=function(xe,we){for(var ke=[],gt=2;gt<arguments.length;gt++)ke[gt-2]=arguments[gt];if(!(we<xe.logLevel)){var Me=(new Date).toISOString(),Pe=tt[we];if(!Pe)throw new Error("Attempted to log a message with an invalid logType (value: "+we+")");console[Pe].apply(console,M(["["+Me+"]  "+xe.name+":"],ke))}},oe=function(){function xe(we){this.name=we,this._logLevel=st,this._logHandler=ft,this._userLogHandler=null,J.push(this)}return Object.defineProperty(xe.prototype,"logLevel",{get:function(){return this._logLevel},set:function(we){if(!(we in mt))throw new TypeError('Invalid value "'+we+'" assigned to `logLevel`');this._logLevel=we},enumerable:!1,configurable:!0}),xe.prototype.setLogLevel=function(we){this._logLevel="string"==typeof we?Le[we]:we},Object.defineProperty(xe.prototype,"logHandler",{get:function(){return this._logHandler},set:function(we){if("function"!=typeof we)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=we},enumerable:!1,configurable:!0}),Object.defineProperty(xe.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(we){this._userLogHandler=we},enumerable:!1,configurable:!0}),xe.prototype.debug=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];this._userLogHandler&&this._userLogHandler.apply(this,M([this,mt.DEBUG],we)),this._logHandler.apply(this,M([this,mt.DEBUG],we))},xe.prototype.log=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];this._userLogHandler&&this._userLogHandler.apply(this,M([this,mt.VERBOSE],we)),this._logHandler.apply(this,M([this,mt.VERBOSE],we))},xe.prototype.info=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];this._userLogHandler&&this._userLogHandler.apply(this,M([this,mt.INFO],we)),this._logHandler.apply(this,M([this,mt.INFO],we))},xe.prototype.warn=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];this._userLogHandler&&this._userLogHandler.apply(this,M([this,mt.WARN],we)),this._logHandler.apply(this,M([this,mt.WARN],we))},xe.prototype.error=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];this._userLogHandler&&this._userLogHandler.apply(this,M([this,mt.ERROR],we)),this._logHandler.apply(this,M([this,mt.ERROR],we))},xe}();function z(xe){J.forEach(function(we){we.setLogLevel(xe)})}function Ie(xe,we){for(var ke=function(ut){var ze=null;we&&we.level&&(ze=Le[we.level]),ut.userLogHandler=null===xe?null:function(rt,Ut){for(var Nt=[],at=2;at<arguments.length;at++)Nt[at-2]=arguments[at];var Ot=Nt.map(function(R){if(null==R)return null;if("string"==typeof R)return R;if("number"==typeof R||"boolean"==typeof R)return R.toString();if(R instanceof Error)return R.message;try{return JSON.stringify(R)}catch(x){return null}}).filter(function(R){return R}).join(" ");Ut>=(null!=ze?ze:rt.logLevel)&&xe({level:mt[Ut].toLowerCase(),message:Ot,args:Nt,type:rt.name})}},gt=0,Me=J;gt<Me.length;gt++)ke(Me[gt])}},7450:(On,We,ge)=>{"use strict";ge.r(We),ge(7918);var A=ge(1100),J=ge(1704),st=function(){return(st=Object.assign||function(Ce){for(var Ue,Je=1,le=arguments.length;Je<le;Je++)for(var V in Ue=arguments[Je])Object.prototype.hasOwnProperty.call(Ue,V)&&(Ce[V]=Ue[V]);return Ce}).apply(this,arguments)};function Ie(Oe,Ce,Ue,Je){return new(Ue||(Ue=Promise))(function(V,ie){function se(Ye){try{Fe(Je.next(Ye))}catch(St){ie(St)}}function Ne(Ye){try{Fe(Je.throw(Ye))}catch(St){ie(St)}}function Fe(Ye){Ye.done?V(Ye.value):function(V){return V instanceof Ue?V:new Ue(function(ie){ie(V)})}(Ye.value).then(se,Ne)}Fe((Je=Je.apply(Oe,Ce||[])).next())})}function xe(Oe,Ce){var Je,le,V,ie,Ue={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return ie={next:se(0),throw:se(1),return:se(2)},"function"==typeof Symbol&&(ie[Symbol.iterator]=function(){return this}),ie;function se(Fe){return function(Ye){return function(Fe){if(Je)throw new TypeError("Generator is already executing.");for(;Ue;)try{if(Je=1,le&&(V=2&Fe[0]?le.return:Fe[0]?le.throw||((V=le.return)&&V.call(le),0):le.next)&&!(V=V.call(le,Fe[1])).done)return V;switch(le=0,V&&(Fe=[2&Fe[0],V.value]),Fe[0]){case 0:case 1:V=Fe;break;case 4:return Ue.label++,{value:Fe[1],done:!1};case 5:Ue.label++,le=Fe[1],Fe=[0];continue;case 7:Fe=Ue.ops.pop(),Ue.trys.pop();continue;default:if(!(V=(V=Ue.trys).length>0&&V[V.length-1])&&(6===Fe[0]||2===Fe[0])){Ue=0;continue}if(3===Fe[0]&&(!V||Fe[1]>V[0]&&Fe[1]<V[3])){Ue.label=Fe[1];break}if(6===Fe[0]&&Ue.label<V[1]){Ue.label=V[1],V=Fe;break}if(V&&Ue.label<V[2]){Ue.label=V[2],Ue.ops.push(Fe);break}V[2]&&Ue.ops.pop(),Ue.trys.pop();continue}Fe=Ce.call(Oe,Ue)}catch(Ye){Fe=[6,Ye],le=0}finally{Je=V=0}if(5&Fe[0])throw Fe[1];return{value:Fe[0]?Fe[1]:void 0,done:!0}}([Fe,Ye])}}}function gt(Oe){var Ce="function"==typeof Symbol&&Symbol.iterator,Ue=Ce&&Oe[Ce],Je=0;if(Ue)return Ue.call(Oe);if(Oe&&"number"==typeof Oe.length)return{next:function(){return Oe&&Je>=Oe.length&&(Oe=void 0),{value:Oe&&Oe[Je++],done:!Oe}}};throw new TypeError(Ce?"Object is not iterable.":"Symbol.iterator is not defined.")}function Me(Oe,Ce){var Ue="function"==typeof Symbol&&Oe[Symbol.iterator];if(!Ue)return Oe;var le,ie,Je=Ue.call(Oe),V=[];try{for(;(void 0===Ce||Ce-- >0)&&!(le=Je.next()).done;)V.push(le.value)}catch(se){ie={error:se}}finally{try{le&&!le.done&&(Ue=Je.return)&&Ue.call(Je)}finally{if(ie)throw ie.error}}return V}var k,B=ge(6676),K=ge(6279),ae=((k={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',k["only-available-in-window"]="This method is available in a Window context.",k["only-available-in-sw"]="This method is available in a service worker context.",k["permission-default"]="The notification permission was not granted and dismissed instead.",k["permission-blocked"]="The notification permission was not granted and blocked instead.",k["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",k["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",k["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",k["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",k["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",k["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",k["token-update-no-token"]="FCM returned no token when updating the user to push.",k["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",k["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",k["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",k["invalid-vapid-key"]="The public VAPID key must be a string.",k["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",k),ue=new J.ErrorFactory("messaging","Messaging",ae),ot="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ze="FCM_MSG",et="google.c.a.c_id",xt=(()=>{return(Oe=xt||(xt={})).PUSH_RECEIVED="push-received",Oe.NOTIFICATION_CLICKED="notification-clicked",xt;var Oe})();function an(Oe){var Ce=new Uint8Array(Oe);return btoa(String.fromCharCode.apply(String,function(){for(var Oe=[],Ce=0;Ce<arguments.length;Ce++)Oe=Oe.concat(Me(arguments[Ce]));return Oe}(Ce))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qe(Oe){for(var Ue=(Oe+"=".repeat((4-Oe.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Je=atob(Ue),le=new Uint8Array(Je.length),V=0;V<Je.length;++V)le[V]=Je.charCodeAt(V);return le}var pt="fcm_token_details_db",Ht="fcm_token_object_Store";function Wt(Oe){return Ie(this,void 0,void 0,function(){var Je,V=this;return xe(this,function(ie){switch(ie.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!ie.sent().map(function(se){return se.name}).includes(pt))return[2,null];ie.label=2;case 2:return Je=null,[4,(0,B.openDb)(pt,5,function(se){return Ie(V,void 0,void 0,function(){var Ne,Fe,Ye,St;return xe(this,function(Yt){switch(Yt.label){case 0:return se.oldVersion<2?[2]:se.objectStoreNames.contains(Ht)?[4,(Ne=se.transaction.objectStore(Ht)).index("fcmSenderId").get(Oe)]:[2];case 1:return Fe=Yt.sent(),[4,Ne.clear()];case 2:if(Yt.sent(),!Fe)return[2];if(2===se.oldVersion){if(!(Ye=Fe).auth||!Ye.p256dh||!Ye.endpoint)return[2];Je={token:Ye.fcmToken,createTime:null!==(St=Ye.createTime)&&void 0!==St?St:Date.now(),subscriptionOptions:{auth:Ye.auth,p256dh:Ye.p256dh,endpoint:Ye.endpoint,swScope:Ye.swScope,vapidKey:"string"==typeof Ye.vapidKey?Ye.vapidKey:an(Ye.vapidKey)}}}else(3===se.oldVersion||4===se.oldVersion)&&(Je={token:(Ye=Fe).fcmToken,createTime:Ye.createTime,subscriptionOptions:{auth:an(Ye.auth),p256dh:an(Ye.p256dh),endpoint:Ye.endpoint,swScope:Ye.swScope,vapidKey:an(Ye.vapidKey)}});return[2]}})})})];case 3:return ie.sent().close(),[4,(0,B.deleteDb)(pt)];case 4:return ie.sent(),[4,(0,B.deleteDb)("fcm_vapid_details_db")];case 5:return ie.sent(),[4,(0,B.deleteDb)("undefined")];case 6:return ie.sent(),[2,on(Je)?Je:null]}})})}function on(Oe){if(!Oe||!Oe.subscriptionOptions)return!1;var Ce=Oe.subscriptionOptions;return"number"==typeof Oe.createTime&&Oe.createTime>0&&"string"==typeof Oe.token&&Oe.token.length>0&&"string"==typeof Ce.auth&&Ce.auth.length>0&&"string"==typeof Ce.p256dh&&Ce.p256dh.length>0&&"string"==typeof Ce.endpoint&&Ce.endpoint.length>0&&"string"==typeof Ce.swScope&&Ce.swScope.length>0&&"string"==typeof Ce.vapidKey&&Ce.vapidKey.length>0}var Vn="firebase-messaging-store",sr=null;function zn(){return sr||(sr=(0,B.openDb)("firebase-messaging-database",1,function(Oe){switch(Oe.oldVersion){case 0:Oe.createObjectStore(Vn)}})),sr}function ur(Oe){return Ie(this,void 0,void 0,function(){var Ce,Je,le;return xe(this,function(V){switch(V.label){case 0:return Ce=yr(Oe),[4,zn()];case 1:return[4,V.sent().transaction(Vn).objectStore(Vn).get(Ce)];case 2:return(Je=V.sent())?[2,Je]:[3,3];case 3:return[4,Wt(Oe.appConfig.senderId)];case 4:return(le=V.sent())?[4,Rr(Oe,le)]:[3,6];case 5:return V.sent(),[2,le];case 6:return[2]}})})}function Rr(Oe,Ce){return Ie(this,void 0,void 0,function(){var Ue,Je,le;return xe(this,function(V){switch(V.label){case 0:return Ue=yr(Oe),[4,zn()];case 1:return Je=V.sent(),[4,(le=Je.transaction(Vn,"readwrite")).objectStore(Vn).put(Ce,Ue)];case 2:return V.sent(),[4,le.complete];case 3:return V.sent(),[2,Ce]}})})}function Vr(Oe){return Ie(this,void 0,void 0,function(){var Ce,Ue,Je;return xe(this,function(le){switch(le.label){case 0:return Ce=yr(Oe),[4,zn()];case 1:return Ue=le.sent(),[4,(Je=Ue.transaction(Vn,"readwrite")).objectStore(Vn).delete(Ce)];case 2:return le.sent(),[4,Je.complete];case 3:return le.sent(),[2]}})})}function yr(Oe){return Oe.appConfig.appId}function Jn(Oe,Ce){return Ie(this,void 0,void 0,function(){var Ue,Je,le,V,se;return xe(this,function(Fe){switch(Fe.label){case 0:return[4,ye(Oe)];case 1:Ue=Fe.sent(),Je=Ve(Ce),le={method:"POST",headers:Ue,body:JSON.stringify(Je)},Fe.label=2;case 2:return Fe.trys.push([2,5,,6]),[4,fetch(nt(Oe.appConfig),le)];case 3:return[4,Fe.sent().json()];case 4:return V=Fe.sent(),[3,6];case 5:throw se=Fe.sent(),ue.create("token-subscribe-failed",{errorInfo:se});case 6:if(V.error)throw ue.create("token-subscribe-failed",{errorInfo:V.error.message});if(!V.token)throw ue.create("token-subscribe-no-token");return[2,V.token]}})})}function Hn(Oe,Ce){return Ie(this,void 0,void 0,function(){var Ue,Je,le,V,se;return xe(this,function(Fe){switch(Fe.label){case 0:return[4,ye(Oe)];case 1:Ue=Fe.sent(),Je=Ve(Ce.subscriptionOptions),le={method:"PATCH",headers:Ue,body:JSON.stringify(Je)},Fe.label=2;case 2:return Fe.trys.push([2,5,,6]),[4,fetch(nt(Oe.appConfig)+"/"+Ce.token,le)];case 3:return[4,Fe.sent().json()];case 4:return V=Fe.sent(),[3,6];case 5:throw se=Fe.sent(),ue.create("token-update-failed",{errorInfo:se});case 6:if(V.error)throw ue.create("token-update-failed",{errorInfo:V.error.message});if(!V.token)throw ue.create("token-update-no-token");return[2,V.token]}})})}function Rn(Oe,Ce){return Ie(this,void 0,void 0,function(){var Ue,Je,V,se;return xe(this,function(Ne){switch(Ne.label){case 0:return[4,ye(Oe)];case 1:Ue=Ne.sent(),Je={method:"DELETE",headers:Ue},Ne.label=2;case 2:return Ne.trys.push([2,5,,6]),[4,fetch(nt(Oe.appConfig)+"/"+Ce,Je)];case 3:return[4,Ne.sent().json()];case 4:if((V=Ne.sent()).error)throw ue.create("token-unsubscribe-failed",{errorInfo:V.error.message});return[3,6];case 5:throw se=Ne.sent(),ue.create("token-unsubscribe-failed",{errorInfo:se});case 6:return[2]}})})}function nt(Oe){return"https://fcmregistrations.googleapis.com/v1/projects/"+Oe.projectId+"/registrations"}function ye(Oe){var Ce=Oe.appConfig,Ue=Oe.installations;return Ie(this,void 0,void 0,function(){var Je;return xe(this,function(le){switch(le.label){case 0:return[4,Ue.getToken()];case 1:return Je=le.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Ce.apiKey,"x-goog-firebase-installations-auth":"FIS "+Je})]}})})}function Ve(Oe){var le=Oe.vapidKey,V={web:{endpoint:Oe.endpoint,auth:Oe.auth,p256dh:Oe.p256dh}};return le!==ot&&(V.web.applicationPubKey=le),V}function ct(Oe,Ce,Ue){return Ie(this,void 0,void 0,function(){var Je,le,V,ie;return xe(this,function(se){switch(se.label){case 0:if("granted"!==Notification.permission)throw ue.create("permission-blocked");return[4,Cn(Ce,Ue)];case 1:return Je=se.sent(),[4,ur(Oe)];case 2:return le=se.sent(),V={vapidKey:Ue,swScope:Ce.scope,endpoint:Je.endpoint,auth:an(Je.getKey("auth")),p256dh:an(Je.getKey("p256dh"))},le?[3,3]:[2,En(Oe,V)];case 3:if(function(Oe,Ce){return Ce.vapidKey===Oe.vapidKey&&Ce.endpoint===Oe.endpoint&&Ce.auth===Oe.auth&&Ce.p256dh===Oe.p256dh}(le.subscriptionOptions,V))return[3,8];se.label=4;case 4:return se.trys.push([4,6,,7]),[4,Rn(Oe,le.token)];case 5:return se.sent(),[3,7];case 6:return ie=se.sent(),console.warn(ie),[3,7];case 7:return[2,En(Oe,V)];case 8:return Date.now()>=le.createTime+6048e5?[2,tn({token:le.token,createTime:Date.now(),subscriptionOptions:V},Oe,Ce)]:[2,le.token];case 9:return[2]}})})}function nn(Oe,Ce){return Ie(this,void 0,void 0,function(){var Ue,Je;return xe(this,function(le){switch(le.label){case 0:return[4,ur(Oe)];case 1:return(Ue=le.sent())?[4,Rn(Oe,Ue.token)]:[3,4];case 2:return le.sent(),[4,Vr(Oe)];case 3:le.sent(),le.label=4;case 4:return[4,Ce.pushManager.getSubscription()];case 5:return(Je=le.sent())?[2,Je.unsubscribe()]:[2,!0]}})})}function tn(Oe,Ce,Ue){return Ie(this,void 0,void 0,function(){var Je,le,V;return xe(this,function(ie){switch(ie.label){case 0:return ie.trys.push([0,3,,5]),[4,Hn(Ce,Oe)];case 1:return Je=ie.sent(),le=st(st({},Oe),{token:Je,createTime:Date.now()}),[4,Rr(Ce,le)];case 2:return ie.sent(),[2,Je];case 3:return V=ie.sent(),[4,nn(Ce,Ue)];case 4:throw ie.sent(),V;case 5:return[2]}})})}function En(Oe,Ce){return Ie(this,void 0,void 0,function(){var Ue,Je;return xe(this,function(le){switch(le.label){case 0:return[4,Jn(Oe,Ce)];case 1:return Ue=le.sent(),Je={token:Ue,createTime:Date.now(),subscriptionOptions:Ce},[4,Rr(Oe,Je)];case 2:return le.sent(),[2,Je.token]}})})}function Cn(Oe,Ce){return Ie(this,void 0,void 0,function(){var Ue;return xe(this,function(Je){switch(Je.label){case 0:return[4,Oe.pushManager.getSubscription()];case 1:return(Ue=Je.sent())?[2,Ue]:[2,Oe.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qe(Ce)})]}})})}function ir(Oe){return"object"==typeof Oe&&!!Oe&&et in Oe}function ar(Oe){return new Promise(function(Ce){setTimeout(Ce,Oe)})}var Nr=function(){function Oe(Ce){var Ue=this;this.firebaseDependencies=Ce,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(Je){Je.waitUntil(Ue.onPush(Je))}),self.addEventListener("pushsubscriptionchange",function(Je){Je.waitUntil(Ue.onSubChange(Je))}),self.addEventListener("notificationclick",function(Je){Je.waitUntil(Ue.onNotificationClick(Je))})}return Object.defineProperty(Oe.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),Oe.prototype.setBackgroundMessageHandler=function(Ce){if(this.isOnBackgroundMessageUsed=!1,!Ce||"function"!=typeof Ce)throw ue.create("invalid-bg-handler");this.bgMessageHandler=Ce},Oe.prototype.onBackgroundMessage=function(Ce){var Ue=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=Ce,function(){Ue.bgMessageHandler=null}},Oe.prototype.getToken=function(){var Ce,Ue;return Ie(this,void 0,void 0,function(){var Je;return xe(this,function(le){switch(le.label){case 0:return this.vapidKey?[3,2]:[4,ur(this.firebaseDependencies)];case 1:Je=le.sent(),this.vapidKey=null!==(Ue=null===(Ce=null==Je?void 0:Je.subscriptionOptions)||void 0===Ce?void 0:Ce.vapidKey)&&void 0!==Ue?Ue:ot,le.label=2;case 2:return[2,ct(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},Oe.prototype.deleteToken=function(){return nn(this.firebaseDependencies,self.registration)},Oe.prototype.requestPermission=function(){throw ue.create("only-available-in-window")},Oe.prototype.usePublicVapidKey=function(Ce){if(null!==this.vapidKey)throw ue.create("use-vapid-key-after-get-token");if("string"!=typeof Ce||0===Ce.length)throw ue.create("invalid-vapid-key");this.vapidKey=Ce},Oe.prototype.useServiceWorker=function(){throw ue.create("only-available-in-window")},Oe.prototype.onMessage=function(){throw ue.create("only-available-in-window")},Oe.prototype.onTokenRefresh=function(){throw ue.create("only-available-in-window")},Oe.prototype.onPush=function(Ce){return Ie(this,void 0,void 0,function(){var Ue,Je,le,V;return xe(this,function(ie){switch(ie.label){case 0:return(Ue=function(Oe){var Ce=Oe.data;if(!Ce)return null;try{return Ce.json()}catch(Ue){return null}}(Ce))?[4,ht()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(Oe){return Oe.some(function(Ce){return"visible"===Ce.visibilityState&&!Ce.url.startsWith("chrome-extension://")})}(Je=ie.sent())?[2,Re(Je,Ue)]:(le=!1,Ue.notification?[4,bt(_i(Ue))]:[3,3]);case 2:ie.sent(),le=!0,ie.label=3;case 3:return!0===le&&!1===this.isOnBackgroundMessageUsed||this.bgMessageHandler&&(V=function(Oe){var Ce={from:Oe.from,collapseKey:Oe.collapse_key};return function(Oe,Ce){if(Ce.notification){Oe.notification={};var Ue=Ce.notification.title;Ue&&(Oe.notification.title=Ue);var Je=Ce.notification.body;Je&&(Oe.notification.body=Je);var le=Ce.notification.image;le&&(Oe.notification.image=le)}}(Ce,Oe),function(Oe,Ce){!Ce.data||(Oe.data=Ce.data)}(Ce,Oe),function(Oe,Ce){if(Ce.fcmOptions){Oe.fcmOptions={};var Ue=Ce.fcmOptions.link;Ue&&(Oe.fcmOptions.link=Ue);var Je=Ce.fcmOptions.analytics_label;Je&&(Oe.fcmOptions.analyticsLabel=Je)}}(Ce,Oe),Ce}(Ue),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(V):this.bgMessageHandler.next(V)),[2]}})})},Oe.prototype.onSubChange=function(Ce){var Ue,Je;return Ie(this,void 0,void 0,function(){var V;return xe(this,function(ie){switch(ie.label){case 0:return Ce.newSubscription?[3,2]:[4,nn(this.firebaseDependencies,self.registration)];case 1:return ie.sent(),[2];case 2:return[4,ur(this.firebaseDependencies)];case 3:return V=ie.sent(),[4,nn(this.firebaseDependencies,self.registration)];case 4:return ie.sent(),[4,ct(this.firebaseDependencies,self.registration,null!==(Je=null===(Ue=null==V?void 0:V.subscriptionOptions)||void 0===Ue?void 0:Ue.vapidKey)&&void 0!==Je?Je:ot)];case 5:return ie.sent(),[2]}})})},Oe.prototype.onNotificationClick=function(Ce){var Ue,Je;return Ie(this,void 0,void 0,function(){var le,V,ie,se,Ne;return xe(this,function(Fe){switch(Fe.label){case 0:return(le=null===(Je=null===(Ue=Ce.notification)||void 0===Ue?void 0:Ue.data)||void 0===Je?void 0:Je[Ze])?Ce.action?[2]:(Ce.stopImmediatePropagation(),Ce.notification.close(),(V=function(Oe){var Ce,Ue,Je;return(null!==(Ue=null===(Ce=Oe.fcmOptions)||void 0===Ce?void 0:Ce.link)&&void 0!==Ue?Ue:null===(Je=Oe.notification)||void 0===Je?void 0:Je.click_action)||(ir(Oe.data)?self.location.origin:null)}(le))?(ie=new URL(V,self.location.href),se=new URL(self.location.origin),ie.host!==se.host?[2]:[4,ei(ie)]):[2]):[2];case 1:return(Ne=Fe.sent())?[3,4]:[4,self.clients.openWindow(V)];case 2:return Ne=Fe.sent(),[4,ar(3e3)];case 3:return Fe.sent(),[3,6];case 4:return[4,Ne.focus()];case 5:Ne=Fe.sent(),Fe.label=6;case 6:return Ne?(le.messageType=xt.NOTIFICATION_CLICKED,le.isFirebaseMessaging=!0,[2,Ne.postMessage(le)]):[2]}})})},Oe}();function _i(Oe){var Ce,Ue=st({},Oe.notification);return Ue.data=((Ce={})[Ze]=Oe,Ce),Ue}function ei(Oe){return Ie(this,void 0,void 0,function(){var Ce,Ue,Je,le,V,ie,se;return xe(this,function(Ne){switch(Ne.label){case 0:return[4,ht()];case 1:Ce=Ne.sent();try{for(Ue=gt(Ce),Je=Ue.next();!Je.done;Je=Ue.next())if(le=Je.value,V=new URL(le.url,self.location.href),Oe.host===V.host)return[2,le]}catch(Fe){ie={error:Fe}}finally{try{Je&&!Je.done&&(se=Ue.return)&&se.call(Ue)}finally{if(ie)throw ie.error}}return[2,null]}})})}function Re(Oe,Ce){var Ue,Je;Ce.isFirebaseMessaging=!0,Ce.messageType=xt.PUSH_RECEIVED;try{for(var le=gt(Oe),V=le.next();!V.done;V=le.next())V.value.postMessage(Ce)}catch(se){Ue={error:se}}finally{try{V&&!V.done&&(Je=le.return)&&Je.call(le)}finally{if(Ue)throw Ue.error}}}function ht(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function bt(Oe){var Ce,Ue=Oe.actions,Je=Notification.maxActions;return Ue&&Je&&Ue.length>Je&&console.warn("This browser only supports "+Je+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(Ce=Oe.title)&&void 0!==Ce?Ce:"",Oe)}var Tt=function(){function Oe(Ce){var Ue=this;this.firebaseDependencies=Ce,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(Je){return Ue.messageEventListener(Je)})}return Object.defineProperty(Oe.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),Oe.prototype.messageEventListener=function(Ce){return Ie(this,void 0,void 0,function(){var Ue,Je;return xe(this,function(le){switch(le.label){case 0:return(Ue=Ce.data).isFirebaseMessaging?(this.onMessageCallback&&Ue.messageType===xt.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(Oe){return delete Oe.messageType,delete Oe.isFirebaseMessaging,Oe}(Object.assign({},Ue))):this.onMessageCallback.next(Object.assign({},Ue))),ir(Je=Ue.data)&&"1"===Je["google.c.a.e"]?[4,this.logEvent(Ue.messageType,Je)]:[3,2]):[2];case 1:le.sent(),le.label=2;case 2:return[2]}})})},Oe.prototype.getVapidKey=function(){return this.vapidKey},Oe.prototype.getSwReg=function(){return this.swRegistration},Oe.prototype.getToken=function(Ce){return Ie(this,void 0,void 0,function(){return xe(this,function(Ue){switch(Ue.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:Ue.sent(),Ue.label=2;case 2:if("granted"!==Notification.permission)throw ue.create("permission-blocked");return[4,this.updateVapidKey(null==Ce?void 0:Ce.vapidKey)];case 3:return Ue.sent(),[4,this.updateSwReg(null==Ce?void 0:Ce.serviceWorkerRegistration)];case 4:return Ue.sent(),[2,ct(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},Oe.prototype.updateVapidKey=function(Ce){return Ie(this,void 0,void 0,function(){return xe(this,function(Ue){return Ce?this.vapidKey=Ce:this.vapidKey||(this.vapidKey=ot),[2]})})},Oe.prototype.updateSwReg=function(Ce){return Ie(this,void 0,void 0,function(){return xe(this,function(Ue){switch(Ue.label){case 0:return Ce||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:Ue.sent(),Ue.label=2;case 2:if(!Ce&&this.swRegistration)return[2];if(!(Ce instanceof ServiceWorkerRegistration))throw ue.create("invalid-sw-registration");return this.swRegistration=Ce,[2]}})})},Oe.prototype.registerDefaultSw=function(){return Ie(this,void 0,void 0,function(){var Ce,Ue;return xe(this,function(Je){switch(Je.label){case 0:return Je.trys.push([0,2,,3]),Ce=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return Ce.swRegistration=Je.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw Ue=Je.sent(),ue.create("failed-service-worker-registration",{browserErrorMessage:Ue.message});case 3:return[2]}})})},Oe.prototype.deleteToken=function(){return Ie(this,void 0,void 0,function(){return xe(this,function(Ce){switch(Ce.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:Ce.sent(),Ce.label=2;case 2:return[2,nn(this.firebaseDependencies,this.swRegistration)]}})})},Oe.prototype.requestPermission=function(){return Ie(this,void 0,void 0,function(){var Ce;return xe(this,function(Ue){switch(Ue.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(Ce=Ue.sent()))return[2];throw ue.create("denied"===Ce?"permission-blocked":"permission-default")}})})},Oe.prototype.usePublicVapidKey=function(Ce){if(null!==this.vapidKey)throw ue.create("use-vapid-key-after-get-token");if("string"!=typeof Ce||0===Ce.length)throw ue.create("invalid-vapid-key");this.vapidKey=Ce},Oe.prototype.useServiceWorker=function(Ce){if(!(Ce instanceof ServiceWorkerRegistration))throw ue.create("invalid-sw-registration");if(this.swRegistration)throw ue.create("use-sw-after-get-token");this.swRegistration=Ce},Oe.prototype.onMessage=function(Ce){var Ue=this;return this.onMessageCallback=Ce,function(){Ue.onMessageCallback=null}},Oe.prototype.setBackgroundMessageHandler=function(){throw ue.create("only-available-in-sw")},Oe.prototype.onBackgroundMessage=function(){throw ue.create("only-available-in-sw")},Oe.prototype.onTokenRefresh=function(){return function(){}},Oe.prototype.logEvent=function(Ce,Ue){return Ie(this,void 0,void 0,function(){var Je;return xe(this,function(V){switch(V.label){case 0:return Je=function(Oe){switch(Oe){case xt.NOTIFICATION_CLICKED:return"notification_open";case xt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(Ce),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return V.sent().logEvent(Je,{message_id:Ue[et],message_name:Ue["google.c.a.c_l"],message_time:Ue["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},Oe}();function Mn(Oe){return ue.create("missing-app-config-values",{valueName:Oe})}var fr={isSupported:nr};function nr(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}K.default.INTERNAL.registerComponent(new A.Component("messaging",function(Oe){var Ce=Oe.getProvider("app").getImmediate(),Ue=function(Oe){var Ce,Ue;if(!Oe||!Oe.options)throw Mn("App Configuration Object");if(!Oe.name)throw Mn("App Name");var le=Oe.options;try{for(var V=gt(["projectId","apiKey","appId","messagingSenderId"]),ie=V.next();!ie.done;ie=V.next()){var se=ie.value;if(!le[se])throw Mn(se)}}catch(Ne){Ce={error:Ne}}finally{try{ie&&!ie.done&&(Ue=V.return)&&Ue.call(V)}finally{if(Ce)throw Ce.error}}return{appName:Oe.name,projectId:le.projectId,apiKey:le.apiKey,appId:le.appId,senderId:le.messagingSenderId}}(Ce),V={app:Ce,appConfig:Ue,installations:Oe.getProvider("installations").getImmediate(),analyticsProvider:Oe.getProvider("analytics-internal")};if(!nr())throw ue.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Nr(V):new Tt(V)},"PUBLIC").setServiceProps(fr))},5062:(On,We,ge)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});var M=ge(6279);ge(7918);var A=ge(9009),J=ge(1704),mt=ge(300),Le=ge(1100);function st(le){return le&&"object"==typeof le&&"default"in le?le:{default:le}}var Nt,tt=st(M),z="0.4.2",we="FB-PERF-TRACE-MEASURE",ut="@firebase/performance/config",ze="@firebase/performance/configexpire",Ut="Performance",at=((Nt={})["trace started"]="Trace {$traceName} was started before.",Nt["trace stopped"]="Trace {$traceName} is not running.",Nt["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Nt["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Nt["no window"]="Window is not available.",Nt["no app id"]="App id is not available.",Nt["no project id"]="Project id is not available.",Nt["no api key"]="Api key is not available.",Nt["invalid cc log"]="Attempted to queue invalid cc event",Nt["FB not default"]="Performance can only start when Firebase app instance is the default one.",Nt["RC response not ok"]="RC response is not ok",Nt["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Nt["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Nt["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Nt["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Nt),Ot=new J.ErrorFactory("performance",Ut,at),R=new mt.Logger(Ut);R.logLevel=mt.LogLevel.INFO;var x,C,B=function(){function le(V){if(this.window=V,!V)throw Ot.create("no window");this.performance=V.performance,this.PerformanceObserver=V.PerformanceObserver,this.windowLocation=V.location,this.navigator=V.navigator,this.document=V.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=V.localStorage),V.perfMetrics&&V.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=V.perfMetrics.onFirstInputDelay)}return le.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},le.prototype.mark=function(V){!this.performance||!this.performance.mark||this.performance.mark(V)},le.prototype.measure=function(V,ie,se){!this.performance||!this.performance.measure||this.performance.measure(V,ie,se)},le.prototype.getEntriesByType=function(V){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(V):[]},le.prototype.getEntriesByName=function(V){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(V):[]},le.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},le.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!J.isIndexedDBAvailable()||(R.info("IndexedDB is not supported by current browswer"),!1):(R.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},le.prototype.setupObserver=function(V,ie){this.PerformanceObserver&&new this.PerformanceObserver(function(Ne){for(var Fe=0,Ye=Ne.getEntries();Fe<Ye.length;Fe++)ie(Ye[Fe])}).observe({entryTypes:[V]})},le.getInstance=function(){return void 0===x&&(x=new le(C)),x},le}();function k(le,V){var ie=le.length-V.length;if(ie<0||ie>1)throw Ot.create("invalid String merger input");for(var se=[],Ne=0;Ne<le.length;Ne++)se.push(le.charAt(Ne)),V.length>Ne&&se.push(V.charAt(Ne));return se.join("")}var ae,Gt,ue=function(){function le(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=k("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=k("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return le.prototype.getAppId=function(){var V=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!V)throw Ot.create("no app id");return V},le.prototype.getProjectId=function(){var V=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!V)throw Ot.create("no project id");return V},le.prototype.getApiKey=function(){var V=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!V)throw Ot.create("no api key");return V},le.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},le.getInstance=function(){return void 0===ae&&(ae=new le),ae},le}();function ot(){return Gt}var Ze=(()=>{return(le=Ze||(Ze={}))[le.UNKNOWN=0]="UNKNOWN",le[le.VISIBLE=1]="VISIBLE",le[le.HIDDEN=2]="HIDDEN",Ze;var le})(),et=["firebase_","google_","ga_"],vt=new RegExp("^[a-zA-Z]\\w*$");function xt(){switch(B.getInstance().document.visibilityState){case"visible":return Ze.VISIBLE;case"hidden":return Ze.HIDDEN;default:return Ze.UNKNOWN}}function an(){var V=B.getInstance().navigator.connection;switch(V&&V.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var Vn="Could not fetch config, will use default configs";function zn(le){if(!le)return le;var V=ue.getInstance(),ie=le.entries||{};return V.loggingEnabled=void 0===ie.fpr_enabled||"true"===String(ie.fpr_enabled),ie.fpr_log_source&&(V.logSource=Number(ie.fpr_log_source)),ie.fpr_log_endpoint_url&&(V.logEndPointUrl=ie.fpr_log_endpoint_url),ie.fpr_log_transport_key&&(V.transportKey=ie.fpr_log_transport_key),void 0!==ie.fpr_vc_network_request_sampling_rate&&(V.networkRequestsSamplingRate=Number(ie.fpr_vc_network_request_sampling_rate)),void 0!==ie.fpr_vc_trace_sampling_rate&&(V.tracesSamplingRate=Number(ie.fpr_vc_trace_sampling_rate)),V.logTraceAfterSampling=Rr(V.tracesSamplingRate),V.logNetworkAfterSampling=Rr(V.networkRequestsSamplingRate),le}function Rr(le){return Math.random()<=le}var yr,Vr=1;function Jn(){return Vr=2,yr=yr||(le=B.getInstance().document,new Promise(function(V){if(le&&"complete"!==le.readyState){var ie=function(){"complete"===le.readyState&&(le.removeEventListener("readystatechange",ie),V())};le.addEventListener("readystatechange",ie)}else V()})).then(function(){return function(){var le=ue.getInstance().installationsService.getId();return le.then(function(V){Gt=V}),le}()}).then(function(le){return function(le){var V=function(){var le=B.getInstance().localStorage;if(le){var V=le.getItem(ze);if(V&&function(le){return Number(le)>Date.now()}(V)){var ie=le.getItem(ut);if(ie)try{return JSON.parse(ie)}catch(Ne){return}}}}();return V?(zn(V),Promise.resolve()):function(le){return function(){var le=ue.getInstance().installationsService.getToken();return le.then(function(V){}),le}().then(function(V){var se="https://firebaseremoteconfig.googleapis.com/v1/projects/"+ue.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+ue.getInstance().getApiKey(),Ne=new Request(se,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+V},body:JSON.stringify({app_instance_id:le,app_instance_id_token:V,app_id:ue.getInstance().getAppId(),app_version:z,sdk_version:"0.0.1"})});return fetch(Ne).then(function(Fe){if(Fe.ok)return Fe.json();throw Ot.create("RC response not ok")})}).catch(function(){R.info(Vn)})}(le).then(zn).then(function(ie){return function(le){var V=B.getInstance().localStorage;!le||!V||(V.setItem(ut,JSON.stringify(le)),V.setItem(ze,String(Date.now()+60*ue.getInstance().configTimeToLive*60*1e3)))}(ie)},function(){})}(le)}).then(function(){return ye()},function(){return ye()});var le}function ye(){Vr=3}var ar,nn=3,tn=[],En=!1;function pn(le){setTimeout(function(){if(0!==nn){if(!tn.length)return pn(1e4);!function(){var le=A.__spreadArrays(tn);tn=[];var V=le.map(function(se){return{source_extension_json_proto3:se.message,event_time_ms:String(se.eventTime)}});(function(le,V){return function(le){var V=ue.getInstance().getFlTransportFullUrl();return fetch(V,{method:"POST",body:JSON.stringify(le)})}(le).then(function(ie){return ie.ok||R.info("Call to Firebase backend failed."),ie.json()}).then(function(ie){var se=Number(ie.nextRequestWaitMillis),Ne=1e4;isNaN(se)||(Ne=Math.max(se,Ne));var Fe=ie.logResponseDetails;Array.isArray(Fe)&&Fe.length>0&&"RETRY_REQUEST_LATER"===Fe[0].responseAction&&(tn=A.__spreadArrays(V,tn),R.info("Retry transport request later.")),nn=3,pn(Ne)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:ue.getInstance().logSource,log_event:V},le).catch(function(){tn=A.__spreadArrays(le,tn),nn--,R.info("Tries left: "+nn+"."),pn(1e4)})}()}},le)}function Yn(le){if(!le.eventTime||!le.message)throw Ot.create("invalid cc log");tn=A.__spreadArrays(tn,[le])}function Nr(le,V){ar||(ar=function(le){return function(){for(var V=[],ie=0;ie<arguments.length;ie++)V[ie]=arguments[ie];Yn({message:le.apply(void 0,V),eventTime:Date.now()})}}(bi)),ar(le,V)}function _i(le){var V=ue.getInstance();!V.instrumentationEnabled&&le.isAuto||!V.dataCollectionEnabled&&!le.isAuto||!B.getInstance().requiredApisAvailable()||le.isAuto&&xt()!==Ze.VISIBLE||(3===Vr?Qn(le):Jn().then(function(){return Qn(le)},function(){return Qn(le)}))}function Qn(le){if(ot()){var V=ue.getInstance();!V.loggingEnabled||!V.logTraceAfterSampling||setTimeout(function(){return Nr(le,1)},0)}}function bi(le,V){return 0===V?function(le){var V={url:le.url,http_method:le.httpMethod||0,http_response_code:200,response_payload_bytes:le.responsePayloadBytes,client_start_time_us:le.startTimeUs,time_to_response_initiated_us:le.timeToResponseInitiatedUs,time_to_response_completed_us:le.timeToResponseCompletedUs},ie={application_info:bt(),network_request_metric:V};return JSON.stringify(ie)}(le):function(le){var V={name:le.name,is_auto:le.isAuto,client_start_time_us:le.startTimeUs,duration_us:le.durationUs};0!==Object.keys(le.counters).length&&(V.counters=le.counters);var ie=le.getAttributes();0!==Object.keys(ie).length&&(V.custom_attributes=ie);var se={application_info:bt(),trace_metric:V};return JSON.stringify(se)}(le)}function bt(){return{google_app_id:ue.getInstance().getAppId(),app_instance_id:ot(),web_app_info:{sdk_version:z,page_url:B.getInstance().getUrl(),service_worker_status:(le=B.getInstance().navigator,"serviceWorker"in le?le.serviceWorker.controller?2:3:1),visibility_state:xt(),effective_connection_type:an()},application_process_state:0};var le}var Lt=["_fp","_fcp","_fid"],Mn=function(){function le(V,ie,se){void 0===ie&&(ie=!1),this.name=V,this.isAuto=ie,this.state=1,this.customAttributes={},this.counters={},this.api=B.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=se||we+"-"+this.randomId+"-"+this.name,se&&this.calculateTraceMetrics())}return le.prototype.start=function(){if(1!==this.state)throw Ot.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},le.prototype.stop=function(){if(2!==this.state)throw Ot.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),_i(this)},le.prototype.record=function(V,ie,se){if(V<=0)throw Ot.create("nonpositive trace startTime",{traceName:this.name});if(ie<=0)throw Ot.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*ie),this.startTimeUs=Math.floor(1e3*V),se&&se.attributes&&(this.customAttributes=A.__assign({},se.attributes)),se&&se.metrics)for(var Ne=0,Fe=Object.keys(se.metrics);Ne<Fe.length;Ne++){var Ye=Fe[Ne];isNaN(Number(se.metrics[Ye]))||(this.counters[Ye]=Number(Math.floor(se.metrics[Ye])))}_i(this)},le.prototype.incrementMetric=function(V,ie){void 0===ie&&(ie=1),this.putMetric(V,void 0===this.counters[V]?ie:this.counters[V]+ie)},le.prototype.putMetric=function(V,ie){if(!function(le,V){return!(0===le.length||le.length>100)&&(V&&V.startsWith("_wt_")&&Lt.indexOf(le)>-1||!le.startsWith("_"))}(V,this.name))throw Ot.create("invalid custom metric name",{customMetricName:V});this.counters[V]=function(le){var V=Math.floor(le);return V<le&&R.info("Metric value should be an Integer, setting the value as : "+V+"."),V}(ie)},le.prototype.getMetric=function(V){return this.counters[V]||0},le.prototype.putAttribute=function(V,ie){var se=function(le){return!(0===le.length||le.length>40||et.some(function(ie){return le.startsWith(ie)})||!le.match(vt))}(V),Ne=function(le){return 0!==le.length&&le.length<=100}(ie);if(se&&Ne)this.customAttributes[V]=ie;else{if(!se)throw Ot.create("invalid attribute name",{attributeName:V});if(!Ne)throw Ot.create("invalid attribute value",{attributeValue:ie})}},le.prototype.getAttribute=function(V){return this.customAttributes[V]},le.prototype.removeAttribute=function(V){void 0!==this.customAttributes[V]&&delete this.customAttributes[V]},le.prototype.getAttributes=function(){return A.__assign({},this.customAttributes)},le.prototype.setStartTime=function(V){this.startTimeUs=V},le.prototype.setDuration=function(V){this.durationUs=V},le.prototype.calculateTraceMetrics=function(){var V=this.api.getEntriesByName(this.traceMeasure),ie=V&&V[0];ie&&(this.durationUs=Math.floor(1e3*ie.duration),this.startTimeUs=Math.floor(1e3*(ie.startTime+this.api.getTimeOrigin())))},le.createOobTrace=function(V,ie,se){var Ne=B.getInstance().getUrl();if(Ne){var Fe=new le("_wt_"+Ne,!0),Ye=Math.floor(1e3*B.getInstance().getTimeOrigin());if(Fe.setStartTime(Ye),V&&V[0]&&(Fe.setDuration(Math.floor(1e3*V[0].duration)),Fe.putMetric("domInteractive",Math.floor(1e3*V[0].domInteractive)),Fe.putMetric("domContentLoadedEventEnd",Math.floor(1e3*V[0].domContentLoadedEventEnd)),Fe.putMetric("loadEventEnd",Math.floor(1e3*V[0].loadEventEnd))),ie){var kn=ie.find(function(gn){return"first-paint"===gn.name});kn&&kn.startTime&&Fe.putMetric("_fp",Math.floor(1e3*kn.startTime));var cn=ie.find(function(gn){return"first-contentful-paint"===gn.name});cn&&cn.startTime&&Fe.putMetric("_fcp",Math.floor(1e3*cn.startTime)),se&&Fe.putMetric("_fid",Math.floor(1e3*se))}_i(Fe)}},le.createUserTimingTrace=function(V){_i(new le(V,!1,V))},le}();function Qt(le){var V=le;if(V&&void 0!==V.responseStart){var ie=B.getInstance().getTimeOrigin(),se=Math.floor(1e3*(V.startTime+ie)),Ne=V.responseStart?Math.floor(1e3*(V.responseStart-V.startTime)):void 0,Fe=Math.floor(1e3*(V.responseEnd-V.startTime));!function(le){var V=ue.getInstance();if(V.instrumentationEnabled){var ie=le.url,se=V.logEndPointUrl.split("?")[0],Ne=V.flTransportEndpointUrl.split("?")[0];ie===se||ie===Ne||!V.loggingEnabled||!V.logNetworkAfterSampling||setTimeout(function(){return Nr(le,0)},0)}}({url:V.name&&V.name.split("?")[0],responsePayloadBytes:V.transferSize,startTimeUs:se,timeToResponseInitiatedUs:Ne,timeToResponseCompletedUs:Fe})}}function fr(){!ot()||(setTimeout(function(){return function(){var le=B.getInstance(),V=le.getEntriesByType("navigation"),ie=le.getEntriesByType("paint");if(le.onFirstInputDelay){var se=setTimeout(function(){Mn.createOobTrace(V,ie),se=void 0},5e3);le.onFirstInputDelay(function(Ne){se&&(clearTimeout(se),Mn.createOobTrace(V,ie,Ne))})}else Mn.createOobTrace(V,ie)}()},0),setTimeout(function(){return function(){for(var le=B.getInstance(),ie=0,se=le.getEntriesByType("resource");ie<se.length;ie++)Qt(se[ie]);le.setupObserver("resource",Qt)}()},0),setTimeout(function(){return function(){for(var le=B.getInstance(),ie=0,se=le.getEntriesByType("measure");ie<se.length;ie++)Oe(se[ie]);le.setupObserver("measure",Oe)}()},0))}function Oe(le){var V=le.name;V.substring(0,we.length)!==we&&Mn.createUserTimingTrace(V)}var Ce=function(){function le(V){this.app=V,B.getInstance().requiredApisAvailable()&&J.validateIndexedDBOpenable().then(function(ie){ie&&(En||(pn(5500),En=!0),Jn().then(fr,fr))}).catch(function(ie){R.info("Environment doesn't support IndexedDB: "+ie)})}return le.prototype.trace=function(V){return new Mn(V)},Object.defineProperty(le.prototype,"instrumentationEnabled",{get:function(){return ue.getInstance().instrumentationEnabled},set:function(V){ue.getInstance().instrumentationEnabled=V},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"dataCollectionEnabled",{get:function(){return ue.getInstance().dataCollectionEnabled},set:function(V){ue.getInstance().dataCollectionEnabled=V},enumerable:!1,configurable:!0}),le}();function Je(le){le.INTERNAL.registerComponent(new Le.Component("performance",function(ie){return function(ie,se){if("[DEFAULT]"!==ie.name)throw Ot.create("FB not default");if("undefined"==typeof window)throw Ot.create("no window");return function(le){C=le}(window),ue.getInstance().firebaseAppInstance=ie,ue.getInstance().installationsService=se,new Ce(ie)}(ie.getProvider("app").getImmediate(),ie.getProvider("installations").getImmediate())},"PUBLIC")),le.registerVersion("@firebase/performance","0.4.2")}Je(tt.default),We.registerPerformance=Je},2136:(On,We,ge)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});var M=ge(6279);ge(7918);var A=ge(7698),J=ge(1704),mt=ge(300),Le=ge(1100);function st(et){return et&&"object"==typeof et&&"default"in et?et:{default:et}}var oe,tt=st(M),ft=function(){function et(vt,It,Ct,_t){this.client=vt,this.storage=It,this.storageCache=Ct,this.logger=_t}return et.prototype.isCachedDataFresh=function(vt,It){if(!It)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var Ct=Date.now()-It,_t=Ct<=vt;return this.logger.debug("Config fetch cache check. Cache age millis: "+Ct+". Cache max age millis (minimumFetchIntervalMillis setting): "+vt+". Is cache hit: "+_t+"."),_t},et.prototype.fetch=function(vt){return A.__awaiter(this,void 0,void 0,function(){var It,Ct,_t,xt,an;return A.__generator(this,function(qe){switch(qe.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return It=qe.sent(),Ct=It[0],(_t=It[1])&&this.isCachedDataFresh(vt.cacheMaxAgeMillis,Ct)?[2,_t]:(vt.eTag=_t&&_t.eTag,[4,this.client.fetch(vt)]);case 2:return xt=qe.sent(),an=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===xt.status&&an.push(this.storage.setLastSuccessfulFetchResponse(xt)),[4,Promise.all(an)];case 3:return qe.sent(),[2,xt]}})})},et}(),z=((oe={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",oe["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",oe["registration-api-key"]="Undefined API key. Check Firebase app initialization.",oe["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",oe["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",oe["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",oe["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",oe["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",oe["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",oe["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',oe["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',oe["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",oe["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",oe),Ie=new J.ErrorFactory("remoteconfig","Remote Config",z);function we(et){return void 0===et&&(et=navigator),et.languages&&et.languages[0]||et.language}var ke=function(){function et(vt,It,Ct,_t,xt,an){this.firebaseInstallations=vt,this.sdkVersion=It,this.namespace=Ct,this.projectId=_t,this.apiKey=xt,this.appId=an}return et.prototype.fetch=function(vt){return A.__awaiter(this,void 0,void 0,function(){var It,xt,an,qe,pt,Kt,Ht,Wt,on,An,sn,Vn,sr,zn,ur,Rr,Vr;return A.__generator(this,function(yr){switch(yr.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:It=yr.sent(),xt=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",an=xt+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":vt.eTag||"*"},pt={sdk_version:this.sdkVersion,app_instance_id:It[0],app_instance_id_token:It[1],app_id:this.appId,language_code:we()},Kt={method:"POST",headers:qe,body:JSON.stringify(pt)},Ht=fetch(an,Kt),Wt=new Promise(function(Jn,Hn){vt.signal.addEventListener(function(){var Rn=new Error("The operation was aborted.");Rn.name="AbortError",Hn(Rn)})}),yr.label=2;case 2:return yr.trys.push([2,5,,6]),[4,Promise.race([Ht,Wt])];case 3:return yr.sent(),[4,Ht];case 4:return on=yr.sent(),[3,6];case 5:throw An=yr.sent(),sn="fetch-client-network","AbortError"===An.name&&(sn="fetch-timeout"),Ie.create(sn,{originalErrorMessage:An.message});case 6:if(Vn=on.status,sr=on.headers.get("ETag")||void 0,200!==on.status)return[3,11];Rr=void 0,yr.label=7;case 7:return yr.trys.push([7,9,,10]),[4,on.json()];case 8:return Rr=yr.sent(),[3,10];case 9:throw Vr=yr.sent(),Ie.create("fetch-client-parse",{originalErrorMessage:Vr.message});case 10:zn=Rr.entries,ur=Rr.state,yr.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===ur?Vn=500:"NO_CHANGE"===ur?Vn=304:("NO_TEMPLATE"===ur||"EMPTY_CONFIG"===ur)&&(zn={}),304!==Vn&&200!==Vn)throw Ie.create("fetch-status",{httpStatus:Vn});return[2,{status:Vn,eTag:sr,config:zn}]}})})},et}(),gt=function(){function et(){this.listeners=[]}return et.prototype.addEventListener=function(vt){this.listeners.push(vt)},et.prototype.abort=function(){this.listeners.forEach(function(vt){return vt()})},et}(),ze=["1","true","t","yes","y","on"],rt=function(){function et(vt,It){void 0===It&&(It=""),this._source=vt,this._value=It}return et.prototype.asString=function(){return this._value},et.prototype.asBoolean=function(){return"static"!==this._source&&ze.indexOf(this._value.toLowerCase())>=0},et.prototype.asNumber=function(){if("static"===this._source)return 0;var vt=Number(this._value);return isNaN(vt)&&(vt=0),vt},et.prototype.getSource=function(){return this._source},et}(),at=function(){function et(vt,It,Ct,_t,xt){this.app=vt,this._client=It,this._storageCache=Ct,this._storage=_t,this._logger=xt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return et.prototype.setLogLevel=function(vt){switch(vt){case"debug":this._logger.logLevel=mt.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=mt.LogLevel.SILENT;break;default:this._logger.logLevel=mt.LogLevel.ERROR}},Object.defineProperty(et.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(et.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),et.prototype.activate=function(){return A.__awaiter(this,void 0,void 0,function(){var vt,It,Ct;return A.__generator(this,function(_t){switch(_t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return vt=_t.sent(),Ct=vt[1],(It=vt[0])&&It.config&&It.eTag&&It.eTag!==Ct?[4,Promise.all([this._storageCache.setActiveConfig(It.config),this._storage.setActiveConfigEtag(It.eTag)])]:[2,!1];case 2:return _t.sent(),[2,!0]}})})},et.prototype.ensureInitialized=function(){var vt=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){vt._isInitializationComplete=!0})),this._initializePromise},et.prototype.fetch=function(){return A.__awaiter(this,void 0,void 0,function(){var vt,It,Ct,_t=this;return A.__generator(this,function(xt){switch(xt.label){case 0:vt=new gt,setTimeout(function(){return A.__awaiter(_t,void 0,void 0,function(){return A.__generator(this,function(an){return vt.abort(),[2]})})},this.settings.fetchTimeoutMillis),xt.label=1;case 1:return xt.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:vt})];case 2:return xt.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return xt.sent(),[3,6];case 4:return It=xt.sent(),Ct=function(et,vt){return et instanceof J.FirebaseError&&-1!==et.code.indexOf("fetch-throttle")}(It)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(Ct)];case 5:throw xt.sent(),It;case 6:return[2]}})})},et.prototype.fetchAndActivate=function(){return A.__awaiter(this,void 0,void 0,function(){return A.__generator(this,function(vt){switch(vt.label){case 0:return[4,this.fetch()];case 1:return vt.sent(),[2,this.activate()]}})})},et.prototype.getAll=function(){var vt=this;return function(et,vt){return void 0===et&&(et={}),void 0===vt&&(vt={}),Object.keys(A.__assign(A.__assign({},et),vt))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(It,Ct){return It[Ct]=vt.getValue(Ct),It},{})},et.prototype.getBoolean=function(vt){return this.getValue(vt).asBoolean()},et.prototype.getNumber=function(vt){return this.getValue(vt).asNumber()},et.prototype.getString=function(vt){return this.getValue(vt).asString()},et.prototype.getValue=function(vt){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+vt+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var It=this._storageCache.getActiveConfig();return It&&void 0!==It[vt]?new rt("remote",It[vt]):this.defaultConfig&&void 0!==this.defaultConfig[vt]?new rt("default",String(this.defaultConfig[vt])):(this._logger.debug('Returning static value for key "'+vt+'". Define a default or remote value if this is unintentional.'),new rt("static"))},et}();function R(et,vt){var It=et.target.error||void 0;return Ie.create(vt,{originalErrorMessage:It&&It.message})}var x="app_namespace_store",k=function(){function et(vt,It,Ct,_t){void 0===_t&&(_t=new Promise(function(et,vt){var It=indexedDB.open("firebase_remote_config",1);It.onerror=function(Ct){vt(R(Ct,"storage-open"))},It.onsuccess=function(Ct){et(Ct.target.result)},It.onupgradeneeded=function(Ct){var _t=Ct.target.result;switch(Ct.oldVersion){case 0:_t.createObjectStore(x,{keyPath:"compositeKey"})}}})),this.appId=vt,this.appName=It,this.namespace=Ct,this.openDbPromise=_t}return et.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},et.prototype.setLastFetchStatus=function(vt){return this.set("last_fetch_status",vt)},et.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},et.prototype.setLastSuccessfulFetchTimestampMillis=function(vt){return this.set("last_successful_fetch_timestamp_millis",vt)},et.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},et.prototype.setLastSuccessfulFetchResponse=function(vt){return this.set("last_successful_fetch_response",vt)},et.prototype.getActiveConfig=function(){return this.get("active_config")},et.prototype.setActiveConfig=function(vt){return this.set("active_config",vt)},et.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},et.prototype.setActiveConfigEtag=function(vt){return this.set("active_config_etag",vt)},et.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},et.prototype.setThrottleMetadata=function(vt){return this.set("throttle_metadata",vt)},et.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},et.prototype.get=function(vt){return A.__awaiter(this,void 0,void 0,function(){var It,Ct=this;return A.__generator(this,function(_t){switch(_t.label){case 0:return[4,this.openDbPromise];case 1:return It=_t.sent(),[2,new Promise(function(xt,an){var pt=It.transaction([x],"readonly").objectStore(x),Kt=Ct.createCompositeKey(vt);try{var Ht=pt.get(Kt);Ht.onerror=function(Wt){an(R(Wt,"storage-get"))},Ht.onsuccess=function(Wt){var on=Wt.target.result;xt(on?on.value:void 0)}}catch(Wt){an(Ie.create("storage-get",{originalErrorMessage:Wt&&Wt.message}))}})]}})})},et.prototype.set=function(vt,It){return A.__awaiter(this,void 0,void 0,function(){var Ct,_t=this;return A.__generator(this,function(xt){switch(xt.label){case 0:return[4,this.openDbPromise];case 1:return Ct=xt.sent(),[2,new Promise(function(an,qe){var Kt=Ct.transaction([x],"readwrite").objectStore(x),Ht=_t.createCompositeKey(vt);try{var Wt=Kt.put({compositeKey:Ht,value:It});Wt.onerror=function(on){qe(R(on,"storage-set"))},Wt.onsuccess=function(){an()}}catch(on){qe(Ie.create("storage-set",{originalErrorMessage:on&&on.message}))}})]}})})},et.prototype.delete=function(vt){return A.__awaiter(this,void 0,void 0,function(){var It,Ct=this;return A.__generator(this,function(_t){switch(_t.label){case 0:return[4,this.openDbPromise];case 1:return It=_t.sent(),[2,new Promise(function(xt,an){var pt=It.transaction([x],"readwrite").objectStore(x),Kt=Ct.createCompositeKey(vt);try{var Ht=pt.delete(Kt);Ht.onerror=function(Wt){an(R(Wt,"storage-delete"))},Ht.onsuccess=function(){xt()}}catch(Wt){an(Ie.create("storage-delete",{originalErrorMessage:Wt&&Wt.message}))}})]}})})},et.prototype.createCompositeKey=function(vt){return[this.appId,this.appName,this.namespace,vt].join()},et}(),ae=function(){function et(vt){this.storage=vt}return et.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},et.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},et.prototype.getActiveConfig=function(){return this.activeConfig},et.prototype.loadFromStorage=function(){return A.__awaiter(this,void 0,void 0,function(){var vt,It,Ct,_t,xt,an;return A.__generator(this,function(qe){switch(qe.label){case 0:return vt=this.storage.getLastFetchStatus(),It=this.storage.getLastSuccessfulFetchTimestampMillis(),Ct=this.storage.getActiveConfig(),[4,vt];case 1:return(_t=qe.sent())&&(this.lastFetchStatus=_t),[4,It];case 2:return(xt=qe.sent())&&(this.lastSuccessfulFetchTimestampMillis=xt),[4,Ct];case 3:return(an=qe.sent())&&(this.activeConfig=an),[2]}})})},et.prototype.setLastFetchStatus=function(vt){return this.lastFetchStatus=vt,this.storage.setLastFetchStatus(vt)},et.prototype.setLastSuccessfulFetchTimestampMillis=function(vt){return this.lastSuccessfulFetchTimestampMillis=vt,this.storage.setLastSuccessfulFetchTimestampMillis(vt)},et.prototype.setActiveConfig=function(vt){return this.activeConfig=vt,this.storage.setActiveConfig(vt)},et}();function ue(et,vt){return new Promise(function(It,Ct){var _t=Math.max(vt-Date.now(),0),xt=setTimeout(It,_t);et.addEventListener(function(){clearTimeout(xt),Ct(Ie.create("fetch-throttle",{throttleEndTimeMillis:vt}))})})}var ve=function(){function et(vt,It){this.client=vt,this.storage=It}return et.prototype.fetch=function(vt){return A.__awaiter(this,void 0,void 0,function(){var It;return A.__generator(this,function(Ct){switch(Ct.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return It=Ct.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(vt,It)]}})})},et.prototype.attemptFetch=function(vt,It){var Ct=It.throttleEndTimeMillis,_t=It.backoffCount;return A.__awaiter(this,void 0,void 0,function(){var xt,an,qe;return A.__generator(this,function(pt){switch(pt.label){case 0:return[4,ue(vt.signal,Ct)];case 1:pt.sent(),pt.label=2;case 2:return pt.trys.push([2,5,,7]),[4,this.client.fetch(vt)];case 3:return xt=pt.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return pt.sent(),[2,xt];case 5:if(!function(et){if(!(et instanceof J.FirebaseError))return!1;var vt=Number(et.httpStatus);return 429===vt||500===vt||503===vt||504===vt}(an=pt.sent()))throw an;return qe={throttleEndTimeMillis:Date.now()+J.calculateBackoffMillis(_t),backoffCount:_t+1},[4,this.storage.setThrottleMetadata(qe)];case 6:return pt.sent(),[2,this.attemptFetch(vt,qe)];case 7:return[2]}})})},et}(),ot="@firebase/remote-config";function Ze(et){et.INTERNAL.registerComponent(new Le.Component("remoteConfig",function(It,Ct){var _t=It.getProvider("app").getImmediate(),xt=It.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Ie.create("registration-window");var an=_t.options,qe=an.projectId,pt=an.apiKey,Kt=an.appId;if(!qe)throw Ie.create("registration-project-id");if(!pt)throw Ie.create("registration-api-key");if(!Kt)throw Ie.create("registration-app-id");var Ht=new k(Kt,_t.name,Ct=Ct||"firebase"),Wt=new ae(Ht),on=new mt.Logger(ot);on.logLevel=mt.LogLevel.ERROR;var An=new ke(xt,et.SDK_VERSION,Ct,qe,pt,Kt),sn=new ve(An,Ht),Vn=new ft(sn,Ht,Wt,on),sr=new at(_t,Vn,Wt,Ht,on);return sr.ensureInitialized(),sr},"PUBLIC").setMultipleInstances(!0)),et.registerVersion(ot,"0.1.28")}Ze(tt.default),We.registerRemoteConfig=Ze},6035:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{registerStorage:()=>Xi});var M=ge(6279);function oe(Q,G,he,Ae){return new(he||(he=Promise))(function(it,Pt){function qt(wn){try{ln(Ae.next(wn))}catch(q){Pt(q)}}function $t(wn){try{ln(Ae.throw(wn))}catch(q){Pt(q)}}function ln(wn){wn.done?it(wn.value):function(it){return it instanceof he?it:new he(function(Pt){Pt(it)})}(wn.value).then(qt,$t)}ln((Ae=Ae.apply(Q,G||[])).next())})}function z(Q,G){var Ae,He,it,Pt,he={label:0,sent:function(){if(1&it[0])throw it[1];return it[1]},trys:[],ops:[]};return Pt={next:qt(0),throw:qt(1),return:qt(2)},"function"==typeof Symbol&&(Pt[Symbol.iterator]=function(){return this}),Pt;function qt(ln){return function(wn){return function(ln){if(Ae)throw new TypeError("Generator is already executing.");for(;he;)try{if(Ae=1,He&&(it=2&ln[0]?He.return:ln[0]?He.throw||((it=He.return)&&it.call(He),0):He.next)&&!(it=it.call(He,ln[1])).done)return it;switch(He=0,it&&(ln=[2&ln[0],it.value]),ln[0]){case 0:case 1:it=ln;break;case 4:return he.label++,{value:ln[1],done:!1};case 5:he.label++,He=ln[1],ln=[0];continue;case 7:ln=he.ops.pop(),he.trys.pop();continue;default:if(!(it=(it=he.trys).length>0&&it[it.length-1])&&(6===ln[0]||2===ln[0])){he=0;continue}if(3===ln[0]&&(!it||ln[1]>it[0]&&ln[1]<it[3])){he.label=ln[1];break}if(6===ln[0]&&he.label<it[1]){he.label=it[1],it=ln;break}if(it&&he.label<it[2]){he.label=it[2],he.ops.push(ln);break}it[2]&&he.ops.pop(),he.trys.pop();continue}ln=G.call(Q,he)}catch(wn){ln=[6,wn],He=0}finally{Ae=it=0}if(5&ln[0])throw ln[1];return{value:ln[0]?ln[1]:void 0,done:!0}}([ln,wn])}}}function Me(){for(var Q=0,G=0,he=arguments.length;G<he;G++)Q+=arguments[G].length;var Ae=Array(Q),He=0;for(G=0;G<he;G++)for(var it=arguments[G],Pt=0,qt=it.length;Pt<qt;Pt++,He++)Ae[He]=it[Pt];return Ae}var x=ge(1100),C="firebasestorage.googleapis.com",ae=function(){function Q(G,he){this.code_=Gt(G),this.message_="Firebase Storage: "+he,this.serverResponse_=null,this.name_="FirebaseError"}return Q.prototype.codeProp=function(){return this.code},Q.prototype.codeEquals=function(G){return Gt(G)===this.codeProp()},Q.prototype.serverResponseProp=function(){return this.serverResponse_},Q.prototype.setServerResponseProp=function(G){this.serverResponse_=G},Object.defineProperty(Q.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),Q}();function Gt(Q){return"storage/"+Q}function ve(){return new ae("unknown","An unknown error occurred, please check the error payload for server response.")}function It(){return new ae("canceled","User canceled the upload/download.")}function xt(){return new ae("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function qe(){return new ae("no-download-url","The given file does not have any download URLs.")}function pt(Q,G,he){return new ae("invalid-argument","Invalid argument in `"+G+"` at index "+Q+": "+he)}function Ht(){return new ae("app-deleted","The Firebase app was deleted.")}function on(Q,G){return new ae("invalid-format","String does not match format '"+Q+"': "+G)}function An(Q){throw new ae("internal-error","Internal error: "+Q)}var sn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function Vn(Q){switch(Q){case sn.RAW:case sn.BASE64:case sn.BASE64URL:case sn.DATA_URL:return;default:throw"Expected one of the event types: ["+sn.RAW+", "+sn.BASE64+", "+sn.BASE64URL+", "+sn.DATA_URL+"]."}}var sr=function(G,he){this.data=G,this.contentType=he||null};function zn(Q,G){switch(Q){case sn.RAW:return new sr(ur(G));case sn.BASE64:case sn.BASE64URL:return new sr(Vr(Q,G));case sn.DATA_URL:return new sr(function(Q){var G=new yr(Q);return G.base64?Vr(sn.BASE64,G.rest):function(Q){var G;try{G=decodeURIComponent(Q)}catch(he){throw on(sn.DATA_URL,"Malformed data URL.")}return ur(G)}(G.rest)}(G),function(Q){return new yr(Q).contentType}(G))}throw ve()}function ur(Q){for(var G=[],he=0;he<Q.length;he++){var Ae=Q.charCodeAt(he);if(Ae<=127)G.push(Ae);else if(Ae<=2047)G.push(192|Ae>>6,128|63&Ae);else if(55296==(64512&Ae))if(he<Q.length-1&&56320==(64512&Q.charCodeAt(he+1))){var it=Ae,Pt=Q.charCodeAt(++he);G.push(240|(Ae=65536|(1023&it)<<10|1023&Pt)>>18,128|Ae>>12&63,128|Ae>>6&63,128|63&Ae)}else G.push(239,191,189);else 56320==(64512&Ae)?G.push(239,191,189):G.push(224|Ae>>12,128|Ae>>6&63,128|63&Ae)}return new Uint8Array(G)}function Vr(Q,G){switch(Q){case sn.BASE64:var he=-1!==G.indexOf("-"),Ae=-1!==G.indexOf("_");if(he||Ae)throw on(Q,"Invalid character '"+(he?"-":"_")+"' found: is it base64url encoded?");break;case sn.BASE64URL:var it=-1!==G.indexOf("+"),Pt=-1!==G.indexOf("/");if(it||Pt)throw on(Q,"Invalid character '"+(it?"+":"/")+"' found: is it base64 encoded?");G=G.replace(/-/g,"+").replace(/_/g,"/")}var qt;try{qt=atob(G)}catch(wn){throw on(Q,"Invalid character found")}for(var $t=new Uint8Array(qt.length),ln=0;ln<qt.length;ln++)$t[ln]=qt.charCodeAt(ln);return $t}var yr=function(G){this.base64=!1,this.contentType=null;var he=G.match(/^data:([^,]+)?,/);if(null===he)throw on(sn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var Ae=he[1]||null;null!=Ae&&(this.base64=function(Q,G){return Q.length>=G.length&&Q.substring(Q.length-G.length)===G}(Ae,";base64"),this.contentType=this.base64?Ae.substring(0,Ae.length-";base64".length):Ae),this.rest=G.substring(G.indexOf(",")+1)},nt={STATE_CHANGED:"state_changed"},Ve={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wt(Q){switch(Q){case"running":case"pausing":case"canceling":return Ve.RUNNING;case"paused":return Ve.PAUSED;case"success":return Ve.SUCCESS;case"canceled":return Ve.CANCELED;case"error":default:return Ve.ERROR}}function ct(Q){return null!=Q}function nn(Q){return void 0!==Q}function tn(Q){return"function"==typeof Q}function En(Q){return"object"==typeof Q}function Cn(Q){return En(Q)&&null!==Q}function _r(Q){return"string"==typeof Q||Q instanceof String}function Nn(Q){return Ir(Q)&&Number.isInteger(Q)}function Ir(Q){return"number"==typeof Q||Q instanceof Number}function Yn(Q){return ir()&&Q instanceof Blob}function ir(){return"undefined"!=typeof Blob}var ar=(()=>{return(Q=ar||(ar={}))[Q.NO_ERROR=0]="NO_ERROR",Q[Q.NETWORK_ERROR=1]="NETWORK_ERROR",Q[Q.ABORT=2]="ABORT",ar;var Q})(),Nr=function(){function Q(){var G=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ar.NO_ERROR,this.sendPromise_=new Promise(function(he){G.xhr_.addEventListener("abort",function(){G.errorCode_=ar.ABORT,he(G)}),G.xhr_.addEventListener("error",function(){G.errorCode_=ar.NETWORK_ERROR,he(G)}),G.xhr_.addEventListener("load",function(){he(G)})})}return Q.prototype.send=function(G,he,Ae,He){if(this.sent_)throw An("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(he,G,!0),ct(He))for(var it in He)He.hasOwnProperty(it)&&this.xhr_.setRequestHeader(it,He[it].toString());return ct(Ae)?this.xhr_.send(Ae):this.xhr_.send(),this.sendPromise_},Q.prototype.getErrorCode=function(){if(!this.sent_)throw An("cannot .getErrorCode() before sending");return this.errorCode_},Q.prototype.getStatus=function(){if(!this.sent_)throw An("cannot .getStatus() before sending");try{return this.xhr_.status}catch(G){return-1}},Q.prototype.getResponseText=function(){if(!this.sent_)throw An("cannot .getResponseText() before sending");return this.xhr_.responseText},Q.prototype.abort=function(){this.xhr_.abort()},Q.prototype.getResponseHeader=function(G){return this.xhr_.getResponseHeader(G)},Q.prototype.addUploadProgressListener=function(G){ct(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",G)},Q.prototype.removeUploadProgressListener=function(G){ct(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",G)},Q}(),_i=function(){function Q(){}return Q.prototype.createXhrIo=function(){return new Nr},Q}();function Qn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ei(){for(var Q=[],G=0;G<arguments.length;G++)Q[G]=arguments[G];var he=Qn();if(void 0!==he){for(var Ae=new he,He=0;He<Q.length;He++)Ae.append(Q[He]);return Ae.getBlob()}if(ir())return new Blob(Q);throw Error("This browser doesn't seem to support creating Blobs")}var Re=function(){function Q(G,he){var Ae=0,He="";Yn(G)?(this.data_=G,Ae=G.size,He=G.type):G instanceof ArrayBuffer?(he?this.data_=new Uint8Array(G):(this.data_=new Uint8Array(G.byteLength),this.data_.set(new Uint8Array(G))),Ae=this.data_.length):G instanceof Uint8Array&&(he?this.data_=G:(this.data_=new Uint8Array(G.length),this.data_.set(G)),Ae=G.length),this.size_=Ae,this.type_=He}return Q.prototype.size=function(){return this.size_},Q.prototype.type=function(){return this.type_},Q.prototype.slice=function(G,he){if(Yn(this.data_)){var He=function(Q,G,he){return Q.webkitSlice?Q.webkitSlice(G,he):Q.mozSlice?Q.mozSlice(G,he):Q.slice?Q.slice(G,he):null}(this.data_,G,he);return null===He?null:new Q(He)}return new Q(new Uint8Array(this.data_.buffer,G,he-G),!0)},Q.getBlob=function(){for(var G=[],he=0;he<arguments.length;he++)G[he]=arguments[he];if(ir()){var Ae=G.map(function($t){return $t instanceof Q?$t.data_:$t});return new Q(ei.apply(null,Ae))}var He=G.map(function($t){return _r($t)?zn(sn.RAW,$t).data:$t.data_}),it=0;He.forEach(function($t){it+=$t.byteLength});var Pt=new Uint8Array(it),qt=0;return He.forEach(function($t){for(var ln=0;ln<$t.length;ln++)Pt[qt++]=$t[ln]}),new Q(Pt,!0)},Q.prototype.uploadData=function(){return this.data_},Q}(),ht=function(){function Q(G,he){this.bucket=G,this.path_=he}return Object.defineProperty(Q.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),Q.prototype.fullServerUrl=function(){var G=encodeURIComponent;return"/b/"+G(this.bucket)+"/o/"+G(this.path)},Q.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},Q.makeFromBucketSpec=function(G){var he;try{he=Q.makeFromUrl(G)}catch(Ae){return new Q(G,"")}if(""===he.path)return he;throw function(Q){return new ae("invalid-default-bucket","Invalid default bucket '"+Q+"'.")}(G)},Q.makeFromUrl=function(G){var he=null,Ae="([A-Za-z0-9.\\-_]+)",Pt=new RegExp("^gs://"+Ae+"(/(.*))?$","i");function $t(Sn){Sn.path_=decodeURIComponent(Sn.path)}for(var wn=C.replace(/[.]/g,"\\."),bn=[{regex:Pt,indices:{bucket:1,path:3},postModify:function(Sn){"/"===Sn.path.charAt(Sn.path.length-1)&&(Sn.path_=Sn.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+wn+"/v[A-Za-z0-9_]+/b/"+Ae+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:$t},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+Ae+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:$t}],yn=0;yn<bn.length;yn++){var wr=bn[yn],lr=wr.regex.exec(G);if(lr){var Gn=lr[wr.indices.path];Gn||(Gn=""),he=new Q(lr[wr.indices.bucket],Gn),wr.postModify(he);break}}if(null==he)throw function(Q){return new ae("invalid-url","Invalid URL '"+Q+"'.")}(G);return he},Q}();function bt(Q){var G;try{G=JSON.parse(Q)}catch(he){return null}return function(Q){return En(Q)&&!Array.isArray(Q)}(G)?G:null}function Tt(Q,G){var he=G.split("/").filter(function(Ae){return Ae.length>0}).join("/");return 0===Q.length?he:Q+"/"+he}function Lt(Q){var G=Q.lastIndexOf("/",Q.length-2);return-1===G?Q:Q.slice(G+1)}function rn(Q){return"https://"+C+"/v0"+Q}function mn(Q){var G=encodeURIComponent,he="?";for(var Ae in Q)Q.hasOwnProperty(Ae)&&(he=he+(G(Ae)+"=")+G(Q[Ae])+"&");return he.slice(0,-1)}function Mn(Q,G){return G}var Qt=function(G,he,Ae,He){this.server=G,this.local=he||G,this.writable=!!Ae,this.xform=He||Mn},Tn=null;function Oe(Q,G,he){var Ae=bt(G);return null===Ae?null:function(Q,G,he){for(var Ae={type:"file"},He=he.length,it=0;it<He;it++){var Pt=he[it];Ae[Pt.local]=Pt.xform(Ae,G[Pt.server])}return function(Q,G){Object.defineProperty(Q,"ref",{get:function(){var it=new ht(Q.bucket,Q.fullPath);return G.makeStorageReference(it)}})}(Ae,Q),Ae}(Q,Ae,he)}function Ue(Q,G){for(var he={},Ae=G.length,He=0;He<Ae;He++){var it=G[He];it.writable&&(he[it.server]=Q[it.local])}return JSON.stringify(he)}function Je(Q){if(!En(Q)||!Q)throw"Expected Metadata object.";for(var G in Q)if(Q.hasOwnProperty(G)){var he=Q[G];if("customMetadata"===G){if(!En(he))throw"Expected object for 'customMetadata' mapping."}else if(Cn(he))throw"Mapping for '"+G+"' cannot be an object."}}var le="maxResults",ie="pageToken",se="prefixes";function St(Q){if(!En(Q)||!Q)throw"Expected ListOptions object.";for(var G in Q)if(G===le){if(!Nn(Q[le])||Q[le]<=0)throw"Expected maxResults to be a positive number.";if(Q[le]>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if(G!==ie)throw"Unknown option: "+G;if(Q[ie]&&!_r(Q[ie]))throw"Expected pageToken to be string."}}var Yt=function(G,he,Ae,He){this.url=G,this.method=he,this.handler=Ae,this.timeout=He,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function kn(Q){if(!Q)throw ve()}function cn(Q,G){return function(Ae,He){var it=Oe(Q,He,G);return kn(null!==it),it}}function vn(Q){return function(he,Ae){var He;return(He=401===he.getStatus()?new ae("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===he.getStatus()?function(Q){return new ae("quota-exceeded","Quota for bucket '"+Q+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Q.bucket):403===he.getStatus()?function(Q){return new ae("unauthorized","User does not have permission to access '"+Q+"'.")}(Q.path):Ae).setServerResponseProp(Ae.serverResponseProp()),He}}function wi(Q){var G=vn(Q);return function(Ae,He){var it=G(Ae,He);return 404===Ae.getStatus()&&(it=function(Q){return new ae("object-not-found","Object '"+Q+"' does not exist.")}(Q.path)),it.setServerResponseProp(He.serverResponseProp()),it}}function qn(Q,G,he){var He=rn(G.fullServerUrl()),Pt=Q.maxOperationRetryTime,qt=new Yt(He,"GET",cn(Q,he),Pt);return qt.errorHandler=wi(G),qt}function ko(Q,G,he,Ae,He){var it={};it.prefix=G.isRoot?"":G.path+"/",he&&he.length>0&&(it.delimiter=he),Ae&&(it.pageToken=Ae),He&&(it.maxResults=He);var qt=rn(G.bucketOnlyServerUrl()),ln=Q.maxOperationRetryTime,wn=new Yt(qt,"GET",function(Q,G){return function(Ae,He){var it=function(Q,G,he){var Ae=bt(he);return null===Ae?null:function(Q,G,he){var Ae={prefixes:[],items:[],nextPageToken:he.nextPageToken};if(he[se])for(var He=0,it=he[se];He<it.length;He++){var qt=it[He].replace(/\/$/,""),$t=Q.makeStorageReference(new ht(G,qt));Ae.prefixes.push($t)}if(he.items)for(var ln=0,wn=he.items;ln<wn.length;ln++)$t=Q.makeStorageReference(new ht(G,wn[ln].name)),Ae.items.push($t);return Ae}(Q,G,Ae)}(Q,G,He);return kn(null!==it),it}}(Q,G.bucket),ln);return wn.urlParams=it,wn.errorHandler=vn(G),wn}function ri(Q,G,he){var He=rn(G.fullServerUrl()),Pt=Q.maxOperationRetryTime,qt=new Yt(He,"GET",function(Q,G){return function(Ae,He){var it=Oe(Q,He,G);return kn(null!==it),function(Q,G){var he=bt(G);if(null===he||!_r(he.downloadTokens))return null;var Ae=he.downloadTokens;if(0===Ae.length)return null;var He=encodeURIComponent;return Ae.split(",").map(function(qt){var ln=Q.fullPath;return rn("/b/"+He(Q.bucket)+"/o/"+He(ln))+mn({alt:"media",token:qt})})[0]}(it,He)}}(Q,he),Pt);return qt.errorHandler=wi(G),qt}function pi(Q,G,he,Ae){var it=rn(G.fullServerUrl()),qt=Ue(he,Ae),ln=Q.maxOperationRetryTime,wn=new Yt(it,"PATCH",cn(Q,Ae),ln);return wn.headers={"Content-Type":"application/json; charset=utf-8"},wn.body=qt,wn.errorHandler=wi(G),wn}function Pi(Q,G){var Ae=rn(G.fullServerUrl()),qt=new Yt(Ae,"DELETE",function($t,ln){},Q.maxOperationRetryTime);return qt.successCodes=[200,204],qt.errorHandler=wi(G),qt}function xi(Q,G,he){var Ae=Object.assign({},he);return Ae.fullPath=Q.path,Ae.size=G.size(),Ae.contentType||(Ae.contentType=function(Q,G){return G&&G.type()||"application/octet-stream"}(0,G)),Ae}var mo=function(G,he,Ae,He){this.current=G,this.total=he,this.finalized=!!Ae,this.metadata=He||null};function Go(Q,G){var he=null;try{he=Q.getResponseHeader("X-Goog-Upload-Status")}catch(He){kn(!1)}return kn(!!he&&-1!==(G||["active"]).indexOf(he)),he}var ii=function(G,he,Ae){if(tn(G)||ct(he)||ct(Ae))this.next=G,this.error=he||null,this.complete=Ae||null;else{var it=G;this.next=it.next||null,this.error=it.error||null,this.complete=it.complete||null}},Pr=function(G,he,Ae,He,it,Pt){this.bytesTransferred=G,this.totalBytes=he,this.state=Ae,this.metadata=He,this.task=it,this.ref=Pt};function ui(Q,G,he){for(var Ae=G.length,He=G.length,it=0;it<G.length;it++)if(G[it].optional){Ae=it;break}if(!(Ae<=he.length&&he.length<=He))throw function(Q,G,he,Ae){var He,it;return Q===G?(He=Q,it=1===Q?"argument":"arguments"):(He="between "+Q+" and "+G,it="arguments"),new ae("invalid-argument-count","Invalid argument count in `"+he+"`: Expected "+He+" "+it+", received "+Ae+".")}(Ae,He,Q,he.length);for(it=0;it<he.length;it++)try{G[it].validator(he[it])}catch($t){throw $t instanceof Error?pt(it,Q,$t.message):pt(it,Q,$t)}}var Zn=function(G,he){var Ae=this;this.validator=function(He){Ae.optional&&!nn(He)||G(He)},this.optional=!!he};function Si(Q,G){function he(He){if(!_r(He))throw"Expected string."}var Ae;return Ae=Q?function(Q,G){return function(he){Q(he),G(he)}}(he,Q):he,new Zn(Ae,G)}function Qi(){return new Zn(function(G){if(!(G instanceof Uint8Array||G instanceof ArrayBuffer||ir()&&G instanceof Blob))throw"Expected Blob or File."})}function Cr(Q){return new Zn(Je,Q)}function gi(Q){return new Zn(St,Q)}function Wo(){return new Zn(function(G){if(!(Ir(G)&&G>=0))throw"Expected a number 0 or greater."})}function Ji(Q,G){return new Zn(function(Ae){if(!(null===Ae||ct(Ae)&&Ae instanceof Object))throw"Expected an Object.";null!=Q&&Q(Ae)},G)}function Ln(Q){return new Zn(function(he){if(null!==he&&!tn(he))throw"Expected a Function."},Q)}function Xn(Q){return function(){for(var G=[],he=0;he<arguments.length;he++)G[he]=arguments[he];Promise.resolve().then(function(){return Q.apply(void 0,G)})}}var Xo=function(){function Q(G,he,Ae,He,it,Pt){var qt=this;void 0===Pt&&(Pt=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=G,this.service_=he,this.location_=Ae,this.blob_=it,this.metadata_=Pt,this.mappings_=He,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function($t){qt.request_=null,qt.chunkMultiplier_=1,$t.codeEquals("canceled")?(qt.needToFetchStatus_=!0,qt.completeTransitions_()):(qt.error_=$t,qt.transition_("error"))},this.metadataErrorHandler_=function($t){qt.request_=null,$t.codeEquals("canceled")?qt.completeTransitions_():(qt.error_=$t,qt.transition_("error"))},this.promise_=new Promise(function($t,ln){qt.resolve_=$t,qt.reject_=ln,qt.start_()}),this.promise_.then(null,function(){})}return Q.prototype.makeProgressCallback_=function(){var G=this,he=this.transferred_;return function(Ae){return G.updateProgress_(he+Ae)}},Q.prototype.shouldDoResumable_=function(G){return G.size()>262144},Q.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},Q.prototype.resolveToken_=function(G){var he=this;this.service_.getAuthToken().then(function(Ae){switch(he.state_){case"running":G(Ae);break;case"canceling":he.transition_("canceled");break;case"pausing":he.transition_("paused")}})},Q.prototype.createResumable_=function(){var G=this;this.resolveToken_(function(he){var Ae=function(Q,G,he,Ae,He){var it=G.bucketOnlyServerUrl(),Pt=xi(G,Ae,He),qt={name:Pt.fullPath},$t=rn(it),wn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":Ae.size(),"X-Goog-Upload-Header-Content-Type":Pt.contentType,"Content-Type":"application/json; charset=utf-8"},q=Ue(Pt,he),fe=new Yt($t,"POST",function(je){var Dt;Go(je);try{Dt=je.getResponseHeader("X-Goog-Upload-URL")}catch(Xt){kn(!1)}return kn(_r(Dt)),Dt},Q.maxUploadRetryTime);return fe.urlParams=qt,fe.headers=wn,fe.body=q,fe.errorHandler=vn(G),fe}(G.service_,G.location_,G.mappings_,G.blob_,G.metadata_),He=G.service_.makeRequest(Ae,he);G.request_=He,He.getPromise().then(function(it){G.request_=null,G.uploadUrl_=it,G.needToFetchStatus_=!1,G.completeTransitions_()},G.errorHandler_)})},Q.prototype.fetchStatus_=function(){var G=this,he=this.uploadUrl_;this.resolveToken_(function(Ae){var He=function(Q,G,he,Ae){var $t=new Yt(he,"POST",function(ln){var wn=Go(ln,["active","final"]),q=null;try{q=ln.getResponseHeader("X-Goog-Upload-Size-Received")}catch($){kn(!1)}q||kn(!1);var te=Number(q);return kn(!isNaN(te)),new mo(te,Ae.size(),"final"===wn)},Q.maxUploadRetryTime);return $t.headers={"X-Goog-Upload-Command":"query"},$t.errorHandler=vn(G),$t}(G.service_,G.location_,he,G.blob_),it=G.service_.makeRequest(He,Ae);G.request_=it,it.getPromise().then(function(Pt){Pt=Pt,G.request_=null,G.updateProgress_(Pt.current),G.needToFetchStatus_=!1,Pt.finalized&&(G.needToFetchMetadata_=!0),G.completeTransitions_()},G.errorHandler_)})},Q.prototype.continueUpload_=function(){var G=this,he=262144*this.chunkMultiplier_,Ae=new mo(this.transferred_,this.blob_.size()),He=this.uploadUrl_;this.resolveToken_(function(it){var Pt;try{Pt=function(Q,G,he,Ae,He,it,Pt,qt){var $t=new mo(0,0);if(Pt?($t.current=Pt.current,$t.total=Pt.total):($t.current=0,$t.total=Ae.size()),Ae.size()!==$t.total)throw new ae("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var ln=$t.total-$t.current,wn=ln;He>0&&(wn=Math.min(wn,He));var q=$t.current,fe={"X-Goog-Upload-Command":wn===ln?"upload, finalize":"upload","X-Goog-Upload-Offset":$t.current},je=Ae.slice(q,q+wn);if(null===je)throw xt();var yn=new Yt(he,"POST",function(wr,lr){var Ei,cr=Go(wr,["active","final"]),Gn=$t.current+wn,Sn=Ae.size();return Ei="final"===cr?cn(G,it)(wr,lr):null,new mo(Gn,Sn,"final"===cr,Ei)},G.maxUploadRetryTime);return yn.headers=fe,yn.body=je.uploadData(),yn.progressCallback=qt||null,yn.errorHandler=vn(Q),yn}(G.location_,G.service_,He,G.blob_,he,G.mappings_,Ae,G.makeProgressCallback_())}catch($t){return G.error_=$t,void G.transition_("error")}var qt=G.service_.makeRequest(Pt,it);G.request_=qt,qt.getPromise().then(function($t){G.increaseMultiplier_(),G.request_=null,G.updateProgress_($t.current),$t.finalized?(G.metadata_=$t.metadata,G.transition_("success")):G.completeTransitions_()},G.errorHandler_)})},Q.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},Q.prototype.fetchMetadata_=function(){var G=this;this.resolveToken_(function(he){var Ae=qn(G.service_,G.location_,G.mappings_),He=G.service_.makeRequest(Ae,he);G.request_=He,He.getPromise().then(function(it){G.request_=null,G.metadata_=it,G.transition_("success")},G.metadataErrorHandler_)})},Q.prototype.oneShotUpload_=function(){var G=this;this.resolveToken_(function(he){var Ae=function(Q,G,he,Ae,He){var it=G.bucketOnlyServerUrl(),Pt={"X-Goog-Upload-Protocol":"multipart"},$t=function(){for(var yn="",wr=0;wr<2;wr++)yn+=Math.random().toString().slice(2);return yn}();Pt["Content-Type"]="multipart/related; boundary="+$t;var ln=xi(G,Ae,He),wn=Ue(ln,he),$=Re.getBlob("--"+$t+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wn+"\r\n--"+$t+"\r\nContent-Type: "+ln.contentType+"\r\n\r\n",Ae,"\r\n--"+$t+"--");if(null===$)throw xt();var fe={name:ln.fullPath},je=rn(it),Xt=Q.maxUploadRetryTime,bn=new Yt(je,"POST",cn(Q,he),Xt);return bn.urlParams=fe,bn.headers=Pt,bn.body=$.uploadData(),bn.errorHandler=vn(G),bn}(G.service_,G.location_,G.mappings_,G.blob_,G.metadata_),He=G.service_.makeRequest(Ae,he);G.request_=He,He.getPromise().then(function(it){G.request_=null,G.metadata_=it,G.updateProgress_(G.blob_.size()),G.transition_("success")},G.errorHandler_)})},Q.prototype.updateProgress_=function(G){var he=this.transferred_;this.transferred_=G,this.transferred_!==he&&this.notifyObservers_()},Q.prototype.transition_=function(G){if(this.state_!==G)switch(G){case"canceling":case"pausing":this.state_=G,null!==this.request_&&this.request_.cancel();break;case"running":var he="paused"===this.state_;this.state_=G,he&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=G,this.notifyObservers_();break;case"canceled":this.error_=It(),this.state_=G,this.notifyObservers_();break;case"error":case"success":this.state_=G,this.notifyObservers_()}},Q.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(Q.prototype,"snapshot",{get:function(){var G=wt(this.state_);return new Pr(this.transferred_,this.blob_.size(),G,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),Q.prototype.on=function(G,he,Ae,He){function it(){if(G!==nt.STATE_CHANGED)throw"Expected one of the event types: ["+nt.STATE_CHANGED+"]."}var Pt="Expected a function or an Object with one of `next`, `error`, `complete` properties.",qt=Ln(!0).validator,$t=Ji(null,!0).validator;function ln(Dt){try{return void qt(Dt)}catch(bn){}try{if($t(Dt),!(nn(Dt.next)||nn(Dt.error)||nn(Dt.complete)))throw"";return}catch(bn){throw Pt}}var wn=[Si(it),Ji(ln,!0),Ln(!0),Ln(!0)];ui("on",wn,arguments);var q=this;function te(Dt){return function(bn,yn,wr){null!==Dt&&ui("on",Dt,arguments);var lr=new ii(bn,yn,He);return q.addObserver_(lr),function(){q.removeObserver_(lr)}}}function $(Dt){if(null===Dt)throw Pt;ln(Dt)}var fe=[Ji($),Ln(!0),Ln(!0)],je=!(nn(he)||nn(Ae)||nn(He));return je?te(fe):te(null)(he,Ae,He)},Q.prototype.then=function(G,he){return this.promise_.then(G,he)},Q.prototype.catch=function(G){return this.then(null,G)},Q.prototype.addObserver_=function(G){this.observers_.push(G),this.notifyObserver_(G)},Q.prototype.removeObserver_=function(G){var he=this.observers_.indexOf(G);-1!==he&&this.observers_.splice(he,1)},Q.prototype.notifyObservers_=function(){var G=this;this.finishPromise_(),this.observers_.slice().forEach(function(Ae){G.notifyObserver_(Ae)})},Q.prototype.finishPromise_=function(){if(null!==this.resolve_){var G=!0;switch(wt(this.state_)){case Ve.SUCCESS:Xn(this.resolve_.bind(null,this.snapshot))();break;case Ve.CANCELED:case Ve.ERROR:Xn(this.reject_.bind(null,this.error_))();break;default:G=!1}G&&(this.resolve_=null,this.reject_=null)}},Q.prototype.notifyObserver_=function(G){switch(wt(this.state_)){case Ve.RUNNING:case Ve.PAUSED:G.next&&Xn(G.next.bind(G,this.snapshot))();break;case Ve.SUCCESS:G.complete&&Xn(G.complete.bind(G))();break;case Ve.CANCELED:case Ve.ERROR:G.error&&Xn(G.error.bind(G,this.error_))();break;default:G.error&&Xn(G.error.bind(G,this.error_))()}},Q.prototype.resume=function(){ui("resume",[],arguments);var G="paused"===this.state_||"pausing"===this.state_;return G&&this.transition_("running"),G},Q.prototype.pause=function(){ui("pause",[],arguments);var G="running"===this.state_;return G&&this.transition_("pausing"),G},Q.prototype.cancel=function(){ui("cancel",[],arguments);var G="running"===this.state_||"pausing"===this.state_;return G&&this.transition_("canceling"),G},Q}(),Gi=function(){function Q(G,he){this.service=G,this.location=he instanceof ht?he:ht.makeFromUrl(he)}return Q.prototype.toString=function(){return ui("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},Q.prototype.newRef=function(G,he){return new Q(G,he)},Q.prototype.mappings=function(){return function(){if(Tn)return Tn;var Q=[];Q.push(new Qt("bucket")),Q.push(new Qt("generation")),Q.push(new Qt("metageneration")),Q.push(new Qt("name","fullPath",!0));var he=new Qt("name");he.xform=function(it,Pt){return function(Q){return!_r(Q)||Q.length<2?Q:Lt(Q)}(Pt)},Q.push(he);var He=new Qt("size");return He.xform=function(it,Pt){return ct(Pt)?Number(Pt):Pt},Q.push(He),Q.push(new Qt("timeCreated")),Q.push(new Qt("updated")),Q.push(new Qt("md5Hash",null,!0)),Q.push(new Qt("cacheControl",null,!0)),Q.push(new Qt("contentDisposition",null,!0)),Q.push(new Qt("contentEncoding",null,!0)),Q.push(new Qt("contentLanguage",null,!0)),Q.push(new Qt("contentType",null,!0)),Q.push(new Qt("metadata","customMetadata",!0)),Tn=Q}()},Q.prototype.child=function(G){ui("child",[Si()],arguments);var he=Tt(this.location.path,G),Ae=new ht(this.location.bucket,he);return this.newRef(this.service,Ae)},Object.defineProperty(Q.prototype,"parent",{get:function(){var G=function(Q){if(0===Q.length)return null;var G=Q.lastIndexOf("/");return-1===G?"":Q.slice(0,G)}(this.location.path);if(null===G)return null;var he=new ht(this.location.bucket,G);return this.newRef(this.service,he)},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"root",{get:function(){var G=new ht(this.location.bucket,"");return this.newRef(this.service,G)},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"name",{get:function(){return Lt(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),Q.prototype.put=function(G,he){return void 0===he&&(he=null),ui("put",[Qi(),Cr(!0)],arguments),this.throwIfRoot_("put"),new Xo(this,this.service,this.location,this.mappings(),new Re(G),he)},Q.prototype.putString=function(G,he,Ae){void 0===he&&(he=sn.RAW),ui("putString",[Si(),Si(Vn,!0),Cr(!0)],arguments),this.throwIfRoot_("putString");var He=zn(he,G),it=Object.assign({},Ae);return!ct(it.contentType)&&ct(He.contentType)&&(it.contentType=He.contentType),new Xo(this,this.service,this.location,this.mappings(),new Re(He.data,!0),it)},Q.prototype.delete=function(){var G=this;return ui("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then(function(he){var Ae=Pi(G.service,G.location);return G.service.makeRequest(Ae,he).getPromise()})},Q.prototype.listAll=function(){ui("listAll",[],arguments);var G={prefixes:[],items:[]};return this.listAllHelper(G).then(function(){return G})},Q.prototype.listAllHelper=function(G,he){return oe(this,void 0,void 0,function(){var He,it,Pt;return z(this,function(qt){switch(qt.label){case 0:return[4,this.list({pageToken:he})];case 1:return He=qt.sent(),(it=G.prefixes).push.apply(it,He.prefixes),(Pt=G.items).push.apply(Pt,He.items),null==He.nextPageToken?[3,3]:[4,this.listAllHelper(G,He.nextPageToken)];case 2:qt.sent(),qt.label=3;case 3:return[2]}})})},Q.prototype.list=function(G){ui("list",[gi(!0)],arguments);var he=this;return this.service.getAuthToken().then(function(Ae){var He=G||{},it=ko(he.service,he.location,"/",He.pageToken,He.maxResults);return he.service.makeRequest(it,Ae).getPromise()})},Q.prototype.getMetadata=function(){var G=this;return ui("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then(function(he){var Ae=qn(G.service,G.location,G.mappings());return G.service.makeRequest(Ae,he).getPromise()})},Q.prototype.updateMetadata=function(G){var he=this;return ui("updateMetadata",[Cr()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then(function(Ae){var He=pi(he.service,he.location,G,he.mappings());return he.service.makeRequest(He,Ae).getPromise()})},Q.prototype.getDownloadURL=function(){var G=this;return ui("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then(function(he){var Ae=ri(G.service,G.location,G.mappings());return G.service.makeRequest(Ae,he).getPromise().then(function(He){if(null===He)throw qe();return He})})},Q.prototype.throwIfRoot_=function(G){if(""===this.location.path)throw function(Q){return new ae("invalid-root-operation","The operation '"+Q+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(G)},Q}(),Do=function(){function Q(G){this.promise_=Promise.reject(G)}return Q.prototype.getPromise=function(){return this.promise_},Q.prototype.cancel=function(G){},Q}(),rr=function(){function Q(G,he,Ae,He,it,Pt,qt,$t,ln,wn,q){var te=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=G,this.method_=he,this.headers_=Ae,this.body_=He,this.successCodes_=it.slice(),this.additionalRetryCodes_=Pt.slice(),this.callback_=qt,this.errorCallback_=$t,this.progressCallback_=wn,this.timeout_=ln,this.pool_=q,this.promise_=new Promise(function($,fe){te.resolve_=$,te.reject_=fe,te.start_()})}return Q.prototype.start_=function(){var G=this;function Ae(He,it){var Pt=G.resolve_,qt=G.reject_,$t=it.xhr;if(it.wasSuccessCode)try{var ln=G.callback_($t,$t.getResponseText());nn(ln)?Pt(ln):Pt()}catch(q){qt(q)}else if(null!==$t)(wn=ve()).setServerResponseProp($t.getResponseText()),qt(G.errorCallback_?G.errorCallback_($t,wn):wn);else if(it.canceled)qt(wn=G.appDelete_?Ht():It());else{var wn;qt(wn=new ae("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?Ae(0,new Wi(!1,null,!0)):this.backoffId_=function(Q,G,he){var Ae=1,He=null,it=!1,Pt=0;function qt(){return 2===Pt}var $t=!1;function ln(){for(var fe=[],je=0;je<arguments.length;je++)fe[je]=arguments[je];$t||($t=!0,G.apply(null,fe))}function wn(fe){He=setTimeout(function(){He=null,Q(q,qt())},fe)}function q(fe){for(var je=[],Dt=1;Dt<arguments.length;Dt++)je[Dt-1]=arguments[Dt];if(!$t){if(fe)return void ln.call.apply(ln,Me([null,fe],je));var bn;if(qt()||it)return void ln.call.apply(ln,Me([null,fe],je));Ae<64&&(Ae*=2),1===Pt?(Pt=2,bn=0):bn=1e3*(Ae+Math.random()),wn(bn)}}var te=!1;function $(fe){te||(te=!0,!$t&&(null!==He?(fe||(Pt=2),clearTimeout(He),wn(0)):fe||(Pt=1)))}return wn(0),setTimeout(function(){it=!0,$(!0)},he),$}(function(He,it){if(it)He(!1,new Wi(!1,null,!0));else{var Pt=G.pool_.createXhrIo();G.pendingXhr_=Pt,null!==G.progressCallback_&&Pt.addUploadProgressListener(qt),Pt.send(G.url_,G.method_,G.body_,G.headers_).then(function($t){null!==G.progressCallback_&&$t.removeUploadProgressListener(qt),G.pendingXhr_=null;var ln=($t=$t).getErrorCode()===ar.NO_ERROR,wn=$t.getStatus();if(ln&&!G.isRetryStatusCode_(wn)){var te=-1!==G.successCodes_.indexOf(wn);He(!0,new Wi(te,$t))}else{var q=$t.getErrorCode()===ar.ABORT;He(!1,new Wi(!1,null,q))}})}function qt($t){null!==G.progressCallback_&&G.progressCallback_($t.loaded,$t.lengthComputable?$t.total:-1)}},Ae,this.timeout_)},Q.prototype.getPromise=function(){return this.promise_},Q.prototype.cancel=function(G){this.canceled_=!0,this.appDelete_=G||!1,null!==this.backoffId_&&function(Q){Q(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},Q.prototype.isRetryStatusCode_=function(G){var he=G>=500&&G<600,He=-1!==[408,429].indexOf(G),it=-1!==this.additionalRetryCodes_.indexOf(G);return he||He||it},Q}(),Wi=function(G,he,Ae){this.wasSuccessCode=G,this.xhr=he,this.canceled=!!Ae};var fs=function(){function Q(G,he,Ae,He){var it;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=G,this.authProvider_=he,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=Ae,this.bucket_=null!=He?ht.makeFromBucketSpec(He):Q.extractBucket_(null===(it=this.app_)||void 0===it?void 0:it.options),this.internals_=new Ys(this)}return Q.extractBucket_=function(G){var he=null==G?void 0:G.storageBucket;return null==he?null:ht.makeFromBucketSpec(he)},Q.prototype.getAuthToken=function(){return oe(this,void 0,void 0,function(){var G,he;return z(this,function(Ae){switch(Ae.label){case 0:return(G=this.authProvider_.getImmediate({optional:!0}))?[4,G.getToken()]:[3,2];case 1:if(null!==(he=Ae.sent()))return[2,he.accessToken];Ae.label=2;case 2:return[2,null]}})})},Q.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach(function(G){return G.cancel()}),this.requests_.clear()},Q.prototype.makeStorageReference=function(G){return new Gi(this,G)},Q.prototype.makeRequest=function(G,he){var Ae=this;if(this.deleted_)return new Do(Ht());var He=function(Q,G,he,Ae){var He=mn(Q.urlParams),it=Q.url+He,Pt=Object.assign({},Q.headers);return function(Q,G){G&&(Q["X-Firebase-GMPID"]=G)}(Pt,G),function(Q,G){null!==G&&G.length>0&&(Q.Authorization="Firebase "+G)}(Pt,he),function(Q){Q["X-Firebase-Storage-Version"]="webjs/"+(void 0!==M.default?M.default.SDK_VERSION:"AppManager")}(Pt),new rr(it,Q.method,Pt,Q.body,Q.successCodes,Q.additionalRetryCodes,Q.handler,Q.errorHandler,Q.timeout,Q.progressCallback,Ae)}(G,this.appId_,he,this.pool_);return this.requests_.add(He),He.getPromise().then(function(){return Ae.requests_.delete(He)},function(){return Ae.requests_.delete(He)}),He},Q.prototype.ref=function(G){function he(He){if("string"!=typeof He)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(He))throw"Expected child path but got a URL, use refFromURL instead."}if(ui("ref",[Si(he,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var Ae=new Gi(this,this.bucket_);return null!=G?Ae.child(G):Ae},Q.prototype.refFromURL=function(G){function he(Ae){if("string"!=typeof Ae)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(Ae))throw"Expected full URL but got a child path, use ref instead.";try{ht.makeFromUrl(Ae)}catch(He){throw"Expected valid full URL but got an invalid one."}}return ui("refFromURL",[Si(he,!1)],arguments),new Gi(this,G)},Object.defineProperty(Q.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),Q.prototype.setMaxUploadRetryTime=function(G){ui("setMaxUploadRetryTime",[Wo()],arguments),this.maxUploadRetryTime_=G},Object.defineProperty(Q.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),Q.prototype.setMaxOperationRetryTime=function(G){ui("setMaxOperationRetryTime",[Wo()],arguments),this.maxOperationRetryTime_=G},Object.defineProperty(Q.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),Q}(),Ys=function(){function Q(G){this.service_=G}return Q.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},Q}();function Zo(Q,G){var he=Q.getProvider("app").getImmediate(),Ae=Q.getProvider("auth-internal");return new fs(he,Ae,new _i,G)}function Xi(Q){var G={TaskState:Ve,TaskEvent:nt,StringFormat:sn,Storage:fs,Reference:Gi};Q.INTERNAL.registerComponent(new x.Component("storage",Zo,"PUBLIC").setServiceProps(G).setMultipleInstances(!0)),Q.registerVersion("@firebase/storage","0.3.43")}Xi(M.default)},1704:(On,We,ge)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});var M=ge(5057),A={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function(nt,ye){if(!nt)throw mt(ye)},mt=function(nt){return new Error("Firebase Database ("+A.SDK_VERSION+") INTERNAL ASSERT FAILED: "+nt)},Le=function(nt){for(var ye=[],Ve=0,wt=0;wt<nt.length;wt++){var ct=nt.charCodeAt(wt);ct<128?ye[Ve++]=ct:ct<2048?(ye[Ve++]=ct>>6|192,ye[Ve++]=63&ct|128):55296==(64512&ct)&&wt+1<nt.length&&56320==(64512&nt.charCodeAt(wt+1))?(ct=65536+((1023&ct)<<10)+(1023&nt.charCodeAt(++wt)),ye[Ve++]=ct>>18|240,ye[Ve++]=ct>>12&63|128,ye[Ve++]=ct>>6&63|128,ye[Ve++]=63&ct|128):(ye[Ve++]=ct>>12|224,ye[Ve++]=ct>>6&63|128,ye[Ve++]=63&ct|128)}return ye},tt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(nt,ye){if(!Array.isArray(nt))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var Ve=ye?this.byteToCharMapWebSafe_:this.byteToCharMap_,wt=[],ct=0;ct<nt.length;ct+=3){var nn=nt[ct],tn=ct+1<nt.length,En=tn?nt[ct+1]:0,Cn=ct+2<nt.length,pn=Cn?nt[ct+2]:0,Ir=(15&En)<<2|pn>>6,Yn=63&pn;Cn||(Yn=64,tn||(Ir=64)),wt.push(Ve[nn>>2],Ve[(3&nn)<<4|En>>4],Ve[Ir],Ve[Yn])}return wt.join("")},encodeString:function(nt,ye){return this.HAS_NATIVE_SUPPORT&&!ye?btoa(nt):this.encodeByteArray(Le(nt),ye)},decodeString:function(nt,ye){return this.HAS_NATIVE_SUPPORT&&!ye?atob(nt):function(nt){for(var ye=[],Ve=0,wt=0;Ve<nt.length;){var ct=nt[Ve++];if(ct<128)ye[wt++]=String.fromCharCode(ct);else if(ct>191&&ct<224){var nn=nt[Ve++];ye[wt++]=String.fromCharCode((31&ct)<<6|63&nn)}else if(ct>239&&ct<365){var Cn=((7&ct)<<18|(63&(nn=nt[Ve++]))<<12|(63&(tn=nt[Ve++]))<<6|63&nt[Ve++])-65536;ye[wt++]=String.fromCharCode(55296+(Cn>>10)),ye[wt++]=String.fromCharCode(56320+(1023&Cn))}else{nn=nt[Ve++];var tn=nt[Ve++];ye[wt++]=String.fromCharCode((15&ct)<<12|(63&nn)<<6|63&tn)}}return ye.join("")}(this.decodeStringToByteArray(nt,ye))},decodeStringToByteArray:function(nt,ye){this.init_();for(var Ve=ye?this.charToByteMapWebSafe_:this.charToByteMap_,wt=[],ct=0;ct<nt.length;){var nn=Ve[nt.charAt(ct++)],En=ct<nt.length?Ve[nt.charAt(ct)]:0,pn=++ct<nt.length?Ve[nt.charAt(ct)]:64,Nn=++ct<nt.length?Ve[nt.charAt(ct)]:64;if(++ct,null==nn||null==En||null==pn||null==Nn)throw Error();wt.push(nn<<2|En>>4),64!==pn&&(wt.push(En<<4&240|pn>>2),64!==Nn&&wt.push(pn<<6&192|Nn))}return wt},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var nt=0;nt<this.ENCODED_VALS.length;nt++)this.byteToCharMap_[nt]=this.ENCODED_VALS.charAt(nt),this.charToByteMap_[this.byteToCharMap_[nt]]=nt,this.byteToCharMapWebSafe_[nt]=this.ENCODED_VALS_WEBSAFE.charAt(nt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[nt]]=nt,nt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(nt)]=nt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(nt)]=nt)}}},oe=function(nt){try{return tt.decodeString(nt,!0)}catch(ye){console.error("base64Decode failed: ",ye)}return null};function Ie(nt,ye){if(!(ye instanceof Object))return ye;switch(ye.constructor){case Date:return new Date(ye.getTime());case Object:void 0===nt&&(nt={});break;case Array:nt=[];break;default:return ye}for(var wt in ye)!ye.hasOwnProperty(wt)||(nt[wt]=Ie(nt[wt],ye[wt]));return nt}var xe=function(){function nt(){var ye=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Ve,wt){ye.resolve=Ve,ye.reject=wt})}return nt.prototype.wrapCallback=function(ye){var Ve=this;return function(wt,ct){wt?Ve.reject(wt):Ve.resolve(ct),"function"==typeof ye&&(Ve.promise.catch(function(){}),1===ye.length?ye(wt):ye(wt,ct))}},nt}();function we(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function gt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(nt){return!1}}var B=function(nt){function ye(Ve,wt){var ct=nt.call(this,wt)||this;return ct.code=Ve,ct.name="FirebaseError",Object.setPrototypeOf(ct,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(ct,K.prototype.create),ct}return M.__extends(ye,nt),ye}(Error),K=function(){function nt(ye,Ve,wt){this.service=ye,this.serviceName=Ve,this.errors=wt}return nt.prototype.create=function(ye){for(var Ve=[],wt=1;wt<arguments.length;wt++)Ve[wt-1]=arguments[wt];for(var ct=Ve[0]||{},nn=this.service+"/"+ye,tn=this.errors[ye],En=tn?k(tn,ct):"Error",Cn=this.serviceName+": "+En+" ("+nn+").",pn=new B(nn,Cn),_r=0,Nn=Object.keys(ct);_r<Nn.length;_r++){var Ir=Nn[_r];"_"!==Ir.slice(-1)&&(Ir in pn&&console.warn('Overwriting FirebaseError base field "'+Ir+'" can cause unexpected behavior.'),pn[Ir]=ct[Ir])}return pn},nt}();function k(nt,ye){return nt.replace(ae,function(Ve,wt){var ct=ye[wt];return null!=ct?String(ct):"<"+wt+"?>"})}var ae=/\{\$([^}]+)}/g;function ue(nt){return JSON.parse(nt)}var ve=function(nt){var ye={},Ve={},wt={},ct="";try{var nn=nt.split(".");ye=ue(oe(nn[0])||""),Ve=ue(oe(nn[1])||""),ct=nn[2],wt=Ve.d||{},delete Ve.d}catch(tn){}return{header:ye,claims:Ve,data:wt,signature:ct}},qe=function(){function nt(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var ye=1;ye<this.blockSize;++ye)this.pad_[ye]=0;this.reset()}return nt.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},nt.prototype.compress_=function(ye,Ve){Ve||(Ve=0);var wt=this.W_;if("string"==typeof ye)for(var ct=0;ct<16;ct++)wt[ct]=ye.charCodeAt(Ve)<<24|ye.charCodeAt(Ve+1)<<16|ye.charCodeAt(Ve+2)<<8|ye.charCodeAt(Ve+3),Ve+=4;else for(ct=0;ct<16;ct++)wt[ct]=ye[Ve]<<24|ye[Ve+1]<<16|ye[Ve+2]<<8|ye[Ve+3],Ve+=4;for(ct=16;ct<80;ct++)wt[ct]=4294967295&((nn=wt[ct-3]^wt[ct-8]^wt[ct-14]^wt[ct-16])<<1|nn>>>31);var Nn,Ir,tn=this.chain_[0],En=this.chain_[1],Cn=this.chain_[2],pn=this.chain_[3],_r=this.chain_[4];for(ct=0;ct<80;ct++){ct<40?ct<20?(Nn=pn^En&(Cn^pn),Ir=1518500249):(Nn=En^Cn^pn,Ir=1859775393):ct<60?(Nn=En&Cn|pn&(En|Cn),Ir=2400959708):(Nn=En^Cn^pn,Ir=3395469782);var nn=(tn<<5|tn>>>27)+Nn+_r+Ir+wt[ct]&4294967295;_r=pn,pn=Cn,Cn=4294967295&(En<<30|En>>>2),En=tn,tn=nn}this.chain_[0]=this.chain_[0]+tn&4294967295,this.chain_[1]=this.chain_[1]+En&4294967295,this.chain_[2]=this.chain_[2]+Cn&4294967295,this.chain_[3]=this.chain_[3]+pn&4294967295,this.chain_[4]=this.chain_[4]+_r&4294967295},nt.prototype.update=function(ye,Ve){if(null!=ye){void 0===Ve&&(Ve=ye.length);for(var wt=Ve-this.blockSize,ct=0,nn=this.buf_,tn=this.inbuf_;ct<Ve;){if(0===tn)for(;ct<=wt;)this.compress_(ye,ct),ct+=this.blockSize;if("string"==typeof ye){for(;ct<Ve;)if(nn[tn]=ye.charCodeAt(ct),++ct,++tn===this.blockSize){this.compress_(nn),tn=0;break}}else for(;ct<Ve;)if(nn[tn]=ye[ct],++ct,++tn===this.blockSize){this.compress_(nn),tn=0;break}}this.inbuf_=tn,this.total_+=Ve}},nt.prototype.digest=function(){var ye=[],Ve=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var wt=this.blockSize-1;wt>=56;wt--)this.buf_[wt]=255&Ve,Ve/=256;this.compress_(this.buf_);var ct=0;for(wt=0;wt<5;wt++)for(var nn=24;nn>=0;nn-=8)ye[ct]=this.chain_[wt]>>nn&255,++ct;return ye},nt}(),Kt=function(){function nt(ye,Ve){var wt=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ve,this.task.then(function(){ye(wt)}).catch(function(ct){wt.error(ct)})}return nt.prototype.next=function(ye){this.forEachObserver(function(Ve){Ve.next(ye)})},nt.prototype.error=function(ye){this.forEachObserver(function(Ve){Ve.error(ye)}),this.close(ye)},nt.prototype.complete=function(){this.forEachObserver(function(ye){ye.complete()}),this.close()},nt.prototype.subscribe=function(ye,Ve,wt){var nn,ct=this;if(void 0===ye&&void 0===Ve&&void 0===wt)throw new Error("Missing Observer.");void 0===(nn=function(nt,ye){if("object"!=typeof nt||null===nt)return!1;for(var Ve=0,wt=["next","error","complete"];Ve<wt.length;Ve++){var ct=wt[Ve];if(ct in nt&&"function"==typeof nt[ct])return!0}return!1}(ye)?ye:{next:ye,error:Ve,complete:wt}).next&&(nn.next=on),void 0===nn.error&&(nn.error=on),void 0===nn.complete&&(nn.complete=on);var tn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{ct.finalError?nn.error(ct.finalError):nn.complete()}catch(En){}}),this.observers.push(nn),tn},nt.prototype.unsubscribeOne=function(ye){void 0===this.observers||void 0===this.observers[ye]||(delete this.observers[ye],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},nt.prototype.forEachObserver=function(ye){if(!this.finalized)for(var Ve=0;Ve<this.observers.length;Ve++)this.sendOne(Ve,ye)},nt.prototype.sendOne=function(ye,Ve){var wt=this;this.task.then(function(){if(void 0!==wt.observers&&void 0!==wt.observers[ye])try{Ve(wt.observers[ye])}catch(ct){"undefined"!=typeof console&&console.error&&console.error(ct)}})},nt.prototype.close=function(ye){var Ve=this;this.finalized||(this.finalized=!0,void 0!==ye&&(this.finalError=ye),this.task.then(function(){Ve.observers=void 0,Ve.onNoObservers=void 0}))},nt}();function on(){}function sn(nt,ye,Ve){var wt="";switch(ye){case 1:wt=Ve?"first":"First";break;case 2:wt=Ve?"second":"Second";break;case 3:wt=Ve?"third":"Third";break;case 4:wt=Ve?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return nt+" failed: "+(wt+" argument ")}We.CONSTANTS=A,We.Deferred=xe,We.ErrorFactory=K,We.FirebaseError=B,We.MAX_VALUE_MILLIS=144e5,We.RANDOM_FACTOR=.5,We.Sha1=qe,We.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},We.assert=J,We.assertionError=mt,We.async=function(nt,ye){return function(){for(var Ve=[],wt=0;wt<arguments.length;wt++)Ve[wt]=arguments[wt];Promise.resolve(!0).then(function(){nt.apply(void 0,Ve)}).catch(function(ct){ye&&ye(ct)})}},We.base64=tt,We.base64Decode=oe,We.base64Encode=function(nt){var ye=Le(nt);return tt.encodeByteArray(ye,!0)},We.calculateBackoffMillis=function(nt,ye,Ve){void 0===ye&&(ye=1e3),void 0===Ve&&(Ve=2);var wt=ye*Math.pow(Ve,nt),ct=Math.round(.5*wt*(Math.random()-.5)*2);return Math.min(144e5,wt+ct)},We.contains=function(nt,ye){return Object.prototype.hasOwnProperty.call(nt,ye)},We.createSubscribe=function(nt,ye){var Ve=new Kt(nt,ye);return Ve.subscribe.bind(Ve)},We.decode=ve,We.deepCopy=function(nt){return Ie(void 0,nt)},We.deepExtend=Ie,We.errorPrefix=sn,We.getUA=we,We.isAdmin=function(nt){var ye=ve(nt).claims;return"object"==typeof ye&&!0===ye.admin},We.isBrowser=function(){return"object"==typeof self&&self.self===self},We.isBrowserExtension=function(){var nt="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof nt&&void 0!==nt.id},We.isElectron=function(){return we().indexOf("Electron/")>=0},We.isEmpty=function(nt){for(var ye in nt)if(Object.prototype.hasOwnProperty.call(nt,ye))return!1;return!0},We.isIE=function(){var nt=we();return nt.indexOf("MSIE ")>=0||nt.indexOf("Trident/")>=0},We.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},We.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())},We.isNode=gt,We.isNodeSdk=function(){return!0===A.NODE_CLIENT||!0===A.NODE_ADMIN},We.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},We.isSafari=function(){return!gt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},We.isUWP=function(){return we().indexOf("MSAppHost/")>=0},We.isValidFormat=function(nt){var Ve=ve(nt).claims;return!!Ve&&"object"==typeof Ve&&Ve.hasOwnProperty("iat")},We.isValidTimestamp=function(nt){var ye=ve(nt).claims,Ve=Math.floor((new Date).getTime()/1e3),wt=0,ct=0;return"object"==typeof ye&&(ye.hasOwnProperty("nbf")?wt=ye.nbf:ye.hasOwnProperty("iat")&&(wt=ye.iat),ct=ye.hasOwnProperty("exp")?ye.exp:wt+86400),!!Ve&&!!wt&&!!ct&&Ve>=wt&&Ve<=ct},We.issuedAtTime=function(nt){var ye=ve(nt).claims;return"object"==typeof ye&&ye.hasOwnProperty("iat")?ye.iat:null},We.jsonEval=ue,We.map=function(nt,ye,Ve){var wt={};for(var ct in nt)Object.prototype.hasOwnProperty.call(nt,ct)&&(wt[ct]=ye.call(Ve,nt[ct],ct,nt));return wt},We.querystring=function(nt){for(var ye=[],Ve=function(Cn,pn){Array.isArray(pn)?pn.forEach(function(_r){ye.push(encodeURIComponent(Cn)+"="+encodeURIComponent(_r))}):ye.push(encodeURIComponent(Cn)+"="+encodeURIComponent(pn))},wt=0,ct=Object.entries(nt);wt<ct.length;wt++){var nn=ct[wt];Ve(nn[0],nn[1])}return ye.length?"&"+ye.join("&"):""},We.querystringDecode=function(nt){var ye={};return nt.replace(/^\?/,"").split("&").forEach(function(wt){if(wt){var ct=wt.split("=");ye[ct[0]]=ct[1]}}),ye},We.safeGet=function(nt,ye){if(Object.prototype.hasOwnProperty.call(nt,ye))return nt[ye]},We.stringLength=function(nt){for(var ye=0,Ve=0;Ve<nt.length;Ve++){var wt=nt.charCodeAt(Ve);wt<128?ye++:wt<2048?ye+=2:wt>=55296&&wt<=56319?(ye+=4,Ve++):ye+=3}return ye},We.stringToByteArray=function(nt){for(var ye=[],Ve=0,wt=0;wt<nt.length;wt++){var ct=nt.charCodeAt(wt);if(ct>=55296&&ct<=56319){var nn=ct-55296;wt++,J(wt<nt.length,"Surrogate pair missing trail surrogate."),ct=65536+(nn<<10)+(nt.charCodeAt(wt)-56320)}ct<128?ye[Ve++]=ct:ct<2048?(ye[Ve++]=ct>>6|192,ye[Ve++]=63&ct|128):ct<65536?(ye[Ve++]=ct>>12|224,ye[Ve++]=ct>>6&63|128,ye[Ve++]=63&ct|128):(ye[Ve++]=ct>>18|240,ye[Ve++]=ct>>12&63|128,ye[Ve++]=ct>>6&63|128,ye[Ve++]=63&ct|128)}return ye},We.stringify=function(nt){return JSON.stringify(nt)},We.validateArgCount=function(nt,ye,Ve,wt){var ct;if(wt<ye?ct="at least "+ye:wt>Ve&&(ct=0===Ve?"none":"no more than "+Ve),ct)throw new Error(nt+" failed: Was called with "+wt+(1===wt?" argument.":" arguments.")+" Expects "+ct+".")},We.validateCallback=function(nt,ye,Ve,wt){if((!wt||Ve)&&"function"!=typeof Ve)throw new Error(sn(nt,ye,wt)+"must be a valid function.")},We.validateContextObject=function(nt,ye,Ve,wt){if((!wt||Ve)&&("object"!=typeof Ve||null===Ve))throw new Error(sn(nt,ye,wt)+"must be a valid context object.")},We.validateIndexedDBOpenable=function(){return new Promise(function(nt,ye){try{var Ve=!0,wt="validate-browser-context-for-indexeddb-analytics-module",ct=window.indexedDB.open(wt);ct.onsuccess=function(){ct.result.close(),Ve||window.indexedDB.deleteDatabase(wt),nt(!0)},ct.onupgradeneeded=function(){Ve=!1},ct.onerror=function(){var nn;ye((null===(nn=ct.error)||void 0===nn?void 0:nn.message)||"")}}catch(nn){ye(nn)}})},We.validateNamespace=function(nt,ye,Ve,wt){if((!wt||Ve)&&"string"!=typeof Ve)throw new Error(sn(nt,ye,wt)+"must be a valid firebase namespace.")}},2870:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{default:()=>ci,ErrorCode:()=>Js,EventType:()=>Ko,WebChannel:()=>ro,XhrIo:()=>Ma,createWebChannelTransport:()=>Zs});var M=function(m,L){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,_e){X.__proto__=_e}||function(X,_e){for(var $e in _e)Object.prototype.hasOwnProperty.call(_e,$e)&&(X[$e]=_e[$e])})(m,L)};function J(m){var L="function"==typeof Symbol&&Symbol.iterator,X=L&&m[L],_e=0;if(X)return X.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_e>=m.length&&(m=void 0),{value:m&&m[_e++],done:!m}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}var Le,mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},st=st||{},tt=mt||self;function ft(){}function oe(m){var L=typeof m;return"object"!=L?L:m?Array.isArray(m)?"array":L:"null"}function z(m){var L=oe(m);return"array"==L||"object"==L&&"number"==typeof m.length}function Ie(m){var L=typeof m;return"object"==L&&null!=m||"function"==L}var we="closure_uid_"+(1e9*Math.random()>>>0),ke=0;function gt(m,L,X){return m.call.apply(m.bind,arguments)}function Me(m,L,X){if(!m)throw Error();if(2<arguments.length){var _e=Array.prototype.slice.call(arguments,2);return function(){var $e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($e,_e),m.apply(L,$e)}}return function(){return m.apply(L,arguments)}}function Pe(m,L,X){return(Pe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gt:Me).apply(null,arguments)}function ut(m,L){var X=Array.prototype.slice.call(arguments,1);return function(){var _e=X.slice();return _e.push.apply(_e,arguments),m.apply(this,_e)}}var ze=Date.now;function rt(m,L){function X(){}X.prototype=L.prototype,m.S=L.prototype,m.prototype=new X,m.prototype.constructor=m}function Ut(){this.j=this.j,this.i=this.i}Ut.prototype.j=!1,Ut.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(m){Object.prototype.hasOwnProperty.call(m,we)&&m[we]||(m[we]=++ke)}(this)},Ut.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var at=Array.prototype.indexOf?function(m,L){return Array.prototype.indexOf.call(m,L,void 0)}:function(m,L){if("string"==typeof m)return"string"!=typeof L||1!=L.length?-1:m.indexOf(L,0);for(var X=0;X<m.length;X++)if(X in m&&m[X]===L)return X;return-1},Ot=Array.prototype.forEach?function(m,L,X){Array.prototype.forEach.call(m,L,X)}:function(m,L,X){for(var _e=m.length,$e="string"==typeof m?m.split(""):m,Et=0;Et<_e;Et++)Et in $e&&L.call(X,$e[Et],Et,m)};function x(m){return Array.prototype.concat.apply([],arguments)}function C(m){var L=m.length;if(0<L){for(var X=Array(L),_e=0;_e<L;_e++)X[_e]=m[_e];return X}return[]}function B(m){return/^[\s\xa0]*$/.test(m)}var ue,K=String.prototype.trim?function(m){return m.trim()}:function(m){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(m)[1]};function k(m,L){return-1!=m.indexOf(L)}function ae(m,L){return m<L?-1:m>L?1:0}e:{var Gt=tt.navigator;if(Gt){var ve=Gt.userAgent;if(ve){ue=ve;break e}}ue=""}function ot(m,L,X){for(var _e in m)L.call(X,m[_e],_e,m)}function Vt(m){var L={};for(var X in m)L[X]=m[X];return L}var Ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(m,L){for(var X,_e,$e=1;$e<arguments.length;$e++){for(X in _e=arguments[$e])m[X]=_e[X];for(var Et=0;Et<Ze.length;Et++)X=Ze[Et],Object.prototype.hasOwnProperty.call(_e,X)&&(m[X]=_e[X])}}function vt(m){return vt[" "](m),m}vt[" "]=ft;var Ht,m,Ct=k(ue,"Opera"),_t=k(ue,"Trident")||k(ue,"MSIE"),xt=k(ue,"Edge"),an=xt||_t,qe=k(ue,"Gecko")&&!(k(ue.toLowerCase(),"webkit")&&!k(ue,"Edge"))&&!(k(ue,"Trident")||k(ue,"MSIE"))&&!k(ue,"Edge"),pt=k(ue.toLowerCase(),"webkit")&&!k(ue,"Edge");function Kt(){var m=tt.document;return m?m.documentMode:void 0}e:{var Wt="",on=(m=ue,qe?/rv:([^\);]+)(\)|;)/.exec(m):xt?/Edge\/([\d\.]+)/.exec(m):_t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(m):pt?/WebKit\/(\S+)/.exec(m):Ct?/(?:Version)[ \/]?(\S+)/.exec(m):void 0);if(on&&(Wt=on?on[1]:""),_t){var An=Kt();if(null!=An&&An>parseFloat(Wt)){Ht=String(An);break e}}Ht=Wt}var sn={};function Vn(m){return function(m,L){var X=sn;return Object.prototype.hasOwnProperty.call(X,m)?X[m]:X[m]=L()}(m,function(){for(var L=0,X=K(String(Ht)).split("."),_e=K(String(m)).split("."),$e=Math.max(X.length,_e.length),Et=0;0==L&&Et<$e;Et++){var fn=X[Et]||"",xr=_e[Et]||"";do{if(fn=/(\d*)(\D*)(.*)/.exec(fn)||["","","",""],xr=/(\d*)(\D*)(.*)/.exec(xr)||["","","",""],0==fn[0].length&&0==xr[0].length)break;L=ae(0==fn[1].length?0:parseInt(fn[1],10),0==xr[1].length?0:parseInt(xr[1],10))||ae(0==fn[2].length,0==xr[2].length)||ae(fn[2],xr[2]),fn=fn[3],xr=xr[3]}while(0==L)}return 0<=L})}var ur=tt.document&&_t&&(Kt()||parseInt(Ht,10))||void 0,Rr=!_t||9<=Number(ur),Vr=_t&&!Vn("9"),yr=function(){if(!tt.addEventListener||!Object.defineProperty)return!1;var m=!1,L=Object.defineProperty({},"passive",{get:function(){m=!0}});try{tt.addEventListener("test",ft,L),tt.removeEventListener("test",ft,L)}catch(X){}return m}();function Jn(m,L){this.type=m,this.a=this.target=L,this.defaultPrevented=!1}function Hn(m,L){if(Jn.call(this,m?m.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,m){var X=this.type=m.type,_e=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.a=L,L=m.relatedTarget){if(qe){e:{try{vt(L.nodeName);var $e=!0;break e}catch(Et){}$e=!1}$e||(L=null)}}else"mouseover"==X?L=m.fromElement:"mouseout"==X&&(L=m.toElement);this.relatedTarget=L,_e?(this.clientX=void 0!==_e.clientX?_e.clientX:_e.pageX,this.clientY=void 0!==_e.clientY?_e.clientY:_e.pageY,this.screenX=_e.screenX||0,this.screenY=_e.screenY||0):(this.clientX=void 0!==m.clientX?m.clientX:m.pageX,this.clientY=void 0!==m.clientY?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType="string"==typeof m.pointerType?m.pointerType:Rn[m.pointerType]||"",this.c=m,m.defaultPrevented&&this.b()}}Jn.prototype.b=function(){this.defaultPrevented=!0},rt(Hn,Jn);var Rn={2:"touch",3:"pen",4:"mouse"};Hn.prototype.b=function(){Hn.S.b.call(this);var m=this.c;if(m.preventDefault)m.preventDefault();else if(m.returnValue=!1,Vr)try{(m.ctrlKey||112<=m.keyCode&&123>=m.keyCode)&&(m.keyCode=-1)}catch(L){}};var nt="closure_listenable_"+(1e6*Math.random()|0),ye=0;function Ve(m,L,X,_e,$e){this.listener=m,this.proxy=null,this.src=L,this.type=X,this.capture=!!_e,this.ca=$e,this.key=++ye,this.Y=this.Z=!1}function wt(m){m.Y=!0,m.listener=null,m.proxy=null,m.src=null,m.ca=null}function ct(m){this.src=m,this.a={},this.b=0}function nn(m,L){var X=L.type;if(X in m.a){var Et,_e=m.a[X],$e=at(_e,L);(Et=0<=$e)&&Array.prototype.splice.call(_e,$e,1),Et&&(wt(L),0==m.a[X].length&&(delete m.a[X],m.b--))}}function tn(m,L,X,_e){for(var $e=0;$e<m.length;++$e){var Et=m[$e];if(!Et.Y&&Et.listener==L&&Et.capture==!!X&&Et.ca==_e)return $e}return-1}ct.prototype.add=function(m,L,X,_e,$e){var Et=m.toString();(m=this.a[Et])||(m=this.a[Et]=[],this.b++);var fn=tn(m,L,_e,$e);return-1<fn?(L=m[fn],X||(L.Z=!1)):((L=new Ve(L,this.src,Et,!!_e,$e)).Z=X,m.push(L)),L};var En="closure_lm_"+(1e6*Math.random()|0),Cn={};function pn(m,L,X,_e,$e){if(_e&&_e.once)return Ir(m,L,X,_e,$e);if(Array.isArray(L)){for(var Et=0;Et<L.length;Et++)pn(m,L[Et],X,_e,$e);return null}return X=bi(X),m&&m[nt]?m.va(L,X,Ie(_e)?!!_e.capture:!!_e,$e):_r(m,L,X,!1,_e,$e)}function _r(m,L,X,_e,$e,Et){if(!L)throw Error("Invalid event type");var fn=Ie($e)?!!$e.capture:!!$e;if(fn&&!Rr)return null;var xr=Qn(m);if(xr||(m[En]=xr=new ct(m)),(X=xr.add(L,X,_e,fn,Et)).proxy)return X;if(_e=function(){var m=_i,L=Rr?function(X){return m.call(L.src,L.listener,X)}:function(X){if(!(X=m.call(L.src,L.listener,X)))return X};return L}(),X.proxy=_e,_e.src=m,_e.listener=X,m.addEventListener)yr||($e=fn),void 0===$e&&($e=!1),m.addEventListener(L.toString(),_e,$e);else if(m.attachEvent)m.attachEvent(ar(L.toString()),_e);else{if(!m.addListener||!m.removeListener)throw Error("addEventListener and attachEvent are unavailable.");m.addListener(_e)}return X}function Ir(m,L,X,_e,$e){if(Array.isArray(L)){for(var Et=0;Et<L.length;Et++)Ir(m,L[Et],X,_e,$e);return null}return X=bi(X),m&&m[nt]?m.wa(L,X,Ie(_e)?!!_e.capture:!!_e,$e):_r(m,L,X,!0,_e,$e)}function Yn(m,L,X,_e,$e){if(Array.isArray(L))for(var Et=0;Et<L.length;Et++)Yn(m,L[Et],X,_e,$e);else _e=Ie(_e)?!!_e.capture:!!_e,X=bi(X),m&&m[nt]?(m=m.c,(L=String(L).toString())in m.a&&-1<(X=tn(Et=m.a[L],X,_e,$e))&&(wt(Et[X]),Array.prototype.splice.call(Et,X,1),0==Et.length&&(delete m.a[L],m.b--))):m&&(m=Qn(m))&&(L=m.a[L.toString()],m=-1,L&&(m=tn(L,X,_e,$e)),(X=-1<m?L[m]:null)&&ir(X))}function ir(m){if("number"!=typeof m&&m&&!m.Y){var L=m.src;if(L&&L[nt])nn(L.c,m);else{var X=m.type,_e=m.proxy;L.removeEventListener?L.removeEventListener(X,_e,m.capture):L.detachEvent?L.detachEvent(ar(X),_e):L.addListener&&L.removeListener&&L.removeListener(_e),(X=Qn(L))?(nn(X,m),0==X.b&&(X.src=null,L[En]=null)):wt(m)}}}function ar(m){return m in Cn?Cn[m]:Cn[m]="on"+m}function Nr(m,L){var X=m.listener,_e=m.ca||m.src;return m.Z&&ir(m),X.call(_e,L)}function _i(m,L){if(m.Y)return!0;if(!Rr){if(!L)e:{L=["window","event"];for(var X=tt,_e=0;_e<L.length;_e++)if(null==(X=X[L[_e]])){L=null;break e}L=X}return Nr(m,L=new Hn(L,this))}return Nr(m,new Hn(L,this))}function Qn(m){return(m=m[En])instanceof ct?m:null}var ei="__closure_events_fn_"+(1e9*Math.random()>>>0);function bi(m){return"function"==oe(m)?m:(m[ei]||(m[ei]=function(L){return m.handleEvent(L)}),m[ei])}function Re(){Ut.call(this),this.c=new ct(this),this.J=this,this.C=null}function ht(m,L,X,_e){if(!(L=m.c.a[String(L)]))return!0;L=L.concat();for(var $e=!0,Et=0;Et<L.length;++Et){var fn=L[Et];if(fn&&!fn.Y&&fn.capture==X){var xr=fn.listener,Ar=fn.ca||fn.src;fn.Z&&nn(m.c,fn),$e=!1!==xr.call(Ar,_e)&&$e}}return $e&&!_e.defaultPrevented}rt(Re,Ut),Re.prototype[nt]=!0,(Le=Re.prototype).addEventListener=function(m,L,X,_e){pn(this,m,L,X,_e)},Le.removeEventListener=function(m,L,X,_e){Yn(this,m,L,X,_e)},Le.dispatchEvent=function(m){var L,X=this.C;if(X)for(L=[];X;X=X.C)L.push(X);X=this.J;var _e=m.type||m;if("string"==typeof m)m=new Jn(m,X);else if(m instanceof Jn)m.target=m.target||X;else{var $e=m;et(m=new Jn(_e,X),$e)}if($e=!0,L)for(var Et=L.length-1;0<=Et;Et--){var fn=m.a=L[Et];$e=ht(fn,_e,!0,m)&&$e}if($e=ht(fn=m.a=X,_e,!0,m)&&$e,$e=ht(fn,_e,!1,m)&&$e,L)for(Et=0;Et<L.length;Et++)$e=ht(fn=m.a=L[Et],_e,!1,m)&&$e;return $e},Le.G=function(){if(Re.S.G.call(this),this.c){var L,m=this.c;for(L in m.a){for(var X=m.a[L],_e=0;_e<X.length;_e++)wt(X[_e]);delete m.a[L],m.b--}}this.C=null},Le.va=function(m,L,X,_e){return this.c.add(String(m),L,!1,X,_e)},Le.wa=function(m,L,X,_e){return this.c.add(String(m),L,!0,X,_e)};var bt=tt.JSON.stringify;function Mt(){this.b=this.a=null}var Qt,Tt=new(function(){function m(L,X,_e){this.f=_e,this.c=L,this.g=X,this.b=0,this.a=null}return m.prototype.get=function(){var L;return 0<this.b?(this.b--,this.a=(L=this.a).next,L.next=null):L=this.c(),L},m}())(function(){return new rn},function(m){m.reset()},100);function Lt(){var m=nr,L=null;return m.a&&(L=m.a,m.a=m.a.next,m.a||(m.b=null),L.next=null),L}function rn(){this.next=this.b=this.a=null}function mn(m){tt.setTimeout(function(){throw m},0)}function Mn(m,L){Qt||function(){var m=tt.Promise.resolve(void 0);Qt=function(){m.then(or)}}(),fr||(Qt(),fr=!0),nr.add(m,L)}Mt.prototype.add=function(m,L){var X=Tt.get();X.set(m,L),this.b?this.b.next=X:this.a=X,this.b=X},rn.prototype.set=function(m,L){this.a=m,this.b=L,this.next=null},rn.prototype.reset=function(){this.next=this.b=this.a=null};var fr=!1,nr=new Mt;function or(){for(var m;m=Lt();){try{m.a.call(m.b)}catch(X){mn(X)}var L=Tt;L.g(m),L.b<L.f&&(L.b++,m.next=L.a,L.a=m)}fr=!1}function ai(m,L){Re.call(this),this.b=m||1,this.a=L||tt,this.f=Pe(this.Ya,this),this.g=ze()}function Oe(m){m.aa=!1,m.M&&(m.a.clearTimeout(m.M),m.M=null)}function Ce(m,L,X){if("function"==oe(m))X&&(m=Pe(m,X));else{if(!m||"function"!=typeof m.handleEvent)throw Error("Invalid listener argument");m=Pe(m.handleEvent,m)}return 2147483647<Number(L)?-1:tt.setTimeout(m,L||0)}function Ue(m){m.a=Ce(function(){m.a=null,m.c&&(m.c=!1,Ue(m))},m.h);var L=m.b;m.b=null,m.g.apply(null,L)}rt(ai,Re),(Le=ai.prototype).aa=!1,Le.M=null,Le.Ya=function(){if(this.aa){var m=ze()-this.g;0<m&&m<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-m):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Oe(this),this.start()))}},Le.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ze())},Le.G=function(){ai.S.G.call(this),Oe(this),delete this.a};var Je=function(m){function L(X,_e,$e){var Et=m.call(this)||this;return Et.g=null!=$e?X.bind($e):X,Et.h=_e,Et.b=null,Et.c=!1,Et.a=null,Et}return function(m,L){function X(){this.constructor=m}M(m,L),m.prototype=null===L?Object.create(L):(X.prototype=L.prototype,new X)}(L,m),L.prototype.f=function(X){this.b=arguments,this.a?this.c=!0:Ue(this)},L.prototype.G=function(){m.prototype.G.call(this),this.a&&(tt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},L}(Ut);function le(m){Ut.call(this),this.b=m,this.a={}}rt(le,Ut);var V=[];function ie(m,L,X,_e){Array.isArray(X)||(X&&(V[0]=X.toString()),X=V);for(var $e=0;$e<X.length;$e++){var Et=pn(L,X[$e],_e||m.handleEvent,!1,m.b||m);if(!Et)break;m.a[Et.key]=Et}}function se(m){ot(m.a,function(L,X){this.a.hasOwnProperty(X)&&ir(L)},m),m.a={}}function Ne(){this.a=!0}function St(m,L,X,_e){m.info(function(){return"XMLHTTP TEXT ("+L+"): "+function(m,L){if(!m.a)return L;if(!L)return null;try{var X=JSON.parse(L);if(X)for(m=0;m<X.length;m++)if(Array.isArray(X[m])){var _e=X[m];if(!(2>_e.length)){var $e=_e[1];if(Array.isArray($e)&&!(1>$e.length)){var Et=$e[0];if("noop"!=Et&&"stop"!=Et&&"close"!=Et)for(var fn=1;fn<$e.length;fn++)$e[fn]=""}}}return bt(X)}catch(xr){return L}}(m,X)+(_e?" "+_e:"")})}le.prototype.G=function(){le.S.G.call(this),se(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ne.prototype.info=function(){};var cn=null;function gn(){return cn=cn||new Re}function hr(m){Jn.call(this,"serverreachability",m)}function vn(m){var L=gn();L.dispatchEvent(new hr(L,m))}function wi(m){Jn.call(this,"statevent",m)}function qn(m){var L=gn();L.dispatchEvent(new wi(L,m))}function ko(m){Jn.call(this,"timingevent",m)}function ri(m,L){if("function"!=oe(m))throw Error("Fn must not be null and must be a function");return tt.setTimeout(function(){m()},L)}rt(hr,Jn),rt(wi,Jn),rt(ko,Jn);var pi={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},Pi={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function uo(){}function Fr(){}uo.prototype.a=null;var yo,mo={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Go(){Jn.call(this,"d")}function Mi(){Jn.call(this,"c")}function Zi(){}function Ki(m,L,X,_e){this.g=m,this.c=L,this.f=X,this.T=_e||1,this.J=new le(this),this.P=ii,this.R=new ai(m=an?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}rt(Go,Jn),rt(Mi,Jn),rt(Zi,uo),yo=new Zi;var ii=45e3,Pr={},ui={};function Zn(m,L,X){m.H=1,m.i=qo(Yi(L)),m.j=X,m.I=!0,Un(m,null)}function Un(m,L){m.u=ze(),Cr(m),m.l=Yi(m.i);var X=m.l,_e=m.T;Array.isArray(_e)||(_e=[String(_e)]),q(X.b,"t",_e),m.D=0,m.a=zo(m.g,m.g.C?L:null),0<m.O&&(m.F=new Je(Pe(m.Ca,m,m.a),m.O)),ie(m.J,m.a,"readystatechange",m.Wa),L=m.B?Vt(m.B):{},m.j?(m.m||(m.m="POST"),L["Content-Type"]="application/x-www-form-urlencoded",m.a.ba(m.l,m.m,m.j,L)):(m.m="GET",m.a.ba(m.l,m.m,null,L)),vn(1),function(m,L,X,_e,$e,Et){m.info(function(){if(m.a)if(Et)for(var fn="",xr=Et.split("&"),Ar=0;Ar<xr.length;Ar++){var Ri=xr[Ar].split("=");if(1<Ri.length){var fo=Ri[0];Ri=Ri[1];var Eo=fo.split("_");fn=2<=Eo.length&&"type"==Eo[1]?fn+(fo+"=")+Ri+"&":fn+(fo+"=redacted&")}}else fn=null;else fn=Et;return"XMLHTTP REQ ("+_e+") [attempt "+$e+"]: "+L+"\n"+X+"\n"+fn})}(m.c,m.m,m.l,m.f,m.T,m.j)}function Si(m,L,X){for(var _e=!0;!m.A&&m.D<X.length;){var $e=Qi(m,X);if($e==ui){4==L&&(m.h=4,qn(14),_e=!1),St(m.c,m.f,null,"[Incomplete Response]");break}if($e==Pr){m.h=4,qn(15),St(m.c,m.f,X,"[Invalid Chunk]"),_e=!1;break}St(m.c,m.f,$e,null),Xn(m,$e)}4==L&&0==X.length&&(m.h=1,qn(16),_e=!1),m.b=m.b&&_e,_e?0<X.length&&!m.W&&(m.W=!0,(L=m.g).a==m&&L.V&&!L.F&&(L.c.info("Great, no buffering proxy detected. Bytes received: "+X.length),pa(L),L.F=!0)):(St(m.c,m.f,X,"[Invalid Chunked Response]"),Ln(m),Ji(m))}function Qi(m,L){var X=m.D,_e=L.indexOf("\n",X);return-1==_e?ui:(X=Number(L.substring(X,_e)),isNaN(X)?Pr:(_e+=1)+X>L.length?ui:(L=L.substr(_e,X),m.D=_e+X,L))}function Cr(m){m.U=ze()+m.P,gi(m,m.P)}function gi(m,L){if(null!=m.o)throw Error("WatchDog timer not null");m.o=ri(Pe(m.Ua,m),L)}function Wo(m){m.o&&(tt.clearTimeout(m.o),m.o=null)}function Ji(m){0==m.g.v||m.A||Ai(m.g,m)}function Ln(m){Wo(m);var L=m.F;L&&"function"==typeof L.ja&&L.ja(),m.F=null,Oe(m.R),se(m.J),m.a&&(L=m.a,m.a=null,L.abort(),L.ja())}function Xn(m,L){try{var X=m.g;if(0!=X.v&&(X.a==m||yn(X.b,m)))if(X.I=m.N,!m.C&&yn(X.b,m)&&3==X.v){try{var _e=X.ka.a.parse(L)}catch(ps){_e=null}if(Array.isArray(_e)&&3==_e.length){var $e=_e;if(0==$e[0])e:if(X.j)X.oa=$e[1],0<X.oa-X.P&&37500>$e[2]&&X.H&&0==X.o&&!X.m&&(X.m=ri(Pe(X.Ra,X),6e3));else{if(X.a){if(!(X.a.u+3e3<m.u))break e;$o(X),Zt(X)}es(X),qn(18)}if(1>=bn(X.b)&&X.ea){try{X.ea()}catch(ps){}X.ea=void 0}}else bo(X,11)}else if((m.C||X.a==m)&&$o(X),!B(L))for(L=_e=X.ka.a.parse(L),_e=0;_e<L.length;_e++)if(X.P=($e=L[_e])[0],$e=$e[1],2==X.v)if("c"==$e[0]){X.J=$e[1],X.ga=$e[2];var Et=$e[3];null!=Et&&(X.ha=Et,X.c.info("VER="+X.ha));var fn=$e[4];null!=fn&&(X.pa=fn,X.c.info("SVER="+X.pa));var xr=$e[5];if(null!=xr&&"number"==typeof xr&&0<xr){var Ar=1.5*xr;X.D=Ar,X.c.info("backChannelRequestTimeoutMs_="+Ar)}Ar=X;var Ri=m.a;if(Ri){var fo=Ri.a?Ri.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var Eo=Ar.b;!Eo.a&&(k(fo,"spdy")||k(fo,"quic")||k(fo,"h2"))&&(Eo.f=Eo.g,Eo.a=new Set,Eo.b&&(wr(Eo,Eo.b),Eo.b=null))}if(Ar.A){var Ts=Ri.a?Ri.a.getResponseHeader("X-HTTP-Session-Id"):null;Ts&&(Ar.na=Ts,$r(Ar.B,Ar.A,Ts))}}X.v=3,X.f&&X.f.ta(),X.V&&(X.N=ze()-m.u,X.c.info("Handshake RTT: "+X.N+"ms"));var Oo=m;if((Ar=X).la=Fi(Ar,Ar.C?Ar.ga:null,Ar.fa),Oo.C){lr(Ar.b,Oo);var Zr=Oo,mi=Ar.D;mi&&Zr.setTimeout(mi),Zr.o&&(Wo(Zr),Cr(Zr)),Ar.a=Oo}else ds(Ar);0<X.g.length&&Lr(X)}else"stop"!=$e[0]&&"close"!=$e[0]||bo(X,7);else 3==X.v&&("stop"==$e[0]||"close"==$e[0]?"stop"==$e[0]?bo(X,7):xa(X):"noop"!=$e[0]&&X.f&&X.f.sa($e),X.o=0);vn(4)}catch(ps){}}function Gi(m,L){if(m.forEach&&"function"==typeof m.forEach)m.forEach(L,void 0);else if(z(m)||"string"==typeof m)Ot(m,L,void 0);else{if(m.L&&"function"==typeof m.L)var X=m.L();else if(m.K&&"function"==typeof m.K)X=void 0;else if(z(m)||"string"==typeof m){X=[];for(var _e=m.length,$e=0;$e<_e;$e++)X.push($e)}else for($e in X=[],_e=0,m)X[_e++]=$e;$e=(_e=function(m){if(m.K&&"function"==typeof m.K)return m.K();if("string"==typeof m)return m.split("");if(z(m)){for(var L=[],X=m.length,_e=0;_e<X;_e++)L.push(m[_e]);return L}for(_e in L=[],X=0,m)L[X++]=m[_e];return L}(m)).length;for(var Et=0;Et<$e;Et++)L.call(void 0,_e[Et],X&&X[Et],m)}}function Do(m,L){this.b={},this.a=[],this.c=0;var X=arguments.length;if(1<X){if(X%2)throw Error("Uneven number of arguments");for(var _e=0;_e<X;_e+=2)this.set(arguments[_e],arguments[_e+1])}else if(m)if(m instanceof Do)for(X=m.L(),_e=0;_e<X.length;_e++)this.set(X[_e],m.get(X[_e]));else for(_e in m)this.set(_e,m[_e])}function eo(m){if(m.c!=m.a.length){for(var L=0,X=0;L<m.a.length;){var _e=m.a[L];oi(m.b,_e)&&(m.a[X++]=_e),L++}m.a.length=X}if(m.c!=m.a.length){var $e={};for(X=L=0;L<m.a.length;)oi($e,_e=m.a[L])||(m.a[X++]=_e,$e[_e]=1),L++;m.a.length=X}}function oi(m,L){return Object.prototype.hasOwnProperty.call(m,L)}(Le=Ki.prototype).setTimeout=function(m){this.P=m},Le.Wa=function(m){m=m.target;var L=this.F;L&&3==Jo(m)?L.f():this.Ca(m)},Le.Ca=function(m){try{if(m==this.a)e:{var L=Jo(this.a),X=this.a.ua(),_e=this.a.X();if(!(3>L||3==L&&!an&&!this.a.$())){this.A||4!=L||7==X||vn(8==X||0>=_e?3:2),Wo(this);var $e=this.a.X();this.N=$e;var Et=this.a.$();if(this.b=200==$e,function(m,L,X,_e,$e,Et,fn){m.info(function(){return"XMLHTTP RESP ("+_e+") [ attempt "+$e+"]: "+L+"\n"+X+"\n"+Et+" "+fn})}(this.c,this.m,this.l,this.f,this.T,L,$e),this.b){if(this.V&&!this.C){t:{if(this.a){var fn,xr=this.a;if((fn=xr.a?xr.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(fn)){var Ar=fn;break t}}Ar=null}if(!Ar){this.b=!1,this.h=3,qn(12),Ln(this),Ji(this);break e}St(this.c,this.f,Ar,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Xn(this,Ar)}this.I?(Si(this,L,Et),an&&this.b&&3==L&&(ie(this.J,this.R,"tick",this.Va),this.R.start())):(St(this.c,this.f,Et,null),Xn(this,Et)),4==L&&Ln(this),this.b&&!this.A&&(4==L?Ai(this.g,this):(this.b=!1,Cr(this)))}else 400==$e&&0<Et.indexOf("Unknown SID")?(this.h=3,qn(12)):(this.h=0,qn(13)),Ln(this),Ji(this)}}}catch(Ri){}},Le.Va=function(){if(this.a){var m=Jo(this.a),L=this.a.$();this.D<L.length&&(Wo(this),Si(this,m,L),this.b&&4!=m&&Cr(this))}},Le.cancel=function(){this.A=!0,Ln(this)},Le.Ua=function(){this.o=null;var m=ze();0<=m-this.U?(function(m,L){m.info(function(){return"TIMEOUT: "+L})}(this.c,this.l),2!=this.H&&(vn(3),qn(17)),Ln(this),this.h=2,Ji(this)):gi(this,this.U-m)},(Le=Do.prototype).K=function(){eo(this);for(var m=[],L=0;L<this.a.length;L++)m.push(this.b[this.a[L]]);return m},Le.L=function(){return eo(this),this.a.concat()},Le.get=function(m,L){return oi(this.b,m)?this.b[m]:L},Le.set=function(m,L){oi(this.b,m)||(this.c++,this.a.push(m)),this.b[m]=L},Le.forEach=function(m,L){for(var X=this.L(),_e=0;_e<X.length;_e++){var $e=X[_e],Et=this.get($e);m.call(L,Et,$e,this)}};var rr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function to(m,L){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,m instanceof to){this.a=void 0!==L?L:m.a,Fo(this,m.f),this.j=m.j,Lo(this,m.c),fs(this,m.h),this.g=m.g,L=m.b;var X=new qt;X.c=L.c,L.a&&(X.a=new Do(L.a),X.b=L.b),Ys(this,X),this.i=m.i}else m&&(X=String(m).match(rr))?(this.a=!!L,Fo(this,X[1]||"",!0),this.j=Xi(X[2]||""),Lo(this,X[3]||"",!0),fs(this,X[4]),this.g=Xi(X[5]||"",!0),Ys(this,X[6]||"",!0),this.i=Xi(X[7]||"")):(this.a=!!L,this.b=new qt(null,this.a))}function Yi(m){return new to(m)}function Fo(m,L,X){m.f=X?Xi(L,!0):L,m.f&&(m.f=m.f.replace(/:$/,""))}function Lo(m,L,X){m.c=X?Xi(L,!0):L}function fs(m,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);m.h=L}else m.h=null}function Ys(m,L,X){L instanceof qt?(m.b=L,function(m,L){L&&!m.f&&($t(m),m.c=null,m.a.forEach(function(X,_e){var $e=_e.toLowerCase();_e!=$e&&(ln(this,_e),q(this,$e,X))},m)),m.f=L}(m.b,m.a)):(X||(L=Q(L,it)),m.b=new qt(L,m.a))}function $r(m,L,X){m.b.set(L,X)}function qo(m){return $r(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ze()).toString(36)),m}function Xi(m,L){return m?L?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Q(m,L,X){return"string"==typeof m?(m=encodeURI(m).replace(L,G),X&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function G(m){return"%"+((m=m.charCodeAt(0))>>4&15).toString(16)+(15&m).toString(16)}to.prototype.toString=function(){var m=[],L=this.f;L&&m.push(Q(L,he,!0),":");var X=this.c;return(X||"file"==L)&&(m.push("//"),(L=this.j)&&m.push(Q(L,he,!0),"@"),m.push(encodeURIComponent(String(X)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(X=this.h)&&m.push(":",String(X))),(X=this.g)&&(this.c&&"/"!=X.charAt(0)&&m.push("/"),m.push(Q(X,"/"==X.charAt(0)?He:Ae,!0))),(X=this.b.toString())&&m.push("?",X),(X=this.i)&&m.push("#",Q(X,Pt)),m.join("")};var he=/[#\/\?@]/g,Ae=/[#\?:]/g,He=/[#\?]/g,it=/[#\?@]/g,Pt=/#/g;function qt(m,L){this.b=this.a=null,this.c=m||null,this.f=!!L}function $t(m){m.a||(m.a=new Do,m.b=0,m.c&&function(m,L){if(m){m=m.split("&");for(var X=0;X<m.length;X++){var _e=m[X].indexOf("="),$e=null;if(0<=_e){var Et=m[X].substring(0,_e);$e=m[X].substring(_e+1)}else Et=m[X];L(Et,$e?decodeURIComponent($e.replace(/\+/g," ")):"")}}}(m.c,function(L,X){m.add(decodeURIComponent(L.replace(/\+/g," ")),X)}))}function ln(m,L){$t(m),L=te(m,L),oi(m.a.b,L)&&(m.c=null,m.b-=m.a.get(L).length,oi((m=m.a).b,L)&&(delete m.b[L],m.c--,m.a.length>2*m.c&&eo(m)))}function wn(m,L){return $t(m),L=te(m,L),oi(m.a.b,L)}function q(m,L,X){ln(m,L),0<X.length&&(m.c=null,m.a.set(te(m,L),C(X)),m.b+=X.length)}function te(m,L){return L=String(L),m.f&&(L=L.toLowerCase()),L}function fe(m,L){this.b=m,this.a=L}function je(m){this.g=m||Dt,m=tt.PerformanceNavigationTiming?0<(m=tt.performance.getEntriesByType("navigation")).length&&("hq"==m[0].nextHopProtocol||"h2"==m[0].nextHopProtocol):!!(tt.ia&&tt.ia.ya&&tt.ia.ya()&&tt.ia.ya().qb),this.f=m?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(Le=qt.prototype).add=function(m,L){$t(this),this.c=null,m=te(this,m);var X=this.a.get(m);return X||this.a.set(m,X=[]),X.push(L),this.b+=1,this},Le.forEach=function(m,L){$t(this),this.a.forEach(function(X,_e){Ot(X,function($e){m.call(L,$e,_e,this)},this)},this)},Le.L=function(){$t(this);for(var m=this.a.K(),L=this.a.L(),X=[],_e=0;_e<L.length;_e++)for(var $e=m[_e],Et=0;Et<$e.length;Et++)X.push(L[_e]);return X},Le.K=function(m){$t(this);var L=[];if("string"==typeof m)wn(this,m)&&(L=x(L,this.a.get(te(this,m))));else{m=this.a.K();for(var X=0;X<m.length;X++)L=x(L,m[X])}return L},Le.set=function(m,L){return $t(this),this.c=null,wn(this,m=te(this,m))&&(this.b-=this.a.get(m).length),this.a.set(m,[L]),this.b+=1,this},Le.get=function(m,L){return m&&0<(m=this.K(m)).length?String(m[0]):L},Le.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var m=[],L=this.a.L(),X=0;X<L.length;X++){var _e=L[X],$e=encodeURIComponent(String(_e));_e=this.K(_e);for(var Et=0;Et<_e.length;Et++){var fn=$e;""!==_e[Et]&&(fn+="="+encodeURIComponent(String(_e[Et]))),m.push(fn)}}return this.c=m.join("&")};var Dt=10;function Xt(m){return!!m.b||!!m.a&&m.a.size>=m.f}function bn(m){return m.b?1:m.a?m.a.size:0}function yn(m,L){return m.b?m.b==L:!!m.a&&m.a.has(L)}function wr(m,L){m.a?m.a.add(L):m.b=L}function lr(m,L){m.b&&m.b==L?m.b=null:m.a&&m.a.has(L)&&m.a.delete(L)}function cr(m){var L,X;if(null!=m.b)return m.c.concat(m.b.s);if(null!=m.a&&0!==m.a.size){var _e=m.c;try{for(var $e=J(m.a.values()),Et=$e.next();!Et.done;Et=$e.next())_e=_e.concat(Et.value.s)}catch(xr){L={error:xr}}finally{try{Et&&!Et.done&&(X=$e.return)&&X.call($e)}finally{if(L)throw L.error}}return _e}return C(m.c)}function Gn(){}function Sn(){this.a=new Gn}function Ei(m,L,X){var _e=X||"";try{Gi(m,function($e,Et){var fn=$e;Ie($e)&&(fn=bt($e)),L.push(_e+Et+"="+encodeURIComponent(fn))})}catch($e){throw L.push(_e+"type="+encodeURIComponent("_badmap")),$e}}function ti(m,L,X,_e,$e){try{L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null,$e(_e)}catch(Et){}}je.prototype.cancel=function(){var m,L;if(this.c=cr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var X=J(this.a.values()),_e=X.next();!_e.done;_e=X.next())_e.value.cancel()}catch(Et){m={error:Et}}finally{try{_e&&!_e.done&&(L=X.return)&&L.call(X)}finally{if(m)throw m.error}}this.a.clear()}},Gn.prototype.stringify=function(m){return tt.JSON.stringify(m,void 0)},Gn.prototype.parse=function(m){return tt.JSON.parse(m,void 0)};var hs=tt.JSON.parse;function Br(m){Re.call(this),this.headers=new Do,this.H=m||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=dr,this.D=this.F=!1}rt(Br,Re);var dr="",Or=/^https?$/i,zr=["POST","PUT"];function ha(m){return"content-type"==m.toLowerCase()}function Bi(m,L){m.b=!1,m.a&&(m.g=!0,m.a.abort(),m.g=!1),m.f=L,m.h=5,Ls(m),Bn(m)}function Ls(m){m.u||(m.u=!0,m.dispatchEvent("complete"),m.dispatchEvent("error"))}function Xr(m){if(m.b&&void 0!==st&&(!m.s[1]||4!=Jo(m)||2!=m.X()))if(m.l&&4==Jo(m))Ce(m.za,0,m);else if(m.dispatchEvent("readystatechange"),4==Jo(m)){m.b=!1;try{var _e,L=m.X();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var X=!0;break e;default:X=!1}if(!(_e=X)){var $e;if($e=0===L){var Et=String(m.B).match(rr)[1]||null;if(!Et&&tt.self&&tt.self.location){var fn=tt.self.location.protocol;Et=fn.substr(0,fn.length-1)}$e=!Or.test(Et?Et.toLowerCase():"")}_e=$e}if(_e)m.dispatchEvent("complete"),m.dispatchEvent("success");else{m.h=6;try{var xr=2<Jo(m)?m.a.statusText:""}catch(Ar){xr=""}m.f=xr+" ["+m.X()+"]",Ls(m)}}finally{Bn(m)}}}function Bn(m,L){if(m.a){Pa(m);var X=m.a,_e=m.s[0]?ft:null;m.a=null,m.s=null,L||m.dispatchEvent("ready");try{X.onreadystatechange=_e}catch($e){}}}function Pa(m){m.a&&m.D&&(m.a.ontimeout=null),m.m&&(tt.clearTimeout(m.m),m.m=null)}function Jo(m){return m.a?m.a.readyState:0}function Di(m,L,X){e:{for(_e in X){var _e=!1;break e}_e=!0}_e||(X=function(m){var L="";return ot(m,function(X,_e){L+=_e,L+=":",L+=X,L+="\r\n"}),L}(X),"string"==typeof m?null!=X&&encodeURIComponent(String(X)):$r(m,L,X))}function Ro(m,L,X){return X&&X.internalChannelParams&&X.internalChannelParams[m]||L}function da(m){this.pa=0,this.g=[],this.c=new Ne,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Ro("failFast",!1,m),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Ro("baseRetryDelayMs",5e3,m),this.Ma=Ro("retryDelaySeedMs",1e4,m),this.Ja=Ro("forwardChannelMaxRetries",2,m),this.ma=Ro("forwardChannelRequestTimeoutMs",2e4,m),this.Ka=m&&m.g||void 0,this.D=void 0,this.C=m&&m.supportsCrossDomainXhr||!1,this.J="",this.b=new je(m&&m.concurrentRequestLimit),this.ka=new Sn,this.da=m&&m.fastHandshake||!1,this.Ga=m&&m.b||!1,m&&m.f&&(this.c.a=!1),m&&m.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&m&&m.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function xa(m){if(br(m),3==m.v){var L=m.R++,X=Yi(m.B);$r(X,"SID",m.J),$r(X,"RID",L),$r(X,"TYPE","terminate"),vi(m,X),(L=new Ki(m,m.c,L,void 0)).H=2,L.i=qo(Yi(X)),X=!1,tt.navigator&&tt.navigator.sendBeacon&&(X=tt.navigator.sendBeacon(L.i.toString(),"")),!X&&tt.Image&&((new Image).src=L.i,X=!0),X||(L.a=zo(L.g,null),L.a.ba(L.i)),L.u=ze(),Cr(L)}lo(m)}function Zt(m){m.a&&(pa(m),m.a.cancel(),m.a=null)}function br(m){Zt(m),m.j&&(tt.clearTimeout(m.j),m.j=null),$o(m),m.b.cancel(),m.h&&("number"==typeof m.h&&tt.clearTimeout(m.h),m.h=null)}function _o(m,L){m.g.push(new fe(m.La++,L)),3==m.v&&Lr(m)}function Lr(m){Xt(m.b)||m.h||(m.h=!0,Mn(m.Ba,m),m.u=0)}function jr(m,L){var X;X=L?L.f:m.R++;var _e=Yi(m.B);$r(_e,"SID",m.J),$r(_e,"RID",X),$r(_e,"AID",m.P),vi(m,_e),m.i&&m.l&&Di(_e,m.i,m.l),X=new Ki(m,m.c,X,m.u+1),null===m.i&&(X.B=m.l),L&&(m.g=L.s.concat(m.g)),L=wo(m,X,1e3),X.setTimeout(Math.round(.5*m.ma)+Math.round(.5*m.ma*Math.random())),wr(m.b,X),Zn(X,_e,L)}function vi(m,L){m.f&&Gi({},function(X,_e){$r(L,_e,X)})}function wo(m,L,X){X=Math.min(m.g.length,X);var _e=m.f?Pe(m.f.Ha,m.f,m):null;e:for(var $e=m.g,Et=-1;;){var fn=["count="+X];-1==Et?0<X?fn.push("ofs="+(Et=$e[0].b)):Et=0:fn.push("ofs="+Et);for(var xr=!0,Ar=0;Ar<X;Ar++){var Ri=$e[Ar].b,fo=$e[Ar].a;if(0>(Ri-=Et))Et=Math.max(0,$e[Ar].b-100),xr=!1;else try{Ei(fo,fn,"req"+Ri+"_")}catch(Eo){_e&&_e(fo)}}if(xr){_e=fn.join("&");break e}}return m=m.g.splice(0,X),L.s=m,_e}function ds(m){m.a||m.j||(m.U=1,Mn(m.Aa,m),m.o=0)}function es(m){return!(m.a||m.j||3<=m.o||(m.U++,m.j=ri(Pe(m.Aa,m),ki(m,m.o)),m.o++,0))}function pa(m){null!=m.s&&(tt.clearTimeout(m.s),m.s=null)}function Xs(m){m.a=new Ki(m,m.c,"rpc",m.U),null===m.i&&(m.a.B=m.l),m.a.O=0;var L=Yi(m.la);$r(L,"RID","rpc"),$r(L,"SID",m.J),$r(L,"CI",m.H?"0":"1"),$r(L,"AID",m.P),vi(m,L),$r(L,"TYPE","xmlhttp"),m.i&&m.l&&Di(L,m.i,m.l),m.D&&m.a.setTimeout(m.D);var X=m.a;m=m.ga,X.H=1,X.i=qo(Yi(L)),X.j=null,X.I=!0,Un(X,m)}function $o(m){null!=m.m&&(tt.clearTimeout(m.m),m.m=null)}function Ai(m,L){var X=null;if(m.a==L){$o(m),pa(m),m.a=null;var _e=2}else{if(!yn(m.b,L))return;X=L.s,lr(m.b,L),_e=1}if(m.I=L.N,0!=m.v)if(L.b)if(1==_e){X=L.j?L.j.length:0,L=ze()-L.u;var $e=m.u;(_e=gn()).dispatchEvent(new ko(_e,X,L,$e)),Lr(m)}else ds(m);else if(3==($e=L.h)||0==$e&&0<m.I||!(1==_e&&function(m,L){return!(bn(m.b)>=m.b.f-(m.h?1:0)||(m.h?(m.g=L.s.concat(m.g),0):1==m.v||2==m.v||m.u>=(m.Ia?0:m.Ja)||(m.h=ri(Pe(m.Ba,m,L),ki(m,m.u)),m.u++,0)))}(m,L)||2==_e&&es(m)))switch(X&&0<X.length&&(L=m.b,L.c=L.c.concat(X)),$e){case 1:bo(m,5);break;case 4:bo(m,10);break;case 3:bo(m,6);break;default:bo(m,2)}}function ki(m,L){var X=m.Fa+Math.floor(Math.random()*m.Ma);return m.f||(X*=2),X*L}function bo(m,L){if(m.c.info("Error code "+L),2==L){var X=null;m.f&&(X=null);var _e=Pe(m.Xa,m);X||(X=new to("//www.google.com/images/cleardot.gif"),tt.location&&"http"==tt.location.protocol||Fo(X,"https"),qo(X)),function(m,L){var X=new Ne;if(tt.Image){var _e=new Image;_e.onload=ut(ti,X,_e,"TestLoadImage: loaded",!0,L),_e.onerror=ut(ti,X,_e,"TestLoadImage: error",!1,L),_e.onabort=ut(ti,X,_e,"TestLoadImage: abort",!1,L),_e.ontimeout=ut(ti,X,_e,"TestLoadImage: timeout",!1,L),tt.setTimeout(function(){_e.ontimeout&&_e.ontimeout()},1e4),_e.src=m}else L(!1)}(X.toString(),_e)}else qn(2);m.v=0,m.f&&m.f.ra(L),lo(m),br(m)}function lo(m){m.v=0,m.I=-1,m.f&&((0!=cr(m.b).length||0!=m.g.length)&&(m.b.c.length=0,C(m.g),m.g.length=0),m.f.qa())}function Fi(m,L,X){var _e=function(m){return m instanceof to?Yi(m):new to(m,void 0)}(X);if(""!=_e.c)L&&Lo(_e,L+"."+_e.c),fs(_e,_e.h);else{var $e=tt.location;_e=function(m,L,X,_e){var $e=new to(null,void 0);return m&&Fo($e,m),L&&Lo($e,L),X&&fs($e,X),_e&&($e.g=_e),$e}($e.protocol,L?L+"."+$e.hostname:$e.hostname,+$e.port,X)}return m.W&&ot(m.W,function(Et,fn){$r(_e,fn,Et)}),X=m.na,(L=m.A)&&X&&$r(_e,L,X),$r(_e,"VER",m.ha),vi(m,_e),_e}function zo(m,L){if(L&&!m.C)throw Error("Can't create secondary domain capable XhrIo object.");return(L=new Br(m.Ka)).F=m.C,L}function No(){}function Us(){if(_t&&!(10<=Number(ur)))throw Error("Environmental error: no available transport.")}function Kr(m,L){Re.call(this),this.a=new da(L),this.l=m,this.b=L&&L.messageUrlParams||null,m=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.a.l=m,m=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(m?m["X-WebChannel-Content-Type"]=L.messageContentType:m={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.a&&(m?m["X-WebChannel-Client-Profile"]=L.a:m={"X-WebChannel-Client-Profile":L.a}),this.a.O=m,(m=L&&L.httpHeadersOverwriteParam)&&!B(m)&&(this.a.i=m),this.h=L&&L.supportsCrossDomainXhr||!1,this.g=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!B(L)&&(this.a.A=L,null!==(m=this.b)&&L in m&&L in(m=this.b)&&delete m[L]),this.f=new Hr(this)}function js(m){Go.call(this);var L=m.__sm__;if(L){e:{for(var X in L){m=X;break e}m=void 0}(this.c=m)?(m=this.c,this.data=null!==L&&m in L?L[m]:void 0):this.data=L}else this.data=m}function dn(){Mi.call(this),this.status=1}function Hr(m){this.a=m}(Le=Br.prototype).ba=function(m,L,X,_e){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+m);L=L?L.toUpperCase():"GET",this.B=m,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(m){var L;return(L=m.a)||(L=m.a={}),L}(this.H?this.H:yo),this.a.onreadystatechange=Pe(this.za,this);try{this.A=!0,this.a.open(L,String(m),!0),this.A=!1}catch(Et){return void Bi(this,Et)}m=X||"";var $e=new Do(this.headers);_e&&Gi(_e,function(Et,fn){$e.set(fn,Et)}),_e=function(m){e:{for(var L=ha,X=m.length,_e="string"==typeof m?m.split(""):m,$e=0;$e<X;$e++)if($e in _e&&L.call(void 0,_e[$e],$e,m)){L=$e;break e}L=-1}return 0>L?null:"string"==typeof m?m.charAt(L):m[L]}($e.L()),X=tt.FormData&&m instanceof tt.FormData,!(0<=at(zr,L))||_e||X||$e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),$e.forEach(function(Et,fn){this.a.setRequestHeader(fn,Et)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Pa(this),0<this.o&&((this.D=function(m){return _t&&Vn(9)&&"number"==typeof m.timeout&&void 0!==m.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Pe(this.xa,this)):this.m=Ce(this.xa,this.o,this)),this.l=!0,this.a.send(m),this.l=!1}catch(Et){Bi(this,Et)}},Le.xa=function(){void 0!==st&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Le.abort=function(m){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=m||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Bn(this))},Le.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Bn(this,!0)),Br.S.G.call(this)},Le.za=function(){this.j||(this.A||this.l||this.g?Xr(this):this.Ta())},Le.Ta=function(){Xr(this)},Le.X=function(){try{return 2<Jo(this)?this.a.status:-1}catch(m){return-1}},Le.$=function(){try{return this.a?this.a.responseText:""}catch(m){return""}},Le.Na=function(m){if(this.a){var L=this.a.responseText;return m&&0==L.indexOf(m)&&(L=L.substring(m.length)),hs(L)}},Le.ua=function(){return this.h},Le.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Le=da.prototype).ha=8,Le.v=1,Le.Ba=function(m){if(this.h)if(this.h=null,1==this.v){if(!m){this.R=Math.floor(1e5*Math.random()),m=this.R++;var _e,L=new Ki(this,this.c,m,void 0),X=this.l;if(this.O&&(X?et(X=Vt(X),this.O):X=this.O),null===this.i&&(L.B=X),this.da)e:{for(var $e=_e=0;$e<this.g.length;$e++){var Et=this.g[$e];if(void 0===(Et="__data__"in Et.a&&"string"==typeof(Et=Et.a.__data__)?Et.length:void 0))break;if(4096<(_e+=Et)){_e=$e;break e}if(4096===_e||$e===this.g.length-1){_e=$e+1;break e}}_e=1e3}else _e=1e3;_e=wo(this,L,_e),$r($e=Yi(this.B),"RID",m),$r($e,"CVER",22),this.A&&$r($e,"X-HTTP-Session-Id",this.A),vi(this,$e),this.i&&X&&Di($e,this.i,X),wr(this.b,L),this.Ga&&$r($e,"TYPE","init"),this.da?($r($e,"$req",_e),$r($e,"SID","null"),L.V=!0,Zn(L,$e,null)):Zn(L,$e,_e),this.v=2}}else 3==this.v&&(m?jr(this,m):0==this.g.length||Xt(this.b)||jr(this))},Le.Aa=function(){if(this.j=null,Xs(this),this.V&&!(this.F||null==this.a||0>=this.N)){var m=2*this.N;this.c.info("BP detection timer enabled: "+m),this.s=ri(Pe(this.Sa,this),m)}},Le.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Zt(this),Xs(this))},Le.Ra=function(){null!=this.m&&(this.m=null,Zt(this),es(this),qn(19))},Le.Xa=function(m){m?(this.c.info("Successfully pinged google.com"),qn(2)):(this.c.info("Failed to ping google.com"),qn(1))},(Le=No.prototype).ta=function(){},Le.sa=function(){},Le.ra=function(){},Le.qa=function(){},Le.Ha=function(){},Us.prototype.a=function(m,L){return new Kr(m,L)},rt(Kr,Re),(Le=Kr.prototype).addEventListener=function(m,L,X,_e){Kr.S.addEventListener.call(this,m,L,X,_e)},Le.removeEventListener=function(m,L,X,_e){Kr.S.removeEventListener.call(this,m,L,X,_e)},Le.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var m=this.a,L=this.l,X=this.b||void 0;qn(0),m.fa=L,m.W=X||{},m.H=m.T,m.B=Fi(m,null,m.fa),Lr(m)},Le.close=function(){xa(this.a)},Le.Pa=function(m){if("string"==typeof m){var L={};L.__data__=m,_o(this.a,L)}else this.g?((L={}).__data__=bt(m),_o(this.a,L)):_o(this.a,m)},Le.G=function(){this.a.f=null,delete this.f,xa(this.a),delete this.a,Kr.S.G.call(this)},rt(js,Go),rt(dn,Mi),rt(Hr,No),Hr.prototype.ta=function(){this.a.dispatchEvent("a")},Hr.prototype.sa=function(m){this.a.dispatchEvent(new js(m))},Hr.prototype.ra=function(m){this.a.dispatchEvent(new dn(m))},Hr.prototype.qa=function(){this.a.dispatchEvent("b")},Us.prototype.createWebChannel=Us.prototype.a,Kr.prototype.send=Kr.prototype.Pa,Kr.prototype.open=Kr.prototype.Oa,Kr.prototype.close=Kr.prototype.close,pi.NO_ERROR=0,pi.TIMEOUT=8,pi.HTTP_ERROR=6,Pi.COMPLETE="complete",Fr.EventType=mo,mo.OPEN="a",mo.CLOSE="b",mo.ERROR="c",mo.MESSAGE="d",Re.prototype.listen=Re.prototype.va,Br.prototype.listenOnce=Br.prototype.wa,Br.prototype.getLastError=Br.prototype.Qa,Br.prototype.getLastErrorCode=Br.prototype.ua,Br.prototype.getStatus=Br.prototype.X,Br.prototype.getResponseJson=Br.prototype.Na,Br.prototype.getResponseText=Br.prototype.$,Br.prototype.send=Br.prototype.ba;var Zs=function(){return new Us},Js=pi,Ko=Pi,ro=Fr,Ma=Br;const ci={createWebChannelTransport:Zs,ErrorCode:pi,EventType:Pi,WebChannel:Fr,XhrIo:Br}},7642:(On,We,ge)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0}),function(A){for(var J in A)We.hasOwnProperty(J)||(We[J]=A[J])}(ge(8523))},4198:(On,We,ge)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0}),function(A){for(var J in A)We.hasOwnProperty(J)||(We[J]=A[J])}(ge(844))},2372:(On,We,ge)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0}),function(A){for(var J in A)We.hasOwnProperty(J)||(We[J]=A[J])}(ge(90))},8523:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{AngularFireAuth:()=>Ie,AngularFireAuthModule:()=>ke});var M=ge(639),A=ge(7574),J=ge(4402),mt=ge(5917),Le=ge(3190),st=ge(7987),tt=ge(9373),oe=function(gt,Me){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(gt,Me)},z=function(gt,Me){return function(Pe,ut){Me(Pe,ut,gt)}};let Ie=(()=>{let gt=class{constructor(Pe,ut,ze,rt){const Ut=(0,st.ss)(new st.HU(rt),ze);this.auth=rt.runOutsideAngular(()=>(0,tt.Wy)(Pe,rt,ut).auth()),this.authState=new A.y(Nt=>rt.runOutsideAngular(()=>this.auth.onAuthStateChanged(Nt))).pipe(Ut),this.user=new A.y(Nt=>rt.runOutsideAngular(()=>this.auth.onIdTokenChanged(Nt))).pipe(Ut),this.idToken=this.user.pipe((0,Le.w)(Nt=>Nt?(0,J.D)(Nt.getIdToken()):(0,mt.of)(null))),this.idTokenResult=this.user.pipe((0,Le.w)(Nt=>Nt?(0,J.D)(Nt.getIdTokenResult()):(0,mt.of)(null)))}};return gt.\u0275fac=function(Pe){return new(Pe||gt)(M.LFG(tt.Dh),M.LFG(tt.xv,8),M.LFG(M.Lbi),M.LFG(M.R0b))},gt.\u0275prov=M.Yz7({token:gt,factory:function(Me){return gt.\u0275fac(Me)}}),gt=function(gt,Me,Pe,ut){var Ut,ze=arguments.length,rt=ze<3?Me:null===ut?ut=Object.getOwnPropertyDescriptor(Me,Pe):ut;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)rt=Reflect.decorate(gt,Me,Pe,ut);else for(var Nt=gt.length-1;Nt>=0;Nt--)(Ut=gt[Nt])&&(rt=(ze<3?Ut(rt):ze>3?Ut(Me,Pe,rt):Ut(Me,Pe))||rt);return ze>3&&rt&&Object.defineProperty(Me,Pe,rt),rt}([z(0,(0,M.tBr)(tt.Dh)),z(1,(0,M.FiY)()),z(1,(0,M.tBr)(tt.xv)),z(2,(0,M.tBr)(M.Lbi)),oe("design:paramtypes",[Object,Object,Object,M.R0b])],gt),gt})();ge(6003);let ke=(()=>{let gt=class{};return gt.\u0275fac=function(Pe){return new(Pe||gt)},gt.\u0275mod=M.oAB({type:gt}),gt.\u0275inj=M.cJS({providers:[Ie]}),gt})()},7987:(On,We,ge)=>{"use strict";ge.d(We,{gw:()=>K,Ky:()=>Ze,Z4:()=>B,Wn:()=>Vt,Vq:()=>ot,HU:()=>Gt,Fx:()=>ue,Dp:()=>ae,ss:()=>ve,pX:()=>vt});var M=ge(639),A=ge(8583),J=ge(6465),Le=ge(6102);const tt=new class extends Le.v{}(class extends J.o{constructor(Ct,_t){super(Ct,_t),this.scheduler=Ct,this.work=_t}schedule(Ct,_t=0){return _t>0?super.schedule(Ct,_t):(this.delay=_t,this.state=Ct,this.scheduler.flush(this),this)}execute(Ct,_t){return _t>0||this.closed?super.execute(Ct,_t):this._execute(Ct,_t)}requestAsyncId(Ct,_t,xt=0){return null!==xt&&xt>0||null===xt&&this.delay>0?super.requestAsyncId(Ct,_t,xt):Ct.flush(this)}});var oe=ge(3637),z=ge(7574);let Ie=1;const xe=Promise.resolve(),we={};function ke(It){return It in we&&(delete we[It],!0)}const gt={setImmediate(It){const Ct=Ie++;return we[Ct]=!0,xe.then(()=>ke(Ct)&&It()),Ct},clearImmediate(It){ke(It)}},rt=new class extends Le.v{flush(Ct){this.active=!0,this.scheduled=void 0;const{actions:_t}=this;let xt,an=-1,qe=_t.length;Ct=Ct||_t.shift();do{if(xt=Ct.execute(Ct.state,Ct.delay))break}while(++an<qe&&(Ct=_t.shift()));if(this.active=!1,xt){for(;++an<qe&&(Ct=_t.shift());)Ct.unsubscribe();throw xt}}}(class extends J.o{constructor(Ct,_t){super(Ct,_t),this.scheduler=Ct,this.work=_t}requestAsyncId(Ct,_t,xt=0){return null!==xt&&xt>0?super.requestAsyncId(Ct,_t,xt):(Ct.actions.push(this),Ct.scheduled||(Ct.scheduled=gt.setImmediate(Ct.flush.bind(Ct,null))))}recycleAsyncId(Ct,_t,xt=0){if(null!==xt&&xt>0||null===xt&&this.delay>0)return super.recycleAsyncId(Ct,_t,xt);0===Ct.actions.length&&(gt.clearImmediate(_t),Ct.scheduled=void 0)}});var Ut=ge(9796);class at extends z.y{constructor(Ct,_t=0,xt=rt){var It;super(),this.source=Ct,this.delayTime=_t,this.scheduler=xt,(!(!(0,Ut.k)(It=_t)&&It-parseFloat(It)+1>=0)||_t<0)&&(this.delayTime=0),(!xt||"function"!=typeof xt.schedule)&&(this.scheduler=rt)}static create(Ct,_t=0,xt=rt){return new at(Ct,_t,xt)}static dispatch(Ct){const{source:_t,subscriber:xt}=Ct;return this.add(_t.subscribe(xt))}_subscribe(Ct){return this.scheduler.schedule(at.dispatch,this.delayTime,{source:this.source,subscriber:Ct})}}class R{constructor(Ct,_t){this.scheduler=Ct,this.delay=_t}call(Ct,_t){return new at(_t,this.delay,this.scheduler).subscribe(Ct)}}var x=ge(3342),C=ge(309);const B=new M.OlP("angularfire2.realtimeDatabaseURL"),K=B;function k(){}class ae{constructor(Ct,_t=tt){this.zone=Ct,this.delegate=_t}now(){return this.delegate.now()}schedule(Ct,_t,xt){const an=this.zone;return this.delegate.schedule(function(pt){an.runGuarded(()=>{Ct.apply(this,[pt])})},_t,xt)}}class ue{constructor(Ct){this.zone=Ct,this.task=null}call(Ct,_t){const xt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",k,{},k,k)),_t.pipe((0,x.b)(xt,xt,xt)).subscribe(Ct).add(xt)}unscheduleTask(){null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)}}class Gt{constructor(Ct){this.ngZone=Ct,this.outsideAngular=Ct.runOutsideAngular(()=>new ae(Zone.current)),this.insideAngular=Ct.run(()=>new ae(Zone.current,oe.z))}}function ve(It,Ct){return function(xt){return(0,A.PM)(Ct)&&(xt=xt.lift(new ue(It.ngZone))),xt.pipe(function(It,Ct=0){return function(xt){return xt.lift(new R(It,Ct))}}(It.outsideAngular),(0,C.QV)(It.insideAngular))}}const ot=It=>Ct=>new z.y(_t=>It.runOutsideAngular(()=>{Vt(It)(Ct).subscribe(_t)})),Vt=It=>Ct=>new z.y(_t=>Ct.subscribe(xt=>It.run(()=>_t.next(xt)),xt=>It.run(()=>_t.error(xt)),()=>It.run(()=>_t.complete())));class Ze{constructor(Ct,_t){this.zone=Ct,this.platformId=_t}schedule(...Ct){return this.zone.runGuarded(function(){return tt.schedule.apply(tt,Ct)})}keepUnstableUntilFirst(Ct){return(0,A.PM)(this.platformId)?new z.y(_t=>{const xt=()=>{},an=Zone.current.scheduleMacroTask("firebaseZoneBlock",xt,{},xt,xt);Ct.subscribe(qe=>{"scheduled"===an.state&&an.invoke(),_t.next(qe)},qe=>{"scheduled"===an.state&&an.invoke(),_t.error(qe)},()=>{"scheduled"===an.state&&an.invoke(),_t.complete()})}):Ct}runOutsideAngular(Ct){return new z.y(_t=>this.zone.runOutsideAngular(()=>Ct.subscribe(xt=>this.zone.run(()=>_t.next(xt)),xt=>this.zone.run(()=>_t.error(xt)),()=>this.zone.run(()=>_t.complete()))))}}const et=["ngOnDestroy"],vt=(It,Ct,_t)=>new Proxy(It,{get:(xt,an)=>_t.runOutsideAngular(()=>{if(It[an])return It[an];if(et.includes(an))return()=>{};let qe=Ct.toPromise().then(pt=>{const Kt=pt&&pt[an];return"function"==typeof Kt?Kt.bind(pt):Kt&&Kt.then?Kt.then(Ht=>_t.run(()=>Ht)):_t.run(()=>Kt)});return new Proxy(()=>{},{get:(pt,Kt)=>qe[Kt],apply:(pt,Kt,Ht)=>qe.then(Wt=>Wt&&Wt(...Ht))})})})},9373:(On,We,ge)=>{"use strict";ge.d(We,{RU:()=>ft,sI:()=>oe,Dh:()=>z,xv:()=>Ie,Ot:()=>xe,q4:()=>we,Wy:()=>ke,hO:()=>Me});var tt,M=ge(639),A=ge(4395),J=ge.n(A);const ft=new M.OlP("angularfire2.app.options"),oe=new M.OlP("angularfire2.app.nameOrConfig"),z=ft,Ie=oe;class xe{}const we=new M.GfV("5.4.2");function ke(Pe,ut,ze){const Ut="object"==typeof ze&&ze||{};return Ut.name=Ut.name||"string"==typeof ze&&ze||"[DEFAULT]",J().apps.filter(at=>at&&at.name===Ut.name)[0]||ut.runOutsideAngular(()=>J().initializeApp(Pe,Ut))}const gt={provide:xe,useFactory:ke,deps:[z,M.R0b,[new M.FiY,Ie]]};let Me=tt=class{constructor(ut){J().registerVersion&&(J().registerVersion("angularfire",we.full,ut.toString()),J().registerVersion("angular",M.q4F.full))}static initializeApp(ut,ze){return{ngModule:tt,providers:[{provide:z,useValue:ut},{provide:Ie,useValue:ze}]}}};var ut;Me.\u0275fac=function(ut){return new(ut||Me)(M.LFG(M.Lbi))},Me.\u0275mod=M.oAB({type:Me}),Me.\u0275inj=M.cJS({providers:[gt]}),Me=tt=function(Pe,ut,ze,rt){var at,Ut=arguments.length,Nt=Ut<3?ut:null===rt?rt=Object.getOwnPropertyDescriptor(ut,ze):rt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Nt=Reflect.decorate(Pe,ut,ze,rt);else for(var Ot=Pe.length-1;Ot>=0;Ot--)(at=Pe[Ot])&&(Nt=(Ut<3?at(Nt):Ut>3?at(ut,ze,Nt):at(ut,ze))||Nt);return Ut>3&&Nt&&Object.defineProperty(ut,ze,Nt),Nt}([(0,ut=(0,M.tBr)(M.Lbi),function(ze,rt){ut(ze,rt,0)}),function(Pe,ut){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",[Object])}()],Me)},90:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{AngularFireModule:()=>A.hO,DATABASE_URL:()=>M.gw,FIREBASE_APP_NAME:()=>A.xv,FIREBASE_OPTIONS:()=>A.Dh,FirebaseApp:()=>A.Ot,FirebaseNameOrConfigToken:()=>A.sI,FirebaseOptionsToken:()=>A.RU,FirebaseZoneScheduler:()=>M.Ky,RealtimeDatabaseURL:()=>M.Z4,VERSION:()=>A.q4,_firebaseAppFactory:()=>A.Wy,runInZone:()=>M.Wn,runOutsideAngular:()=>M.Vq,\u0275AngularFireSchedulers:()=>M.HU,\u0275BlockUntilFirstOperator:()=>M.Fx,\u0275ZoneScheduler:()=>M.Dp,\u0275keepUnstableUntilFirstFactory:()=>M.ss,\u0275lazySDKProxy:()=>M.pX});var M=ge(7987),A=ge(9373)},844:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{AngularFirestore:()=>It,AngularFirestoreCollection:()=>ze,AngularFirestoreCollectionGroup:()=>Ut,AngularFirestoreDocument:()=>rt,AngularFirestoreModule:()=>an,DefaultFirestoreSettings:()=>et,ENABLE_PERSISTENCE:()=>Gt,EnablePersistenceToken:()=>k,FirestoreSettingsToken:()=>ue,PERSISTENCE_SETTINGS:()=>ve,PersistenceSettingsToken:()=>ae,SETTINGS:()=>ot,associateQuery:()=>vt,combineChange:()=>Pe,combineChanges:()=>Me,docChanges:()=>ke,fromCollectionRef:()=>z,fromDocRef:()=>oe,fromRef:()=>ft,sortedChanges:()=>gt,validateEventsArray:()=>ut});var M=ge(639),A=ge(4402),J=ge(5917),mt=ge(3637),Le=ge(7574),st=ge(8002);function ft(qe,pt){return function(qe,pt=mt.z){return new Le.y(Kt=>{let Ht;return null!=pt?pt.schedule(()=>{Ht=qe.onSnapshot(Kt)}):Ht=qe.onSnapshot(Kt),function(){null!=Ht&&Ht()}})}(qe,pt)}function oe(qe,pt){return ft(qe,pt).pipe((0,st.U)(Kt=>({payload:Kt,type:"value"})))}function z(qe,pt){return ft(qe,pt).pipe((0,st.U)(Kt=>({payload:Kt,type:"query"})))}var Ie=ge(309),xe=ge(5435),we=ge(2145);function ke(qe,pt){return z(qe,pt).pipe((0,st.U)(Kt=>Kt.payload.docChanges().map(Ht=>({type:Ht.type,payload:Ht}))))}function gt(qe,pt,Kt){return z(qe,Kt).pipe((0,st.U)(Ht=>Ht.payload.docChanges()),(0,we.R)((Ht,Wt)=>Me(Ht,Wt,pt),[]),(0,st.U)(Ht=>Ht.map(Wt=>({type:Wt.type,payload:Wt}))))}function Me(qe,pt,Kt){return pt.forEach(Ht=>{Kt.indexOf(Ht.type)>-1&&(qe=Pe(qe,Ht))}),qe}function Pe(qe,pt){switch(pt.type){case"added":qe[pt.newIndex]&&qe[pt.newIndex].doc.ref.isEqual(pt.doc.ref)||qe.splice(pt.newIndex,0,pt);break;case"modified":(null==qe[pt.oldIndex]||qe[pt.oldIndex].doc.ref.isEqual(pt.doc.ref))&&(pt.oldIndex!==pt.newIndex?(qe.splice(pt.oldIndex,1),qe.splice(pt.newIndex,0,pt)):qe.splice(pt.newIndex,1,pt));break;case"removed":qe[pt.oldIndex]&&qe[pt.oldIndex].doc.ref.isEqual(pt.doc.ref)&&qe.splice(pt.oldIndex,1)}return qe}function ut(qe){return(!qe||0===qe.length)&&(qe=["added","removed","modified"]),qe}class ze{constructor(pt,Kt,Ht){this.ref=pt,this.query=Kt,this.afs=Ht}stateChanges(pt){return pt&&0!==pt.length?ke(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,(0,st.U)(Kt=>Kt.filter(Ht=>pt.indexOf(Ht.type)>-1)),(0,xe.h)(Kt=>Kt.length>0)):ke(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(pt){return this.stateChanges(pt).pipe((0,we.R)((Kt,Ht)=>[...Kt,...Ht],[]))}snapshotChanges(pt){const Kt=ut(pt);return gt(this.query,Kt,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(pt={}){return z(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,(0,st.U)(Kt=>Kt.payload.docs.map(Ht=>pt.idField?Object.assign({},Ht.data(),{[pt.idField]:Ht.id}):Ht.data())))}get(pt){return(0,A.D)(this.query.get(pt)).pipe((0,Ie.QV)(this.afs.schedulers.insideAngular))}add(pt){return this.ref.add(pt)}doc(pt){return new rt(this.ref.doc(pt),this.afs)}}class rt{constructor(pt,Kt){this.ref=pt,this.afs=Kt}set(pt,Kt){return this.ref.set(pt,Kt)}update(pt){return this.ref.update(pt)}delete(){return this.ref.delete()}collection(pt,Kt){const Ht=this.ref.collection(pt),{ref:Wt,query:on}=vt(Ht,Kt);return new ze(Wt,on,this.afs)}snapshotChanges(){return oe(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe((0,st.U)(pt=>pt.payload.data()))}get(pt){return(0,A.D)(this.ref.get(pt)).pipe((0,Ie.QV)(this.afs.schedulers.insideAngular))}}class Ut{constructor(pt,Kt){this.query=pt,this.afs=Kt}stateChanges(pt){return pt&&0!==pt.length?ke(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,(0,st.U)(Kt=>Kt.filter(Ht=>pt.indexOf(Ht.type)>-1)),(0,xe.h)(Kt=>Kt.length>0)):ke(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(pt){return this.stateChanges(pt).pipe((0,we.R)((Kt,Ht)=>[...Kt,...Ht],[]))}snapshotChanges(pt){const Kt=ut(pt);return gt(this.query,Kt,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return z(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,(0,st.U)(Kt=>Kt.payload.docs.map(Ht=>Ht.data())))}get(pt){return(0,A.D)(this.query.get(pt)).pipe((0,Ie.QV)(this.afs.schedulers.insideAngular))}}var Nt=ge(7987),at=ge(9373),Ot=ge(8583),R=ge(4395),x=ge.n(R),B=function(qe,pt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(qe,pt)},K=function(qe,pt){return function(Kt,Ht){pt(Kt,Ht,qe)}};const k=new M.OlP("angularfire2.enableFirestorePersistence"),ae=new M.OlP("angularfire2.firestore.persistenceSettings"),ue=new M.OlP("angularfire2.firestore.settings"),Gt=k,ve=ae,ot=ue,Vt=parseInt(x().SDK_VERSION.split(".")[0]),Ze=parseInt(x().SDK_VERSION.split(".")[1]),et=Vt<5||5==Vt&&Ze<8?{timestampsInSnapshots:!0}:{};function vt(qe,pt=(Kt=>Kt)){return{query:pt(qe),ref:qe}}let It=(()=>{let qe=class{constructor(Kt,Ht,Wt,on,An,sn,Vn){this.schedulers=new Nt.HU(sn),this.keepUnstableUntilFirst=(0,Nt.ss)(this.schedulers,An),this.firestore=sn.runOutsideAngular(()=>{const zn=(0,at.Wy)(Kt,sn,Ht).firestore();return zn.settings(on||et),zn}),this.persistenceEnabled$=Wt&&!(0,Ot.PM)(An)?sn.runOutsideAngular(()=>{try{return(0,A.D)(this.firestore.enablePersistence(Vn||void 0).then(()=>!0,()=>!1))}catch(zn){return(0,J.of)(!1)}}):(0,J.of)(!1)}collection(Kt,Ht){let Wt;Wt="string"==typeof Kt?this.firestore.collection(Kt):Kt;const{ref:on,query:An}=vt(Wt,Ht);return new ze(on,An,this)}collectionGroup(Kt,Ht){if(Vt<6)throw"collection group queries require Firebase JS SDK >= 6.0";const Wt=Ht||(sn=>sn),An=this.firestore.collectionGroup(Kt);return new Ut(Wt(An),this)}doc(Kt){let Ht;return Ht="string"==typeof Kt?this.firestore.doc(Kt):Kt,new rt(Ht,this)}createId(){return this.firestore.collection("_").doc().id}};return qe.\u0275fac=function(Kt){return new(Kt||qe)(M.LFG(at.Dh),M.LFG(at.xv,8),M.LFG(Gt,8),M.LFG(ot,8),M.LFG(M.Lbi),M.LFG(M.R0b),M.LFG(ve,8))},qe.\u0275prov=M.Yz7({token:qe,factory:function(pt){return qe.\u0275fac(pt)}}),qe=function(qe,pt,Kt,Ht){var An,Wt=arguments.length,on=Wt<3?pt:null===Ht?Ht=Object.getOwnPropertyDescriptor(pt,Kt):Ht;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)on=Reflect.decorate(qe,pt,Kt,Ht);else for(var sn=qe.length-1;sn>=0;sn--)(An=qe[sn])&&(on=(Wt<3?An(on):Wt>3?An(pt,Kt,on):An(pt,Kt))||on);return Wt>3&&on&&Object.defineProperty(pt,Kt,on),on}([K(0,(0,M.tBr)(at.Dh)),K(1,(0,M.FiY)()),K(1,(0,M.tBr)(at.xv)),K(2,(0,M.FiY)()),K(2,(0,M.tBr)(Gt)),K(3,(0,M.FiY)()),K(3,(0,M.tBr)(ot)),K(4,(0,M.tBr)(M.Lbi)),K(6,(0,M.FiY)()),K(6,(0,M.tBr)(ve)),B("design:paramtypes",[Object,Object,Object,Object,Object,M.R0b,Object])],qe),qe})();var xt;ge(5910);let an=xt=class{static enablePersistence(pt){return{ngModule:xt,providers:[{provide:k,useValue:!0},{provide:ae,useValue:pt}]}}};an.\u0275fac=function(pt){return new(pt||an)},an.\u0275mod=M.oAB({type:an}),an.\u0275inj=M.cJS({providers:[It]})},4395:(On,We,ge)=>{"use strict";function A(st){return st&&"object"==typeof st&&"default"in st?st:{default:st}}var J=A(ge(6279));J.default.registerVersion("firebase","7.24.0","app"),On.exports=J.default},7117:(On,We,ge)=>{"use strict";var M=ge(6279);function A(ft){return ft&&"object"==typeof ft&&"default"in ft?ft:{default:ft}}ge(6003),ge(4614),ge(5910),ge(9800),ge(7450),ge(6035),ge(5062),ge(8051),ge(2136);var J=A(M);J.default.registerVersion("firebase","7.24.0","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),J.default.registerVersion("firebase","7.24.0"),On.exports=J.default},6676:function(On,We){!function(ge){"use strict";function M(Pe){return Array.prototype.slice.call(Pe)}function A(Pe){return new Promise(function(ut,ze){Pe.onsuccess=function(){ut(Pe.result)},Pe.onerror=function(){ze(Pe.error)}})}function J(Pe,ut,ze){var rt,Ut=new Promise(function(Nt,at){A(rt=Pe[ut].apply(Pe,ze)).then(Nt,at)});return Ut.request=rt,Ut}function mt(Pe,ut,ze){var rt=J(Pe,ut,ze);return rt.then(function(Ut){if(Ut)return new z(Ut,rt.request)})}function Le(Pe,ut,ze){ze.forEach(function(rt){Object.defineProperty(Pe.prototype,rt,{get:function(){return this[ut][rt]},set:function(Ut){this[ut][rt]=Ut}})})}function st(Pe,ut,ze,rt){rt.forEach(function(Ut){Ut in ze.prototype&&(Pe.prototype[Ut]=function(){return J(this[ut],Ut,arguments)})})}function tt(Pe,ut,ze,rt){rt.forEach(function(Ut){Ut in ze.prototype&&(Pe.prototype[Ut]=function(){return this[ut][Ut].apply(this[ut],arguments)})})}function ft(Pe,ut,ze,rt){rt.forEach(function(Ut){Ut in ze.prototype&&(Pe.prototype[Ut]=function(){return mt(this[ut],Ut,arguments)})})}function oe(Pe){this._index=Pe}function z(Pe,ut){this._cursor=Pe,this._request=ut}function Ie(Pe){this._store=Pe}function xe(Pe){this._tx=Pe,this.complete=new Promise(function(ut,ze){Pe.oncomplete=function(){ut()},Pe.onerror=function(){ze(Pe.error)},Pe.onabort=function(){ze(Pe.error)}})}function we(Pe,ut,ze){this._db=Pe,this.oldVersion=ut,this.transaction=new xe(ze)}function ke(Pe){this._db=Pe}Le(oe,"_index",["name","keyPath","multiEntry","unique"]),st(oe,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ft(oe,"_index",IDBIndex,["openCursor","openKeyCursor"]),Le(z,"_cursor",["direction","key","primaryKey","value"]),st(z,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Pe){Pe in IDBCursor.prototype&&(z.prototype[Pe]=function(){var ut=this,ze=arguments;return Promise.resolve().then(function(){return ut._cursor[Pe].apply(ut._cursor,ze),A(ut._request).then(function(rt){if(rt)return new z(rt,ut._request)})})})}),Ie.prototype.createIndex=function(){return new oe(this._store.createIndex.apply(this._store,arguments))},Ie.prototype.index=function(){return new oe(this._store.index.apply(this._store,arguments))},Le(Ie,"_store",["name","keyPath","indexNames","autoIncrement"]),st(Ie,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ft(Ie,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),tt(Ie,"_store",IDBObjectStore,["deleteIndex"]),xe.prototype.objectStore=function(){return new Ie(this._tx.objectStore.apply(this._tx,arguments))},Le(xe,"_tx",["objectStoreNames","mode"]),tt(xe,"_tx",IDBTransaction,["abort"]),we.prototype.createObjectStore=function(){return new Ie(this._db.createObjectStore.apply(this._db,arguments))},Le(we,"_db",["name","version","objectStoreNames"]),tt(we,"_db",IDBDatabase,["deleteObjectStore","close"]),ke.prototype.transaction=function(){return new xe(this._db.transaction.apply(this._db,arguments))},Le(ke,"_db",["name","version","objectStoreNames"]),tt(ke,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Pe){[Ie,oe].forEach(function(ut){Pe in ut.prototype&&(ut.prototype[Pe.replace("open","iterate")]=function(){var ze=M(arguments),rt=ze[ze.length-1],Ut=this._store||this._index,Nt=Ut[Pe].apply(Ut,ze.slice(0,-1));Nt.onsuccess=function(){rt(Nt.result)}})})}),[oe,Ie].forEach(function(Pe){Pe.prototype.getAll||(Pe.prototype.getAll=function(ut,ze){var rt=this,Ut=[];return new Promise(function(Nt){rt.iterateCursor(ut,function(at){at?(Ut.push(at.value),void 0===ze||Ut.length!=ze?at.continue():Nt(Ut)):Nt(Ut)})})})}),ge.openDb=function(Pe,ut,ze){var rt=J(indexedDB,"open",[Pe,ut]),Ut=rt.request;return Ut&&(Ut.onupgradeneeded=function(Nt){ze&&ze(new we(Ut.result,Nt.oldVersion,Ut.transaction))}),rt.then(function(Nt){return new ke(Nt)})},ge.deleteDb=function(Pe){return J(indexedDB,"deleteDatabase",[Pe])},Object.defineProperty(ge,"__esModule",{value:!0})}(We)},7574:(On,We,ge)=>{"use strict";ge.d(We,{y:()=>Ie});var M=ge(7393),J=ge(9181),mt=ge(6490),st=ge(6554),tt=ge(4487);var z=ge(2494);let Ie=(()=>{class we{constructor(gt){this._isScalar=!1,gt&&(this._subscribe=gt)}lift(gt){const Me=new we;return Me.source=this,Me.operator=gt,Me}subscribe(gt,Me,Pe){const{operator:ut}=this,ze=function(we,ke,gt){if(we){if(we instanceof M.L)return we;if(we[J.b])return we[J.b]()}return we||ke||gt?new M.L(we,ke,gt):new M.L(mt.c)}(gt,Me,Pe);if(ze.add(ut?ut.call(ze,this.source):this.source||z.v.useDeprecatedSynchronousErrorHandling&&!ze.syncErrorThrowable?this._subscribe(ze):this._trySubscribe(ze)),z.v.useDeprecatedSynchronousErrorHandling&&ze.syncErrorThrowable&&(ze.syncErrorThrowable=!1,ze.syncErrorThrown))throw ze.syncErrorValue;return ze}_trySubscribe(gt){try{return this._subscribe(gt)}catch(Me){z.v.useDeprecatedSynchronousErrorHandling&&(gt.syncErrorThrown=!0,gt.syncErrorValue=Me),function(we){for(;we;){const{closed:ke,destination:gt,isStopped:Me}=we;if(ke||Me)return!1;we=gt&&gt instanceof M.L?gt:null}return!0}(gt)?gt.error(Me):console.warn(Me)}}forEach(gt,Me){return new(Me=xe(Me))((Pe,ut)=>{let ze;ze=this.subscribe(rt=>{try{gt(rt)}catch(Ut){ut(Ut),ze&&ze.unsubscribe()}},ut,Pe)})}_subscribe(gt){const{source:Me}=this;return Me&&Me.subscribe(gt)}[st.L](){return this}pipe(...gt){return 0===gt.length?this:function(we){return 0===we.length?tt.y:1===we.length?we[0]:function(gt){return we.reduce((Me,Pe)=>Pe(Me),gt)}}(gt)(this)}toPromise(gt){return new(gt=xe(gt))((Me,Pe)=>{let ut;this.subscribe(ze=>ut=ze,ze=>Pe(ze),()=>Me(ut))})}}return we.create=ke=>new we(ke),we})();function xe(we){if(we||(we=z.v.Promise||Promise),!we)throw new Error("no Promise impl found");return we}},6490:(On,We,ge)=>{"use strict";ge.d(We,{c:()=>J});var M=ge(2494),A=ge(4449);const J={closed:!0,next(mt){},error(mt){if(M.v.useDeprecatedSynchronousErrorHandling)throw mt;(0,A.z)(mt)},complete(){}}},7709:(On,We,ge)=>{"use strict";ge.d(We,{xQ:()=>ft,Yc:()=>tt});var M=ge(7574),A=ge(7393),J=ge(5319),mt=ge(7971);class Le extends J.w{constructor(Ie,xe){super(),this.subject=Ie,this.subscriber=xe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Ie=this.subject,xe=Ie.observers;if(this.subject=null,!xe||0===xe.length||Ie.isStopped||Ie.closed)return;const we=xe.indexOf(this.subscriber);-1!==we&&xe.splice(we,1)}}var st=ge(9181);class tt extends A.L{constructor(Ie){super(Ie),this.destination=Ie}}let ft=(()=>{class z extends M.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[st.b](){return new tt(this)}lift(xe){const we=new oe(this,this);return we.operator=xe,we}next(xe){if(this.closed)throw new mt.N;if(!this.isStopped){const{observers:we}=this,ke=we.length,gt=we.slice();for(let Me=0;Me<ke;Me++)gt[Me].next(xe)}}error(xe){if(this.closed)throw new mt.N;this.hasError=!0,this.thrownError=xe,this.isStopped=!0;const{observers:we}=this,ke=we.length,gt=we.slice();for(let Me=0;Me<ke;Me++)gt[Me].error(xe);this.observers.length=0}complete(){if(this.closed)throw new mt.N;this.isStopped=!0;const{observers:xe}=this,we=xe.length,ke=xe.slice();for(let gt=0;gt<we;gt++)ke[gt].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(xe){if(this.closed)throw new mt.N;return super._trySubscribe(xe)}_subscribe(xe){if(this.closed)throw new mt.N;return this.hasError?(xe.error(this.thrownError),J.w.EMPTY):this.isStopped?(xe.complete(),J.w.EMPTY):(this.observers.push(xe),new Le(this,xe))}asObservable(){const xe=new M.y;return xe.source=this,xe}}return z.create=(Ie,xe)=>new oe(Ie,xe),z})();class oe extends ft{constructor(Ie,xe){super(),this.destination=Ie,this.source=xe}next(Ie){const{destination:xe}=this;xe&&xe.next&&xe.next(Ie)}error(Ie){const{destination:xe}=this;xe&&xe.error&&this.destination.error(Ie)}complete(){const{destination:Ie}=this;Ie&&Ie.complete&&this.destination.complete()}_subscribe(Ie){const{source:xe}=this;return xe?this.source.subscribe(Ie):J.w.EMPTY}}},7393:(On,We,ge)=>{"use strict";ge.d(We,{L:()=>tt});var M=ge(9105),A=ge(6490),J=ge(5319),mt=ge(9181),Le=ge(2494),st=ge(4449);class tt extends J.w{constructor(z,Ie,xe){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=A.c;break;case 1:if(!z){this.destination=A.c;break}if("object"==typeof z){z instanceof tt?(this.syncErrorThrowable=z.syncErrorThrowable,this.destination=z,z.add(this)):(this.syncErrorThrowable=!0,this.destination=new ft(this,z));break}default:this.syncErrorThrowable=!0,this.destination=new ft(this,z,Ie,xe)}}[mt.b](){return this}static create(z,Ie,xe){const we=new tt(z,Ie,xe);return we.syncErrorThrowable=!1,we}next(z){this.isStopped||this._next(z)}error(z){this.isStopped||(this.isStopped=!0,this._error(z))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(z){this.destination.next(z)}_error(z){this.destination.error(z),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:z}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=z,this}}class ft extends tt{constructor(z,Ie,xe,we){super(),this._parentSubscriber=z;let ke,gt=this;(0,M.m)(Ie)?ke=Ie:Ie&&(ke=Ie.next,xe=Ie.error,we=Ie.complete,Ie!==A.c&&(gt=Object.create(Ie),(0,M.m)(gt.unsubscribe)&&this.add(gt.unsubscribe.bind(gt)),gt.unsubscribe=this.unsubscribe.bind(this))),this._context=gt,this._next=ke,this._error=xe,this._complete=we}next(z){if(!this.isStopped&&this._next){const{_parentSubscriber:Ie}=this;Le.v.useDeprecatedSynchronousErrorHandling&&Ie.syncErrorThrowable?this.__tryOrSetError(Ie,this._next,z)&&this.unsubscribe():this.__tryOrUnsub(this._next,z)}}error(z){if(!this.isStopped){const{_parentSubscriber:Ie}=this,{useDeprecatedSynchronousErrorHandling:xe}=Le.v;if(this._error)xe&&Ie.syncErrorThrowable?(this.__tryOrSetError(Ie,this._error,z),this.unsubscribe()):(this.__tryOrUnsub(this._error,z),this.unsubscribe());else if(Ie.syncErrorThrowable)xe?(Ie.syncErrorValue=z,Ie.syncErrorThrown=!0):(0,st.z)(z),this.unsubscribe();else{if(this.unsubscribe(),xe)throw z;(0,st.z)(z)}}}complete(){if(!this.isStopped){const{_parentSubscriber:z}=this;if(this._complete){const Ie=()=>this._complete.call(this._context);Le.v.useDeprecatedSynchronousErrorHandling&&z.syncErrorThrowable?(this.__tryOrSetError(z,Ie),this.unsubscribe()):(this.__tryOrUnsub(Ie),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(z,Ie){try{z.call(this._context,Ie)}catch(xe){if(this.unsubscribe(),Le.v.useDeprecatedSynchronousErrorHandling)throw xe;(0,st.z)(xe)}}__tryOrSetError(z,Ie,xe){if(!Le.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Ie.call(this._context,xe)}catch(we){return Le.v.useDeprecatedSynchronousErrorHandling?(z.syncErrorValue=we,z.syncErrorThrown=!0,!0):((0,st.z)(we),!0)}return!1}_unsubscribe(){const{_parentSubscriber:z}=this;this._context=null,this._parentSubscriber=null,z.unsubscribe()}}},5319:(On,We,ge)=>{"use strict";ge.d(We,{w:()=>st});var M=ge(9796),A=ge(1555),J=ge(9105);const Le=(()=>{function ft(oe){return Error.call(this),this.message=oe?`${oe.length} errors occurred during unsubscription:\n${oe.map((z,Ie)=>`${Ie+1}) ${z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=oe,this}return ft.prototype=Object.create(Error.prototype),ft})();class st{constructor(oe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,oe&&(this._ctorUnsubscribe=!0,this._unsubscribe=oe)}unsubscribe(){let oe;if(this.closed)return;let{_parentOrParents:z,_ctorUnsubscribe:Ie,_unsubscribe:xe,_subscriptions:we}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,z instanceof st)z.remove(this);else if(null!==z)for(let ke=0;ke<z.length;++ke)z[ke].remove(this);if((0,J.m)(xe)){Ie&&(this._unsubscribe=void 0);try{xe.call(this)}catch(ke){oe=ke instanceof Le?tt(ke.errors):[ke]}}if((0,M.k)(we)){let ke=-1,gt=we.length;for(;++ke<gt;){const Me=we[ke];if((0,A.K)(Me))try{Me.unsubscribe()}catch(Pe){oe=oe||[],Pe instanceof Le?oe=oe.concat(tt(Pe.errors)):oe.push(Pe)}}}if(oe)throw new Le(oe)}add(oe){let z=oe;if(!oe)return st.EMPTY;switch(typeof oe){case"function":z=new st(oe);case"object":if(z===this||z.closed||"function"!=typeof z.unsubscribe)return z;if(this.closed)return z.unsubscribe(),z;if(!(z instanceof st)){const we=z;z=new st,z._subscriptions=[we]}break;default:throw new Error("unrecognized teardown "+oe+" added to Subscription.")}let{_parentOrParents:Ie}=z;if(null===Ie)z._parentOrParents=this;else if(Ie instanceof st){if(Ie===this)return z;z._parentOrParents=[Ie,this]}else{if(-1!==Ie.indexOf(this))return z;Ie.push(this)}const xe=this._subscriptions;return null===xe?this._subscriptions=[z]:xe.push(z),z}remove(oe){const z=this._subscriptions;if(z){const Ie=z.indexOf(oe);-1!==Ie&&z.splice(Ie,1)}}}var ft;function tt(ft){return ft.reduce((oe,z)=>oe.concat(z instanceof Le?z.errors:z),[])}st.EMPTY=((ft=new st).closed=!0,ft)},2494:(On,We,ge)=>{"use strict";ge.d(We,{v:()=>A});let M=!1;const A={Promise:void 0,set useDeprecatedSynchronousErrorHandling(J){if(J){const mt=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+mt.stack)}else M&&console.log("RxJS: Back to a better error behavior. Thank you. <3");M=J},get useDeprecatedSynchronousErrorHandling(){return M}}},5345:(On,We,ge)=>{"use strict";ge.d(We,{IY:()=>mt,Ds:()=>st,ft:()=>ft});var M=ge(7393),A=ge(7574),J=ge(7444);class mt extends M.L{constructor(z){super(),this.parent=z}_next(z){this.parent.notifyNext(z)}_error(z){this.parent.notifyError(z),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class st extends M.L{notifyNext(z){this.destination.next(z)}notifyError(z){this.destination.error(z)}notifyComplete(){this.destination.complete()}}function ft(oe,z){if(z.closed)return;if(oe instanceof A.y)return oe.subscribe(z);let Ie;try{Ie=(0,J.s)(oe)(z)}catch(xe){z.error(xe)}return Ie}},2441:(On,We,ge)=>{"use strict";ge.d(We,{c:()=>Le,N:()=>st});var M=ge(7709),A=ge(7574),J=ge(5319),mt=ge(1307);class Le extends A.y{constructor(Ie,xe){super(),this.source=Ie,this.subjectFactory=xe,this._refCount=0,this._isComplete=!1}_subscribe(Ie){return this.getSubject().subscribe(Ie)}getSubject(){const Ie=this._subject;return(!Ie||Ie.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Ie=this._connection;return Ie||(this._isComplete=!1,Ie=this._connection=new J.w,Ie.add(this.source.subscribe(new tt(this.getSubject(),this))),Ie.closed&&(this._connection=null,Ie=J.w.EMPTY)),Ie}refCount(){return(0,mt.x)()(this)}}const st=(()=>{const z=Le.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:z._subscribe},_isComplete:{value:z._isComplete,writable:!0},getSubject:{value:z.getSubject},connect:{value:z.connect},refCount:{value:z.refCount}}})();class tt extends M.Yc{constructor(Ie,xe){super(Ie),this.connectable=xe}_error(Ie){this._unsubscribe(),super._error(Ie)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Ie=this.connectable;if(Ie){this.connectable=null;const xe=Ie._connection;Ie._refCount=0,Ie._subject=null,Ie._connection=null,xe&&xe.unsubscribe()}}}},9193:(On,We,ge)=>{"use strict";ge.d(We,{E:()=>A,c:()=>J});var M=ge(7574);const A=new M.y(Le=>Le.complete());function J(Le){return Le?function(Le){return new M.y(st=>Le.schedule(()=>st.complete()))}(Le):A}},4402:(On,We,ge)=>{"use strict";ge.d(We,{D:()=>gt});var M=ge(7574),A=ge(7444),J=ge(5319),mt=ge(6554),tt=ge(4087),ft=ge(377),Ie=ge(4072),xe=ge(9489);function gt(Me,Pe){return Pe?function(Me,Pe){if(null!=Me){if(function(Me){return Me&&"function"==typeof Me[mt.L]}(Me))return function(Me,Pe){return new M.y(ut=>{const ze=new J.w;return ze.add(Pe.schedule(()=>{const rt=Me[mt.L]();ze.add(rt.subscribe({next(Ut){ze.add(Pe.schedule(()=>ut.next(Ut)))},error(Ut){ze.add(Pe.schedule(()=>ut.error(Ut)))},complete(){ze.add(Pe.schedule(()=>ut.complete()))}}))})),ze})}(Me,Pe);if((0,Ie.t)(Me))return function(Me,Pe){return new M.y(ut=>{const ze=new J.w;return ze.add(Pe.schedule(()=>Me.then(rt=>{ze.add(Pe.schedule(()=>{ut.next(rt),ze.add(Pe.schedule(()=>ut.complete()))}))},rt=>{ze.add(Pe.schedule(()=>ut.error(rt)))}))),ze})}(Me,Pe);if((0,xe.z)(Me))return(0,tt.r)(Me,Pe);if(function(Me){return Me&&"function"==typeof Me[ft.hZ]}(Me)||"string"==typeof Me)return function(Me,Pe){if(!Me)throw new Error("Iterable cannot be null");return new M.y(ut=>{const ze=new J.w;let rt;return ze.add(()=>{rt&&"function"==typeof rt.return&&rt.return()}),ze.add(Pe.schedule(()=>{rt=Me[ft.hZ](),ze.add(Pe.schedule(function(){if(ut.closed)return;let Ut,Nt;try{const at=rt.next();Ut=at.value,Nt=at.done}catch(at){return void ut.error(at)}Nt?ut.complete():(ut.next(Ut),this.schedule())}))})),ze})}(Me,Pe)}throw new TypeError((null!==Me&&typeof Me||Me)+" is not observable")}(Me,Pe):Me instanceof M.y?Me:new M.y((0,A.s)(Me))}},6693:(On,We,ge)=>{"use strict";ge.d(We,{n:()=>mt});var M=ge(7574),A=ge(5015),J=ge(4087);function mt(Le,st){return st?(0,J.r)(Le,st):new M.y((0,A.V)(Le))}},5917:(On,We,ge)=>{"use strict";ge.d(We,{of:()=>mt});var M=ge(4869),A=ge(6693),J=ge(4087);function mt(...Le){let st=Le[Le.length-1];return(0,M.K)(st)?(Le.pop(),(0,J.r)(Le,st)):(0,A.n)(Le)}},5435:(On,We,ge)=>{"use strict";ge.d(We,{h:()=>A});var M=ge(7393);function A(Le,st){return function(ft){return ft.lift(new J(Le,st))}}class J{constructor(st,tt){this.predicate=st,this.thisArg=tt}call(st,tt){return tt.subscribe(new mt(st,this.predicate,this.thisArg))}}class mt extends M.L{constructor(st,tt,ft){super(st),this.predicate=tt,this.thisArg=ft,this.count=0}_next(st){let tt;try{tt=this.predicate.call(this.thisArg,st,this.count++)}catch(ft){return void this.destination.error(ft)}tt&&this.destination.next(st)}}},8002:(On,We,ge)=>{"use strict";ge.d(We,{U:()=>A});var M=ge(7393);function A(Le,st){return function(ft){if("function"!=typeof Le)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ft.lift(new J(Le,st))}}class J{constructor(st,tt){this.project=st,this.thisArg=tt}call(st,tt){return tt.subscribe(new mt(st,this.project,this.thisArg))}}class mt extends M.L{constructor(st,tt,ft){super(st),this.project=tt,this.count=0,this.thisArg=ft||this}_next(st){let tt;try{tt=this.project.call(this.thisArg,st,this.count++)}catch(ft){return void this.destination.error(ft)}this.destination.next(tt)}}},3282:(On,We,ge)=>{"use strict";ge.d(We,{J:()=>J});var M=ge(9773),A=ge(4487);function J(mt=Number.POSITIVE_INFINITY){return(0,M.zg)(A.y,mt)}},9773:(On,We,ge)=>{"use strict";ge.d(We,{zg:()=>mt});var M=ge(8002),A=ge(4402),J=ge(5345);function mt(ft,oe,z=Number.POSITIVE_INFINITY){return"function"==typeof oe?Ie=>Ie.pipe(mt((xe,we)=>(0,A.D)(ft(xe,we)).pipe((0,M.U)((ke,gt)=>oe(xe,ke,we,gt))),z)):("number"==typeof oe&&(z=oe),Ie=>Ie.lift(new Le(ft,z)))}class Le{constructor(oe,z=Number.POSITIVE_INFINITY){this.project=oe,this.concurrent=z}call(oe,z){return z.subscribe(new st(oe,this.project,this.concurrent))}}class st extends J.Ds{constructor(oe,z,Ie=Number.POSITIVE_INFINITY){super(oe),this.project=z,this.concurrent=Ie,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(oe){this.active<this.concurrent?this._tryNext(oe):this.buffer.push(oe)}_tryNext(oe){let z;const Ie=this.index++;try{z=this.project(oe,Ie)}catch(xe){return void this.destination.error(xe)}this.active++,this._innerSub(z)}_innerSub(oe){const z=new J.IY(this),Ie=this.destination;Ie.add(z);const xe=(0,J.ft)(oe,z);xe!==z&&Ie.add(xe)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(oe){this.destination.next(oe)}notifyComplete(){const oe=this.buffer;this.active--,oe.length>0?this._next(oe.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(On,We,ge)=>{"use strict";ge.d(We,{QV:()=>oe});var M=ge(7393),A=ge(9193),J=ge(5917),mt=ge(7574);class ft{constructor(ke,gt,Me){this.kind=ke,this.value=gt,this.error=Me,this.hasValue="N"===ke}observe(ke){switch(this.kind){case"N":return ke.next&&ke.next(this.value);case"E":return ke.error&&ke.error(this.error);case"C":return ke.complete&&ke.complete()}}do(ke,gt,Me){switch(this.kind){case"N":return ke&&ke(this.value);case"E":return gt&&gt(this.error);case"C":return Me&&Me()}}accept(ke,gt,Me){return ke&&"function"==typeof ke.next?this.observe(ke):this.do(ke,gt,Me)}toObservable(){switch(this.kind){case"N":return(0,J.of)(this.value);case"E":return we=this.error,new mt.y(gt=>gt.error(we));case"C":return(0,A.c)()}var we;throw new Error("unexpected notification kind value")}static createNext(ke){return void 0!==ke?new ft("N",ke):ft.undefinedValueNotification}static createError(ke){return new ft("E",void 0,ke)}static createComplete(){return ft.completeNotification}}function oe(we,ke=0){return function(Me){return Me.lift(new z(we,ke))}}ft.completeNotification=new ft("C"),ft.undefinedValueNotification=new ft("N",void 0);class z{constructor(ke,gt=0){this.scheduler=ke,this.delay=gt}call(ke,gt){return gt.subscribe(new Ie(ke,this.scheduler,this.delay))}}class Ie extends M.L{constructor(ke,gt,Me=0){super(ke),this.scheduler=gt,this.delay=Me}static dispatch(ke){const{notification:gt,destination:Me}=ke;gt.observe(Me),this.unsubscribe()}scheduleMessage(ke){this.destination.add(this.scheduler.schedule(Ie.dispatch,this.delay,new xe(ke,this.destination)))}_next(ke){this.scheduleMessage(ft.createNext(ke))}_error(ke){this.scheduleMessage(ft.createError(ke)),this.unsubscribe()}_complete(){this.scheduleMessage(ft.createComplete()),this.unsubscribe()}}class xe{constructor(ke,gt){this.notification=ke,this.destination=gt}}},1307:(On,We,ge)=>{"use strict";ge.d(We,{x:()=>A});var M=ge(7393);function A(){return function(st){return st.lift(new J(st))}}class J{constructor(st){this.connectable=st}call(st,tt){const{connectable:ft}=this;ft._refCount++;const oe=new mt(st,ft),z=tt.subscribe(oe);return oe.closed||(oe.connection=ft.connect()),z}}class mt extends M.L{constructor(st,tt){super(st),this.connectable=tt}_unsubscribe(){const{connectable:st}=this;if(!st)return void(this.connection=null);this.connectable=null;const tt=st._refCount;if(tt<=0)return void(this.connection=null);if(st._refCount=tt-1,tt>1)return void(this.connection=null);const{connection:ft}=this,oe=st._connection;this.connection=null,oe&&(!ft||oe===ft)&&oe.unsubscribe()}}},2145:(On,We,ge)=>{"use strict";ge.d(We,{R:()=>A});var M=ge(7393);function A(Le,st){let tt=!1;return arguments.length>=2&&(tt=!0),function(oe){return oe.lift(new J(Le,st,tt))}}class J{constructor(st,tt,ft=!1){this.accumulator=st,this.seed=tt,this.hasSeed=ft}call(st,tt){return tt.subscribe(new mt(st,this.accumulator,this.seed,this.hasSeed))}}class mt extends M.L{constructor(st,tt,ft,oe){super(st),this.accumulator=tt,this._seed=ft,this.hasSeed=oe,this.index=0}get seed(){return this._seed}set seed(st){this.hasSeed=!0,this._seed=st}_next(st){if(this.hasSeed)return this._tryNext(st);this.seed=st,this.destination.next(st)}_tryNext(st){const tt=this.index++;let ft;try{ft=this.accumulator(this.seed,st,tt)}catch(oe){this.destination.error(oe)}this.seed=ft,this.destination.next(ft)}}},3190:(On,We,ge)=>{"use strict";ge.d(We,{w:()=>mt});var M=ge(8002),A=ge(4402),J=ge(5345);function mt(tt,ft){return"function"==typeof ft?oe=>oe.pipe(mt((z,Ie)=>(0,A.D)(tt(z,Ie)).pipe((0,M.U)((xe,we)=>ft(z,xe,Ie,we))))):oe=>oe.lift(new Le(tt))}class Le{constructor(ft){this.project=ft}call(ft,oe){return oe.subscribe(new st(ft,this.project))}}class st extends J.Ds{constructor(ft,oe){super(ft),this.project=oe,this.index=0}_next(ft){let oe;const z=this.index++;try{oe=this.project(ft,z)}catch(Ie){return void this.destination.error(Ie)}this._innerSub(oe)}_innerSub(ft){const oe=this.innerSubscription;oe&&oe.unsubscribe();const z=new J.IY(this),Ie=this.destination;Ie.add(z),this.innerSubscription=(0,J.ft)(ft,z),this.innerSubscription!==z&&Ie.add(this.innerSubscription)}_complete(){const{innerSubscription:ft}=this;(!ft||ft.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(ft){this.destination.next(ft)}}},3342:(On,We,ge)=>{"use strict";ge.d(We,{b:()=>mt});var M=ge(7393);function A(){}var J=ge(9105);function mt(tt,ft,oe){return function(Ie){return Ie.lift(new Le(tt,ft,oe))}}class Le{constructor(ft,oe,z){this.nextOrObserver=ft,this.error=oe,this.complete=z}call(ft,oe){return oe.subscribe(new st(ft,this.nextOrObserver,this.error,this.complete))}}class st extends M.L{constructor(ft,oe,z,Ie){super(ft),this._tapNext=A,this._tapError=A,this._tapComplete=A,this._tapError=z||A,this._tapComplete=Ie||A,(0,J.m)(oe)?(this._context=this,this._tapNext=oe):oe&&(this._context=oe,this._tapNext=oe.next||A,this._tapError=oe.error||A,this._tapComplete=oe.complete||A)}_next(ft){try{this._tapNext.call(this._context,ft)}catch(oe){return void this.destination.error(oe)}this.destination.next(ft)}_error(ft){try{this._tapError.call(this._context,ft)}catch(oe){return void this.destination.error(oe)}this.destination.error(ft)}_complete(){try{this._tapComplete.call(this._context)}catch(ft){return void this.destination.error(ft)}return this.destination.complete()}}},4087:(On,We,ge)=>{"use strict";ge.d(We,{r:()=>J});var M=ge(7574),A=ge(5319);function J(mt,Le){return new M.y(st=>{const tt=new A.w;let ft=0;return tt.add(Le.schedule(function(){ft!==mt.length?(st.next(mt[ft++]),st.closed||tt.add(this.schedule())):st.complete()})),tt})}},6465:(On,We,ge)=>{"use strict";ge.d(We,{o:()=>J});var M=ge(5319);class A extends M.w{constructor(Le,st){super()}schedule(Le,st=0){return this}}class J extends A{constructor(Le,st){super(Le,st),this.scheduler=Le,this.work=st,this.pending=!1}schedule(Le,st=0){if(this.closed)return this;this.state=Le;const tt=this.id,ft=this.scheduler;return null!=tt&&(this.id=this.recycleAsyncId(ft,tt,st)),this.pending=!0,this.delay=st,this.id=this.id||this.requestAsyncId(ft,this.id,st),this}requestAsyncId(Le,st,tt=0){return setInterval(Le.flush.bind(Le,this),tt)}recycleAsyncId(Le,st,tt=0){if(null!==tt&&this.delay===tt&&!1===this.pending)return st;clearInterval(st)}execute(Le,st){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const tt=this._execute(Le,st);if(tt)return tt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Le,st){let ft,tt=!1;try{this.work(Le)}catch(oe){tt=!0,ft=!!oe&&oe||new Error(oe)}if(tt)return this.unsubscribe(),ft}_unsubscribe(){const Le=this.id,st=this.scheduler,tt=st.actions,ft=tt.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ft&&tt.splice(ft,1),null!=Le&&(this.id=this.recycleAsyncId(st,Le,null)),this.delay=null}}},6102:(On,We,ge)=>{"use strict";ge.d(We,{v:()=>A});let M=(()=>{class J{constructor(Le,st=J.now){this.SchedulerAction=Le,this.now=st}schedule(Le,st=0,tt){return new this.SchedulerAction(this,Le).schedule(tt,st)}}return J.now=()=>Date.now(),J})();class A extends M{constructor(mt,Le=M.now){super(mt,()=>A.delegate&&A.delegate!==this?A.delegate.now():Le()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(mt,Le=0,st){return A.delegate&&A.delegate!==this?A.delegate.schedule(mt,Le,st):super.schedule(mt,Le,st)}flush(mt){const{actions:Le}=this;if(this.active)return void Le.push(mt);let st;this.active=!0;do{if(st=mt.execute(mt.state,mt.delay))break}while(mt=Le.shift());if(this.active=!1,st){for(;mt=Le.shift();)mt.unsubscribe();throw st}}}},3637:(On,We,ge)=>{"use strict";ge.d(We,{z:()=>J});var M=ge(6465);const J=new(ge(6102).v)(M.o)},377:(On,We,ge)=>{"use strict";ge.d(We,{hZ:()=>A});const A="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(On,We,ge)=>{"use strict";ge.d(We,{L:()=>M});const M="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(On,We,ge)=>{"use strict";ge.d(We,{b:()=>M});const M="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(On,We,ge)=>{"use strict";ge.d(We,{N:()=>A});const A=(()=>{function J(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return J.prototype=Object.create(Error.prototype),J})()},4449:(On,We,ge)=>{"use strict";function M(A){setTimeout(()=>{throw A},0)}ge.d(We,{z:()=>M})},4487:(On,We,ge)=>{"use strict";function M(A){return A}ge.d(We,{y:()=>M})},9796:(On,We,ge)=>{"use strict";ge.d(We,{k:()=>M});const M=Array.isArray||(A=>A&&"number"==typeof A.length)},9489:(On,We,ge)=>{"use strict";ge.d(We,{z:()=>M});const M=A=>A&&"number"==typeof A.length&&"function"!=typeof A},9105:(On,We,ge)=>{"use strict";function M(A){return"function"==typeof A}ge.d(We,{m:()=>M})},1555:(On,We,ge)=>{"use strict";function M(A){return null!==A&&"object"==typeof A}ge.d(We,{K:()=>M})},4072:(On,We,ge)=>{"use strict";function M(A){return!!A&&"function"!=typeof A.subscribe&&"function"==typeof A.then}ge.d(We,{t:()=>M})},4869:(On,We,ge)=>{"use strict";function M(A){return A&&"function"==typeof A.schedule}ge.d(We,{K:()=>M})},7444:(On,We,ge)=>{"use strict";ge.d(We,{s:()=>Ie});var M=ge(5015),A=ge(4449),mt=ge(377),st=ge(6554),ft=ge(9489),oe=ge(4072),z=ge(1555);const Ie=xe=>{if(xe&&"function"==typeof xe[st.L])return(xe=>we=>{const ke=xe[st.L]();if("function"!=typeof ke.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ke.subscribe(we)})(xe);if((0,ft.z)(xe))return(0,M.V)(xe);if((0,oe.t)(xe))return(xe=>we=>(xe.then(ke=>{we.closed||(we.next(ke),we.complete())},ke=>we.error(ke)).then(null,A.z),we))(xe);if(xe&&"function"==typeof xe[mt.hZ])return(xe=>we=>{const ke=xe[mt.hZ]();for(;;){let gt;try{gt=ke.next()}catch(Me){return we.error(Me),we}if(gt.done){we.complete();break}if(we.next(gt.value),we.closed)break}return"function"==typeof ke.return&&we.add(()=>{ke.return&&ke.return()}),we})(xe);{const ke=`You provided ${(0,z.K)(xe)?"an invalid object":`'${xe}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ke)}}},5015:(On,We,ge)=>{"use strict";ge.d(We,{V:()=>M});const M=A=>J=>{for(let mt=0,Le=A.length;mt<Le&&!J.closed;mt++)J.next(A[mt]);J.complete()}},1651:(On,We,ge)=>{"use strict";var M=ge(8583),A=ge(639);class J extends M.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class mt extends J{static makeCurrent(){(0,M.HT)(new mt)}onAndCancel(E,y,O){return E.addEventListener(y,O,!1),()=>{E.removeEventListener(y,O,!1)}}dispatchEvent(E,y){E.dispatchEvent(y)}remove(E){E.parentNode&&E.parentNode.removeChild(E)}createElement(E,y){return(y=y||this.getDefaultDocument()).createElement(E)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(E){return E.nodeType===Node.ELEMENT_NODE}isShadowRoot(E){return E instanceof DocumentFragment}getGlobalEventTarget(E,y){return"window"===y?window:"document"===y?E:"body"===y?E.body:null}getBaseHref(E){const y=(Le=Le||document.querySelector("base"),Le?Le.getAttribute("href"):null);return null==y?null:function(T){tt=tt||document.createElement("a"),tt.setAttribute("href",T);const E=tt.pathname;return"/"===E.charAt(0)?E:`/${E}`}(y)}resetBaseElement(){Le=null}getUserAgent(){return window.navigator.userAgent}getCookie(E){return(0,M.Mx)(document.cookie,E)}}let tt,Le=null;const oe=new A.OlP("TRANSITION_ID"),Ie=[{provide:A.ip1,useFactory:function(T,E,y){return()=>{y.get(A.CZH).donePromise.then(()=>{const O=(0,M.q)(),H=E.querySelectorAll(`style[ng-transition="${T}"]`);for(let ne=0;ne<H.length;ne++)O.remove(H[ne])})}},deps:[oe,M.K0,A.zs3],multi:!0}];class xe{static init(){(0,A.VLi)(new xe)}addToWindow(E){A.dqk.getAngularTestability=(O,H=!0)=>{const ne=E.findTestabilityInTree(O,H);if(null==ne)throw new Error("Could not find testability for element.");return ne},A.dqk.getAllAngularTestabilities=()=>E.getAllTestabilities(),A.dqk.getAllAngularRootElements=()=>E.getAllRootElements(),A.dqk.frameworkStabilizers||(A.dqk.frameworkStabilizers=[]),A.dqk.frameworkStabilizers.push(O=>{const H=A.dqk.getAllAngularTestabilities();let ne=H.length,De=!1;const Be=function(kt){De=De||kt,ne--,0==ne&&O(De)};H.forEach(function(kt){kt.whenStable(Be)})})}findTestabilityInTree(E,y,O){if(null==y)return null;const H=E.getTestability(y);return null!=H?H:O?(0,M.q)().isShadowRoot(y)?this.findTestabilityInTree(E,y.host,!0):this.findTestabilityInTree(E,y.parentElement,!0):null}}let we=(()=>{class T{build(){return new XMLHttpRequest}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();const K=new A.OlP("EventManagerPlugins");let k=(()=>{class T{constructor(y,O){this._zone=O,this._eventNameToPlugin=new Map,y.forEach(H=>H.manager=this),this._plugins=y.slice().reverse()}addEventListener(y,O,H){return this._findPluginFor(O).addEventListener(y,O,H)}addGlobalEventListener(y,O,H){return this._findPluginFor(O).addGlobalEventListener(y,O,H)}getZone(){return this._zone}_findPluginFor(y){const O=this._eventNameToPlugin.get(y);if(O)return O;const H=this._plugins;for(let ne=0;ne<H.length;ne++){const De=H[ne];if(De.supports(y))return this._eventNameToPlugin.set(y,De),De}throw new Error(`No event manager plugin found for event ${y}`)}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(K),A.LFG(A.R0b))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();class ae{constructor(E){this._doc=E}addGlobalEventListener(E,y,O){const H=(0,M.q)().getGlobalEventTarget(this._doc,E);if(!H)throw new Error(`Unsupported event target ${H} for event ${y}`);return this.addEventListener(H,y,O)}}let ue=(()=>{class T{constructor(){this._stylesSet=new Set}addStyles(y){const O=new Set;y.forEach(H=>{this._stylesSet.has(H)||(this._stylesSet.add(H),O.add(H))}),this.onStylesAdded(O)}onStylesAdded(y){}getAllStyles(){return Array.from(this._stylesSet)}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})(),Gt=(()=>{class T extends ue{constructor(y){super(),this._doc=y,this._hostNodes=new Map,this._hostNodes.set(y.head,[])}_addStylesToHost(y,O,H){y.forEach(ne=>{const De=this._doc.createElement("style");De.textContent=ne,H.push(O.appendChild(De))})}addHost(y){const O=[];this._addStylesToHost(this._stylesSet,y,O),this._hostNodes.set(y,O)}removeHost(y){const O=this._hostNodes.get(y);O&&O.forEach(ve),this._hostNodes.delete(y)}onStylesAdded(y){this._hostNodes.forEach((O,H)=>{this._addStylesToHost(y,H,O)})}ngOnDestroy(){this._hostNodes.forEach(y=>y.forEach(ve))}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(M.K0))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();function ve(T){(0,M.q)().remove(T)}const ot={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Vt=/%COMP%/g;function xt(T,E,y){for(let O=0;O<E.length;O++){let H=E[O];Array.isArray(H)?xt(T,H,y):(H=H.replace(Vt,T),y.push(H))}return y}function an(T){return E=>{if("__ngUnwrap__"===E)return T;!1===T(E)&&(E.preventDefault(),E.returnValue=!1)}}let pt=(()=>{class T{constructor(y,O,H){this.eventManager=y,this.sharedStylesHost=O,this.appId=H,this.rendererByCompId=new Map,this.defaultRenderer=new Kt(y)}createRenderer(y,O){if(!y||!O)return this.defaultRenderer;switch(O.encapsulation){case A.ifc.Emulated:{let H=this.rendererByCompId.get(O.id);return H||(H=new An(this.eventManager,this.sharedStylesHost,O,this.appId),this.rendererByCompId.set(O.id,H)),H.applyToHost(y),H}case 1:case A.ifc.ShadowDom:return new sn(this.eventManager,this.sharedStylesHost,y,O);default:if(!this.rendererByCompId.has(O.id)){const H=xt(O.id,O.styles,[]);this.sharedStylesHost.addStyles(H),this.rendererByCompId.set(O.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(k),A.LFG(Gt),A.LFG(A.AFp))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();class Kt{constructor(E){this.eventManager=E,this.data=Object.create(null)}destroy(){}createElement(E,y){return y?document.createElementNS(ot[y]||y,E):document.createElement(E)}createComment(E){return document.createComment(E)}createText(E){return document.createTextNode(E)}appendChild(E,y){E.appendChild(y)}insertBefore(E,y,O){E&&E.insertBefore(y,O)}removeChild(E,y){E&&E.removeChild(y)}selectRootElement(E,y){let O="string"==typeof E?document.querySelector(E):E;if(!O)throw new Error(`The selector "${E}" did not match any elements`);return y||(O.textContent=""),O}parentNode(E){return E.parentNode}nextSibling(E){return E.nextSibling}setAttribute(E,y,O,H){if(H){y=H+":"+y;const ne=ot[H];ne?E.setAttributeNS(ne,y,O):E.setAttribute(y,O)}else E.setAttribute(y,O)}removeAttribute(E,y,O){if(O){const H=ot[O];H?E.removeAttributeNS(H,y):E.removeAttribute(`${O}:${y}`)}else E.removeAttribute(y)}addClass(E,y){E.classList.add(y)}removeClass(E,y){E.classList.remove(y)}setStyle(E,y,O,H){H&(A.JOm.DashCase|A.JOm.Important)?E.style.setProperty(y,O,H&A.JOm.Important?"important":""):E.style[y]=O}removeStyle(E,y,O){O&A.JOm.DashCase?E.style.removeProperty(y):E.style[y]=""}setProperty(E,y,O){E[y]=O}setValue(E,y){E.nodeValue=y}listen(E,y,O){return"string"==typeof E?this.eventManager.addGlobalEventListener(E,y,an(O)):this.eventManager.addEventListener(E,y,an(O))}}class An extends Kt{constructor(E,y,O,H){super(E),this.component=O;const ne=xt(H+"-"+O.id,O.styles,[]);y.addStyles(ne),this.contentAttr="_ngcontent-%COMP%".replace(Vt,H+"-"+O.id),this.hostAttr="_nghost-%COMP%".replace(Vt,H+"-"+O.id)}applyToHost(E){super.setAttribute(E,this.hostAttr,"")}createElement(E,y){const O=super.createElement(E,y);return super.setAttribute(O,this.contentAttr,""),O}}class sn extends Kt{constructor(E,y,O,H){super(E),this.sharedStylesHost=y,this.hostEl=O,this.shadowRoot=O.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ne=xt(H.id,H.styles,[]);for(let De=0;De<ne.length;De++){const Be=document.createElement("style");Be.textContent=ne[De],this.shadowRoot.appendChild(Be)}}nodeOrShadowRoot(E){return E===this.hostEl?this.shadowRoot:E}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(E,y){return super.appendChild(this.nodeOrShadowRoot(E),y)}insertBefore(E,y,O){return super.insertBefore(this.nodeOrShadowRoot(E),y,O)}removeChild(E,y){return super.removeChild(this.nodeOrShadowRoot(E),y)}parentNode(E){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(E)))}}let Vn=(()=>{class T extends ae{constructor(y){super(y)}supports(y){return!0}addEventListener(y,O,H){return y.addEventListener(O,H,!1),()=>this.removeEventListener(y,O,H)}removeEventListener(y,O,H){return y.removeEventListener(O,H)}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(M.K0))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();const nt=["alt","control","meta","shift"],Ve={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cn={alt:T=>T.altKey,control:T=>T.ctrlKey,meta:T=>T.metaKey,shift:T=>T.shiftKey};let pn=(()=>{class T extends ae{constructor(y){super(y)}supports(y){return null!=T.parseEventName(y)}addEventListener(y,O,H){const ne=T.parseEventName(O),De=T.eventCallback(ne.fullKey,H,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,M.q)().onAndCancel(y,ne.domEventName,De))}static parseEventName(y){const O=y.toLowerCase().split("."),H=O.shift();if(0===O.length||"keydown"!==H&&"keyup"!==H)return null;const ne=T._normalizeKey(O.pop());let De="";if(nt.forEach(kt=>{const xn=O.indexOf(kt);xn>-1&&(O.splice(xn,1),De+=kt+".")}),De+=ne,0!=O.length||0===ne.length)return null;const Be={};return Be.domEventName=H,Be.fullKey=De,Be}static getEventFullKey(y){let O="",H=function(T){let E=T.key;if(null==E){if(E=T.keyIdentifier,null==E)return"Unidentified";E.startsWith("U+")&&(E=String.fromCharCode(parseInt(E.substring(2),16)),3===T.location&&wt.hasOwnProperty(E)&&(E=wt[E]))}return Ve[E]||E}(y);return H=H.toLowerCase()," "===H?H="space":"."===H&&(H="dot"),nt.forEach(ne=>{ne!=H&&Cn[ne](y)&&(O+=ne+".")}),O+=H,O}static eventCallback(y,O,H){return ne=>{T.getEventFullKey(ne)===y&&H.runGuarded(()=>O(ne))}}static _normalizeKey(y){switch(y){case"esc":return"escape";default:return y}}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(M.K0))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();const ht=(0,A.eFA)(A._c5,"browser",[{provide:A.Lbi,useValue:M.bD},{provide:A.g9A,useValue:function(){mt.makeCurrent(),xe.init()},multi:!0},{provide:M.K0,useFactory:function(){return(0,A.RDi)(document),document},deps:[]}]),bt=[[],{provide:A.zSh,useValue:"root"},{provide:A.qLn,useFactory:function(){return new A.qLn},deps:[]},{provide:K,useClass:Vn,multi:!0,deps:[M.K0,A.R0b,A.Lbi]},{provide:K,useClass:pn,multi:!0,deps:[M.K0]},[],{provide:pt,useClass:pt,deps:[k,Gt,A.AFp]},{provide:A.FYo,useExisting:pt},{provide:ue,useExisting:Gt},{provide:Gt,useClass:Gt,deps:[M.K0]},{provide:A.dDg,useClass:A.dDg,deps:[A.R0b]},{provide:k,useClass:k,deps:[K,A.R0b]},{provide:M.JF,useClass:we,deps:[]},[]];let Mt=(()=>{class T{constructor(y){if(y)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(y){return{ngModule:T,providers:[{provide:A.AFp,useValue:y.appId},{provide:oe,useExisting:A.AFp},Ie]}}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(T,12))},T.\u0275mod=A.oAB({type:T}),T.\u0275inj=A.cJS({providers:bt,imports:[M.ez,A.hGG]}),T})();"undefined"!=typeof window&&window;var Ye=ge(4402),St=ge(5917),Yt=ge(7709),kn=ge(7971);class cn extends Yt.xQ{constructor(E){super(),this._value=E}get value(){return this.getValue()}_subscribe(E){const y=super._subscribe(E);return y&&!y.closed&&E.next(this._value),y}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new kn.N;return this._value}next(E){super.next(this._value=E)}}var gn=ge(4869),hr=ge(9796),vn=ge(7393);class wi extends vn.L{notifyNext(E,y,O,H,ne){this.destination.next(y)}notifyError(E,y){this.destination.error(E)}notifyComplete(E){this.destination.complete()}}class qn extends vn.L{constructor(E,y,O){super(),this.parent=E,this.outerValue=y,this.outerIndex=O,this.index=0}_next(E){this.parent.notifyNext(this.outerValue,E,this.outerIndex,this.index++,this)}_error(E){this.parent.notifyError(E,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ko=ge(7444),ri=ge(7574);function pi(T,E,y,O,H=new qn(T,y,O)){if(!H.closed)return E instanceof ri.y?E.subscribe(H):(0,ko.s)(E)(H)}var Pi=ge(6693);const uo={};class Fr{constructor(E){this.resultSelector=E}call(E,y){return y.subscribe(new mo(E,this.resultSelector))}}class mo extends wi{constructor(E,y){super(E),this.resultSelector=y,this.active=0,this.values=[],this.observables=[]}_next(E){this.values.push(uo),this.observables.push(E)}_complete(){const E=this.observables,y=E.length;if(0===y)this.destination.complete();else{this.active=y,this.toRespond=y;for(let O=0;O<y;O++)this.add(pi(this,E[O],void 0,O))}}notifyComplete(E){0==(this.active-=1)&&this.destination.complete()}notifyNext(E,y,O){const H=this.values,De=this.toRespond?H[O]===uo?--this.toRespond:this.toRespond:0;H[O]=y,0===De&&(this.resultSelector?this._tryResultSelector(H):this.destination.next(H.slice()))}_tryResultSelector(E){let y;try{y=this.resultSelector.apply(this,E)}catch(O){return void this.destination.error(O)}this.destination.next(y)}}const Mi=(()=>{function T(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return T.prototype=Object.create(Error.prototype),T})();var yo=ge(3282);function Ki(...T){return(0,yo.J)(1)((0,St.of)(...T))}var ii=ge(9193);function Pr(T){return new ri.y(E=>{let y;try{y=T()}catch(H){return void E.error(H)}return(y?(0,Ye.D)(y):(0,ii.c)()).subscribe(E)})}var ui=ge(2441),Zn=ge(8002),Un=ge(3190);const Qi=(()=>{function T(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return T.prototype=Object.create(Error.prototype),T})();function Cr(T){return E=>0===T?(0,ii.c)():E.lift(new gi(T))}class gi{constructor(E){if(this.total=E,this.total<0)throw new Qi}call(E,y){return y.subscribe(new Wo(E,this.total))}}class Wo extends vn.L{constructor(E,y){super(E),this.total=y,this.count=0}_next(E){const y=this.total,O=++this.count;O<=y&&(this.destination.next(E),O===y&&(this.destination.complete(),this.unsubscribe()))}}var Ln=ge(2145),Xn=ge(5435),Xo=ge(5345);function Gi(T){return function(y){const O=new Do(T),H=y.lift(O);return O.caught=H}}class Do{constructor(E){this.selector=E}call(E,y){return y.subscribe(new eo(E,this.selector,this.caught))}}class eo extends Xo.Ds{constructor(E,y,O){super(E),this.selector=y,this.caught=O}error(E){if(!this.isStopped){let y;try{y=this.selector(E,this.caught)}catch(ne){return void super.error(ne)}this._unsubscribeAndRecycle();const O=new Xo.IY(this);this.add(O);const H=(0,Xo.ft)(y,O);H!==O&&this.add(H)}}}var oi=ge(9773);function rr(T,E){return(0,oi.zg)(T,E,1)}function Wi(T){return function(y){return 0===T?(0,ii.c)():y.lift(new to(T))}}class to{constructor(E){if(this.total=E,this.total<0)throw new Qi}call(E,y){return y.subscribe(new Yi(E,this.total))}}class Yi extends vn.L{constructor(E,y){super(E),this.total=y,this.ring=new Array,this.count=0}_next(E){const y=this.ring,O=this.total,H=this.count++;y.length<O?y.push(E):y[H%O]=E}_complete(){const E=this.destination;let y=this.count;if(y>0){const O=this.count>=this.total?this.total:this.count,H=this.ring;for(let ne=0;ne<O;ne++){const De=y++%O;E.next(H[De])}}E.complete()}}function Fo(T=Ys){return E=>E.lift(new Lo(T))}class Lo{constructor(E){this.errorFactory=E}call(E,y){return y.subscribe(new fs(E,this.errorFactory))}}class fs extends vn.L{constructor(E,y){super(E),this.errorFactory=y,this.hasValue=!1}_next(E){this.hasValue=!0,this.destination.next(E)}_complete(){if(this.hasValue)return this.destination.complete();{let E;try{E=this.errorFactory()}catch(y){E=y}this.destination.error(E)}}}function Ys(){return new Mi}function $r(T=null){return E=>E.lift(new qo(T))}class qo{constructor(E){this.defaultValue=E}call(E,y){return y.subscribe(new co(E,this.defaultValue))}}class co extends vn.L{constructor(E,y){super(E),this.defaultValue=y,this.isEmpty=!0}_next(E){this.isEmpty=!1,this.destination.next(E)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Zo=ge(4487);function Q(T,E){const y=arguments.length>=2;return O=>O.pipe(T?(0,Xn.h)((H,ne)=>T(H,ne,O)):Zo.y,Cr(1),y?$r(E):Fo(()=>new Mi))}var G=ge(3342),he=ge(1307),Ae=ge(5319);class it{constructor(E){this.callback=E}call(E,y){return y.subscribe(new Pt(E,this.callback))}}class Pt extends vn.L{constructor(E,y){super(E),this.add(new Ae.w(y))}}class qt{constructor(E,y){this.id=E,this.url=y}}class $t extends qt{constructor(E,y,O="imperative",H=null){super(E,y),this.navigationTrigger=O,this.restoredState=H}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ln extends qt{constructor(E,y,O){super(E,y),this.urlAfterRedirects=O}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wn extends qt{constructor(E,y,O){super(E,y),this.reason=O}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class q extends qt{constructor(E,y,O){super(E,y),this.error=O}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class te extends qt{constructor(E,y,O,H){super(E,y),this.urlAfterRedirects=O,this.state=H}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $ extends qt{constructor(E,y,O,H){super(E,y),this.urlAfterRedirects=O,this.state=H}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fe extends qt{constructor(E,y,O,H,ne){super(E,y),this.urlAfterRedirects=O,this.state=H,this.shouldActivate=ne}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class je extends qt{constructor(E,y,O,H){super(E,y),this.urlAfterRedirects=O,this.state=H}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dt extends qt{constructor(E,y,O,H){super(E,y),this.urlAfterRedirects=O,this.state=H}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xt{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bn{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yn{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wr{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lr{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cr{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gn{constructor(E,y,O){this.routerEvent=E,this.position=y,this.anchor=O}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Sn="primary";class Ei{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Ii(T){return new Ei(T)}const ti="ngNavigationCancelingError";function hs(T){const E=Error("NavigationCancelingError: "+T);return E[ti]=!0,E}function dr(T,E,y){const O=y.path.split("/");if(O.length>T.length||"full"===y.pathMatch&&(E.hasChildren()||O.length<T.length))return null;const H={};for(let ne=0;ne<O.length;ne++){const De=O[ne],Be=T[ne];if(De.startsWith(":"))H[De.substring(1)]=Be;else if(De!==Be.path)return null}return{consumed:T.slice(0,O.length),posParams:H}}function zr(T,E){const y=T?Object.keys(T):void 0,O=E?Object.keys(E):void 0;if(!y||!O||y.length!=O.length)return!1;let H;for(let ne=0;ne<y.length;ne++)if(H=y[ne],!Ao(T[H],E[H]))return!1;return!0}function Ao(T,E){if(Array.isArray(T)&&Array.isArray(E)){if(T.length!==E.length)return!1;const y=[...T].sort(),O=[...E].sort();return y.every((H,ne)=>O[ne]===H)}return T===E}function ha(T){return Array.prototype.concat.apply([],T)}function Bi(T){return T.length>0?T[T.length-1]:null}function Xr(T,E){for(const y in T)T.hasOwnProperty(y)&&E(T[y],y)}function Bn(T){return(0,A.CqO)(T)?T:(0,A.QGY)(T)?(0,Ye.D)(Promise.resolve(T)):(0,St.of)(T)}const Jo={exact:function da(T,E,y){if(!wo(T.segments,E.segments)||!_o(T.segments,E.segments,y)||T.numberOfChildren!==E.numberOfChildren)return!1;for(const O in E.children)if(!T.children[O]||!da(T.children[O],E.children[O],y))return!1;return!0},subset:Zt},no={exact:function(T,E){return zr(T,E)},subset:function(T,E){return Object.keys(E).length<=Object.keys(T).length&&Object.keys(E).every(y=>Ao(T[y],E[y]))},ignored:()=>!0};function Di(T,E,y){return Jo[y.paths](T.root,E.root,y.matrixParams)&&no[y.queryParams](T.queryParams,E.queryParams)&&!("exact"===y.fragment&&T.fragment!==E.fragment)}function Zt(T,E,y){return br(T,E,E.segments,y)}function br(T,E,y,O){if(T.segments.length>y.length){const H=T.segments.slice(0,y.length);return!(!wo(H,y)||E.hasChildren()||!_o(H,y,O))}if(T.segments.length===y.length){if(!wo(T.segments,y)||!_o(T.segments,y,O))return!1;for(const H in E.children)if(!T.children[H]||!Zt(T.children[H],E.children[H],O))return!1;return!0}{const H=y.slice(0,T.segments.length),ne=y.slice(T.segments.length);return!!(wo(T.segments,H)&&_o(T.segments,H,O)&&T.children[Sn])&&br(T.children[Sn],E,ne,O)}}function _o(T,E,y){return E.every((O,H)=>no[y](T[H].parameters,O.parameters))}class Lr{constructor(E,y,O){this.root=E,this.queryParams=y,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ii(this.queryParams)),this._queryParamMap}toString(){return Xs.serialize(this)}}class $n{constructor(E,y){this.segments=E,this.children=y,this.parent=null,Xr(y,(O,H)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $o(this)}}class jr{constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Ii(this.parameters)),this._parameterMap}toString(){return Us(this)}}function wo(T,E){return T.length===E.length&&T.every((y,O)=>y.path===E[O].path)}class es{}class pa{parse(E){const y=new Ma(E);return new Lr(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){var T;return`${`/${Ai(E.root,!0)}`}${function(T){const E=Object.keys(T).map(y=>{const O=T[y];return Array.isArray(O)?O.map(H=>`${bo(y)}=${bo(H)}`).join("&"):`${bo(y)}=${bo(O)}`}).filter(y=>!!y);return E.length?`?${E.join("&")}`:""}(E.queryParams)}${"string"==typeof E.fragment?`#${T=E.fragment,encodeURI(T)}`:""}`}}const Xs=new pa;function $o(T){return T.segments.map(E=>Us(E)).join("/")}function Ai(T,E){if(!T.hasChildren())return $o(T);if(E){const y=T.children[Sn]?Ai(T.children[Sn],!1):"",O=[];return Xr(T.children,(H,ne)=>{ne!==Sn&&O.push(`${ne}:${Ai(H,!1)}`)}),O.length>0?`${y}(${O.join("//")})`:y}{const y=function(T,E){let y=[];return Xr(T.children,(O,H)=>{H===Sn&&(y=y.concat(E(O,H)))}),Xr(T.children,(O,H)=>{H!==Sn&&(y=y.concat(E(O,H)))}),y}(T,(O,H)=>H===Sn?[Ai(T.children[Sn],!1)]:[`${H}:${Ai(O,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[Sn]?`${$o(T)}/${y[0]}`:`${$o(T)}/(${y.join("//")})`}}function ki(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bo(T){return ki(T).replace(/%3B/gi,";")}function Fi(T){return ki(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zo(T){return decodeURIComponent(T)}function No(T){return zo(T.replace(/\+/g,"%20"))}function Us(T){return`${Fi(T.path)}${function(T){return Object.keys(T).map(E=>`;${Fi(E)}=${Fi(T[E])}`).join("")}(T.parameters)}`}const dn=/^[^\/()?;=#]+/;function Hr(T){const E=T.match(dn);return E?E[0]:""}const Zs=/^[^=?&#]+/,Ko=/^[^?&#]+/;class Ma{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $n([],{}):new $n([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(O[Sn]=new $n(E,y)),O}parseSegment(){const E=Hr(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new jr(zo(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=Hr(this.remaining);if(!y)return;this.capture(y);let O="";if(this.consumeOptional("=")){const H=Hr(this.remaining);H&&(O=H,this.capture(O))}E[zo(y)]=zo(O)}parseQueryParam(E){const y=function(T){const E=T.match(Zs);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let O="";if(this.consumeOptional("=")){const De=function(T){const E=T.match(Ko);return E?E[0]:""}(this.remaining);De&&(O=De,this.capture(O))}const H=No(y),ne=No(O);if(E.hasOwnProperty(H)){let De=E[H];Array.isArray(De)||(De=[De],E[H]=De),De.push(ne)}else E[H]=ne}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=Hr(this.remaining),H=this.remaining[O.length];if("/"!==H&&")"!==H&&";"!==H)throw new Error(`Cannot parse url '${this.url}'`);let ne;O.indexOf(":")>-1?(ne=O.substr(0,O.indexOf(":")),this.capture(ne),this.capture(":")):E&&(ne=Sn);const De=this.parseChildren();y[ne]=1===Object.keys(De).length?De[Sn]:new $n([],De),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class ts{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=ci(E,this._root);return y?y.children.map(O=>O.value):[]}firstChild(E){const y=ci(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=m(E,this._root);return y.length<2?[]:y[y.length-2].children.map(H=>H.value).filter(H=>H!==E)}pathFromRoot(E){return m(E,this._root).map(y=>y.value)}}function ci(T,E){if(T===E.value)return E;for(const y of E.children){const O=ci(T,y);if(O)return O}return null}function m(T,E){if(T===E.value)return[E];for(const y of E.children){const O=m(T,y);if(O.length)return O.unshift(E),O}return[]}class L{constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function X(T){const E={};return T&&T.children.forEach(y=>E[y.value.outlet]=y),E}class _e extends ts{constructor(E,y){super(E),this.snapshot=y,Eo(this,E)}toString(){return this.snapshot.toString()}}function $e(T,E){const y=function(T,E){const De=new Ri([],{},{},"",{},Sn,E,null,T.root,-1,{});return new fo("",new L(De,[]))}(T,E),O=new cn([new jr("",{})]),H=new cn({}),ne=new cn({}),De=new cn({}),Be=new cn(""),kt=new fn(O,H,De,Be,ne,Sn,E,y.root);return kt.snapshot=y.root,new _e(new L(kt,[]),y)}class fn{constructor(E,y,O,H,ne,De,Be,kt){this.url=E,this.params=y,this.queryParams=O,this.fragment=H,this.data=ne,this.outlet=De,this.component=Be,this._futureSnapshot=kt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Zn.U)(E=>Ii(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Zn.U)(E=>Ii(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xr(T,E="emptyOnly"){const y=T.pathFromRoot;let O=0;if("always"!==E)for(O=y.length-1;O>=1;){const H=y[O],ne=y[O-1];if(H.routeConfig&&""===H.routeConfig.path)O--;else{if(ne.component)break;O--}}return function(T){return T.reduce((E,y)=>({params:Object.assign(Object.assign({},E.params),y.params),data:Object.assign(Object.assign({},E.data),y.data),resolve:Object.assign(Object.assign({},E.resolve),y._resolvedData)}),{params:{},data:{},resolve:{}})}(y.slice(O))}class Ri{constructor(E,y,O,H,ne,De,Be,kt,xn,Wn,gr){this.url=E,this.params=y,this.queryParams=O,this.fragment=H,this.data=ne,this.outlet=De,this.component=Be,this.routeConfig=kt,this._urlSegment=xn,this._lastPathIndex=Wn,this._resolve=gr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ii(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ii(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fo extends ts{constructor(E,y){super(y),this.url=E,Eo(this,y)}toString(){return Ts(this._root)}}function Eo(T,E){E.value._routerState=T,E.children.forEach(y=>Eo(T,y))}function Ts(T){const E=T.children.length>0?` { ${T.children.map(Ts).join(", ")} } `:"";return`${T.value}${E}`}function Oo(T){if(T.snapshot){const E=T.snapshot,y=T._futureSnapshot;T.snapshot=y,zr(E.queryParams,y.queryParams)||T.queryParams.next(y.queryParams),E.fragment!==y.fragment&&T.fragment.next(y.fragment),zr(E.params,y.params)||T.params.next(y.params),function(T,E){if(T.length!==E.length)return!1;for(let y=0;y<T.length;++y)if(!zr(T[y],E[y]))return!1;return!0}(E.url,y.url)||T.url.next(y.url),zr(E.data,y.data)||T.data.next(y.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function Zr(T,E){return zr(T.params,E.params)&&function(T,E){return wo(T,E)&&T.every((y,O)=>zr(y.parameters,E[O].parameters))}(T.url,E.url)&&!(!T.parent!=!E.parent)&&(!T.parent||Zr(T.parent,E.parent))}function ps(T,E,y){if(y&&T.shouldReuseRoute(E.value,y.value.snapshot)){const O=y.value;O._futureSnapshot=E.value;const H=function(T,E,y){return E.children.map(O=>{for(const H of y.children)if(T.shouldReuseRoute(O.value,H.value.snapshot))return ps(T,O,H);return ps(T,O)})}(T,E,y);return new L(O,H)}{if(T.shouldAttach(E.value)){const ne=T.retrieve(E.value);if(null!==ne){const De=ne.route;return wu(E,De),De}}const O=function(T){return new fn(new cn(T.url),new cn(T.params),new cn(T.queryParams),new cn(T.fragment),new cn(T.data),T.outlet,T.component,T)}(E.value),H=E.children.map(ne=>ps(T,ne));return new L(O,H)}}function wu(T,E){if(T.value.routeConfig!==E.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(T.children.length!==E.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");E.value._futureSnapshot=T.value;for(let y=0;y<T.children.length;++y)wu(T.children[y],E.children[y])}function ka(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function Ds(T){return"object"==typeof T&&null!=T&&T.outlets}function Ci(T,E,y,O,H){let ne={};return O&&Xr(O,(De,Be)=>{ne[Be]=Array.isArray(De)?De.map(kt=>`${kt}`):`${De}`}),new Lr(y.root===T?E:li(y.root,T,E),ne,H)}function li(T,E,y){const O={};return Xr(T.children,(H,ne)=>{O[ne]=H===E?y:li(H,E,y)}),new $n(T.segments,O)}class ga{constructor(E,y,O){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=O,E&&O.length>0&&ka(O[0]))throw new Error("Root segment cannot have matrix parameters");const H=O.find(Ds);if(H&&H!==Bi(O))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class v{constructor(E,y,O){this.segmentGroup=E,this.processChildren=y,this.index=O}}function N(T,E,y){if(T||(T=new $n([],{})),0===T.segments.length&&T.hasChildren())return F(T,E,y);const O=function(T,E,y){let O=0,H=E;const ne={match:!1,pathIndex:0,commandIndex:0};for(;H<T.segments.length;){if(O>=y.length)return ne;const De=T.segments[H],Be=y[O];if(Ds(Be))break;const kt=`${Be}`,xn=O<y.length-1?y[O+1]:null;if(H>0&&void 0===kt)break;if(kt&&xn&&"object"==typeof xn&&void 0===xn.outlets){if(!lt(kt,xn,De))return ne;O+=2}else{if(!lt(kt,{},De))return ne;O++}H++}return{match:!0,pathIndex:H,commandIndex:O}}(T,E,y),H=y.slice(O.commandIndex);if(O.match&&O.pathIndex<T.segments.length){const ne=new $n(T.segments.slice(0,O.pathIndex),{});return ne.children[Sn]=new $n(T.segments.slice(O.pathIndex),T.children),F(ne,0,H)}return O.match&&0===H.length?new $n(T.segments,{}):O.match&&!T.hasChildren()?ce(T,E,y):O.match?F(T,0,H):ce(T,E,y)}function F(T,E,y){if(0===y.length)return new $n(T.segments,{});{const O=function(T){return Ds(T[0])?T[0].outlets:{[Sn]:T}}(y),H={};return Xr(O,(ne,De)=>{"string"==typeof ne&&(ne=[ne]),null!==ne&&(H[De]=N(T.children[De],E,ne))}),Xr(T.children,(ne,De)=>{void 0===O[De]&&(H[De]=ne)}),new $n(T.segments,H)}}function ce(T,E,y){const O=T.segments.slice(0,E);let H=0;for(;H<y.length;){const ne=y[H];if(Ds(ne)){const kt=Ee(ne.outlets);return new $n(O,kt)}if(0===H&&ka(y[0])){O.push(new jr(T.segments[E].path,be(y[0]))),H++;continue}const De=Ds(ne)?ne.outlets[Sn]:`${ne}`,Be=H<y.length-1?y[H+1]:null;De&&Be&&ka(Be)?(O.push(new jr(De,be(Be))),H+=2):(O.push(new jr(De,{})),H++)}return new $n(O,{})}function Ee(T){const E={};return Xr(T,(y,O)=>{"string"==typeof y&&(y=[y]),null!==y&&(E[O]=ce(new $n([],{}),0,y))}),E}function be(T){const E={};return Xr(T,(y,O)=>E[O]=`${y}`),E}function lt(T,E,y){return T==y.path&&zr(E,y.parameters)}class jt{constructor(E,y,O,H){this.routeReuseStrategy=E,this.futureState=y,this.currState=O,this.forwardEvent=H}activate(E){const y=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,O,E),Oo(this.futureState.root),this.activateChildRoutes(y,O,E)}deactivateChildRoutes(E,y,O){const H=X(y);E.children.forEach(ne=>{const De=ne.value.outlet;this.deactivateRoutes(ne,H[De],O),delete H[De]}),Xr(H,(ne,De)=>{this.deactivateRouteAndItsChildren(ne,O)})}deactivateRoutes(E,y,O){const H=E.value,ne=y?y.value:null;if(H===ne)if(H.component){const De=O.getContext(H.outlet);De&&this.deactivateChildRoutes(E,y,De.children)}else this.deactivateChildRoutes(E,y,O);else ne&&this.deactivateRouteAndItsChildren(y,O)}deactivateRouteAndItsChildren(E,y){this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const O=y.getContext(E.value.outlet);if(O&&O.outlet){const H=O.outlet.detach(),ne=O.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:H,route:E,contexts:ne})}}deactivateRouteAndOutlet(E,y){const O=y.getContext(E.value.outlet),H=O&&E.value.component?O.children:y,ne=X(E);for(const De of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[De],H);O&&O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated(),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(E,y,O){const H=X(y);E.children.forEach(ne=>{this.activateRoutes(ne,H[ne.value.outlet],O),this.forwardEvent(new cr(ne.value.snapshot))}),E.children.length&&this.forwardEvent(new wr(E.value.snapshot))}activateRoutes(E,y,O){const H=E.value,ne=y?y.value:null;if(Oo(H),H===ne)if(H.component){const De=O.getOrCreateContext(H.outlet);this.activateChildRoutes(E,y,De.children)}else this.activateChildRoutes(E,y,O);else if(H.component){const De=O.getOrCreateContext(H.outlet);if(this.routeReuseStrategy.shouldAttach(H.snapshot)){const Be=this.routeReuseStrategy.retrieve(H.snapshot);this.routeReuseStrategy.store(H.snapshot,null),De.children.onOutletReAttached(Be.contexts),De.attachRef=Be.componentRef,De.route=Be.route.value,De.outlet&&De.outlet.attach(Be.componentRef,Be.route.value),un(Be.route)}else{const Be=function(T){for(let E=T.parent;E;E=E.parent){const y=E.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig;if(y&&y.component)return null}return null}(H.snapshot),kt=Be?Be.module.componentFactoryResolver:null;De.attachRef=null,De.route=H,De.resolver=kt,De.outlet&&De.outlet.activateWith(H,kt),this.activateChildRoutes(E,null,De.children)}}else this.activateChildRoutes(E,null,O)}}function un(T){Oo(T.value),T.children.forEach(un)}class Dn{constructor(E,y){this.routes=E,this.module=y}}function pr(T){return"function"==typeof T}function yi(T){return T instanceof Lr}const ho=Symbol("INITIAL_VALUE");function ea(){return(0,Un.w)(T=>function(...T){let E,y;return(0,gn.K)(T[T.length-1])&&(y=T.pop()),"function"==typeof T[T.length-1]&&(E=T.pop()),1===T.length&&(0,hr.k)(T[0])&&(T=T[0]),(0,Pi.n)(T,y).lift(new Fr(E))}(T.map(E=>E.pipe(Cr(1),function(...T){const E=T[T.length-1];return(0,gn.K)(E)?(T.pop(),y=>Ki(T,y,E)):y=>Ki(T,y)}(ho)))).pipe((0,Ln.R)((E,y)=>{let O=!1;return y.reduce((H,ne,De)=>H!==ho?H:(ne===ho&&(O=!0),O||!1!==ne&&De!==y.length-1&&!yi(ne)?H:ne),E)},ho),(0,Xn.h)(E=>E!==ho),(0,Zn.U)(E=>yi(E)?E:!0===E),Cr(1)))}let Ec=(()=>{class T{}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=A.Xpm({type:T,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,O){1&y&&A._UZ(0,"router-outlet")},directives:function(){return[Ns]},encapsulation:2}),T})();function Yu(T,E=""){for(let y=0;y<T.length;y++){const O=T[y];Xu(O,Ic(E,O))}}function Xu(T,E){T.children&&Yu(T.children,E)}function Ic(T,E){return E?T||E.path?T&&!E.path?`${T}/`:!T&&E.path?E.path:`${T}/${E.path}`:"":T}function Vs(T){const E=T.children&&T.children.map(Vs),y=E?Object.assign(Object.assign({},T),{children:E}):Object.assign({},T);return!y.component&&(E||y.loadChildren)&&y.outlet&&y.outlet!==Sn&&(y.component=Ec),y}function qi(T){return T.outlet||Sn}function va(T,E){const y=T.filter(O=>qi(O)===E);return y.push(...T.filter(O=>qi(O)!==E)),y}const Cc={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ma(T,E,y){var O;if(""===E.path)return"full"===E.pathMatch&&(T.hasChildren()||y.length>0)?Object.assign({},Cc):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ne=(E.matcher||dr)(y,T,E);if(!ne)return Object.assign({},Cc);const De={};Xr(ne.posParams,(kt,xn)=>{De[xn]=kt.path});const Be=ne.consumed.length>0?Object.assign(Object.assign({},De),ne.consumed[ne.consumed.length-1].parameters):De;return{matched:!0,consumedSegments:ne.consumed,lastChild:ne.consumed.length,parameters:Be,positionalParamSegments:null!==(O=ne.posParams)&&void 0!==O?O:{}}}function bu(T,E,y,O,H="corrected"){if(y.length>0&&function(T,E,y){return y.some(O=>Bs(T,E,O)&&qi(O)!==Sn)}(T,y,O)){const De=new $n(E,function(T,E,y,O){const H={};H[Sn]=O,O._sourceSegment=T,O._segmentIndexShift=E.length;for(const ne of y)if(""===ne.path&&qi(ne)!==Sn){const De=new $n([],{});De._sourceSegment=T,De._segmentIndexShift=E.length,H[qi(ne)]=De}return H}(T,E,O,new $n(y,T.children)));return De._sourceSegment=T,De._segmentIndexShift=E.length,{segmentGroup:De,slicedSegments:[]}}if(0===y.length&&function(T,E,y){return y.some(O=>Bs(T,E,O))}(T,y,O)){const De=new $n(T.segments,function(T,E,y,O,H,ne){const De={};for(const Be of O)if(Bs(T,y,Be)&&!H[qi(Be)]){const kt=new $n([],{});kt._sourceSegment=T,kt._segmentIndexShift="legacy"===ne?T.segments.length:E.length,De[qi(Be)]=kt}return Object.assign(Object.assign({},H),De)}(T,E,y,O,T.children,H));return De._sourceSegment=T,De._segmentIndexShift=E.length,{segmentGroup:De,slicedSegments:y}}const ne=new $n(T.segments,T.children);return ne._sourceSegment=T,ne._segmentIndexShift=E.length,{segmentGroup:ne,slicedSegments:y}}function Bs(T,E,y){return(!(T.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}function nu(T,E,y,O){return!!(qi(T)===O||O!==Sn&&Bs(E,y,T))&&("**"===T.path||ma(E,T,y).matched)}function ru(T,E,y){return 0===E.length&&!T.children[y]}class $i{constructor(E){this.segmentGroup=E||null}}class Rs{constructor(E){this.urlTree=E}}function Jr(T){return new ri.y(E=>E.error(new $i(T)))}function Po(T){return new ri.y(E=>E.error(new Rs(T)))}function Vf(T){return new ri.y(E=>E.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${T}'`)))}class Hs{constructor(E,y,O,H,ne){this.configLoader=y,this.urlSerializer=O,this.urlTree=H,this.config=ne,this.allowRedirects=!0,this.ngModule=E.get(A.h0i)}apply(){const E=bu(this.urlTree.root,[],[],this.config).segmentGroup,y=new $n(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,y,Sn).pipe((0,Zn.U)(ne=>this.createUrlTree(po(ne),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gi(ne=>{if(ne instanceof Rs)return this.allowRedirects=!1,this.match(ne.urlTree);throw ne instanceof $i?this.noMatchError(ne):ne}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,Sn).pipe((0,Zn.U)(H=>this.createUrlTree(po(H),E.queryParams,E.fragment))).pipe(Gi(H=>{throw H instanceof $i?this.noMatchError(H):H}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,y,O){const H=E.segments.length>0?new $n([],{[Sn]:E}):E;return new Lr(H,y,O)}expandSegmentGroup(E,y,O,H){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(E,y,O).pipe((0,Zn.U)(ne=>new $n([],ne))):this.expandSegment(E,O,y,O.segments,H,!0)}expandChildren(E,y,O){const H=[];for(const ne of Object.keys(O.children))"primary"===ne?H.unshift(ne):H.push(ne);return(0,Ye.D)(H).pipe(rr(ne=>{const De=O.children[ne],Be=va(y,ne);return this.expandSegmentGroup(E,Be,De,ne).pipe((0,Zn.U)(kt=>({segment:kt,outlet:ne})))}),(0,Ln.R)((ne,De)=>(ne[De.outlet]=De.segment,ne),{}),function(T,E){const y=arguments.length>=2;return O=>O.pipe(T?(0,Xn.h)((H,ne)=>T(H,ne,O)):Zo.y,Wi(1),y?$r(E):Fo(()=>new Mi))}())}expandSegment(E,y,O,H,ne,De){return(0,Ye.D)(O).pipe(rr(Be=>this.expandSegmentAgainstRoute(E,y,O,Be,H,ne,De).pipe(Gi(xn=>{if(xn instanceof $i)return(0,St.of)(null);throw xn}))),Q(Be=>!!Be),Gi((Be,kt)=>{if(Be instanceof Mi||"EmptyError"===Be.name){if(ru(y,H,ne))return(0,St.of)(new $n([],{}));throw new $i(y)}throw Be}))}expandSegmentAgainstRoute(E,y,O,H,ne,De,Be){return nu(H,y,ne,De)?void 0===H.redirectTo?this.matchSegmentAgainstRoute(E,y,H,ne,De):Be&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,y,O,H,ne,De):Jr(y):Jr(y)}expandSegmentAgainstRouteUsingRedirect(E,y,O,H,ne,De){return"**"===H.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,O,H,De):this.expandRegularSegmentAgainstRouteUsingRedirect(E,y,O,H,ne,De)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,y,O,H){const ne=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?Po(ne):this.lineralizeSegments(O,ne).pipe((0,oi.zg)(De=>{const Be=new $n(De,{});return this.expandSegment(E,Be,y,De,H,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,y,O,H,ne,De){const{matched:Be,consumedSegments:kt,lastChild:xn,positionalParamSegments:Wn}=ma(y,H,ne);if(!Be)return Jr(y);const gr=this.applyRedirectCommands(kt,H.redirectTo,Wn);return H.redirectTo.startsWith("/")?Po(gr):this.lineralizeSegments(H,gr).pipe((0,oi.zg)(fi=>this.expandSegment(E,y,O,fi.concat(ne.slice(xn)),De,!1)))}matchSegmentAgainstRoute(E,y,O,H,ne){if("**"===O.path)return O.loadChildren?(O._loadedConfig?(0,St.of)(O._loadedConfig):this.configLoader.load(E.injector,O)).pipe((0,Zn.U)(fi=>(O._loadedConfig=fi,new $n(H,{})))):(0,St.of)(new $n(H,{}));const{matched:De,consumedSegments:Be,lastChild:kt}=ma(y,O,H);if(!De)return Jr(y);const xn=H.slice(kt);return this.getChildConfig(E,O,H).pipe((0,oi.zg)(gr=>{const fi=gr.module,ni=gr.routes,{segmentGroup:oo,slicedSegments:xo}=bu(y,Be,xn,ni),Yo=new $n(oo.segments,oo.children);if(0===xo.length&&Yo.hasChildren())return this.expandChildren(fi,ni,Yo).pipe((0,Zn.U)(sa=>new $n(Be,sa)));if(0===ni.length&&0===xo.length)return(0,St.of)(new $n(Be,{}));const bs=qi(O)===ne;return this.expandSegment(fi,Yo,ni,xo,bs?Sn:ne,!0).pipe((0,Zn.U)(To=>new $n(Be.concat(To.segments),To.children)))}))}getChildConfig(E,y,O){return y.children?(0,St.of)(new Dn(y.children,E)):y.loadChildren?void 0!==y._loadedConfig?(0,St.of)(y._loadedConfig):this.runCanLoadGuards(E.injector,y,O).pipe((0,oi.zg)(H=>{return H?this.configLoader.load(E.injector,y).pipe((0,Zn.U)(ne=>(y._loadedConfig=ne,ne))):(T=y,new ri.y(E=>E.error(hs(`Cannot load children because the guard of the route "path: '${T.path}'" returned false`))));var T})):(0,St.of)(new Dn([],E))}runCanLoadGuards(E,y,O){const H=y.canLoad;if(!H||0===H.length)return(0,St.of)(!0);const ne=H.map(De=>{const Be=E.get(De);let kt;if((T=Be)&&pr(T.canLoad))kt=Be.canLoad(y,O);else{if(!pr(Be))throw new Error("Invalid CanLoad guard");kt=Be(y,O)}var T;return Bn(kt)});return(0,St.of)(ne).pipe(ea(),(0,G.b)(De=>{if(!yi(De))return;const Be=hs(`Redirecting to "${this.urlSerializer.serialize(De)}"`);throw Be.url=De,Be}),(0,Zn.U)(De=>!0===De))}lineralizeSegments(E,y){let O=[],H=y.root;for(;;){if(O=O.concat(H.segments),0===H.numberOfChildren)return(0,St.of)(O);if(H.numberOfChildren>1||!H.children[Sn])return Vf(E.redirectTo);H=H.children[Sn]}}applyRedirectCommands(E,y,O){return this.applyRedirectCreatreUrlTree(y,this.urlSerializer.parse(y),E,O)}applyRedirectCreatreUrlTree(E,y,O,H){const ne=this.createSegmentGroup(E,y.root,O,H);return new Lr(ne,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const O={};return Xr(E,(H,ne)=>{if("string"==typeof H&&H.startsWith(":")){const Be=H.substring(1);O[ne]=y[Be]}else O[ne]=H}),O}createSegmentGroup(E,y,O,H){const ne=this.createSegments(E,y.segments,O,H);let De={};return Xr(y.children,(Be,kt)=>{De[kt]=this.createSegmentGroup(E,Be,O,H)}),new $n(ne,De)}createSegments(E,y,O,H){return y.map(ne=>ne.path.startsWith(":")?this.findPosParam(E,ne,H):this.findOrReturn(ne,O))}findPosParam(E,y,O){const H=O[y.path.substring(1)];if(!H)throw new Error(`Cannot redirect to '${E}'. Cannot find '${y.path}'.`);return H}findOrReturn(E,y){let O=0;for(const H of y){if(H.path===E.path)return y.splice(O),H;O++}return E}}function po(T){const E={};for(const O of Object.keys(T.children)){const ne=po(T.children[O]);(ne.segments.length>0||ne.hasChildren())&&(E[O]=ne)}return function(T){if(1===T.numberOfChildren&&T.children[Sn]){const E=T.children[Sn];return new $n(T.segments.concat(E.segments),E.children)}return T}(new $n(T.segments,E))}class Fa{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class Tc{constructor(E,y){this.component=E,this.route=y}}function La(T,E,y){const O=T._root;return Ua(O,E?E._root:null,y,[O.value])}function Eu(T,E,y){const O=function(T){if(!T)return null;for(let E=T.parent;E;E=E.parent){const y=E.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig}return null}(E);return(O?O.module.injector:y).get(T)}function Ua(T,E,y,O,H={canDeactivateChecks:[],canActivateChecks:[]}){const ne=X(E);return T.children.forEach(De=>{(function(T,E,y,O,H={canDeactivateChecks:[],canActivateChecks:[]}){const ne=T.value,De=E?E.value:null,Be=y?y.getContext(T.value.outlet):null;if(De&&ne.routeConfig===De.routeConfig){const kt=function(T,E,y){if("function"==typeof y)return y(T,E);switch(y){case"pathParamsChange":return!wo(T.url,E.url);case"pathParamsOrQueryParamsChange":return!wo(T.url,E.url)||!zr(T.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zr(T,E)||!zr(T.queryParams,E.queryParams);case"paramsChange":default:return!Zr(T,E)}}(De,ne,ne.routeConfig.runGuardsAndResolvers);kt?H.canActivateChecks.push(new Fa(O)):(ne.data=De.data,ne._resolvedData=De._resolvedData),Ua(T,E,ne.component?Be?Be.children:null:y,O,H),kt&&Be&&Be.outlet&&Be.outlet.isActivated&&H.canDeactivateChecks.push(new Tc(Be.outlet.component,De))}else De&&na(E,Be,H),H.canActivateChecks.push(new Fa(O)),Ua(T,null,ne.component?Be?Be.children:null:y,O,H)})(De,ne[De.value.outlet],y,O.concat([De.value]),H),delete ne[De.value.outlet]}),Xr(ne,(De,Be)=>na(De,y.getContext(Be),H)),H}function na(T,E,y){const O=X(T),H=T.value;Xr(O,(ne,De)=>{na(ne,H.component?E?E.children.getContext(De):null:E,y)}),y.canDeactivateChecks.push(new Tc(H.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,H))}class Cu{}function Va(T){return new ri.y(E=>E.error(T))}class Tu{constructor(E,y,O,H,ne,De){this.rootComponentType=E,this.config=y,this.urlTree=O,this.url=H,this.paramsInheritanceStrategy=ne,this.relativeLinkResolution=De}recognize(){const E=bu(this.urlTree.root,[],[],this.config.filter(De=>void 0===De.redirectTo),this.relativeLinkResolution).segmentGroup,y=this.processSegmentGroup(this.config,E,Sn);if(null===y)return null;const O=new Ri([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Sn,this.rootComponentType,null,this.urlTree.root,-1,{}),H=new L(O,y),ne=new fo(this.url,H);return this.inheritParamsAndData(ne._root),ne}inheritParamsAndData(E){const y=E.value,O=xr(y,this.paramsInheritanceStrategy);y.params=Object.freeze(O.params),y.data=Object.freeze(O.data),E.children.forEach(H=>this.inheritParamsAndData(H))}processSegmentGroup(E,y,O){return 0===y.segments.length&&y.hasChildren()?this.processChildren(E,y):this.processSegment(E,y,y.segments,O)}processChildren(E,y){const O=[];for(const ne of Object.keys(y.children)){const De=y.children[ne],Be=va(E,ne),kt=this.processSegmentGroup(Be,De,ne);if(null===kt)return null;O.push(...kt)}const H=Ba(O);return H.sort((E,y)=>E.value.outlet===Sn?-1:y.value.outlet===Sn?1:E.value.outlet.localeCompare(y.value.outlet)),H}processSegment(E,y,O,H){for(const ne of E){const De=this.processSegmentAgainstRoute(ne,y,O,H);if(null!==De)return De}return ru(y,O,H)?[]:null}processSegmentAgainstRoute(E,y,O,H){if(E.redirectTo||!nu(E,y,O,H))return null;let ne,De=[],Be=[];if("**"===E.path){const ni=O.length>0?Bi(O).parameters:{};ne=new Ri(O,ni,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ha(E),qi(E),E.component,E,Vo(y),Au(y)+O.length,ya(E))}else{const ni=ma(y,E,O);if(!ni.matched)return null;De=ni.consumedSegments,Be=O.slice(ni.lastChild),ne=new Ri(De,ni.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ha(E),qi(E),E.component,E,Vo(y),Au(y)+De.length,ya(E))}const kt=(T=E).children?T.children:T.loadChildren?T._loadedConfig.routes:[],{segmentGroup:xn,slicedSegments:Wn}=bu(y,De,Be,kt.filter(ni=>void 0===ni.redirectTo),this.relativeLinkResolution);var T;if(0===Wn.length&&xn.hasChildren()){const ni=this.processChildren(kt,xn);return null===ni?null:[new L(ne,ni)]}if(0===kt.length&&0===Wn.length)return[new L(ne,[])];const gr=qi(E)===H,fi=this.processSegment(kt,xn,Wn,gr?Sn:H);return null===fi?null:[new L(ne,fi)]}}function Su(T){const E=T.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function Ba(T){const E=[],y=new Set;for(const O of T){if(!Su(O)){E.push(O);continue}const H=E.find(ne=>O.value.routeConfig===ne.value.routeConfig);void 0!==H?(H.children.push(...O.children),y.add(H)):E.push(O)}for(const O of y){const H=Ba(O.children);E.push(new L(O.value,H))}return E.filter(O=>!y.has(O))}function Vo(T){let E=T;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Au(T){let E=T,y=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,y+=E._segmentIndexShift?E._segmentIndexShift:0;return y-1}function Ha(T){return T.data||{}}function ya(T){return T.resolve||{}}function Dc(T){return(0,Un.w)(E=>{const y=T(E);return y?(0,Ye.D)(y).pipe((0,Zn.U)(()=>E)):(0,St.of)(E)})}class su extends class{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}{}const au=new A.OlP("ROUTES");class Ws{constructor(E,y,O,H){this.loader=E,this.compiler=y,this.onLoadStartListener=O,this.onLoadEndListener=H}load(E,y){if(y._loader$)return y._loader$;this.onLoadStartListener&&this.onLoadStartListener(y);const H=this.loadModuleFactory(y.loadChildren).pipe((0,Zn.U)(ne=>{this.onLoadEndListener&&this.onLoadEndListener(y);const De=ne.create(E);return new Dn(ha(De.injector.get(au,void 0,A.XFs.Self|A.XFs.Optional)).map(Vs),De)}),Gi(ne=>{throw y._loader$=void 0,ne}));return y._loader$=new ui.c(H,()=>new Yt.xQ).pipe((0,he.x)()),y._loader$}loadModuleFactory(E){return"string"==typeof E?(0,Ye.D)(this.loader.load(E)):Bn(E()).pipe((0,oi.zg)(y=>y instanceof A.YKP?(0,St.of)(y):(0,Ye.D)(this.compiler.compileModuleAsync(y))))}}class _a{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ms,this.attachRef=null}}class ms{constructor(){this.contexts=new Map}onChildOutletCreated(E,y){const O=this.getOrCreateContext(E);O.outlet=y,this.contexts.set(E,O)}onChildOutletDestroyed(E){const y=this.getContext(E);y&&(y.outlet=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let y=this.getContext(E);return y||(y=new _a,this.contexts.set(E,y)),y}getContext(E){return this.contexts.get(E)||null}}class os{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,y){return E}}function Ac(T){throw T}function Ru(T,E,y){return E.parse("/")}function qs(T,E){return(0,St.of)(null)}const Nu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Io={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ti=(()=>{class T{constructor(y,O,H,ne,De,Be,kt,xn){this.rootComponentType=y,this.urlSerializer=O,this.rootContexts=H,this.location=ne,this.config=xn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Yt.xQ,this.errorHandler=Ac,this.malformedUriErrorHandler=Ru,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qs,afterPreactivation:qs},this.urlHandlingStrategy=new os,this.routeReuseStrategy=new su,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=De.get(A.h0i),this.console=De.get(A.c2e);const fi=De.get(A.R0b);this.isNgZoneEnabled=fi instanceof A.R0b&&A.R0b.isInAngularZone(),this.resetConfig(xn),this.currentUrlTree=new Lr(new $n([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ws(Be,kt,ni=>this.triggerEvent(new Xt(ni)),ni=>this.triggerEvent(new bn(ni))),this.routerState=$e(this.currentUrlTree,this.rootComponentType),this.transitions=new cn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const O=this.events;return y.pipe((0,Xn.h)(H=>0!==H.id),(0,Zn.U)(H=>Object.assign(Object.assign({},H),{extractedUrl:this.urlHandlingStrategy.extract(H.rawUrl)})),(0,Un.w)(H=>{let ne=!1,De=!1;return(0,St.of)(H).pipe((0,G.b)(Be=>{this.currentNavigation={id:Be.id,initialUrl:Be.currentRawUrl,extractedUrl:Be.extractedUrl,trigger:Be.source,extras:Be.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Un.w)(Be=>{const kt=!this.navigated||Be.extractedUrl.toString()!==this.browserUrlTree.toString(),xn=("reload"===this.onSameUrlNavigation||kt)&&this.urlHandlingStrategy.shouldProcessUrl(Be.rawUrl);if(Wr(Be.source)&&(this.browserUrlTree=Be.rawUrl),xn)return(0,St.of)(Be).pipe((0,Un.w)(Wn=>{const gr=this.transitions.getValue();return O.next(new $t(Wn.id,this.serializeUrl(Wn.extractedUrl),Wn.source,Wn.restoredState)),gr!==this.transitions.getValue()?ii.E:Promise.resolve(Wn)}),function(T,E,y,O){return(0,Un.w)(H=>function(T,E,y,O,H){return new Hs(T,E,y,O,H).apply()}(T,E,y,H.extractedUrl,O).pipe((0,Zn.U)(ne=>Object.assign(Object.assign({},H),{urlAfterRedirects:ne}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,G.b)(Wn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Wn.urlAfterRedirects})}),function(T,E,y,O,H){return(0,oi.zg)(ne=>function(T,E,y,O,H="emptyOnly",ne="legacy"){try{const De=new Tu(T,E,y,O,H,ne).recognize();return null===De?Va(new Cu):(0,St.of)(De)}catch(De){return Va(De)}}(T,E,ne.urlAfterRedirects,y(ne.urlAfterRedirects),O,H).pipe((0,Zn.U)(De=>Object.assign(Object.assign({},ne),{targetSnapshot:De}))))}(this.rootComponentType,this.config,Wn=>this.serializeUrl(Wn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,G.b)(Wn=>{"eager"===this.urlUpdateStrategy&&(Wn.extras.skipLocationChange||this.setBrowserUrl(Wn.urlAfterRedirects,Wn),this.browserUrlTree=Wn.urlAfterRedirects);const gr=new te(Wn.id,this.serializeUrl(Wn.extractedUrl),this.serializeUrl(Wn.urlAfterRedirects),Wn.targetSnapshot);O.next(gr)}));if(kt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:gr,extractedUrl:fi,source:ni,restoredState:oo,extras:xo}=Be,Yo=new $t(gr,this.serializeUrl(fi),ni,oo);O.next(Yo);const bs=$e(fi,this.rootComponentType).snapshot;return(0,St.of)(Object.assign(Object.assign({},Be),{targetSnapshot:bs,urlAfterRedirects:fi,extras:Object.assign(Object.assign({},xo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Be.rawUrl,this.browserUrlTree=Be.urlAfterRedirects,Be.resolve(null),ii.E}),Dc(Be=>{const{targetSnapshot:kt,id:xn,extractedUrl:Wn,rawUrl:gr,extras:{skipLocationChange:fi,replaceUrl:ni}}=Be;return this.hooks.beforePreactivation(kt,{navigationId:xn,appliedUrlTree:Wn,rawUrlTree:gr,skipLocationChange:!!fi,replaceUrl:!!ni})}),(0,G.b)(Be=>{const kt=new $(Be.id,this.serializeUrl(Be.extractedUrl),this.serializeUrl(Be.urlAfterRedirects),Be.targetSnapshot);this.triggerEvent(kt)}),(0,Zn.U)(Be=>Object.assign(Object.assign({},Be),{guards:La(Be.targetSnapshot,Be.currentSnapshot,this.rootContexts)})),function(T,E){return(0,oi.zg)(y=>{const{targetSnapshot:O,currentSnapshot:H,guards:{canActivateChecks:ne,canDeactivateChecks:De}}=y;return 0===De.length&&0===ne.length?(0,St.of)(Object.assign(Object.assign({},y),{guardsResult:!0})):function(T,E,y,O){return(0,Ye.D)(T).pipe((0,oi.zg)(H=>function(T,E,y,O,H){const ne=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!ne||0===ne.length)return(0,St.of)(!0);const De=ne.map(Be=>{const kt=Eu(Be,E,H);let xn;if(function(T){return T&&pr(T.canDeactivate)}(kt))xn=Bn(kt.canDeactivate(T,E,y,O));else{if(!pr(kt))throw new Error("Invalid CanDeactivate guard");xn=Bn(kt(T,E,y,O))}return xn.pipe(Q())});return(0,St.of)(De).pipe(ea())}(H.component,H.route,y,E,O)),Q(H=>!0!==H,!0))}(De,O,H,T).pipe((0,oi.zg)(Be=>Be&&function(T){return"boolean"==typeof T}(Be)?function(T,E,y,O){return(0,Ye.D)(E).pipe(rr(H=>Ki(function(T,E){return null!==T&&E&&E(new yn(T)),(0,St.of)(!0)}(H.route.parent,O),function(T,E){return null!==T&&E&&E(new lr(T)),(0,St.of)(!0)}(H.route,O),function(T,E,y){const O=E[E.length-1],ne=E.slice(0,E.length-1).reverse().map(De=>function(T){const E=T.routeConfig?T.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:T,guards:E}:null}(De)).filter(De=>null!==De).map(De=>Pr(()=>{const Be=De.guards.map(kt=>{const xn=Eu(kt,De.node,y);let Wn;if(function(T){return T&&pr(T.canActivateChild)}(xn))Wn=Bn(xn.canActivateChild(O,T));else{if(!pr(xn))throw new Error("Invalid CanActivateChild guard");Wn=Bn(xn(O,T))}return Wn.pipe(Q())});return(0,St.of)(Be).pipe(ea())}));return(0,St.of)(ne).pipe(ea())}(T,H.path,y),function(T,E,y){const O=E.routeConfig?E.routeConfig.canActivate:null;if(!O||0===O.length)return(0,St.of)(!0);const H=O.map(ne=>Pr(()=>{const De=Eu(ne,E,y);let Be;if(function(T){return T&&pr(T.canActivate)}(De))Be=Bn(De.canActivate(E,T));else{if(!pr(De))throw new Error("Invalid CanActivate guard");Be=Bn(De(E,T))}return Be.pipe(Q())}));return(0,St.of)(H).pipe(ea())}(T,H.route,y))),Q(H=>!0!==H,!0))}(O,ne,T,E):(0,St.of)(Be)),(0,Zn.U)(Be=>Object.assign(Object.assign({},y),{guardsResult:Be})))})}(this.ngModule.injector,Be=>this.triggerEvent(Be)),(0,G.b)(Be=>{if(yi(Be.guardsResult)){const xn=hs(`Redirecting to "${this.serializeUrl(Be.guardsResult)}"`);throw xn.url=Be.guardsResult,xn}const kt=new fe(Be.id,this.serializeUrl(Be.extractedUrl),this.serializeUrl(Be.urlAfterRedirects),Be.targetSnapshot,!!Be.guardsResult);this.triggerEvent(kt)}),(0,Xn.h)(Be=>!!Be.guardsResult||(this.restoreHistory(Be),this.cancelNavigationTransition(Be,""),!1)),Dc(Be=>{if(Be.guards.canActivateChecks.length)return(0,St.of)(Be).pipe((0,G.b)(kt=>{const xn=new je(kt.id,this.serializeUrl(kt.extractedUrl),this.serializeUrl(kt.urlAfterRedirects),kt.targetSnapshot);this.triggerEvent(xn)}),(0,Un.w)(kt=>{let xn=!1;return(0,St.of)(kt).pipe(function(T,E){return(0,oi.zg)(y=>{const{targetSnapshot:O,guards:{canActivateChecks:H}}=y;if(!H.length)return(0,St.of)(y);let ne=0;return(0,Ye.D)(H).pipe(rr(De=>function(T,E,y,O){return function(T,E,y,O){const H=Object.keys(T);if(0===H.length)return(0,St.of)({});const ne={};return(0,Ye.D)(H).pipe((0,oi.zg)(De=>function(T,E,y,O){const H=Eu(T,E,O);return Bn(H.resolve?H.resolve(E,y):H(E,y))}(T[De],E,y,O).pipe((0,G.b)(Be=>{ne[De]=Be}))),Wi(1),(0,oi.zg)(()=>Object.keys(ne).length===H.length?(0,St.of)(ne):ii.E))}(T._resolve,T,E,O).pipe((0,Zn.U)(ne=>(T._resolvedData=ne,T.data=Object.assign(Object.assign({},T.data),xr(T,y).resolve),null)))}(De.route,O,T,E)),(0,G.b)(()=>ne++),Wi(1),(0,oi.zg)(De=>ne===H.length?(0,St.of)(y):ii.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,G.b)({next:()=>xn=!0,complete:()=>{xn||(this.restoreHistory(kt),this.cancelNavigationTransition(kt,"At least one route resolver didn't emit any value."))}}))}),(0,G.b)(kt=>{const xn=new Dt(kt.id,this.serializeUrl(kt.extractedUrl),this.serializeUrl(kt.urlAfterRedirects),kt.targetSnapshot);this.triggerEvent(xn)}))}),Dc(Be=>{const{targetSnapshot:kt,id:xn,extractedUrl:Wn,rawUrl:gr,extras:{skipLocationChange:fi,replaceUrl:ni}}=Be;return this.hooks.afterPreactivation(kt,{navigationId:xn,appliedUrlTree:Wn,rawUrlTree:gr,skipLocationChange:!!fi,replaceUrl:!!ni})}),(0,Zn.U)(Be=>{const kt=function(T,E,y){const O=ps(T,E._root,y?y._root:void 0);return new _e(O,E)}(this.routeReuseStrategy,Be.targetSnapshot,Be.currentRouterState);return Object.assign(Object.assign({},Be),{targetRouterState:kt})}),(0,G.b)(Be=>{this.currentUrlTree=Be.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,Be.rawUrl),this.routerState=Be.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Be.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Be),this.browserUrlTree=Be.urlAfterRedirects)}),((T,E,y)=>(0,Zn.U)(O=>(new jt(E,O.targetRouterState,O.currentRouterState,y).activate(T),O)))(this.rootContexts,this.routeReuseStrategy,Be=>this.triggerEvent(Be)),(0,G.b)({next(){ne=!0},complete(){ne=!0}}),function(T){return E=>E.lift(new it(T))}(()=>{if(!ne&&!De){const Be=`Navigation ID ${H.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(H),this.cancelNavigationTransition(H,Be)):this.cancelNavigationTransition(H,Be)}this.currentNavigation=null}),Gi(Be=>{if(De=!0,function(T){return T&&T[ti]}(Be)){const kt=yi(Be.url);kt||(this.navigated=!0,this.restoreHistory(H,!0));const xn=new wn(H.id,this.serializeUrl(H.extractedUrl),Be.message);O.next(xn),kt?setTimeout(()=>{const Wn=this.urlHandlingStrategy.merge(Be.url,this.rawUrlTree),gr={skipLocationChange:H.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Wr(H.source)};this.scheduleNavigation(Wn,"imperative",null,gr,{resolve:H.resolve,reject:H.reject,promise:H.promise})},0):H.resolve(!1)}else{this.restoreHistory(H,!0);const kt=new q(H.id,this.serializeUrl(H.extractedUrl),Be);O.next(kt);try{H.resolve(this.errorHandler(Be))}catch(xn){H.reject(xn)}}return ii.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}getTransition(){const y=this.transitions.value;return y.urlAfterRedirects=this.browserUrlTree,y}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const O=this.extractLocationChangeInfoFromEvent(y);this.shouldScheduleNavigation(this.lastLocationChangeInfo,O)&&setTimeout(()=>{const{source:H,state:ne,urlTree:De}=O,Be={replaceUrl:!0};if(ne){const kt=Object.assign({},ne);delete kt.navigationId,delete kt.\u0275routerPageId,0!==Object.keys(kt).length&&(Be.state=kt)}this.scheduleNavigation(De,H,ne,Be)},0),this.lastLocationChangeInfo=O}))}extractLocationChangeInfoFromEvent(y){var O;return{source:"popstate"===y.type?"popstate":"hashchange",urlTree:this.parseUrl(y.url),state:(null===(O=y.state)||void 0===O?void 0:O.navigationId)?y.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(y,O){if(!y)return!0;const H=O.urlTree.toString()===y.urlTree.toString();return O.transitionId!==y.transitionId||!H||!("hashchange"===O.source&&"popstate"===y.source||"popstate"===O.source&&"hashchange"===y.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){Yu(y),this.config=y.map(Vs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,O={}){const{relativeTo:H,queryParams:ne,fragment:De,queryParamsHandling:Be,preserveFragment:kt}=O,xn=H||this.routerState.root,Wn=kt?this.currentUrlTree.fragment:De;let gr=null;switch(Be){case"merge":gr=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ne);break;case"preserve":gr=this.currentUrlTree.queryParams;break;default:gr=ne||null}return null!==gr&&(gr=this.removeEmptyProps(gr)),function(T,E,y,O,H){if(0===y.length)return Ci(E.root,E.root,E,O,H);const ne=function(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new ga(!0,0,T);let E=0,y=!1;const O=T.reduce((H,ne,De)=>{if("object"==typeof ne&&null!=ne){if(ne.outlets){const Be={};return Xr(ne.outlets,(kt,xn)=>{Be[xn]="string"==typeof kt?kt.split("/"):kt}),[...H,{outlets:Be}]}if(ne.segmentPath)return[...H,ne.segmentPath]}return"string"!=typeof ne?[...H,ne]:0===De?(ne.split("/").forEach((Be,kt)=>{0==kt&&"."===Be||(0==kt&&""===Be?y=!0:".."===Be?E++:""!=Be&&H.push(Be))}),H):[...H,ne]},[]);return new ga(y,E,O)}(y);if(ne.toRoot())return Ci(E.root,new $n([],{}),E,O,H);const De=function(T,E,y){if(T.isAbsolute)return new v(E.root,!0,0);if(-1===y.snapshot._lastPathIndex){const ne=y.snapshot._urlSegment;return new v(ne,ne===E.root,0)}const O=ka(T.commands[0])?0:1;return function(T,E,y){let O=T,H=E,ne=y;for(;ne>H;){if(ne-=H,O=O.parent,!O)throw new Error("Invalid number of '../'");H=O.segments.length}return new v(O,!1,H-ne)}(y.snapshot._urlSegment,y.snapshot._lastPathIndex+O,T.numberOfDoubleDots)}(ne,E,T),Be=De.processChildren?F(De.segmentGroup,De.index,ne.commands):N(De.segmentGroup,De.index,ne.commands);return Ci(De.segmentGroup,Be,E,O,H)}(xn,this.currentUrlTree,y,gr,null!=Wn?Wn:null)}navigateByUrl(y,O={skipLocationChange:!1}){const H=yi(y)?y:this.parseUrl(y),ne=this.urlHandlingStrategy.merge(H,this.rawUrlTree);return this.scheduleNavigation(ne,"imperative",null,O)}navigate(y,O={skipLocationChange:!1}){return function(T){for(let E=0;E<T.length;E++){const y=T[E];if(null==y)throw new Error(`The requested path contains ${y} segment at index ${E}`)}}(y),this.navigateByUrl(this.createUrlTree(y,O),O)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let O;try{O=this.urlSerializer.parse(y)}catch(H){O=this.malformedUriErrorHandler(H,this.urlSerializer,y)}return O}isActive(y,O){let H;if(H=!0===O?Object.assign({},Nu):!1===O?Object.assign({},Io):O,yi(y))return Di(this.currentUrlTree,y,H);const ne=this.parseUrl(y);return Di(this.currentUrlTree,ne,H)}removeEmptyProps(y){return Object.keys(y).reduce((O,H)=>{const ne=y[H];return null!=ne&&(O[H]=ne),O},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new ln(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,y.resolve(!0)},y=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(y,O,H,ne,De){var Be,kt;if(this.disposed)return Promise.resolve(!1);const xn=this.getTransition(),Wn=Wr(O)&&xn&&!Wr(xn.source),ni=(this.lastSuccessfulId===xn.id||this.currentNavigation?xn.rawUrl:xn.urlAfterRedirects).toString()===y.toString();if(Wn&&ni)return Promise.resolve(!0);let oo,xo,Yo;De?(oo=De.resolve,xo=De.reject,Yo=De.promise):Yo=new Promise((To,sa)=>{oo=To,xo=sa});const bs=++this.navigationId;let Xa;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(H=this.location.getState()),Xa=H&&H.\u0275routerPageId?H.\u0275routerPageId:ne.replaceUrl||ne.skipLocationChange?null!==(Be=this.browserPageId)&&void 0!==Be?Be:0:(null!==(kt=this.browserPageId)&&void 0!==kt?kt:0)+1):Xa=0,this.setTransition({id:bs,targetPageId:Xa,source:O,restoredState:H,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:ne,resolve:oo,reject:xo,promise:Yo,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Yo.catch(To=>Promise.reject(To))}setBrowserUrl(y,O){const H=this.urlSerializer.serialize(y),ne=Object.assign(Object.assign({},O.extras.state),this.generateNgRouterState(O.id,O.targetPageId));this.location.isCurrentPathEqualTo(H)||O.extras.replaceUrl?this.location.replaceState(H,"",ne):this.location.go(H,"",ne)}restoreHistory(y,O=!1){var H,ne;if("computed"===this.canceledNavigationResolution){const De=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(H=this.currentNavigation)||void 0===H?void 0:H.finalUrl)||0===De?this.currentUrlTree===(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.finalUrl)&&0===De&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(De)}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,O){const H=new wn(y.id,this.serializeUrl(y.extractedUrl),O);this.triggerEvent(H),y.resolve(!1)}generateNgRouterState(y,O){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:O}:{navigationId:y}}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(A.DyG),A.LFG(es),A.LFG(ms),A.LFG(M.Ye),A.LFG(A.zs3),A.LFG(A.v3s),A.LFG(A.Sil),A.LFG(void 0))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();function Wr(T){return"imperative"!==T}let Ou=(()=>{class T{constructor(y,O,H,ne,De){this.router=y,this.route=O,this.commands=[],this.onChanges=new Yt.xQ,null==H&&ne.setAttribute(De.nativeElement,"tabindex","0")}ngOnChanges(y){this.onChanges.next(this)}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:[]}onClick(){const y={skipLocationChange:ys(this.skipLocationChange),replaceUrl:ys(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ys(this.preserveFragment)})}}return T.\u0275fac=function(y){return new(y||T)(A.Y36(Ti),A.Y36(fn),A.$8M("tabindex"),A.Y36(A.Qsj),A.Y36(A.SBq))},T.\u0275dir=A.lG2({type:T,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(y,O){1&y&&A.NdJ("click",function(){return O.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[A.TTD]}),T})(),wa=(()=>{class T{constructor(y,O,H){this.router=y,this.route=O,this.locationStrategy=H,this.commands=[],this.onChanges=new Yt.xQ,this.subscription=y.events.subscribe(ne=>{ne instanceof ln&&this.updateTargetUrlAndHref()})}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:[]}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,O,H,ne,De){if(0!==y||O||H||ne||De||"string"==typeof this.target&&"_self"!=this.target)return!0;const Be={skipLocationChange:ys(this.skipLocationChange),replaceUrl:ys(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Be),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ys(this.preserveFragment)})}}return T.\u0275fac=function(y){return new(y||T)(A.Y36(Ti),A.Y36(fn),A.Y36(M.S$))},T.\u0275dir=A.lG2({type:T,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,O){1&y&&A.NdJ("click",function(ne){return O.onClick(ne.button,ne.ctrlKey,ne.shiftKey,ne.altKey,ne.metaKey)}),2&y&&(A.Ikx("href",O.href,A.LSH),A.uIk("target",O.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[A.TTD]}),T})();function ys(T){return""===T||!!T}let $s=(()=>{class T{constructor(y,O,H,ne,De,Be){this.router=y,this.element=O,this.renderer=H,this.cdr=ne,this.link=De,this.linkWithHref=Be,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=y.events.subscribe(kt=>{kt instanceof ln&&this.update()})}ngAfterContentInit(){(0,St.of)(this.links.changes,this.linksWithHrefs.changes,(0,St.of)(null)).pipe((0,yo.J)()).subscribe(y=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var y;null===(y=this.linkInputChangesSubscription)||void 0===y||y.unsubscribe();const O=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(H=>!!H).map(H=>H.onChanges);this.linkInputChangesSubscription=(0,Ye.D)(O).pipe((0,yo.J)()).subscribe(H=>{this.isActive!==this.isLinkActive(this.router)(H)&&this.update()})}set routerLinkActive(y){const O=Array.isArray(y)?y:y.split(" ");this.classes=O.filter(H=>!!H)}ngOnChanges(y){this.update()}ngOnDestroy(){var y;this.routerEventsSubscription.unsubscribe(),null===(y=this.linkInputChangesSubscription)||void 0===y||y.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const y=this.hasActiveLinks();this.isActive!==y&&(this.isActive=y,this.cdr.markForCheck(),this.classes.forEach(O=>{y?this.renderer.addClass(this.element.nativeElement,O):this.renderer.removeClass(this.element.nativeElement,O)}))})}isLinkActive(y){const O=function(T){return!!T.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return H=>y.isActive(H.urlTree,O)}hasActiveLinks(){const y=this.isLinkActive(this.router);return this.link&&y(this.link)||this.linkWithHref&&y(this.linkWithHref)||this.links.some(y)||this.linksWithHrefs.some(y)}}return T.\u0275fac=function(y){return new(y||T)(A.Y36(Ti),A.Y36(A.SBq),A.Y36(A.Qsj),A.Y36(A.sBO),A.Y36(Ou,8),A.Y36(wa,8))},T.\u0275dir=A.lG2({type:T,selectors:[["","routerLinkActive",""]],contentQueries:function(y,O,H){if(1&y&&(A.Suo(H,Ou,5),A.Suo(H,wa,5)),2&y){let ne;A.iGM(ne=A.CRH())&&(O.links=ne),A.iGM(ne=A.CRH())&&(O.linksWithHrefs=ne)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[A.TTD]}),T})(),Ns=(()=>{class T{constructor(y,O,H,ne,De){this.parentContexts=y,this.location=O,this.resolver=H,this.changeDetector=De,this.activated=null,this._activatedRoute=null,this.activateEvents=new A.vpe,this.deactivateEvents=new A.vpe,this.name=ne||Sn,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,y}attach(y,O){this.activated=y,this._activatedRoute=O,this.location.insert(y.hostView)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,O){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;const De=(O=O||this.resolver).resolveComponentFactory(y._futureSnapshot.routeConfig.component),Be=this.parentContexts.getOrCreateContext(this.name).children,kt=new uu(y,Be,this.location.injector);this.activated=this.location.createComponent(De,this.location.length,kt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(y){return new(y||T)(A.Y36(ms),A.Y36(A.s_b),A.Y36(A._Vd),A.$8M("name"),A.Y36(A.sBO))},T.\u0275dir=A.lG2({type:T,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),T})();class uu{constructor(E,y,O){this.route=E,this.childContexts=y,this.parent=O}get(E,y){return E===fn?this.route:E===ms?this.childContexts:this.parent.get(E,y)}}class _s{}class Os{preload(E,y){return(0,St.of)(null)}}let Ps=(()=>{class T{constructor(y,O,H,ne,De){this.router=y,this.injector=ne,this.preloadingStrategy=De,this.loader=new Ws(O,H,xn=>y.triggerEvent(new Xt(xn)),xn=>y.triggerEvent(new bn(xn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Xn.h)(y=>y instanceof ln),rr(()=>this.preload())).subscribe(()=>{})}preload(){const y=this.injector.get(A.h0i);return this.processRoutes(y,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,O){const H=[];for(const ne of O)if(ne.loadChildren&&!ne.canLoad&&ne._loadedConfig){const De=ne._loadedConfig;H.push(this.processRoutes(De.module,De.routes))}else ne.loadChildren&&!ne.canLoad?H.push(this.preloadConfig(y,ne)):ne.children&&H.push(this.processRoutes(y,ne.children));return(0,Ye.D)(H).pipe((0,yo.J)(),(0,Zn.U)(ne=>{}))}preloadConfig(y,O){return this.preloadingStrategy.preload(O,()=>(O._loadedConfig?(0,St.of)(O._loadedConfig):this.loader.load(y.injector,O)).pipe((0,oi.zg)(ne=>(O._loadedConfig=ne,this.processRoutes(ne.module,ne.routes)))))}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(Ti),A.LFG(A.v3s),A.LFG(A.Sil),A.LFG(A.zs3),A.LFG(_s))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})(),ra=(()=>{class T{constructor(y,O,H={}){this.router=y,this.viewportScroller=O,this.options=H,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},H.scrollPositionRestoration=H.scrollPositionRestoration||"disabled",H.anchorScrolling=H.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof $t?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof ln&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Gn&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,O){this.router.triggerEvent(new Gn(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(Ti),A.LFG(M.EM),A.LFG(void 0))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();const Co=new A.OlP("ROUTER_CONFIGURATION"),ia=new A.OlP("ROUTER_FORROOT_GUARD"),ec=[M.Ye,{provide:es,useClass:pa},{provide:Ti,useFactory:function(T,E,y,O,H,ne,De,Be={},kt,xn){const Wn=new Ti(null,T,E,y,O,H,ne,ha(De));return kt&&(Wn.urlHandlingStrategy=kt),xn&&(Wn.routeReuseStrategy=xn),function(T,E){T.errorHandler&&(E.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(E.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(E.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.relativeLinkResolution&&(E.relativeLinkResolution=T.relativeLinkResolution),T.urlUpdateStrategy&&(E.urlUpdateStrategy=T.urlUpdateStrategy)}(Be,Wn),Be.enableTracing&&Wn.events.subscribe(gr=>{var fi,ni;null===(fi=console.group)||void 0===fi||fi.call(console,`Router Event: ${gr.constructor.name}`),console.log(gr.toString()),console.log(gr),null===(ni=console.groupEnd)||void 0===ni||ni.call(console)}),Wn},deps:[es,ms,M.Ye,A.zs3,A.v3s,A.Sil,au,Co,[class{},new A.FiY],[class{},new A.FiY]]},ms,{provide:fn,useFactory:function(T){return T.routerState.root},deps:[Ti]},{provide:A.v3s,useClass:A.EAV},Ps,Os,class{preload(E,y){return y().pipe(Gi(()=>(0,St.of)(null)))}},{provide:Co,useValue:{enableTracing:!1}}];function xs(){return new A.PXZ("Router",Ti)}let Yc=(()=>{class T{constructor(y,O){}static forRoot(y,O){return{ngModule:T,providers:[ec,Xc(y),{provide:ia,useFactory:sf,deps:[[Ti,new A.FiY,new A.tp0]]},{provide:Co,useValue:O||{}},{provide:M.S$,useFactory:cu,deps:[M.lw,[new A.tBr(M.mr),new A.FiY],Co]},{provide:ra,useFactory:Pu,deps:[Ti,M.EM,Co]},{provide:_s,useExisting:O&&O.preloadingStrategy?O.preloadingStrategy:Os},{provide:A.PXZ,multi:!0,useFactory:xs},[nc,{provide:A.ip1,multi:!0,useFactory:Zc,deps:[nc]},{provide:xu,useFactory:Pc,deps:[nc]},{provide:A.tb,multi:!0,useExisting:xu}]]}}static forChild(y){return{ngModule:T,providers:[Xc(y)]}}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(ia,8),A.LFG(Ti,8))},T.\u0275mod=A.oAB({type:T}),T.\u0275inj=A.cJS({}),T})();function Pu(T,E,y){return y.scrollOffset&&E.setOffset(y.scrollOffset),new ra(T,E,y)}function cu(T,E,y={}){return y.useHash?new M.Do(T,E):new M.b0(T,E)}function sf(T){return"guarded"}function Xc(T){return[{provide:A.deG,multi:!0,useValue:T},{provide:au,multi:!0,useValue:T}]}let nc=(()=>{class T{constructor(y){this.injector=y,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Yt.xQ}appInitializer(){return this.injector.get(M.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let O=null;const H=new Promise(Be=>O=Be),ne=this.injector.get(Ti),De=this.injector.get(Co);return"disabled"===De.initialNavigation?(ne.setUpLocationChangeListener(),O(!0)):"enabled"===De.initialNavigation||"enabledBlocking"===De.initialNavigation?(ne.hooks.afterPreactivation=()=>this.initNavigation?(0,St.of)(null):(this.initNavigation=!0,O(!0),this.resultOfPreactivationDone),ne.initialNavigation()):O(!0),H})}bootstrapListener(y){const O=this.injector.get(Co),H=this.injector.get(Ps),ne=this.injector.get(ra),De=this.injector.get(Ti),Be=this.injector.get(A.z2F);y===Be.components[0]&&(("enabledNonBlocking"===O.initialNavigation||void 0===O.initialNavigation)&&De.initialNavigation(),H.setUpPreloading(),ne.init(),De.resetRootComponentType(Be.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(A.zs3))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();function Zc(T){return T.appInitializer.bind(T)}function Pc(T){return T.bootstrapListener.bind(T)}const xu=new A.OlP("Router Initializer");let Qa=(()=>{class T{constructor(){this.title="app"}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=A.Xpm({type:T,selectors:[["app-root"]],decls:16,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLinkActive","active",1,"nav-item"],["routerLink","fotos",1,"nav-link"],["routerLink","carga",1,"nav-link"],[1,"container","main-container"]],template:function(y,O){1&y&&(A.TgZ(0,"nav",0),A.TgZ(1,"a",1),A._uU(2,"FotosFirebase"),A.qZA(),A.TgZ(3,"button",2),A._UZ(4,"span",3),A.qZA(),A.TgZ(5,"div",4),A.TgZ(6,"ul",5),A.TgZ(7,"li",6),A.TgZ(8,"a",7),A._uU(9,"Fotos"),A.qZA(),A.qZA(),A.TgZ(10,"li",6),A.TgZ(11,"a",8),A._uU(12,"Cargar fotos"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(13,"div",9),A._UZ(14,"router-outlet"),A.qZA(),A._UZ(15,"router-outlet"))},directives:[$s,wa,Ns],styles:[""]}),T})();var Mu=ge(4198);function Il(T,E){if(1&T&&(A.TgZ(0,"div",2),A._UZ(1,"img",3),A.TgZ(2,"div",4),A.TgZ(3,"h5",5),A._uU(4),A.qZA(),A.qZA(),A.qZA()),2&T){const y=E.$implicit;A.xp6(1),A.Q6J("src",y.url,A.LSH),A.xp6(3),A.Oqu(y.nombre)}}let ku=(()=>{class T{constructor(y){this.afs=y,this.itemsCollection=y.collection("img"),this.items=this.itemsCollection.valueChanges(),console.log(this.itemsCollection),console.log(this.items)}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)(A.Y36(Mu.AngularFirestore))},T.\u0275cmp=A.Xpm({type:T,selectors:[["app-fotos"]],decls:3,vars:3,consts:[[1,"card-columns"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"]],template:function(y,O){1&y&&(A.TgZ(0,"div",0),A.YNc(1,Il,5,2,"div",1),A.ALo(2,"async"),A.qZA()),2&y&&(A.xp6(1),A.Q6J("ngForOf",A.lcZ(2,1,O.items)))},directives:[M.sg],pipes:[M.Ov],encapsulation:2}),T})();function oa(T,E,y,O,H,ne,De){try{var Be=T[ne](De),kt=Be.value}catch(xn){return void y(xn)}Be.done?E(kt):Promise.resolve(kt).then(O,H)}function ba(T){return function(){var E=this,y=arguments;return new Promise(function(O,H){var ne=T.apply(E,y);function De(kt){oa(ne,O,H,De,Be,"next",kt)}function Be(kt){oa(ne,O,H,De,Be,"throw",kt)}De(void 0)})}}var rc=ge(7117);let Jc=(()=>{class T{constructor(y){this.db=y,this.CARPETA_IMAGENES="img"}cargarImagenesFirebase(y){var O=this;const H=rc.storage().ref();for(const ne of y){if(ne.estaSubiendo=!0,ne.progreso>=100)continue;const De=H.child(`${this.CARPETA_IMAGENES}/${ne.nombreArchivo}`).put(ne.archivo);De.on(rc.storage.TaskEvent.STATE_CHANGED,Be=>ne.progreso=Be.bytesTransferred/Be.totalBytes*100,Be=>console.error("Error al subir",Be),ba(function*(){console.log("Imagen cargada correctamente"),yield De.snapshot.ref.getDownloadURL().then(function(Be){ne.url=Be}).catch(Be=>console.error(Be)),ne.estaSubiendo=!1,O.guardarImagen({nombre:ne.nombreArchivo,url:ne.url})}))}}guardarImagen(y){this.db.collection(`/${this.CARPETA_IMAGENES}`).add(y)}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(Mu.AngularFirestore))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();class lu{constructor(E){this.archivo=E,this.nombreArchivo=E.name,this.estaSubiendo=!1,this.progreso=0}}let Cl=(()=>{class T{constructor(){this.archivos=[],this.mouseSobre=new A.vpe}onDragEnter(y){this.mouseSobre.emit(!0),this._prevenirDetener(y)}onDragLeave(y){this.mouseSobre.emit(!1)}onDrop(y){this.mouseSobre.emit(!1);const O=this._getTransferencia(y);!O||(this._extraerArchivos(O.files),this._prevenirDetener(y),this.mouseSobre.emit(!1))}_getTransferencia(y){return y.dataTransfer?y.dataTransfer:y.originalEvent.dataTransfer}_extraerArchivos(y){for(const O in Object.getOwnPropertyNames(y)){const H=y[O];if(this._archivoPuedeSerCargado(H)){const ne=new lu(H);this.archivos.push(ne)}}}_archivoPuedeSerCargado(y){return!(this._archivoYaFueDroppeado(y.name)||!this._esImagen(y.type))}_prevenirDetener(y){y.preventDefault(),y.stopPropagation()}_archivoYaFueDroppeado(y){for(const O of this.archivos)if(O.nombreArchivo===y)return console.log("El archivo"+y+"ya esta agregado"),!0;return!1}_esImagen(y){return""!==y&&void 0!==y&&y.startsWith("image")}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275dir=A.lG2({type:T,selectors:[["","appNgDropFiles",""]],hostBindings:function(y,O){1&y&&A.NdJ("dragover",function(ne){return O.onDragEnter(ne)})("dragleave",function(ne){return O.onDragLeave(ne)})("drop",function(ne){return O.onDrop(ne)})},inputs:{archivos:"archivos"},outputs:{mouseSobre:"mouseSobre"}}),T})();const el=function(T){return{"text-green":T}},ic=function(T){return{width:T}};function xc(T,E){if(1&T&&(A.TgZ(0,"tr"),A.TgZ(1,"td",10),A._uU(2),A.qZA(),A.TgZ(3,"td"),A._uU(4),A.ALo(5,"number"),A.qZA(),A.TgZ(6,"td"),A.TgZ(7,"div",11),A._UZ(8,"div",12),A.qZA(),A.qZA(),A.qZA()),2&T){const y=E.$implicit;A.xp6(1),A.Q6J("ngClass",A.VKq(7,el,y.progreso>=100)),A.xp6(1),A.hij(" ",y.nombreArchivo," "),A.xp6(2),A.hij(" ",A.xi3(5,4,y.archivo.size/1024/1024,".2-2")," MB "),A.xp6(4),A.Q6J("ngStyle",A.VKq(9,ic,y.progreso+"%"))}}const Ms=function(T){return{"file-over":T}},Fu=Yc.forRoot([{path:"fotos",component:ku},{path:"carga",component:(()=>{class T{constructor(y){this._cargaImagenes=y,this.estaSobreElemento=!1,this.archivos=[]}ngOnInit(){}cargarImagenes(){this._cargaImagenes.cargarImagenesFirebase(this.archivos)}limpiarArchivos(){this.archivos=[]}}return T.\u0275fac=function(y){return new(y||T)(A.Y36(Jc))},T.\u0275cmp=A.Xpm({type:T,selectors:[["app-carga"]],decls:26,vars:6,consts:[[1,"row"],[1,"col-md-4"],["appNgDropFiles","",1,"well","drop-zone","file-over",3,"archivos","ngClass","mouseSobre"],["src","assets/drop-images.png"],[1,"col-md-8"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-danger",3,"click"],[1,"table"],[1,"thead-dark"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"progress"],["role","progressbar",1,"progress-bar",3,"ngStyle"]],template:function(y,O){1&y&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"h3"),A._uU(3,"Seleccione archivos"),A.qZA(),A.TgZ(4,"div",2),A.NdJ("mouseSobre",function(ne){return O.estaSobreElemento=ne}),A.TgZ(5,"h4"),A._uU(6,"Deje caer aqu\xed los archivos"),A.qZA(),A._UZ(7,"img",3),A.qZA(),A.qZA(),A.TgZ(8,"div",4),A.TgZ(9,"h4"),A._uU(10,"Cargar archivos"),A.qZA(),A.TgZ(11,"button",5),A.NdJ("click",function(){return O.cargarImagenes()}),A._uU(12,"Cargar a Firebase"),A.qZA(),A.TgZ(13,"button",6),A.NdJ("click",function(){return O.limpiarArchivos()}),A._uU(14,"Limpiar"),A.qZA(),A.TgZ(15,"table",7),A.TgZ(16,"thead",8),A.TgZ(17,"tr"),A.TgZ(18,"th"),A._uU(19,"Nombre archivo"),A.qZA(),A.TgZ(20,"th"),A._uU(21,"Tama\xf1o"),A.qZA(),A.TgZ(22,"th"),A._uU(23,"Progreso"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(24,"tbody"),A.YNc(25,xc,9,11,"tr",9),A.qZA(),A.qZA(),A.qZA(),A.qZA()),2&y&&(A.xp6(4),A.Q6J("archivos",O.archivos)("ngClass",A.VKq(4,Ms,O.estaSobreElemento)),A.xp6(7),A.Q6J("disabled",0===O.archivos.length),A.xp6(14),A.Q6J("ngForOf",O.archivos))},directives:[Cl,M.mk,M.sg,M.PC],pipes:[M.JJ],encapsulation:2}),T})()},{path:"**",pathMatch:"full",redirectTo:"fotos"}]),oc_firebase={apiKey:"AIzaSyBZbNu803R8uFE-TuGElfO0IgJlBTyifCQ",authDomain:"fir-fotos-ab53a.firebaseapp.com",databaseURL:"https://fir-fotos-ab53a-default-rtdb.firebaseio.com",projectId:"fir-fotos-ab53a",storageBucket:"fir-fotos-ab53a.appspot.com",messagingSenderId:"973356111985"};var sc=ge(2372),ac=ge(7642);let uc=(()=>{class T{}return T.\u0275fac=function(y){return new(y||T)},T.\u0275mod=A.oAB({type:T,bootstrap:[Qa]}),T.\u0275inj=A.cJS({providers:[Jc],imports:[[Mt,Fu,sc.AngularFireModule.initializeApp(oc_firebase),Mu.AngularFirestoreModule,ac.AngularFireAuthModule]]}),T})();(0,A.G48)(),ht().bootstrapModule(uc).catch(T=>console.error(T))},7796:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{__extends:()=>A,__assign:()=>J,__rest:()=>mt,__decorate:()=>Le,__param:()=>st,__metadata:()=>tt,__awaiter:()=>ft,__generator:()=>oe,__createBinding:()=>z,__exportStar:()=>Ie,__values:()=>xe,__read:()=>we,__spread:()=>ke,__spreadArrays:()=>gt,__await:()=>Me,__asyncGenerator:()=>Pe,__asyncDelegator:()=>ut,__asyncValues:()=>ze,__makeTemplateObject:()=>rt,__importStar:()=>Ut,__importDefault:()=>Nt,__classPrivateFieldGet:()=>at,__classPrivateFieldSet:()=>Ot});var M=function(R,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,B){C.__proto__=B}||function(C,B){for(var K in B)B.hasOwnProperty(K)&&(C[K]=B[K])})(R,x)};function A(R,x){function C(){this.constructor=R}M(R,x),R.prototype=null===x?Object.create(x):(C.prototype=x.prototype,new C)}var J=function(){return(J=Object.assign||function(x){for(var C,B=1,K=arguments.length;B<K;B++)for(var k in C=arguments[B])Object.prototype.hasOwnProperty.call(C,k)&&(x[k]=C[k]);return x}).apply(this,arguments)};function mt(R,x){var C={};for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&x.indexOf(B)<0&&(C[B]=R[B]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(B=Object.getOwnPropertySymbols(R);K<B.length;K++)x.indexOf(B[K])<0&&Object.prototype.propertyIsEnumerable.call(R,B[K])&&(C[B[K]]=R[B[K]])}return C}function Le(R,x,C,B){var ae,K=arguments.length,k=K<3?x:null===B?B=Object.getOwnPropertyDescriptor(x,C):B;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(R,x,C,B);else for(var ue=R.length-1;ue>=0;ue--)(ae=R[ue])&&(k=(K<3?ae(k):K>3?ae(x,C,k):ae(x,C))||k);return K>3&&k&&Object.defineProperty(x,C,k),k}function st(R,x){return function(C,B){x(C,B,R)}}function tt(R,x){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(R,x)}function ft(R,x,C,B){return new(C||(C=Promise))(function(k,ae){function ue(ot){try{ve(B.next(ot))}catch(Vt){ae(Vt)}}function Gt(ot){try{ve(B.throw(ot))}catch(Vt){ae(Vt)}}function ve(ot){ot.done?k(ot.value):function(k){return k instanceof C?k:new C(function(ae){ae(k)})}(ot.value).then(ue,Gt)}ve((B=B.apply(R,x||[])).next())})}function oe(R,x){var B,K,k,ae,C={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return ae={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(ae[Symbol.iterator]=function(){return this}),ae;function ue(ve){return function(ot){return function(ve){if(B)throw new TypeError("Generator is already executing.");for(;C;)try{if(B=1,K&&(k=2&ve[0]?K.return:ve[0]?K.throw||((k=K.return)&&k.call(K),0):K.next)&&!(k=k.call(K,ve[1])).done)return k;switch(K=0,k&&(ve=[2&ve[0],k.value]),ve[0]){case 0:case 1:k=ve;break;case 4:return C.label++,{value:ve[1],done:!1};case 5:C.label++,K=ve[1],ve=[0];continue;case 7:ve=C.ops.pop(),C.trys.pop();continue;default:if(!(k=(k=C.trys).length>0&&k[k.length-1])&&(6===ve[0]||2===ve[0])){C=0;continue}if(3===ve[0]&&(!k||ve[1]>k[0]&&ve[1]<k[3])){C.label=ve[1];break}if(6===ve[0]&&C.label<k[1]){C.label=k[1],k=ve;break}if(k&&C.label<k[2]){C.label=k[2],C.ops.push(ve);break}k[2]&&C.ops.pop(),C.trys.pop();continue}ve=x.call(R,C)}catch(ot){ve=[6,ot],K=0}finally{B=k=0}if(5&ve[0])throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}([ve,ot])}}}function z(R,x,C,B){void 0===B&&(B=C),R[B]=x[C]}function Ie(R,x){for(var C in R)"default"!==C&&!x.hasOwnProperty(C)&&(x[C]=R[C])}function xe(R){var x="function"==typeof Symbol&&Symbol.iterator,C=x&&R[x],B=0;if(C)return C.call(R);if(R&&"number"==typeof R.length)return{next:function(){return R&&B>=R.length&&(R=void 0),{value:R&&R[B++],done:!R}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(R,x){var C="function"==typeof Symbol&&R[Symbol.iterator];if(!C)return R;var K,ae,B=C.call(R),k=[];try{for(;(void 0===x||x-- >0)&&!(K=B.next()).done;)k.push(K.value)}catch(ue){ae={error:ue}}finally{try{K&&!K.done&&(C=B.return)&&C.call(B)}finally{if(ae)throw ae.error}}return k}function ke(){for(var R=[],x=0;x<arguments.length;x++)R=R.concat(we(arguments[x]));return R}function gt(){for(var R=0,x=0,C=arguments.length;x<C;x++)R+=arguments[x].length;var B=Array(R),K=0;for(x=0;x<C;x++)for(var k=arguments[x],ae=0,ue=k.length;ae<ue;ae++,K++)B[K]=k[ae];return B}function Me(R){return this instanceof Me?(this.v=R,this):new Me(R)}function Pe(R,x,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K,B=C.apply(R,x||[]),k=[];return K={},ae("next"),ae("throw"),ae("return"),K[Symbol.asyncIterator]=function(){return this},K;function ae(Ze){B[Ze]&&(K[Ze]=function(et){return new Promise(function(vt,It){k.push([Ze,et,vt,It])>1||ue(Ze,et)})})}function ue(Ze,et){try{!function(Ze){Ze.value instanceof Me?Promise.resolve(Ze.value.v).then(ve,ot):Vt(k[0][2],Ze)}(B[Ze](et))}catch(vt){Vt(k[0][3],vt)}}function ve(Ze){ue("next",Ze)}function ot(Ze){ue("throw",Ze)}function Vt(Ze,et){Ze(et),k.shift(),k.length&&ue(k[0][0],k[0][1])}}function ut(R){var x,C;return x={},B("next"),B("throw",function(K){throw K}),B("return"),x[Symbol.iterator]=function(){return this},x;function B(K,k){x[K]=R[K]?function(ae){return(C=!C)?{value:Me(R[K](ae)),done:"return"===K}:k?k(ae):ae}:k}}function ze(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,x=R[Symbol.asyncIterator];return x?x.call(R):(R=xe(R),C={},B("next"),B("throw"),B("return"),C[Symbol.asyncIterator]=function(){return this},C);function B(k){C[k]=R[k]&&function(ae){return new Promise(function(ue,Gt){!function(k,ae,ue,Gt){Promise.resolve(Gt).then(function(ve){k({value:ve,done:ue})},ae)}(ue,Gt,(ae=R[k](ae)).done,ae.value)})}}}function rt(R,x){return Object.defineProperty?Object.defineProperty(R,"raw",{value:x}):R.raw=x,R}function Ut(R){if(R&&R.__esModule)return R;var x={};if(null!=R)for(var C in R)Object.hasOwnProperty.call(R,C)&&(x[C]=R[C]);return x.default=R,x}function Nt(R){return R&&R.__esModule?R:{default:R}}function at(R,x){if(!x.has(R))throw new TypeError("attempted to get private field on non-instance");return x.get(R)}function Ot(R,x,C){if(!x.has(R))throw new TypeError("attempted to set private field on non-instance");return x.set(R,C),C}},5385:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{__extends:()=>A,__assign:()=>J,__rest:()=>mt,__decorate:()=>Le,__param:()=>st,__metadata:()=>tt,__awaiter:()=>ft,__generator:()=>oe,__createBinding:()=>z,__exportStar:()=>Ie,__values:()=>xe,__read:()=>we,__spread:()=>ke,__spreadArrays:()=>gt,__await:()=>Me,__asyncGenerator:()=>Pe,__asyncDelegator:()=>ut,__asyncValues:()=>ze,__makeTemplateObject:()=>rt,__importStar:()=>Ut,__importDefault:()=>Nt,__classPrivateFieldGet:()=>at,__classPrivateFieldSet:()=>Ot});var M=function(R,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,B){C.__proto__=B}||function(C,B){for(var K in B)B.hasOwnProperty(K)&&(C[K]=B[K])})(R,x)};function A(R,x){function C(){this.constructor=R}M(R,x),R.prototype=null===x?Object.create(x):(C.prototype=x.prototype,new C)}var J=function(){return(J=Object.assign||function(x){for(var C,B=1,K=arguments.length;B<K;B++)for(var k in C=arguments[B])Object.prototype.hasOwnProperty.call(C,k)&&(x[k]=C[k]);return x}).apply(this,arguments)};function mt(R,x){var C={};for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&x.indexOf(B)<0&&(C[B]=R[B]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(B=Object.getOwnPropertySymbols(R);K<B.length;K++)x.indexOf(B[K])<0&&Object.prototype.propertyIsEnumerable.call(R,B[K])&&(C[B[K]]=R[B[K]])}return C}function Le(R,x,C,B){var ae,K=arguments.length,k=K<3?x:null===B?B=Object.getOwnPropertyDescriptor(x,C):B;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(R,x,C,B);else for(var ue=R.length-1;ue>=0;ue--)(ae=R[ue])&&(k=(K<3?ae(k):K>3?ae(x,C,k):ae(x,C))||k);return K>3&&k&&Object.defineProperty(x,C,k),k}function st(R,x){return function(C,B){x(C,B,R)}}function tt(R,x){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(R,x)}function ft(R,x,C,B){return new(C||(C=Promise))(function(k,ae){function ue(ot){try{ve(B.next(ot))}catch(Vt){ae(Vt)}}function Gt(ot){try{ve(B.throw(ot))}catch(Vt){ae(Vt)}}function ve(ot){ot.done?k(ot.value):function(k){return k instanceof C?k:new C(function(ae){ae(k)})}(ot.value).then(ue,Gt)}ve((B=B.apply(R,x||[])).next())})}function oe(R,x){var B,K,k,ae,C={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return ae={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(ae[Symbol.iterator]=function(){return this}),ae;function ue(ve){return function(ot){return function(ve){if(B)throw new TypeError("Generator is already executing.");for(;C;)try{if(B=1,K&&(k=2&ve[0]?K.return:ve[0]?K.throw||((k=K.return)&&k.call(K),0):K.next)&&!(k=k.call(K,ve[1])).done)return k;switch(K=0,k&&(ve=[2&ve[0],k.value]),ve[0]){case 0:case 1:k=ve;break;case 4:return C.label++,{value:ve[1],done:!1};case 5:C.label++,K=ve[1],ve=[0];continue;case 7:ve=C.ops.pop(),C.trys.pop();continue;default:if(!(k=(k=C.trys).length>0&&k[k.length-1])&&(6===ve[0]||2===ve[0])){C=0;continue}if(3===ve[0]&&(!k||ve[1]>k[0]&&ve[1]<k[3])){C.label=ve[1];break}if(6===ve[0]&&C.label<k[1]){C.label=k[1],k=ve;break}if(k&&C.label<k[2]){C.label=k[2],C.ops.push(ve);break}k[2]&&C.ops.pop(),C.trys.pop();continue}ve=x.call(R,C)}catch(ot){ve=[6,ot],K=0}finally{B=k=0}if(5&ve[0])throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}([ve,ot])}}}function z(R,x,C,B){void 0===B&&(B=C),R[B]=x[C]}function Ie(R,x){for(var C in R)"default"!==C&&!x.hasOwnProperty(C)&&(x[C]=R[C])}function xe(R){var x="function"==typeof Symbol&&Symbol.iterator,C=x&&R[x],B=0;if(C)return C.call(R);if(R&&"number"==typeof R.length)return{next:function(){return R&&B>=R.length&&(R=void 0),{value:R&&R[B++],done:!R}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(R,x){var C="function"==typeof Symbol&&R[Symbol.iterator];if(!C)return R;var K,ae,B=C.call(R),k=[];try{for(;(void 0===x||x-- >0)&&!(K=B.next()).done;)k.push(K.value)}catch(ue){ae={error:ue}}finally{try{K&&!K.done&&(C=B.return)&&C.call(B)}finally{if(ae)throw ae.error}}return k}function ke(){for(var R=[],x=0;x<arguments.length;x++)R=R.concat(we(arguments[x]));return R}function gt(){for(var R=0,x=0,C=arguments.length;x<C;x++)R+=arguments[x].length;var B=Array(R),K=0;for(x=0;x<C;x++)for(var k=arguments[x],ae=0,ue=k.length;ae<ue;ae++,K++)B[K]=k[ae];return B}function Me(R){return this instanceof Me?(this.v=R,this):new Me(R)}function Pe(R,x,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K,B=C.apply(R,x||[]),k=[];return K={},ae("next"),ae("throw"),ae("return"),K[Symbol.asyncIterator]=function(){return this},K;function ae(Ze){B[Ze]&&(K[Ze]=function(et){return new Promise(function(vt,It){k.push([Ze,et,vt,It])>1||ue(Ze,et)})})}function ue(Ze,et){try{!function(Ze){Ze.value instanceof Me?Promise.resolve(Ze.value.v).then(ve,ot):Vt(k[0][2],Ze)}(B[Ze](et))}catch(vt){Vt(k[0][3],vt)}}function ve(Ze){ue("next",Ze)}function ot(Ze){ue("throw",Ze)}function Vt(Ze,et){Ze(et),k.shift(),k.length&&ue(k[0][0],k[0][1])}}function ut(R){var x,C;return x={},B("next"),B("throw",function(K){throw K}),B("return"),x[Symbol.iterator]=function(){return this},x;function B(K,k){x[K]=R[K]?function(ae){return(C=!C)?{value:Me(R[K](ae)),done:"return"===K}:k?k(ae):ae}:k}}function ze(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,x=R[Symbol.asyncIterator];return x?x.call(R):(R=xe(R),C={},B("next"),B("throw"),B("return"),C[Symbol.asyncIterator]=function(){return this},C);function B(k){C[k]=R[k]&&function(ae){return new Promise(function(ue,Gt){!function(k,ae,ue,Gt){Promise.resolve(Gt).then(function(ve){k({value:ve,done:ue})},ae)}(ue,Gt,(ae=R[k](ae)).done,ae.value)})}}}function rt(R,x){return Object.defineProperty?Object.defineProperty(R,"raw",{value:x}):R.raw=x,R}function Ut(R){if(R&&R.__esModule)return R;var x={};if(null!=R)for(var C in R)Object.hasOwnProperty.call(R,C)&&(x[C]=R[C]);return x.default=R,x}function Nt(R){return R&&R.__esModule?R:{default:R}}function at(R,x){if(!x.has(R))throw new TypeError("attempted to get private field on non-instance");return x.get(R)}function Ot(R,x,C){if(!x.has(R))throw new TypeError("attempted to set private field on non-instance");return x.set(R,C),C}},209:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{__extends:()=>A,__assign:()=>J,__rest:()=>mt,__decorate:()=>Le,__param:()=>st,__metadata:()=>tt,__awaiter:()=>ft,__generator:()=>oe,__createBinding:()=>z,__exportStar:()=>Ie,__values:()=>xe,__read:()=>we,__spread:()=>ke,__spreadArrays:()=>gt,__await:()=>Me,__asyncGenerator:()=>Pe,__asyncDelegator:()=>ut,__asyncValues:()=>ze,__makeTemplateObject:()=>rt,__importStar:()=>Ut,__importDefault:()=>Nt,__classPrivateFieldGet:()=>at,__classPrivateFieldSet:()=>Ot});var M=function(R,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,B){C.__proto__=B}||function(C,B){for(var K in B)B.hasOwnProperty(K)&&(C[K]=B[K])})(R,x)};function A(R,x){function C(){this.constructor=R}M(R,x),R.prototype=null===x?Object.create(x):(C.prototype=x.prototype,new C)}var J=function(){return(J=Object.assign||function(x){for(var C,B=1,K=arguments.length;B<K;B++)for(var k in C=arguments[B])Object.prototype.hasOwnProperty.call(C,k)&&(x[k]=C[k]);return x}).apply(this,arguments)};function mt(R,x){var C={};for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&x.indexOf(B)<0&&(C[B]=R[B]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(B=Object.getOwnPropertySymbols(R);K<B.length;K++)x.indexOf(B[K])<0&&Object.prototype.propertyIsEnumerable.call(R,B[K])&&(C[B[K]]=R[B[K]])}return C}function Le(R,x,C,B){var ae,K=arguments.length,k=K<3?x:null===B?B=Object.getOwnPropertyDescriptor(x,C):B;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(R,x,C,B);else for(var ue=R.length-1;ue>=0;ue--)(ae=R[ue])&&(k=(K<3?ae(k):K>3?ae(x,C,k):ae(x,C))||k);return K>3&&k&&Object.defineProperty(x,C,k),k}function st(R,x){return function(C,B){x(C,B,R)}}function tt(R,x){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(R,x)}function ft(R,x,C,B){return new(C||(C=Promise))(function(k,ae){function ue(ot){try{ve(B.next(ot))}catch(Vt){ae(Vt)}}function Gt(ot){try{ve(B.throw(ot))}catch(Vt){ae(Vt)}}function ve(ot){ot.done?k(ot.value):function(k){return k instanceof C?k:new C(function(ae){ae(k)})}(ot.value).then(ue,Gt)}ve((B=B.apply(R,x||[])).next())})}function oe(R,x){var B,K,k,ae,C={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return ae={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(ae[Symbol.iterator]=function(){return this}),ae;function ue(ve){return function(ot){return function(ve){if(B)throw new TypeError("Generator is already executing.");for(;C;)try{if(B=1,K&&(k=2&ve[0]?K.return:ve[0]?K.throw||((k=K.return)&&k.call(K),0):K.next)&&!(k=k.call(K,ve[1])).done)return k;switch(K=0,k&&(ve=[2&ve[0],k.value]),ve[0]){case 0:case 1:k=ve;break;case 4:return C.label++,{value:ve[1],done:!1};case 5:C.label++,K=ve[1],ve=[0];continue;case 7:ve=C.ops.pop(),C.trys.pop();continue;default:if(!(k=(k=C.trys).length>0&&k[k.length-1])&&(6===ve[0]||2===ve[0])){C=0;continue}if(3===ve[0]&&(!k||ve[1]>k[0]&&ve[1]<k[3])){C.label=ve[1];break}if(6===ve[0]&&C.label<k[1]){C.label=k[1],k=ve;break}if(k&&C.label<k[2]){C.label=k[2],C.ops.push(ve);break}k[2]&&C.ops.pop(),C.trys.pop();continue}ve=x.call(R,C)}catch(ot){ve=[6,ot],K=0}finally{B=k=0}if(5&ve[0])throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}([ve,ot])}}}function z(R,x,C,B){void 0===B&&(B=C),R[B]=x[C]}function Ie(R,x){for(var C in R)"default"!==C&&!x.hasOwnProperty(C)&&(x[C]=R[C])}function xe(R){var x="function"==typeof Symbol&&Symbol.iterator,C=x&&R[x],B=0;if(C)return C.call(R);if(R&&"number"==typeof R.length)return{next:function(){return R&&B>=R.length&&(R=void 0),{value:R&&R[B++],done:!R}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(R,x){var C="function"==typeof Symbol&&R[Symbol.iterator];if(!C)return R;var K,ae,B=C.call(R),k=[];try{for(;(void 0===x||x-- >0)&&!(K=B.next()).done;)k.push(K.value)}catch(ue){ae={error:ue}}finally{try{K&&!K.done&&(C=B.return)&&C.call(B)}finally{if(ae)throw ae.error}}return k}function ke(){for(var R=[],x=0;x<arguments.length;x++)R=R.concat(we(arguments[x]));return R}function gt(){for(var R=0,x=0,C=arguments.length;x<C;x++)R+=arguments[x].length;var B=Array(R),K=0;for(x=0;x<C;x++)for(var k=arguments[x],ae=0,ue=k.length;ae<ue;ae++,K++)B[K]=k[ae];return B}function Me(R){return this instanceof Me?(this.v=R,this):new Me(R)}function Pe(R,x,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K,B=C.apply(R,x||[]),k=[];return K={},ae("next"),ae("throw"),ae("return"),K[Symbol.asyncIterator]=function(){return this},K;function ae(Ze){B[Ze]&&(K[Ze]=function(et){return new Promise(function(vt,It){k.push([Ze,et,vt,It])>1||ue(Ze,et)})})}function ue(Ze,et){try{!function(Ze){Ze.value instanceof Me?Promise.resolve(Ze.value.v).then(ve,ot):Vt(k[0][2],Ze)}(B[Ze](et))}catch(vt){Vt(k[0][3],vt)}}function ve(Ze){ue("next",Ze)}function ot(Ze){ue("throw",Ze)}function Vt(Ze,et){Ze(et),k.shift(),k.length&&ue(k[0][0],k[0][1])}}function ut(R){var x,C;return x={},B("next"),B("throw",function(K){throw K}),B("return"),x[Symbol.iterator]=function(){return this},x;function B(K,k){x[K]=R[K]?function(ae){return(C=!C)?{value:Me(R[K](ae)),done:"return"===K}:k?k(ae):ae}:k}}function ze(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,x=R[Symbol.asyncIterator];return x?x.call(R):(R=xe(R),C={},B("next"),B("throw"),B("return"),C[Symbol.asyncIterator]=function(){return this},C);function B(k){C[k]=R[k]&&function(ae){return new Promise(function(ue,Gt){!function(k,ae,ue,Gt){Promise.resolve(Gt).then(function(ve){k({value:ve,done:ue})},ae)}(ue,Gt,(ae=R[k](ae)).done,ae.value)})}}}function rt(R,x){return Object.defineProperty?Object.defineProperty(R,"raw",{value:x}):R.raw=x,R}function Ut(R){if(R&&R.__esModule)return R;var x={};if(null!=R)for(var C in R)Object.hasOwnProperty.call(R,C)&&(x[C]=R[C]);return x.default=R,x}function Nt(R){return R&&R.__esModule?R:{default:R}}function at(R,x){if(!x.has(R))throw new TypeError("attempted to get private field on non-instance");return x.get(R)}function Ot(R,x,C){if(!x.has(R))throw new TypeError("attempted to set private field on non-instance");return x.set(R,C),C}},5704:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{__extends:()=>A,__assign:()=>J,__rest:()=>mt,__decorate:()=>Le,__param:()=>st,__metadata:()=>tt,__awaiter:()=>ft,__generator:()=>oe,__createBinding:()=>z,__exportStar:()=>Ie,__values:()=>xe,__read:()=>we,__spread:()=>ke,__spreadArrays:()=>gt,__await:()=>Me,__asyncGenerator:()=>Pe,__asyncDelegator:()=>ut,__asyncValues:()=>ze,__makeTemplateObject:()=>rt,__importStar:()=>Ut,__importDefault:()=>Nt,__classPrivateFieldGet:()=>at,__classPrivateFieldSet:()=>Ot});var M=function(R,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,B){C.__proto__=B}||function(C,B){for(var K in B)B.hasOwnProperty(K)&&(C[K]=B[K])})(R,x)};function A(R,x){function C(){this.constructor=R}M(R,x),R.prototype=null===x?Object.create(x):(C.prototype=x.prototype,new C)}var J=function(){return(J=Object.assign||function(x){for(var C,B=1,K=arguments.length;B<K;B++)for(var k in C=arguments[B])Object.prototype.hasOwnProperty.call(C,k)&&(x[k]=C[k]);return x}).apply(this,arguments)};function mt(R,x){var C={};for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&x.indexOf(B)<0&&(C[B]=R[B]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(B=Object.getOwnPropertySymbols(R);K<B.length;K++)x.indexOf(B[K])<0&&Object.prototype.propertyIsEnumerable.call(R,B[K])&&(C[B[K]]=R[B[K]])}return C}function Le(R,x,C,B){var ae,K=arguments.length,k=K<3?x:null===B?B=Object.getOwnPropertyDescriptor(x,C):B;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(R,x,C,B);else for(var ue=R.length-1;ue>=0;ue--)(ae=R[ue])&&(k=(K<3?ae(k):K>3?ae(x,C,k):ae(x,C))||k);return K>3&&k&&Object.defineProperty(x,C,k),k}function st(R,x){return function(C,B){x(C,B,R)}}function tt(R,x){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(R,x)}function ft(R,x,C,B){return new(C||(C=Promise))(function(k,ae){function ue(ot){try{ve(B.next(ot))}catch(Vt){ae(Vt)}}function Gt(ot){try{ve(B.throw(ot))}catch(Vt){ae(Vt)}}function ve(ot){ot.done?k(ot.value):function(k){return k instanceof C?k:new C(function(ae){ae(k)})}(ot.value).then(ue,Gt)}ve((B=B.apply(R,x||[])).next())})}function oe(R,x){var B,K,k,ae,C={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return ae={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(ae[Symbol.iterator]=function(){return this}),ae;function ue(ve){return function(ot){return function(ve){if(B)throw new TypeError("Generator is already executing.");for(;C;)try{if(B=1,K&&(k=2&ve[0]?K.return:ve[0]?K.throw||((k=K.return)&&k.call(K),0):K.next)&&!(k=k.call(K,ve[1])).done)return k;switch(K=0,k&&(ve=[2&ve[0],k.value]),ve[0]){case 0:case 1:k=ve;break;case 4:return C.label++,{value:ve[1],done:!1};case 5:C.label++,K=ve[1],ve=[0];continue;case 7:ve=C.ops.pop(),C.trys.pop();continue;default:if(!(k=(k=C.trys).length>0&&k[k.length-1])&&(6===ve[0]||2===ve[0])){C=0;continue}if(3===ve[0]&&(!k||ve[1]>k[0]&&ve[1]<k[3])){C.label=ve[1];break}if(6===ve[0]&&C.label<k[1]){C.label=k[1],k=ve;break}if(k&&C.label<k[2]){C.label=k[2],C.ops.push(ve);break}k[2]&&C.ops.pop(),C.trys.pop();continue}ve=x.call(R,C)}catch(ot){ve=[6,ot],K=0}finally{B=k=0}if(5&ve[0])throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}([ve,ot])}}}function z(R,x,C,B){void 0===B&&(B=C),R[B]=x[C]}function Ie(R,x){for(var C in R)"default"!==C&&!x.hasOwnProperty(C)&&(x[C]=R[C])}function xe(R){var x="function"==typeof Symbol&&Symbol.iterator,C=x&&R[x],B=0;if(C)return C.call(R);if(R&&"number"==typeof R.length)return{next:function(){return R&&B>=R.length&&(R=void 0),{value:R&&R[B++],done:!R}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(R,x){var C="function"==typeof Symbol&&R[Symbol.iterator];if(!C)return R;var K,ae,B=C.call(R),k=[];try{for(;(void 0===x||x-- >0)&&!(K=B.next()).done;)k.push(K.value)}catch(ue){ae={error:ue}}finally{try{K&&!K.done&&(C=B.return)&&C.call(B)}finally{if(ae)throw ae.error}}return k}function ke(){for(var R=[],x=0;x<arguments.length;x++)R=R.concat(we(arguments[x]));return R}function gt(){for(var R=0,x=0,C=arguments.length;x<C;x++)R+=arguments[x].length;var B=Array(R),K=0;for(x=0;x<C;x++)for(var k=arguments[x],ae=0,ue=k.length;ae<ue;ae++,K++)B[K]=k[ae];return B}function Me(R){return this instanceof Me?(this.v=R,this):new Me(R)}function Pe(R,x,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K,B=C.apply(R,x||[]),k=[];return K={},ae("next"),ae("throw"),ae("return"),K[Symbol.asyncIterator]=function(){return this},K;function ae(Ze){B[Ze]&&(K[Ze]=function(et){return new Promise(function(vt,It){k.push([Ze,et,vt,It])>1||ue(Ze,et)})})}function ue(Ze,et){try{!function(Ze){Ze.value instanceof Me?Promise.resolve(Ze.value.v).then(ve,ot):Vt(k[0][2],Ze)}(B[Ze](et))}catch(vt){Vt(k[0][3],vt)}}function ve(Ze){ue("next",Ze)}function ot(Ze){ue("throw",Ze)}function Vt(Ze,et){Ze(et),k.shift(),k.length&&ue(k[0][0],k[0][1])}}function ut(R){var x,C;return x={},B("next"),B("throw",function(K){throw K}),B("return"),x[Symbol.iterator]=function(){return this},x;function B(K,k){x[K]=R[K]?function(ae){return(C=!C)?{value:Me(R[K](ae)),done:"return"===K}:k?k(ae):ae}:k}}function ze(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,x=R[Symbol.asyncIterator];return x?x.call(R):(R=xe(R),C={},B("next"),B("throw"),B("return"),C[Symbol.asyncIterator]=function(){return this},C);function B(k){C[k]=R[k]&&function(ae){return new Promise(function(ue,Gt){!function(k,ae,ue,Gt){Promise.resolve(Gt).then(function(ve){k({value:ve,done:ue})},ae)}(ue,Gt,(ae=R[k](ae)).done,ae.value)})}}}function rt(R,x){return Object.defineProperty?Object.defineProperty(R,"raw",{value:x}):R.raw=x,R}function Ut(R){if(R&&R.__esModule)return R;var x={};if(null!=R)for(var C in R)Object.hasOwnProperty.call(R,C)&&(x[C]=R[C]);return x.default=R,x}function Nt(R){return R&&R.__esModule?R:{default:R}}function at(R,x){if(!x.has(R))throw new TypeError("attempted to get private field on non-instance");return x.get(R)}function Ot(R,x,C){if(!x.has(R))throw new TypeError("attempted to set private field on non-instance");return x.set(R,C),C}},2483:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{__extends:()=>A,__assign:()=>J,__rest:()=>mt,__decorate:()=>Le,__param:()=>st,__metadata:()=>tt,__awaiter:()=>ft,__generator:()=>oe,__createBinding:()=>z,__exportStar:()=>Ie,__values:()=>xe,__read:()=>we,__spread:()=>ke,__spreadArrays:()=>gt,__await:()=>Me,__asyncGenerator:()=>Pe,__asyncDelegator:()=>ut,__asyncValues:()=>ze,__makeTemplateObject:()=>rt,__importStar:()=>Ut,__importDefault:()=>Nt,__classPrivateFieldGet:()=>at,__classPrivateFieldSet:()=>Ot});var M=function(R,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,B){C.__proto__=B}||function(C,B){for(var K in B)B.hasOwnProperty(K)&&(C[K]=B[K])})(R,x)};function A(R,x){function C(){this.constructor=R}M(R,x),R.prototype=null===x?Object.create(x):(C.prototype=x.prototype,new C)}var J=function(){return(J=Object.assign||function(x){for(var C,B=1,K=arguments.length;B<K;B++)for(var k in C=arguments[B])Object.prototype.hasOwnProperty.call(C,k)&&(x[k]=C[k]);return x}).apply(this,arguments)};function mt(R,x){var C={};for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&x.indexOf(B)<0&&(C[B]=R[B]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(B=Object.getOwnPropertySymbols(R);K<B.length;K++)x.indexOf(B[K])<0&&Object.prototype.propertyIsEnumerable.call(R,B[K])&&(C[B[K]]=R[B[K]])}return C}function Le(R,x,C,B){var ae,K=arguments.length,k=K<3?x:null===B?B=Object.getOwnPropertyDescriptor(x,C):B;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(R,x,C,B);else for(var ue=R.length-1;ue>=0;ue--)(ae=R[ue])&&(k=(K<3?ae(k):K>3?ae(x,C,k):ae(x,C))||k);return K>3&&k&&Object.defineProperty(x,C,k),k}function st(R,x){return function(C,B){x(C,B,R)}}function tt(R,x){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(R,x)}function ft(R,x,C,B){return new(C||(C=Promise))(function(k,ae){function ue(ot){try{ve(B.next(ot))}catch(Vt){ae(Vt)}}function Gt(ot){try{ve(B.throw(ot))}catch(Vt){ae(Vt)}}function ve(ot){ot.done?k(ot.value):function(k){return k instanceof C?k:new C(function(ae){ae(k)})}(ot.value).then(ue,Gt)}ve((B=B.apply(R,x||[])).next())})}function oe(R,x){var B,K,k,ae,C={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return ae={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(ae[Symbol.iterator]=function(){return this}),ae;function ue(ve){return function(ot){return function(ve){if(B)throw new TypeError("Generator is already executing.");for(;C;)try{if(B=1,K&&(k=2&ve[0]?K.return:ve[0]?K.throw||((k=K.return)&&k.call(K),0):K.next)&&!(k=k.call(K,ve[1])).done)return k;switch(K=0,k&&(ve=[2&ve[0],k.value]),ve[0]){case 0:case 1:k=ve;break;case 4:return C.label++,{value:ve[1],done:!1};case 5:C.label++,K=ve[1],ve=[0];continue;case 7:ve=C.ops.pop(),C.trys.pop();continue;default:if(!(k=(k=C.trys).length>0&&k[k.length-1])&&(6===ve[0]||2===ve[0])){C=0;continue}if(3===ve[0]&&(!k||ve[1]>k[0]&&ve[1]<k[3])){C.label=ve[1];break}if(6===ve[0]&&C.label<k[1]){C.label=k[1],k=ve;break}if(k&&C.label<k[2]){C.label=k[2],C.ops.push(ve);break}k[2]&&C.ops.pop(),C.trys.pop();continue}ve=x.call(R,C)}catch(ot){ve=[6,ot],K=0}finally{B=k=0}if(5&ve[0])throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}([ve,ot])}}}function z(R,x,C,B){void 0===B&&(B=C),R[B]=x[C]}function Ie(R,x){for(var C in R)"default"!==C&&!x.hasOwnProperty(C)&&(x[C]=R[C])}function xe(R){var x="function"==typeof Symbol&&Symbol.iterator,C=x&&R[x],B=0;if(C)return C.call(R);if(R&&"number"==typeof R.length)return{next:function(){return R&&B>=R.length&&(R=void 0),{value:R&&R[B++],done:!R}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(R,x){var C="function"==typeof Symbol&&R[Symbol.iterator];if(!C)return R;var K,ae,B=C.call(R),k=[];try{for(;(void 0===x||x-- >0)&&!(K=B.next()).done;)k.push(K.value)}catch(ue){ae={error:ue}}finally{try{K&&!K.done&&(C=B.return)&&C.call(B)}finally{if(ae)throw ae.error}}return k}function ke(){for(var R=[],x=0;x<arguments.length;x++)R=R.concat(we(arguments[x]));return R}function gt(){for(var R=0,x=0,C=arguments.length;x<C;x++)R+=arguments[x].length;var B=Array(R),K=0;for(x=0;x<C;x++)for(var k=arguments[x],ae=0,ue=k.length;ae<ue;ae++,K++)B[K]=k[ae];return B}function Me(R){return this instanceof Me?(this.v=R,this):new Me(R)}function Pe(R,x,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K,B=C.apply(R,x||[]),k=[];return K={},ae("next"),ae("throw"),ae("return"),K[Symbol.asyncIterator]=function(){return this},K;function ae(Ze){B[Ze]&&(K[Ze]=function(et){return new Promise(function(vt,It){k.push([Ze,et,vt,It])>1||ue(Ze,et)})})}function ue(Ze,et){try{!function(Ze){Ze.value instanceof Me?Promise.resolve(Ze.value.v).then(ve,ot):Vt(k[0][2],Ze)}(B[Ze](et))}catch(vt){Vt(k[0][3],vt)}}function ve(Ze){ue("next",Ze)}function ot(Ze){ue("throw",Ze)}function Vt(Ze,et){Ze(et),k.shift(),k.length&&ue(k[0][0],k[0][1])}}function ut(R){var x,C;return x={},B("next"),B("throw",function(K){throw K}),B("return"),x[Symbol.iterator]=function(){return this},x;function B(K,k){x[K]=R[K]?function(ae){return(C=!C)?{value:Me(R[K](ae)),done:"return"===K}:k?k(ae):ae}:k}}function ze(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,x=R[Symbol.asyncIterator];return x?x.call(R):(R=xe(R),C={},B("next"),B("throw"),B("return"),C[Symbol.asyncIterator]=function(){return this},C);function B(k){C[k]=R[k]&&function(ae){return new Promise(function(ue,Gt){!function(k,ae,ue,Gt){Promise.resolve(Gt).then(function(ve){k({value:ve,done:ue})},ae)}(ue,Gt,(ae=R[k](ae)).done,ae.value)})}}}function rt(R,x){return Object.defineProperty?Object.defineProperty(R,"raw",{value:x}):R.raw=x,R}function Ut(R){if(R&&R.__esModule)return R;var x={};if(null!=R)for(var C in R)Object.hasOwnProperty.call(R,C)&&(x[C]=R[C]);return x.default=R,x}function Nt(R){return R&&R.__esModule?R:{default:R}}function at(R,x){if(!x.has(R))throw new TypeError("attempted to get private field on non-instance");return x.get(R)}function Ot(R,x,C){if(!x.has(R))throw new TypeError("attempted to set private field on non-instance");return x.set(R,C),C}},9009:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{__extends:()=>A,__assign:()=>J,__rest:()=>mt,__decorate:()=>Le,__param:()=>st,__metadata:()=>tt,__awaiter:()=>ft,__generator:()=>oe,__createBinding:()=>z,__exportStar:()=>Ie,__values:()=>xe,__read:()=>we,__spread:()=>ke,__spreadArrays:()=>gt,__await:()=>Me,__asyncGenerator:()=>Pe,__asyncDelegator:()=>ut,__asyncValues:()=>ze,__makeTemplateObject:()=>rt,__importStar:()=>Ut,__importDefault:()=>Nt,__classPrivateFieldGet:()=>at,__classPrivateFieldSet:()=>Ot});var M=function(R,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,B){C.__proto__=B}||function(C,B){for(var K in B)B.hasOwnProperty(K)&&(C[K]=B[K])})(R,x)};function A(R,x){function C(){this.constructor=R}M(R,x),R.prototype=null===x?Object.create(x):(C.prototype=x.prototype,new C)}var J=function(){return(J=Object.assign||function(x){for(var C,B=1,K=arguments.length;B<K;B++)for(var k in C=arguments[B])Object.prototype.hasOwnProperty.call(C,k)&&(x[k]=C[k]);return x}).apply(this,arguments)};function mt(R,x){var C={};for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&x.indexOf(B)<0&&(C[B]=R[B]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(B=Object.getOwnPropertySymbols(R);K<B.length;K++)x.indexOf(B[K])<0&&Object.prototype.propertyIsEnumerable.call(R,B[K])&&(C[B[K]]=R[B[K]])}return C}function Le(R,x,C,B){var ae,K=arguments.length,k=K<3?x:null===B?B=Object.getOwnPropertyDescriptor(x,C):B;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(R,x,C,B);else for(var ue=R.length-1;ue>=0;ue--)(ae=R[ue])&&(k=(K<3?ae(k):K>3?ae(x,C,k):ae(x,C))||k);return K>3&&k&&Object.defineProperty(x,C,k),k}function st(R,x){return function(C,B){x(C,B,R)}}function tt(R,x){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(R,x)}function ft(R,x,C,B){return new(C||(C=Promise))(function(k,ae){function ue(ot){try{ve(B.next(ot))}catch(Vt){ae(Vt)}}function Gt(ot){try{ve(B.throw(ot))}catch(Vt){ae(Vt)}}function ve(ot){ot.done?k(ot.value):function(k){return k instanceof C?k:new C(function(ae){ae(k)})}(ot.value).then(ue,Gt)}ve((B=B.apply(R,x||[])).next())})}function oe(R,x){var B,K,k,ae,C={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return ae={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(ae[Symbol.iterator]=function(){return this}),ae;function ue(ve){return function(ot){return function(ve){if(B)throw new TypeError("Generator is already executing.");for(;C;)try{if(B=1,K&&(k=2&ve[0]?K.return:ve[0]?K.throw||((k=K.return)&&k.call(K),0):K.next)&&!(k=k.call(K,ve[1])).done)return k;switch(K=0,k&&(ve=[2&ve[0],k.value]),ve[0]){case 0:case 1:k=ve;break;case 4:return C.label++,{value:ve[1],done:!1};case 5:C.label++,K=ve[1],ve=[0];continue;case 7:ve=C.ops.pop(),C.trys.pop();continue;default:if(!(k=(k=C.trys).length>0&&k[k.length-1])&&(6===ve[0]||2===ve[0])){C=0;continue}if(3===ve[0]&&(!k||ve[1]>k[0]&&ve[1]<k[3])){C.label=ve[1];break}if(6===ve[0]&&C.label<k[1]){C.label=k[1],k=ve;break}if(k&&C.label<k[2]){C.label=k[2],C.ops.push(ve);break}k[2]&&C.ops.pop(),C.trys.pop();continue}ve=x.call(R,C)}catch(ot){ve=[6,ot],K=0}finally{B=k=0}if(5&ve[0])throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}([ve,ot])}}}function z(R,x,C,B){void 0===B&&(B=C),R[B]=x[C]}function Ie(R,x){for(var C in R)"default"!==C&&!x.hasOwnProperty(C)&&(x[C]=R[C])}function xe(R){var x="function"==typeof Symbol&&Symbol.iterator,C=x&&R[x],B=0;if(C)return C.call(R);if(R&&"number"==typeof R.length)return{next:function(){return R&&B>=R.length&&(R=void 0),{value:R&&R[B++],done:!R}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(R,x){var C="function"==typeof Symbol&&R[Symbol.iterator];if(!C)return R;var K,ae,B=C.call(R),k=[];try{for(;(void 0===x||x-- >0)&&!(K=B.next()).done;)k.push(K.value)}catch(ue){ae={error:ue}}finally{try{K&&!K.done&&(C=B.return)&&C.call(B)}finally{if(ae)throw ae.error}}return k}function ke(){for(var R=[],x=0;x<arguments.length;x++)R=R.concat(we(arguments[x]));return R}function gt(){for(var R=0,x=0,C=arguments.length;x<C;x++)R+=arguments[x].length;var B=Array(R),K=0;for(x=0;x<C;x++)for(var k=arguments[x],ae=0,ue=k.length;ae<ue;ae++,K++)B[K]=k[ae];return B}function Me(R){return this instanceof Me?(this.v=R,this):new Me(R)}function Pe(R,x,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K,B=C.apply(R,x||[]),k=[];return K={},ae("next"),ae("throw"),ae("return"),K[Symbol.asyncIterator]=function(){return this},K;function ae(Ze){B[Ze]&&(K[Ze]=function(et){return new Promise(function(vt,It){k.push([Ze,et,vt,It])>1||ue(Ze,et)})})}function ue(Ze,et){try{!function(Ze){Ze.value instanceof Me?Promise.resolve(Ze.value.v).then(ve,ot):Vt(k[0][2],Ze)}(B[Ze](et))}catch(vt){Vt(k[0][3],vt)}}function ve(Ze){ue("next",Ze)}function ot(Ze){ue("throw",Ze)}function Vt(Ze,et){Ze(et),k.shift(),k.length&&ue(k[0][0],k[0][1])}}function ut(R){var x,C;return x={},B("next"),B("throw",function(K){throw K}),B("return"),x[Symbol.iterator]=function(){return this},x;function B(K,k){x[K]=R[K]?function(ae){return(C=!C)?{value:Me(R[K](ae)),done:"return"===K}:k?k(ae):ae}:k}}function ze(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,x=R[Symbol.asyncIterator];return x?x.call(R):(R=xe(R),C={},B("next"),B("throw"),B("return"),C[Symbol.asyncIterator]=function(){return this},C);function B(k){C[k]=R[k]&&function(ae){return new Promise(function(ue,Gt){!function(k,ae,ue,Gt){Promise.resolve(Gt).then(function(ve){k({value:ve,done:ue})},ae)}(ue,Gt,(ae=R[k](ae)).done,ae.value)})}}}function rt(R,x){return Object.defineProperty?Object.defineProperty(R,"raw",{value:x}):R.raw=x,R}function Ut(R){if(R&&R.__esModule)return R;var x={};if(null!=R)for(var C in R)Object.hasOwnProperty.call(R,C)&&(x[C]=R[C]);return x.default=R,x}function Nt(R){return R&&R.__esModule?R:{default:R}}function at(R,x){if(!x.has(R))throw new TypeError("attempted to get private field on non-instance");return x.get(R)}function Ot(R,x,C){if(!x.has(R))throw new TypeError("attempted to set private field on non-instance");return x.set(R,C),C}},7698:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{__extends:()=>A,__assign:()=>J,__rest:()=>mt,__decorate:()=>Le,__param:()=>st,__metadata:()=>tt,__awaiter:()=>ft,__generator:()=>oe,__createBinding:()=>z,__exportStar:()=>Ie,__values:()=>xe,__read:()=>we,__spread:()=>ke,__spreadArrays:()=>gt,__await:()=>Me,__asyncGenerator:()=>Pe,__asyncDelegator:()=>ut,__asyncValues:()=>ze,__makeTemplateObject:()=>rt,__importStar:()=>Ut,__importDefault:()=>Nt,__classPrivateFieldGet:()=>at,__classPrivateFieldSet:()=>Ot});var M=function(R,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,B){C.__proto__=B}||function(C,B){for(var K in B)B.hasOwnProperty(K)&&(C[K]=B[K])})(R,x)};function A(R,x){function C(){this.constructor=R}M(R,x),R.prototype=null===x?Object.create(x):(C.prototype=x.prototype,new C)}var J=function(){return(J=Object.assign||function(x){for(var C,B=1,K=arguments.length;B<K;B++)for(var k in C=arguments[B])Object.prototype.hasOwnProperty.call(C,k)&&(x[k]=C[k]);return x}).apply(this,arguments)};function mt(R,x){var C={};for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&x.indexOf(B)<0&&(C[B]=R[B]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(B=Object.getOwnPropertySymbols(R);K<B.length;K++)x.indexOf(B[K])<0&&Object.prototype.propertyIsEnumerable.call(R,B[K])&&(C[B[K]]=R[B[K]])}return C}function Le(R,x,C,B){var ae,K=arguments.length,k=K<3?x:null===B?B=Object.getOwnPropertyDescriptor(x,C):B;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(R,x,C,B);else for(var ue=R.length-1;ue>=0;ue--)(ae=R[ue])&&(k=(K<3?ae(k):K>3?ae(x,C,k):ae(x,C))||k);return K>3&&k&&Object.defineProperty(x,C,k),k}function st(R,x){return function(C,B){x(C,B,R)}}function tt(R,x){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(R,x)}function ft(R,x,C,B){return new(C||(C=Promise))(function(k,ae){function ue(ot){try{ve(B.next(ot))}catch(Vt){ae(Vt)}}function Gt(ot){try{ve(B.throw(ot))}catch(Vt){ae(Vt)}}function ve(ot){ot.done?k(ot.value):function(k){return k instanceof C?k:new C(function(ae){ae(k)})}(ot.value).then(ue,Gt)}ve((B=B.apply(R,x||[])).next())})}function oe(R,x){var B,K,k,ae,C={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return ae={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(ae[Symbol.iterator]=function(){return this}),ae;function ue(ve){return function(ot){return function(ve){if(B)throw new TypeError("Generator is already executing.");for(;C;)try{if(B=1,K&&(k=2&ve[0]?K.return:ve[0]?K.throw||((k=K.return)&&k.call(K),0):K.next)&&!(k=k.call(K,ve[1])).done)return k;switch(K=0,k&&(ve=[2&ve[0],k.value]),ve[0]){case 0:case 1:k=ve;break;case 4:return C.label++,{value:ve[1],done:!1};case 5:C.label++,K=ve[1],ve=[0];continue;case 7:ve=C.ops.pop(),C.trys.pop();continue;default:if(!(k=(k=C.trys).length>0&&k[k.length-1])&&(6===ve[0]||2===ve[0])){C=0;continue}if(3===ve[0]&&(!k||ve[1]>k[0]&&ve[1]<k[3])){C.label=ve[1];break}if(6===ve[0]&&C.label<k[1]){C.label=k[1],k=ve;break}if(k&&C.label<k[2]){C.label=k[2],C.ops.push(ve);break}k[2]&&C.ops.pop(),C.trys.pop();continue}ve=x.call(R,C)}catch(ot){ve=[6,ot],K=0}finally{B=k=0}if(5&ve[0])throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}([ve,ot])}}}function z(R,x,C,B){void 0===B&&(B=C),R[B]=x[C]}function Ie(R,x){for(var C in R)"default"!==C&&!x.hasOwnProperty(C)&&(x[C]=R[C])}function xe(R){var x="function"==typeof Symbol&&Symbol.iterator,C=x&&R[x],B=0;if(C)return C.call(R);if(R&&"number"==typeof R.length)return{next:function(){return R&&B>=R.length&&(R=void 0),{value:R&&R[B++],done:!R}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(R,x){var C="function"==typeof Symbol&&R[Symbol.iterator];if(!C)return R;var K,ae,B=C.call(R),k=[];try{for(;(void 0===x||x-- >0)&&!(K=B.next()).done;)k.push(K.value)}catch(ue){ae={error:ue}}finally{try{K&&!K.done&&(C=B.return)&&C.call(B)}finally{if(ae)throw ae.error}}return k}function ke(){for(var R=[],x=0;x<arguments.length;x++)R=R.concat(we(arguments[x]));return R}function gt(){for(var R=0,x=0,C=arguments.length;x<C;x++)R+=arguments[x].length;var B=Array(R),K=0;for(x=0;x<C;x++)for(var k=arguments[x],ae=0,ue=k.length;ae<ue;ae++,K++)B[K]=k[ae];return B}function Me(R){return this instanceof Me?(this.v=R,this):new Me(R)}function Pe(R,x,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K,B=C.apply(R,x||[]),k=[];return K={},ae("next"),ae("throw"),ae("return"),K[Symbol.asyncIterator]=function(){return this},K;function ae(Ze){B[Ze]&&(K[Ze]=function(et){return new Promise(function(vt,It){k.push([Ze,et,vt,It])>1||ue(Ze,et)})})}function ue(Ze,et){try{!function(Ze){Ze.value instanceof Me?Promise.resolve(Ze.value.v).then(ve,ot):Vt(k[0][2],Ze)}(B[Ze](et))}catch(vt){Vt(k[0][3],vt)}}function ve(Ze){ue("next",Ze)}function ot(Ze){ue("throw",Ze)}function Vt(Ze,et){Ze(et),k.shift(),k.length&&ue(k[0][0],k[0][1])}}function ut(R){var x,C;return x={},B("next"),B("throw",function(K){throw K}),B("return"),x[Symbol.iterator]=function(){return this},x;function B(K,k){x[K]=R[K]?function(ae){return(C=!C)?{value:Me(R[K](ae)),done:"return"===K}:k?k(ae):ae}:k}}function ze(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,x=R[Symbol.asyncIterator];return x?x.call(R):(R=xe(R),C={},B("next"),B("throw"),B("return"),C[Symbol.asyncIterator]=function(){return this},C);function B(k){C[k]=R[k]&&function(ae){return new Promise(function(ue,Gt){!function(k,ae,ue,Gt){Promise.resolve(Gt).then(function(ve){k({value:ve,done:ue})},ae)}(ue,Gt,(ae=R[k](ae)).done,ae.value)})}}}function rt(R,x){return Object.defineProperty?Object.defineProperty(R,"raw",{value:x}):R.raw=x,R}function Ut(R){if(R&&R.__esModule)return R;var x={};if(null!=R)for(var C in R)Object.hasOwnProperty.call(R,C)&&(x[C]=R[C]);return x.default=R,x}function Nt(R){return R&&R.__esModule?R:{default:R}}function at(R,x){if(!x.has(R))throw new TypeError("attempted to get private field on non-instance");return x.get(R)}function Ot(R,x,C){if(!x.has(R))throw new TypeError("attempted to set private field on non-instance");return x.set(R,C),C}},5057:(On,We,ge)=>{"use strict";ge.r(We),ge.d(We,{__extends:()=>A,__assign:()=>J,__rest:()=>mt,__decorate:()=>Le,__param:()=>st,__metadata:()=>tt,__awaiter:()=>ft,__generator:()=>oe,__createBinding:()=>z,__exportStar:()=>Ie,__values:()=>xe,__read:()=>we,__spread:()=>ke,__spreadArrays:()=>gt,__await:()=>Me,__asyncGenerator:()=>Pe,__asyncDelegator:()=>ut,__asyncValues:()=>ze,__makeTemplateObject:()=>rt,__importStar:()=>Ut,__importDefault:()=>Nt,__classPrivateFieldGet:()=>at,__classPrivateFieldSet:()=>Ot});var M=function(R,x){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,B){C.__proto__=B}||function(C,B){for(var K in B)B.hasOwnProperty(K)&&(C[K]=B[K])})(R,x)};function A(R,x){function C(){this.constructor=R}M(R,x),R.prototype=null===x?Object.create(x):(C.prototype=x.prototype,new C)}var J=function(){return(J=Object.assign||function(x){for(var C,B=1,K=arguments.length;B<K;B++)for(var k in C=arguments[B])Object.prototype.hasOwnProperty.call(C,k)&&(x[k]=C[k]);return x}).apply(this,arguments)};function mt(R,x){var C={};for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&x.indexOf(B)<0&&(C[B]=R[B]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(B=Object.getOwnPropertySymbols(R);K<B.length;K++)x.indexOf(B[K])<0&&Object.prototype.propertyIsEnumerable.call(R,B[K])&&(C[B[K]]=R[B[K]])}return C}function Le(R,x,C,B){var ae,K=arguments.length,k=K<3?x:null===B?B=Object.getOwnPropertyDescriptor(x,C):B;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(R,x,C,B);else for(var ue=R.length-1;ue>=0;ue--)(ae=R[ue])&&(k=(K<3?ae(k):K>3?ae(x,C,k):ae(x,C))||k);return K>3&&k&&Object.defineProperty(x,C,k),k}function st(R,x){return function(C,B){x(C,B,R)}}function tt(R,x){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(R,x)}function ft(R,x,C,B){return new(C||(C=Promise))(function(k,ae){function ue(ot){try{ve(B.next(ot))}catch(Vt){ae(Vt)}}function Gt(ot){try{ve(B.throw(ot))}catch(Vt){ae(Vt)}}function ve(ot){ot.done?k(ot.value):function(k){return k instanceof C?k:new C(function(ae){ae(k)})}(ot.value).then(ue,Gt)}ve((B=B.apply(R,x||[])).next())})}function oe(R,x){var B,K,k,ae,C={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return ae={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(ae[Symbol.iterator]=function(){return this}),ae;function ue(ve){return function(ot){return function(ve){if(B)throw new TypeError("Generator is already executing.");for(;C;)try{if(B=1,K&&(k=2&ve[0]?K.return:ve[0]?K.throw||((k=K.return)&&k.call(K),0):K.next)&&!(k=k.call(K,ve[1])).done)return k;switch(K=0,k&&(ve=[2&ve[0],k.value]),ve[0]){case 0:case 1:k=ve;break;case 4:return C.label++,{value:ve[1],done:!1};case 5:C.label++,K=ve[1],ve=[0];continue;case 7:ve=C.ops.pop(),C.trys.pop();continue;default:if(!(k=(k=C.trys).length>0&&k[k.length-1])&&(6===ve[0]||2===ve[0])){C=0;continue}if(3===ve[0]&&(!k||ve[1]>k[0]&&ve[1]<k[3])){C.label=ve[1];break}if(6===ve[0]&&C.label<k[1]){C.label=k[1],k=ve;break}if(k&&C.label<k[2]){C.label=k[2],C.ops.push(ve);break}k[2]&&C.ops.pop(),C.trys.pop();continue}ve=x.call(R,C)}catch(ot){ve=[6,ot],K=0}finally{B=k=0}if(5&ve[0])throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}([ve,ot])}}}function z(R,x,C,B){void 0===B&&(B=C),R[B]=x[C]}function Ie(R,x){for(var C in R)"default"!==C&&!x.hasOwnProperty(C)&&(x[C]=R[C])}function xe(R){var x="function"==typeof Symbol&&Symbol.iterator,C=x&&R[x],B=0;if(C)return C.call(R);if(R&&"number"==typeof R.length)return{next:function(){return R&&B>=R.length&&(R=void 0),{value:R&&R[B++],done:!R}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(R,x){var C="function"==typeof Symbol&&R[Symbol.iterator];if(!C)return R;var K,ae,B=C.call(R),k=[];try{for(;(void 0===x||x-- >0)&&!(K=B.next()).done;)k.push(K.value)}catch(ue){ae={error:ue}}finally{try{K&&!K.done&&(C=B.return)&&C.call(B)}finally{if(ae)throw ae.error}}return k}function ke(){for(var R=[],x=0;x<arguments.length;x++)R=R.concat(we(arguments[x]));return R}function gt(){for(var R=0,x=0,C=arguments.length;x<C;x++)R+=arguments[x].length;var B=Array(R),K=0;for(x=0;x<C;x++)for(var k=arguments[x],ae=0,ue=k.length;ae<ue;ae++,K++)B[K]=k[ae];return B}function Me(R){return this instanceof Me?(this.v=R,this):new Me(R)}function Pe(R,x,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K,B=C.apply(R,x||[]),k=[];return K={},ae("next"),ae("throw"),ae("return"),K[Symbol.asyncIterator]=function(){return this},K;function ae(Ze){B[Ze]&&(K[Ze]=function(et){return new Promise(function(vt,It){k.push([Ze,et,vt,It])>1||ue(Ze,et)})})}function ue(Ze,et){try{!function(Ze){Ze.value instanceof Me?Promise.resolve(Ze.value.v).then(ve,ot):Vt(k[0][2],Ze)}(B[Ze](et))}catch(vt){Vt(k[0][3],vt)}}function ve(Ze){ue("next",Ze)}function ot(Ze){ue("throw",Ze)}function Vt(Ze,et){Ze(et),k.shift(),k.length&&ue(k[0][0],k[0][1])}}function ut(R){var x,C;return x={},B("next"),B("throw",function(K){throw K}),B("return"),x[Symbol.iterator]=function(){return this},x;function B(K,k){x[K]=R[K]?function(ae){return(C=!C)?{value:Me(R[K](ae)),done:"return"===K}:k?k(ae):ae}:k}}function ze(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,x=R[Symbol.asyncIterator];return x?x.call(R):(R=xe(R),C={},B("next"),B("throw"),B("return"),C[Symbol.asyncIterator]=function(){return this},C);function B(k){C[k]=R[k]&&function(ae){return new Promise(function(ue,Gt){!function(k,ae,ue,Gt){Promise.resolve(Gt).then(function(ve){k({value:ve,done:ue})},ae)}(ue,Gt,(ae=R[k](ae)).done,ae.value)})}}}function rt(R,x){return Object.defineProperty?Object.defineProperty(R,"raw",{value:x}):R.raw=x,R}function Ut(R){if(R&&R.__esModule)return R;var x={};if(null!=R)for(var C in R)Object.hasOwnProperty.call(R,C)&&(x[C]=R[C]);return x.default=R,x}function Nt(R){return R&&R.__esModule?R:{default:R}}function at(R,x){if(!x.has(R))throw new TypeError("attempted to get private field on non-instance");return x.get(R)}function Ot(R,x,C){if(!x.has(R))throw new TypeError("attempted to set private field on non-instance");return x.set(R,C),C}}},On=>{On(On.s=1651)}]);